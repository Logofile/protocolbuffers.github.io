<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.107.0"><link rel=canonical type=text/html href=/reference/><link rel=alternate type=application/rss+xml href=/reference/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Reference Guides | Protocol Buffers Documentation</title><meta name=description content="This section contains reference documentation for working with protocol buffer classes in C++, Java, Python, Go, C#, Objective-C, Ruby, PHP, and Dart, as well as some reference documentation for Protocol Buffers itself."><meta property="og:title" content="Reference Guides"><meta property="og:description" content="This section contains reference documentation for working with protocol buffer classes in C++, Java, Python, Go, C#, Objective-C, Ruby, PHP, and Dart, as well as some reference documentation for Protocol Buffers itself."><meta property="og:type" content="website"><meta property="og:url" content="/reference/"><meta property="og:site_name" content="Protocol Buffers Documentation"><meta itemprop=name content="Reference Guides"><meta itemprop=description content="This section contains reference documentation for working with protocol buffer classes in C++, Java, Python, Go, C#, Objective-C, Ruby, PHP, and Dart, as well as some reference documentation for Protocol Buffers itself."><meta name=twitter:card content="summary"><meta name=twitter:title content="Reference Guides"><meta name=twitter:description content="This section contains reference documentation for working with protocol buffer classes in C++, Java, Python, Go, C#, Objective-C, Ruby, PHP, and Dart, as well as some reference documentation for Protocol Buffers itself."><link rel=preload href=/scss/main.min.def2cdda5cfcd95d9660c969a68946395435ad5fc75402be473d9995c7e926b3.css as=style><link href=/scss/main.min.def2cdda5cfcd95d9660c969a68946395435ad5fc75402be473d9995c7e926b3.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5L8P8GRN4Y"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5L8P8GRN4Y")}</script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class=navbar-brand__name>Protocol Buffers Documentation</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"></ul></div><div class="navbar-nav d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/reference/>Return to the regular view of this page</a>.</p></div><h1 class=title>Reference Guides</h1><div class=lead>This section contains reference documentation for working with protocol buffer classes in C++, Java, Python, Go, C#, Objective-C, Ruby, PHP, and Dart, as well as some reference documentation for Protocol Buffers itself.</div><ul><li>1: <a href=#pg-801781e76f2f5e004724456c7003ac12>C++ Reference</a></li><ul><li>1.1: <a href=#pg-1db9d56a259517e8ea4b31eee946dac8>C++ Generated Code Guide</a></li><li>1.2: <a href=#pg-4fcd69b9f1f7e7e41854e902abbc3862>C++ Arena Allocation Guide</a></li><li>1.3: <a href=#pg-ae82dadca65574fba74a91f6c6679854>C++ API</a></li><li>1.4: <a href=#pg-d44cdb890b7500b566f4c26e160a2745></a></li><ul><li>1.4.1: <a href=#pg-ef0424ba8a99c277723aa8ef8a5eaf87></a></li><li>1.4.2: <a href=#pg-81d18c5d52fb17801e7368f63c918e1e></a></li><li>1.4.3: <a href=#pg-26a049ec78cdf9faa9d0124ee1e9b707></a></li><li>1.4.4: <a href=#pg-d48160e666da842d564441f09d5bf0b9></a></li><li>1.4.5: <a href=#pg-fc1fdb439bf0a93588981dd41a8e24de></a></li><li>1.4.6: <a href=#pg-4367d0efc632b1fd55136db9c84dd6b2></a></li><li>1.4.7: <a href=#pg-fc614df16a0ac906f461ab492ae4b08f></a></li><li>1.4.8: <a href=#pg-96c1caf9a8f53bb6bd977d07056ccfe1></a></li><li>1.4.9: <a href=#pg-7b92f6aa1c14f9adb2b9f0a754a8522a></a></li><li>1.4.10: <a href=#pg-fc93e9913230a52dedc38b9c1fb11779></a></li><li>1.4.11: <a href=#pg-d5de939c0d829d7021a045cfae179e3c></a></li><li>1.4.12: <a href=#pg-8b5974e7552037e2c26059115e5e903e></a></li><li>1.4.13: <a href=#pg-e7588ac3926285d135f682109f59182f></a></li><li>1.4.14: <a href=#pg-782ea9d1a5801653384fd344e904fdb8></a></li><li>1.4.15: <a href=#pg-379bdfdc376126485613cd7077cf9f43></a></li><li>1.4.16: <a href=#pg-ae699e060fc9b0aa12442e4903212b7f></a></li><li>1.4.17: <a href=#pg-4aeff5f3b1ae863d0766176598b96b50></a></li><li>1.4.18: <a href=#pg-b649e6469c663df30d7912d3bbed219e></a></li><li>1.4.19: <a href=#pg-f56a1456aa7cfc89f0e1f5bdc258bcd2></a></li><li>1.4.20: <a href=#pg-8229fb8294e9a918160a6eb878e57756></a></li><li>1.4.21: <a href=#pg-f72cee7c5910777dfbdcea00b19ecdc1></a></li><li>1.4.22: <a href=#pg-388e3d29524ba3818b5626624ceea189></a></li><li>1.4.23: <a href=#pg-17d20805519a35f3c76a00b63a065fe1></a></li><li>1.4.24: <a href=#pg-c31444273d872af195cbf97497e3e412></a></li><li>1.4.25: <a href=#pg-df8959eebc09aa3b372b8cdfe56897eb></a></li><li>1.4.26: <a href=#pg-1673a0a790ae38b5e01016d358094e56></a></li><li>1.4.27: <a href=#pg-c4dc741c7e3dd121fd7aebe62a502e25></a></li><li>1.4.28: <a href=#pg-07478474a8bdea3d717f36eb985397de></a></li><li>1.4.29: <a href=#pg-fee356b461213417cf8c308300925222></a></li><li>1.4.30: <a href=#pg-9bab2c05b01d0270c43ee55083b17606></a></li><li>1.4.31: <a href=#pg-2bac41c1c2eb7f36cbdfb1155e0fa788></a></li><li>1.4.32: <a href=#pg-603e70bd8b248862b76f5ad251795e84></a></li><li>1.4.33: <a href=#pg-713da57988bf3e81d689166d1bae3a3e></a></li><li>1.4.34: <a href=#pg-f0799e16da33ea1241019acde901e09f></a></li><li>1.4.35: <a href=#pg-78f81d98b6444e626ba0b333c523bbd5></a></li><li>1.4.36: <a href=#pg-d83cca053a0529949538cbc330d265d9></a></li><li>1.4.37: <a href=#pg-d8b22100fe3778b790c3ba19138ae034></a></li><li>1.4.38: <a href=#pg-01f28463413726cd6cf1ffbebb5cd5cd></a></li><li>1.4.39: <a href=#pg-11c857e6898a08c24a813e10b62de212></a></li><li>1.4.40: <a href=#pg-b555607545973cc10ab9e114d6b04d84></a></li><li>1.4.41: <a href=#pg-60c136bbee922dd28a5cbdc7f6440831></a></li><li>1.4.42: <a href=#pg-52bb433fb5f8ddede70a427f6de12f6f></a></li><li>1.4.43: <a href=#pg-0469327cf6144b16a716a37463bf0641></a></li><li>1.4.44: <a href=#pg-e4121da8698610d94470036a83d0f0a3></a></li></ul></ul><li>2: <a href=#pg-257658e602298bf8c1f54c43b6ce23f4>C# Reference</a></li><ul><li>2.1: <a href=#pg-7a9133a32842bee757990fd827b5c593>C# Generated Code Guide</a></li><li>2.2: <a href=#pg-f651149312c1749a238715390c4834e9>C# API</a></li></ul><li>3: <a href=#pg-0ed9f2faef052ba56730badb55cf352f>Dart Reference</a></li><ul><li>3.1: <a href=#pg-e6bfe6333c6007301c9f517aea826e86>Dart Generated Code Guide</a></li><li>3.2: <a href=#pg-a0939a1d7ee066dcccbd0b90ecc803a5>Dart API</a></li></ul><li>4: <a href=#pg-58efac6e9f71f7b1059f42b772bc0ed9>Go Reference</a></li><ul><li>4.1: <a href=#pg-6bcd6bf4ea08bfaf106c75c33f1776ba>Go Generated Code Guide</a></li><li>4.2: <a href=#pg-b308d39fa92ddbafc45777b9e304fffa>Go FAQ</a></li><li>4.3: <a href=#pg-639e5cf8cb099a7e10c83b371a06eedd>Go API</a></li></ul><li>5: <a href=#pg-28c7eaf38d058969936417f71239a7c9>Java Reference</a></li><ul><li>5.1: <a href=#pg-a5bf97db26af6372d3a2d88a7c8784cd>Java Generated Code Guide</a></li><li>5.2: <a href=#pg-1be9e7e798e12c55873d38f2de7d9e57>Java API</a></li><li>5.3: <a href=#pg-466dfd484aa91ce51d28c85d71d3c5e1></a></li></ul><li>6: <a href=#pg-457ffcab25cb426d544c8c16c1664360>Kotlin Reference</a></li><ul><li>6.1: <a href=#pg-7e110d38398f615e83ea116097ba8a9f>Kotlin Generated Code Guide</a></li><li>6.2: <a href=#pg-30a7dd609e38f9aaa46b6dcf4f65194c>Kotlin API</a></li><ul></ul></ul><li>7: <a href=#pg-a05834bb563b2f761de9f6cf06deb605>Objective-C Reference</a></li><ul><li>7.1: <a href=#pg-46c52b55d88f482c71581816e5603708>Objective-C Generated Code Guide</a></li></ul><li>8: <a href=#pg-1156093dbcd1013f75c0f61bde112ef9>PHP Reference</a></li><ul><li>8.1: <a href=#pg-163abb538cd7a7251d32693651de18dc>PHP Generated Code Guide</a></li></ul><li>9: <a href=#pg-705861be22bcb7cf448391d047869b3c>Python Reference</a></li><ul><li>9.1: <a href=#pg-91d39e69529213fd60e1904b57fb7cee>Python Generated Code Guide</a></li><li>9.2: <a href=#pg-dcbd664920bfa9546fe0aca6a2f9b7e0>Python API</a></li></ul><li>10: <a href=#pg-aaf97f2c1025775bad6bb11125832a10>Ruby Reference</a></li><ul><li>10.1: <a href=#pg-62c6350857401037054f0197c5dfe99f>Ruby Generated Code Guide</a></li></ul><li>11: <a href=#pg-1b6de288e18f35faabf2c314511ad471>Protocol Buffers Reference</a></li><ul><li>11.1: <a href=#pg-bd5cf9afb7032681b1013fa716294a84>Protocol Buffers Version 2 Language Specification</a></li><li>11.2: <a href=#pg-67ec6daa4d66ca77c5baea07fe45ad0a>Protocol Buffers Version 3 Language Specification</a></li><li>11.3: <a href=#pg-572aca8c8fca2c6bacb68792f40c6454>Text Format Language Specification</a></li><li>11.4: <a href=#pg-281d1fb28dfbb5675ee4516a455438d4>Protocol Buffers Well-Known Types</a></li></ul><li>12: <a href=#pg-a58d836551ff2c9e14168532f6699643>Other Languages</a></li></ul><div class=content><p>This section contains reference documentation for working with protocol buffer
classes in C++, Java, Python, Go, C#, Objective-C, Ruby, PHP, and Dart, as well
as some reference documentation for Protocol Buffers itself. The documentation
for each language includes (where available):</p><ul><li>A reference guide to the code generated by the protocol buffer compiler from
your <code>.proto</code> files.</li><li>Generated API documentation for the provided source code.</li></ul><p>Note that there are APIs for several more languages in the pipeline &ndash; for
details, see <a href=/reference/other>Other Languages</a>.</p><h3 id=c-reference>C++ Reference</h3><ul><li><a href=/reference/cpp/cpp-generated>C++ Generated Code Guide</a></li><li><a href=/reference/cpp/arenas>C++ Arena Allocation Guide</a></li><li><a href=/reference/cpp/cpp-static-reflection>C++ Static Reflection</a></li><li><a href=/reference/cpp/api-docs/>C++ API</a></li></ul><h3 id=c-reference-1>C# Reference</h3><ul><li><a href=/reference/csharp/csharp-generated>C# Generated Code Guide</a></li><li><a href=/reference/csharp/api-docs/>C# API</a></li></ul><h3 id=dart-reference>Dart Reference</h3><ul><li><a href=/reference/dart/dart-generated>Dart Generated Code Guide</a></li><li><a href=//pub.dartlang.org/documentation/protobuf>Dart API (Dartdoc)</a></li></ul><h3 id=go-reference>Go Reference</h3><ul><li><a href=/reference/go/go-generated>Go Generated Code Guide</a></li><li><a href=https://pkg.go.dev/google.golang.org/protobuf/proto>Go API (godoc)</a></li><li><a href=/reference/go/faq>Go FAQ</a></li></ul><h3 id=java-reference>Java Reference</h3><ul><li><a href=/reference/java/java-generated>Java Generated Code Guide</a></li><li><a href=/reference/java/api-docs/overview-summary.html>Java API (Javadoc)</a></li></ul><h3 id=kotlin-reference>Kotlin Reference</h3><ul><li><a href=/reference/kotlin/kotlin-generated>Kotlin Generated Code Guide</a></li><li><a href=/reference/kotlin/api-docs>Kotlin API</a></li></ul><h3 id=objective-c-reference>Objective-C Reference</h3><ul><li><a href=/reference/objective-c/objective-c-generated>Objective-C Generated Code Guide</a></li></ul><h3 id=php-reference>PHP Reference</h3><ul><li><a href=/reference/php/php-generated>PHP Generated Code Guide</a></li></ul><h3 id=python-reference>Python Reference</h3><ul><li><a href=/reference/python/python-generated>Python Generated Code Guide</a></li><li><a href=https://googleapis.dev/python/protobuf/latest/>Python API (Sphinx)</a></li></ul><h3 id=ruby-reference>Ruby Reference</h3><ul><li><a href=/reference/ruby/ruby-generated>Ruby Generated Code Guide</a></li></ul><h3 id=protocol-buffers-reference>Protocol Buffers Reference</h3><ul><li><a href=/reference/protobuf/proto2-spec>Protocol Buffers Version 2 Language Specification</a></li><li><a href=/reference/protobuf/proto3-spec>Protocol Buffers Version 3 Language Specification</a></li><li><a href=/reference/protobuf/textformat-spec>Text Format Language Specification</a></li></ul><h3 id=other>Other</h3><ul><li><a href=/reference/other>Other Languages</a></li></ul></div></div><div class=td-content style=page-break-before:always><h1 id=pg-801781e76f2f5e004724456c7003ac12>1 - C++ Reference</h1><div class=lead>This section contains reference documentation for working with protocol buffer classes in C++.</div><ul><li><p><a href=/reference/cpp/cpp-generated>C++ Generated Code Guide</a></p></li><li><p><a href=/reference/cpp/arenas>C++ Arena Allocation Guide</a></p></li><li><p><a href=/reference/cpp>C++ API</a></p></li></ul></div><div class=td-content><h1 id=pg-1db9d56a259517e8ea4b31eee946dac8>1.1 - C++ Generated Code Guide</h1><div class=lead>This topic describes exactly what C++ code the protocol buffer compiler generates for any given protocol definition.</div><p>This page describes exactly what C++ code the protocol buffer compiler generates
for any given protocol definition. Any differences between proto2 and proto3
generated code are highlighted - note that these differences are in the
generated code as described in this document, not the base message
classes/interfaces, which are the same in both versions. You should read the
<a href=/programming-guides/proto>proto2 language guide</a> and/or
<a href=/programming-guides/proto3>proto3 language guide</a> before reading this
document.</p><h2 id=invocation>Compiler Invocation</h2><p>The protocol buffer compiler produces C++ output when invoked with the
<code>--cpp_out=</code> command-line flag. The parameter to the <code>--cpp_out=</code> option is the
directory where you want the compiler to write your C++ output. The compiler
creates a header file and an implementation file for each <code>.proto</code> file input.
The names of the output files are computed by taking the name of the <code>.proto</code>
file and making two changes:</p><ul><li>The extension (<code>.proto</code>) is replaced with either <code>.pb.h</code> or <code>.pb.cc</code> for the
header or implementation file, respectively.</li><li>The proto path (specified with the <code>--proto_path=</code> or <code>-I</code> command-line
flag) is replaced with the output path (specified with the <code>--cpp_out=</code>
flag).</li></ul><p>So, for example, let&rsquo;s say you invoke the compiler as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --cpp_out<span style=color:#ce5c00;font-weight:700>=</span>build/gen src/foo.proto src/bar/baz.proto
</span></span></code></pre></div><p>The compiler will read the files <code>src/foo.proto</code> and <code>src/bar/baz.proto</code> and
produce four output files: <code>build/gen/foo.pb.h</code>, <code>build/gen/foo.pb.cc</code>,
<code>build/gen/bar/baz.pb.h</code>, <code>build/gen/bar/baz.pb.cc</code>. The compiler will
automatically create the directory <code>build/gen/bar</code> if necessary, but it will
<em>not</em> create <code>build</code> or <code>build/gen</code>; they must already exist.</p><h2 id=package>Packages</h2><p>If a <code>.proto</code> file contains a <code>package</code> declaration, the entire contents of the
file will be placed in a corresponding C++ namespace. For example, given the
<code>package</code> declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>All declarations in the file will reside in the <code>foo::bar</code> namespace.</p><h2 id=message>Messages</h2><p>Given a simple message declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates a class called <code>Foo</code>, which publicly
derives from <code>google::protobuf::Message</code>. The class is a concrete class; no
pure-virtual methods are left unimplemented. Methods that are virtual in
<code>Message</code> but not pure-virtual may or may not be overridden by <code>Foo</code>, depending
on the optimization mode. By default, <code>Foo</code> implements specialized versions of
all methods for maximum speed. However, if the <code>.proto</code> file contains the line:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>optimize_for</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>CODE_SIZE</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>then <code>Foo</code> will override only the minimum set of methods necessary to function
and rely on reflection-based implementations of the rest. This significantly
reduces the size of the generated code, but also reduces performance.
Alternatively, if the <code>.proto</code> file contains:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>optimize_for</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>LITE_RUNTIME</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>then <code>Foo</code> will include fast implementations of all methods, but will implement
the <code>google::protobuf::MessageLite</code> interface, which only contains a subset of
the methods of <code>Message</code>. In particular, it does not support descriptors or
reflection. However, in this mode, the generated code only needs to link against
<code>libprotobuf-lite.so</code> (<code>libprotobuf-lite.lib</code> on Windows) instead of
<code>libprotobuf.so</code> (<code>libprotobuf.lib</code>). The &ldquo;lite&rdquo; library is much smaller than
the full library, and is more appropriate for resource-constrained systems such
as mobile phones.</p><p>You should <em>not</em> create your own <code>Foo</code> subclasses. If you subclass this class
and override a virtual method, the override may be ignored, as many generated
method calls are de-virtualized to improve performance.</p><p>The <code>Message</code> interface defines methods that let you check, manipulate, read, or
write the entire message, including parsing from and serializing to binary
strings.</p><ul><li><code>bool ParseFromString(const string& data)</code>: Parse the message from the given
serialized binary string (also known as wire format).</li><li><code>bool SerializeToString(string* output) const</code>: Serialize the given message
to a binary string.</li><li><code>string DebugString()</code>: Return a string giving the <code>text_format</code>
representation of the proto (should only be used for debugging).</li></ul><p>In addition to these methods, the <code>Foo</code> class defines the following methods:</p><ul><li><code>Foo()</code>: Default constructor.</li><li><code>~Foo()</code>: Default destructor.</li><li><code>Foo(const Foo& other)</code>: Copy constructor.</li><li><code>Foo(Foo&& other)</code>: Move constructor.</li><li><code>Foo& operator=(const Foo& other)</code>: Assignment operator.</li><li><code>Foo& operator=(Foo&& other)</code>: Move-assignment operator.</li><li><code>void Swap(Foo* other)</code>: Swap content with another message.</li><li><code>const UnknownFieldSet& unknown_fields() const</code>: Returns the set of unknown
fields encountered while parsing this message.</li><li><code>UnknownFieldSet* mutable_unknown_fields()</code>: Returns a pointer to the
mutable set of unknown fields encountered while parsing this message.</li></ul><p>The class also defines the following static methods:</p><ul><li><code>static const Descriptor* descriptor()</code>: Returns the type&rsquo;s descriptor. This
contains information about the type, including what fields it has and what
their types are. This can be used with
<a href=/reference/cpp/api-docs/google.protobuf.message#Reflection>reflection</a>
to inspect fields programmatically.</li><li><code>static const Foo& default_instance()</code>: Returns a const singleton instance
of <code>Foo</code> which is identical to a newly-constructed instance of <code>Foo</code> (so all
singular fields are unset and all repeated fields are empty). Note that the
default instance of a message can be used as a factory by calling its
<code>New()</code> method.</li></ul><h3 id=nested-types>Nested Types</h3><p>A message can be declared inside another message. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, the compiler generates two classes: <code>Foo</code> and <code>Foo_Bar</code>. In
addition, the compiler generates a typedef inside <code>Foo</code> as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>Foo_Bar</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p>This means that you can use the nested type&rsquo;s class as if it was the nested
class <code>Foo::Bar</code>. However, note that C++ does not allow nested types to be
forward-declared. If you want to forward-declare <code>Bar</code> in another file and use
that declaration, you must identify it as <code>Foo_Bar</code>.</p><h2 id=fields>Fields</h2><p>In addition to the methods described in the previous section, the protocol
buffer compiler generates a set of accessor methods for each field defined
within the message in the <code>.proto</code> file. These methods are in
lower-case/snake-case, such as <code>has_foo()</code> and <code>clear_foo()</code>.</p><p>As well as accessor methods, the compiler generates an integer constant for each
field containing its field number. The constant name is the letter <code>k</code>, followed
by the field name converted to camel-case, followed by <code>FieldNumber</code>. For
example, given the field <code>optional int32 foo_bar = 5;</code>, the compiler will
generate the constant <code>static const int kFooBarFieldNumber = 5;</code>.</p><p>For field accessors returning a <code>const</code> reference, that reference may be
invalidated when the next modifying access is made to the message. This includes
calling any non-<code>const</code> accessor of any field, calling any non-<code>const</code> method
inherited from <code>Message</code> or modifying the message through other ways (for
example, by using the message as the argument of <code>Swap()</code>). Correspondingly, the
address of the returned reference is only guaranteed to be the same across
different invocations of the accessor if no modifying access was made to the
message in the meantime.</p><p>For field accessors returning a pointer, that pointer may be invalidated when
the next modifying or non-modifying access is made to the message. This
includes, regardless of constness, calling any accessor of any field, calling
any method inherited from <code>Message</code> or accessing the message through other ways
(for example, by copying the message using the copy constructor).
Correspondingly, the value of the returned pointer is never guaranteed to be the
same across two different invocations of the accessor.</p><h3 id=singular-numeric-fields-proto2>Singular Numeric Fields (proto2)</h3><p>For either of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns <code>true</code> if the field is set.</li><li><code>int32 foo() const</code>: Returns the current value of the field. If the field is
not set, returns the default value.</li><li><code>void set_foo(int32 value)</code>: Sets the value of the field. After calling
this, <code>has_foo()</code> will return <code>true</code> and <code>foo()</code> will return <code>value</code>.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>has_foo()</code> will return <code>false</code> and <code>foo()</code> will return the default value.</li></ul><p>For other numeric field types (including <code>bool</code>), <code>int32</code> is replaced with the
corresponding C++ type according to the
<a href=/programming-guides/proto3#scalar>scalar value types table</a>.</p><h3 id=singular-numeric-fields-proto3>Singular Numeric Fields (proto3)</h3><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int32 foo() const</code>: Returns the current value of the field. If the field is
not set, returns 0.</li><li><code>void set_foo(int32 value)</code>: Sets the value of the field. After calling
this, <code>foo()</code> will return <code>value</code>.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>foo()</code> will return 0.</li></ul><p>For other numeric field types (including <code>bool</code>), <code>int32</code> is replaced with the
corresponding C++ type according to the
<a href=/programming-guides/proto3#scalar>scalar value types table</a>.</p><h3 id=string>Singular String Fields (proto2)</h3><p>For any of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns <code>true</code> if the field is set.</li><li><code>const string& foo() const</code>: Returns the current value of the field. If the
field is not set, returns the default value.</li><li><code>void set_foo(const string& value)</code>: Sets the value of the field. After
calling this, <code>has_foo()</code> will return <code>true</code> and <code>foo()</code> will return a copy
of <code>value</code>.</li><li><code>void set_foo(string&& value)</code> (C++11 and beyond): Sets the value of the
field, moving from the passed string. After calling this, <code>has_foo()</code> will
return <code>true</code> and <code>foo()</code> will return a copy of <code>value</code>.</li><li><code>void set_foo(const char* value)</code>: Sets the value of the field using a
C-style null-terminated string. After calling this, <code>has_foo()</code> will return
<code>true</code> and <code>foo()</code> will return a copy of <code>value</code>.</li><li><code>void set_foo(const char* value, int size)</code>: Like above, but the string size
is given explicitly rather than determined by looking for a null-terminator
byte.</li><li><code>string* mutable_foo()</code>: Returns a pointer to the mutable <code>string</code> object
that stores the field&rsquo;s value. If the field was not set prior to the call,
then the returned string will be empty (<em>not</em> the default value). After
calling this, <code>has_foo()</code> will return <code>true</code> and <code>foo()</code> will return
whatever value is written into the given string.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>has_foo()</code> will return <code>false</code> and <code>foo()</code> will return the default value.</li><li><code>void set_allocated_foo(string* value)</code>: Sets the <code>string</code> object to the
field and frees the previous field value if it exists. If the <code>string</code>
pointer is not <code>NULL</code>, the message takes ownership of the allocated <code>string</code>
object and <code>has_foo()</code> will return <code>true</code>. The message is free to delete the
allocated <code>string</code> object at any time, so references to the object may be
invalidated. Otherwise, if the <code>value</code> is <code>NULL</code>, the behavior is the same
as calling <code>clear_foo()</code>.</li><li><code>string* release_foo()</code>: Releases the ownership of the field and returns the
pointer of the <code>string</code> object. After calling this, caller takes the
ownership of the allocated <code>string</code> object, <code>has_foo()</code> will return <code>false</code>,
and <code>foo()</code> will return the default value.</li></ul><h3 id=proto3_string>Singular String Fields (proto3)</h3><p>For any of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>const string& foo() const</code>: Returns the current value of the field. If the
field is not set, returns the empty string/empty bytes.</li><li><code>void set_foo(const string& value)</code>: Sets the value of the field. After
calling this, <code>foo()</code> will return a copy of <code>value</code>.</li><li><code>void set_foo(string&& value)</code> (C++11 and beyond): Sets the value of the
field, moving from the passed string. After calling this, <code>foo()</code> will
return a copy of <code>value</code>.</li><li><code>void set_foo(const char* value)</code>: Sets the value of the field using a
C-style null-terminated string. After calling this, <code>foo()</code> will return a
copy of <code>value</code>.</li><li><code>void set_foo(const char* value, int size)</code>: Like above, but the string size
is given explicitly rather than determined by looking for a null-terminator
byte.</li><li><code>string* mutable_foo()</code>: Returns a pointer to the mutable <code>string</code> object
that stores the field&rsquo;s value. If the field was not set prior to the call,
then the returned string will be empty. After calling this, <code>foo()</code> will
return whatever value is written into the given string.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>foo()</code> will return the empty string/empty bytes.</li><li><code>void set_allocated_foo(string* value)</code>: Sets the <code>string</code> object to the
field and frees the previous field value if it exists. If the <code>string</code>
pointer is not <code>NULL</code>, the message takes ownership of the allocated <code>string</code>
object. The message is free to delete the allocated <code>string</code> object at any
time, so references to the object may be invalidated. Otherwise, if the
<code>value</code> is <code>NULL</code>, the behavior is the same as calling <code>clear_foo()</code>.</li><li><code>string* release_foo()</code>: Releases the ownership of the field and returns the
pointer of the <code>string</code> object. After calling this, caller takes the
ownership of the allocated <code>string</code> object and <code>foo()</code> will return the empty
string/empty bytes.</li></ul><h3 id=enum_field>Singular Enum Fields (proto2)</h3><p>Given the enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For either of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns <code>true</code> if the field is set.</li><li><code>Bar foo() const</code>: Returns the current value of the field. If the field is
not set, returns the default value.</li><li><code>void set_foo(Bar value)</code>: Sets the value of the field. After calling this,
<code>has_foo()</code> will return <code>true</code> and <code>foo()</code> will return <code>value</code>. In debug
mode (i.e. NDEBUG is not defined), if <code>value</code> does not match any of the
values defined for <code>Bar</code>, this method will abort the process.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>has_foo()</code> will return <code>false</code> and <code>foo()</code> will return the default value.</li></ul><h3 id=singular-enum-fields-proto3>Singular Enum Fields (proto3)</h3><p>Given the enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For this field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>Bar foo() const</code>: Returns the current value of the field. If the field is
not set, returns the default value (0).</li><li><code>void set_foo(Bar value)</code>: Sets the value of the field. After calling this,
<code>foo()</code> will return <code>value</code>.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>foo()</code> will return the default value.</li></ul><h3 id=embeddedmessage>Singular Embedded Message Fields</h3><p>Given the message type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For any of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//proto2
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902;font-style:italic>//proto3
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns <code>true</code> if the field is set.</li><li><code>const Bar& foo() const</code>: Returns the current value of the field. If the
field is not set, returns a <code>Bar</code> with none of its fields set (possibly
<code>Bar::default_instance()</code>).</li><li><code>Bar* mutable_foo()</code>: Returns a pointer to the mutable <code>Bar</code> object that
stores the field&rsquo;s value. If the field was not set prior to the call, then
the returned <code>Bar</code> will have none of its fields set (i.e. it will be
identical to a newly-allocated <code>Bar</code>). After calling this, <code>has_foo()</code> will
return <code>true</code> and <code>foo()</code> will return a reference to the same instance of
<code>Bar</code>.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>has_foo()</code> will return <code>false</code> and <code>foo()</code> will return the default value.</li><li><code>void set_allocated_foo(Bar* bar)</code>: Sets the <code>Bar</code> object to the field and
frees the previous field value if it exists. If the <code>Bar</code> pointer is not
<code>NULL</code>, the message takes ownership of the allocated <code>Bar</code> object and
<code>has_foo()</code> will return <code>true</code>. Otherwise, if the <code>Bar</code> is <code>NULL</code>, the
behavior is the same as calling <code>clear_foo()</code>.</li><li><code>Bar* release_foo()</code>: Releases the ownership of the field and returns the
pointer of the <code>Bar</code> object. After calling this, caller takes the ownership
of the allocated <code>Bar</code> object, <code>has_foo()</code> will return <code>false</code>, and <code>foo()</code>
will return the default value.</li></ul><h3 id=repeatednumeric>Repeated Numeric Fields</h3><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int foo_size() const</code>: Returns the number of elements currently in the
field.</li><li><code>int32 foo(int index) const</code>: Returns the element at the given zero-based
index. Calling this method with index outside of [0, foo_size()) yields
undefined behavior.</li><li><code>void set_foo(int index, int32 value)</code>: Sets the value of the element at the
given zero-based index.</li><li><code>void add_foo(int32 value)</code>: Appends a new element to the end of the field
with the given value.</li><li><code>void clear_foo()</code>: Removes all elements from the field. After calling this,
<code>foo_size()</code> will return zero.</li><li><code>const RepeatedField&lt;int32>& foo() const</code>: Returns the underlying
<code>RepeatedField</code> that stores the field&rsquo;s elements. This container class
provides STL-like iterators and other methods.</li><li><code>RepeatedField&lt;int32>* mutable_foo()</code>: Returns a pointer to the underlying
mutable <code>RepeatedField</code> that stores the field&rsquo;s elements. This container
class provides STL-like iterators and other methods.</li></ul><p>For other numeric field types (including <code>bool</code>), <code>int32</code> is replaced with the
corresponding C++ type according to the
<a href=/programming-guides/proto#scalar>scalar value types table</a>.</p><h3 id=repeatedstring>Repeated String Fields</h3><p>For either of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int foo_size() const</code>: Returns the number of elements currently in the
field.</li><li><code>const string& foo(int index) const</code>: Returns the element at the given
zero-based index. Calling this method with index outside of [0, foo_size()-1]
yields undefined behavior.</li><li><code>void set_foo(int index, const string& value)</code>: Sets the value of the
element at the given zero-based index.</li><li><code>void set_foo(int index, const char* value)</code>: Sets the value of the element
at the given zero-based index using a C-style null-terminated string.</li><li><code>void set_foo(int index, const char* value, int size)</code>: Like above, but the
string size is given explicitly rather than determined by looking for a
null-terminator byte.</li><li><code>string* mutable_foo(int index)</code>: Returns a pointer to the mutable <code>string</code>
object that stores the value of the element at the given zero-based index.
Calling this method with index outside of [0, foo_size()) yields undefined
behavior.</li><li><code>void add_foo(const string& value)</code>: Appends a new element to the end of the
field with the given value.</li><li><code>void add_foo(const char* value)</code>: Appends a new element to the end of the
field using a C-style null-terminated string.</li><li><code>void add_foo(const char* value, int size)</code>: Like above, but the string size
is given explicitly rather than determined by looking for a null-terminator
byte.</li><li><code>string* add_foo()</code>: Adds a new empty string element to the end of the field
and returns a pointer to it.</li><li><code>void clear_foo()</code>: Removes all elements from the field. After calling this,
<code>foo_size()</code> will return zero.</li><li><code>const RepeatedPtrField&lt;string>& foo() const</code>: Returns the underlying
<code>RepeatedPtrField</code> that stores the field&rsquo;s elements. This container class
provides STL-like iterators and other methods.</li><li><code>RepeatedPtrField&lt;string>* mutable_foo()</code>: Returns a pointer to the
underlying mutable <code>RepeatedPtrField</code> that stores the field&rsquo;s elements. This
container class provides STL-like iterators and other methods.</li></ul><h3 id=repeated_enum>Repeated Enum Fields</h3><p>Given the enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int foo_size() const</code>: Returns the number of elements currently in the
field.</li><li><code>Bar foo(int index) const</code>: Returns the element at the given zero-based
index. Calling this method with index outside of [0, foo_size()) yields
undefined behavior.</li><li><code>void set_foo(int index, Bar value)</code>: Sets the value of the element at the
given zero-based index. In debug mode (i.e. NDEBUG is not defined), if
<code>value</code> does not match any of the values defined for <code>Bar</code>, this method will
abort the process.</li><li><code>void add_foo(Bar value)</code>: Appends a new element to the end of the field
with the given value. In debug mode (i.e. NDEBUG is not defined), if <code>value</code>
does not match any of the values defined for <code>Bar</code>, this method will abort
the process.</li><li><code>void clear_foo()</code>: Removes all elements from the field. After calling this,
<code>foo_size()</code> will return zero.</li><li><code>const RepeatedField&lt;int>& foo() const</code>: Returns the underlying
<code>RepeatedField</code> that stores the field&rsquo;s elements. This container class
provides STL-like iterators and other methods.</li><li><code>RepeatedField&lt;int>* mutable_foo()</code>: Returns a pointer to the underlying
mutable <code>RepeatedField</code> that stores the field&rsquo;s elements. This container
class provides STL-like iterators and other methods.</li></ul><h3 id=repeatedmessage>Repeated Embedded Message Fields</h3><p>Given the message type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For this field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int foo_size() const</code>: Returns the number of elements currently in the
field.</li><li><code>const Bar& foo(int index) const</code>: Returns the element at the given
zero-based index. Calling this method with index outside of [0, foo_size())
yields undefined behavior.</li><li><code>Bar* mutable_foo(int index)</code>: Returns a pointer to the mutable <code>Bar</code> object
that stores the value of the element at the given zero-based index. Calling
this method with index outside of [0, foo_size()) yields undefined behavior.</li><li><code>Bar* add_foo()</code>: Adds a new element to the end of the field and returns a
pointer to it. The returned <code>Bar</code> is mutable and will have none of its
fields set (i.e. it will be identical to a newly-allocated <code>Bar</code>).</li><li><code>void clear_foo()</code>: Removes all elements from the field. After calling this,
<code>foo_size()</code> will return zero.</li><li><code>const RepeatedPtrField&lt;Bar>& foo() const</code>: Returns the underlying
<code>RepeatedPtrField</code> that stores the field&rsquo;s elements. This container class
provides STL-like iterators and other methods.</li><li><code>RepeatedPtrField&lt;Bar>* mutable_foo()</code>: Returns a pointer to the underlying
mutable <code>RepeatedPtrField</code> that stores the field&rsquo;s elements. This container
class provides STL-like iterators and other methods.</li></ul><h3 id=oneof-numeric-fields>Oneof Numeric Fields</h3><p>For this <a href=#oneof>oneof</a> field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code> (proto2 only): Returns <code>true</code> if oneof case is
<code>kFoo</code>.</li><li><code>int32 foo() const</code>: Returns the current value of the field if oneof case is
<code>kFoo</code>. Otherwise, returns the default value.</li><li><code>void set_foo(int32 value)</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the value of this field and sets the oneof case to <code>kFoo</code>.</li><li><code>has_foo()</code> (proto2 only) will return true, <code>foo()</code> will return <code>value</code>,
and <code>example_name_case()</code> will return <code>kFoo</code>.</li></ul></li><li><code>void clear_foo()</code>:<ul><li>Nothing will be changed if oneof case is not <code>kFoo</code>.</li><li>If oneof case is <code>kFoo</code>, clears the value of the field and oneof case.
<code>has_foo()</code> (proto2 only) will return <code>false</code>, <code>foo()</code> will return the
default value and <code>example_name_case()</code> will return
<code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li></ul><p>For other numeric field types (including <code>bool</code>),<code>int32</code> is replaced with the
corresponding C++ type according to the
<a href=/programming-guides/proto3#scalar>scalar value types table</a>.</p><h3 id=oneof-string-fields>Oneof String Fields</h3><p>For any of these <a href=#oneof>oneof</a> field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#a40000>…
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#a40000>…</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns <code>true</code> if the oneof case is <code>kFoo</code>.</li><li><code>const string& foo() const</code>: Returns the current value of the field if the
oneof case is <code>kFoo</code>. Otherwise, returns the default value.</li><li><code>void set_foo(const string& value)</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the value of this field and sets the oneof case to <code>kFoo</code>.</li><li><code>has_foo()</code> will return <code>true</code>, <code>foo()</code> will return a copy of <code>value</code>
and <code>example_name_case()</code> will return <code>kFoo</code>.</li></ul></li><li><code>void set_foo(const char* value)</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the value of the field using a C-style null-terminated string and
set the oneof case to <code>kFoo</code>.</li><li><code>has_foo()</code> will return <code>true</code>, <code>foo()</code> will return a copy of <code>value</code>
and <code>example_name_case()</code> will return <code>kFoo</code>.</li></ul></li><li><code>void set_foo(const char* value, int size)</code>: Like above, but the string size
is given explicitly rather than determined by looking for a null-terminator
byte.</li><li><code>string* mutable_foo()</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the oneof case to <code>kFoo</code> and returns a pointer to the mutable
string object that stores the field&rsquo;s value. If the oneof case was not
<code>kFoo</code> prior to the call, then the returned string will be empty (not
the default value).</li><li><code>has_foo()</code> will return <code>true</code>, <code>foo()</code> will return whatever value is
written into the given string and <code>example_name_case()</code> will return
<code>kFoo</code>.</li></ul></li><li><code>void clear_foo()</code>:<ul><li>If the oneof case is not <code>kFoo</code>, nothing will be changed .</li><li>If the oneof case is <code>kFoo</code>, frees the field and clears the oneof case .
<code>has_foo()</code> will return <code>false</code>, <code>foo()</code> will return the default value,
and <code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li><li><code>void set_allocated_foo(string* value)</code>:<ul><li>Calls <code>clear_example_name()</code>.</li><li>If the string pointer is not <code>NULL</code>: Sets the string object to the field
and sets the oneof case to <code>kFoo</code>. The message takes ownership of the
allocated string object, <code>has_foo()</code> will return <code>true</code> and
<code>example_name_case()</code> will return <code>kFoo</code>.</li><li>If the string pointer is <code>NULL</code>, <code>has_foo()</code> will return <code>false</code> and
<code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li><li><code>string* release_foo()</code>:<ul><li>Returns <code>NULL</code> if oneof case is not <code>kFoo</code>.</li><li>Clears the oneof case, releases the ownership of the field and returns
the pointer of the string object. After calling this, caller takes the
ownership of the allocated string object, <code>has_foo()</code> will return false,
<code>foo()</code> will return the default value, and <code>example_name_case()</code> will
return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li></ul><h3 id=oneof-enum-fields>Oneof Enum Fields</h3><p>Given the enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For the <a href=#oneof>oneof</a> field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code> (proto2 only): Returns <code>true</code> if oneof case is
<code>kFoo</code>.</li><li><code>Bar foo() const</code>: Returns the current value of the field if oneof case is
<code>kFoo</code>. Otherwise, returns the default value.</li><li><code>void set_foo(Bar value)</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the value of this field and sets the oneof case to <code>kFoo</code>.</li><li><code>has_foo()</code> (proto2 only) will return <code>true</code>, <code>foo()</code> will return
<code>value</code> and <code>example_name_case()</code> will return <code>kFoo</code>.</li><li>In debug mode (i.e. NDEBUG is not defined), if <code>value</code> does not match
any of the values defined for <code>Bar</code>, this method will abort the process.</li></ul></li><li><code>void clear_foo()</code>:<ul><li>Nothing will be changed if the oneof case is not <code>kFoo</code>.</li><li>If the oneof case is <code>kFoo</code>, clears the value of the field and the oneof
case. <code>has_foo()</code> (proto2 only) will return <code>false</code>, <code>foo()</code> will return
the default value and <code>example_name_case()</code> will return
<code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li></ul><h3 id=oneof-embedded-message-fields>Oneof Embedded Message Fields</h3><p>Given the message type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For the <a href=#oneof>oneof</a> field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns true if oneof case is <code>kFoo</code>.</li><li><code>const Bar& foo() const</code>: Returns the current value of the field if oneof
case is <code>kFoo</code>. Otherwise, returns <code>Bar::default_instance()</code>.</li><li><code>Bar* mutable_foo()</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the oneof case to <code>kFoo</code> and returns a pointer to the mutable Bar
object that stores the field&rsquo;s value. If the oneof case was not <code>kFoo</code>
prior to the call, then the returned Bar will have none of its fields
set (i.e. it will be identical to a newly-allocated Bar).</li><li>After calling this, <code>has_foo()</code> will return <code>true</code>, <code>foo()</code> will return
a reference to the same instance of <code>Bar</code> and <code>example_name_case()</code> will
return <code>kFoo</code>.</li></ul></li><li><code>void clear_foo()</code>:<ul><li>Nothing will be changed if the oneof case is not <code>kFoo</code>.</li><li>If the oneof case equals <code>kFoo</code>, frees the field and clears the oneof
case. <code>has_foo()</code> will return <code>false</code>, <code>foo()</code> will return the default
value and <code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li><li><code>void set_allocated_foo(Bar* bar)</code>:<ul><li>Calls <code>clear_example_name()</code>.</li><li>If the <code>Bar</code> pointer is not <code>NULL</code>: Sets the <code>Bar</code> object to the field
and sets the oneof case to <code>kFoo</code>. The message takes ownership of the
allocated <code>Bar</code> object, has_foo() will return true and
<code>example_name_case()</code> will return <code>kFoo</code>.</li><li>If the pointer is <code>NULL</code>, <code>has_foo()</code> will return <code>false</code> and
<code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>. (The behavior
is like calling <code>clear_example_name()</code>)</li></ul></li><li><code>Bar* release_foo()</code>:<ul><li>Returns <code>NULL</code> if oneof case is not <code>kFoo</code>.</li><li>If the oneof case is <code>kFoo</code>, clears the oneof case, releases the
ownership of the field and returns the pointer of the <code>Bar</code> object.
After calling this, caller takes the ownership of the allocated <code>Bar</code>
object, <code>has_foo()</code> will return <code>false</code>, <code>foo()</code> will return the default
value and <code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li></ul><h3 id=map-fields>Map Fields</h3><p>For this map field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>weight</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>const google::protobuf::Map&lt;int32, int32>& weight();</code>: Returns an immutable
<code>Map</code>.</li><li><code>google::protobuf::Map&lt;int32, int32>* mutable_weight();</code>: Returns a mutable
<code>Map</code>.</li></ul><p>A <code>google::protobuf::Map</code> is a special container type used in protocol buffers
to store map fields. As you can see from its interface below, it uses a
commonly-used subset of <code>std::map</code> and <code>std::unordered_map</code> methods.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>template</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>typename</span> <span style=color:#000>Key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>typename</span> <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Map</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Member types
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>Key</span> <span style=color:#000>key_type</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>T</span> <span style=color:#000>mapped_type</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>MapPair</span><span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>Key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>T</span> <span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>value_type</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Iterators
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>iterator</span> <span style=color:#000>begin</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>begin</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>cbegin</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>end</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>end</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>cend</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Capacity
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>size</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>empty</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Element access
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#204a87;font-weight:700>operator</span><span style=color:#000;font-weight:700>[](</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>at</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>at</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Lookup
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>find</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>find</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Modifiers
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>pair</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>iterator</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>bool</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>insert</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>value_type</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>template</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>InputIt</span><span style=color:#ce5c00;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>insert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>InputIt</span> <span style=color:#000>first</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>InputIt</span> <span style=color:#000>last</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>size_type</span> <span style=color:#000>erase</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>Key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>erase</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>const_iterator</span> <span style=color:#000>pos</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>erase</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>const_iterator</span> <span style=color:#000>first</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>const_iterator</span> <span style=color:#000>last</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>clear</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Copy
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Map</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>other</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#204a87;font-weight:700>operator</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>other</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The easiest way to add data is to use normal map syntax, for example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>unique_ptr</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>ProtoName</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>my_enclosing_proto</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ProtoName</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>my_enclosing_proto</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>mutable_weight</span><span style=color:#000;font-weight:700>())[</span><span style=color:#000>my_key</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>my_value</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p><code>pair&lt;iterator, bool> insert(const value_type& value)</code> will implicitly cause a
deep copy of the <code>value_type</code> instance. The most efficient way to insert a new
value into a <code>google::protobuf::Map</code> is as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#204a87;font-weight:700>operator</span><span style=color:#000;font-weight:700>[](</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>new_key</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>new_mapped</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><h4 id=using-googleprotobufmap-with-standard-maps>Using <code>google::protobuf::Map</code> with standard maps</h4><p><code>google::protobuf::Map</code> supports the same iterator API as <code>std::map</code> and
<code>std::unordered_map</code>. If you don&rsquo;t want to use <code>google::protobuf::Map</code> directly,
you can convert a <code>google::protobuf::Map</code> to a standard map by doing the
following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>int32</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>standard_map</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>weight</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>begin</span><span style=color:#000;font-weight:700>(),</span>
</span></span><span style=display:flex><span>                                    <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>weight</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>end</span><span style=color:#000;font-weight:700>());</span>
</span></span></code></pre></div><p>Note that this will make a deep copy of the entire map.</p><p>You can also construct a <code>google::protobuf::Map</code> from a standard map as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>int32</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>weight</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>standard_map</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>begin</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>standard_map</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>end</span><span style=color:#000;font-weight:700>());</span>
</span></span></code></pre></div><h4 id=parsing-unknown-values>Parsing unknown values</h4><p>On the wire, a .proto map is equivalent to a map entry message for each
key/value pair, while the map itself is a repeated field of map entries. Like
ordinary message types, it&rsquo;s possible for a parsed map entry message to have
unknown fields: for example a field of type <code>int64</code> in a map defined as
<code>map&lt;int32, string></code>.</p><p>If there are unknown fields in the wire format of a map entry message, they will
be discarded.</p><p>If there is an unknown enum value in the wire format of a map entry message,
it&rsquo;s handled differently in proto2 and proto3. In proto2, the whole map entry
message is put into the unknown field set of the containing message. In proto3,
it is put into a map field as if it is a known enum value.</p><h2 id=any>Any</h2><p>Given an <a href=/programming-guides/proto3#any><code>Any</code></a> field like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#4e9a06>&#34;google/protobuf/any.proto&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>ErrorStatus</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#204a87;font-weight:700>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>google.protobuf.Any</span> <span style=color:#000>details</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In our generated code, the getter for the <code>details</code> field returns an instance of
<code>google::protobuf::Any</code>. This provides the following special methods to pack and
unpack the <code>Any</code>&rsquo;s values:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Any</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span> <span style=color:#204a87;font-weight:700>public</span><span style=color:#ce5c00;font-weight:700>:</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Packs the given message into this Any using the default type URL
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// prefix “type.googleapis.com”. Returns false if serializing the message failed.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>PackFrom</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Message</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Packs the given message into this Any using the given type URL
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// prefix. Returns false if serializing the message failed.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>PackFrom</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Message</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>type_url_prefix</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Unpacks this Any to a Message. Returns false if this Any
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// represents a different protobuf type or parsing fails.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>UnpackTo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Message</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Returns true if this Any represents the given protobuf type.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>template</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>typename</span> <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>Is</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=oneof>Oneof</h2><p>Given a oneof definition like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo_int</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo_string</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following C++ enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>ExampleNameCase</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>kFooInt</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>kFooString</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>EXAMPLE_NAME_NOT_SET</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>In addition, it will generate these methods:</p><ul><li><code>ExampleNameCase example_name_case() const</code>: Returns the enum indicating
which field is set. Returns <code>EXAMPLE_NAME_NOT_SET</code> if none of them is set.</li><li><code>void clear_example_name()</code>: Frees the object if the oneof field set uses a
pointer (Message or String), and sets the oneof case to
<code>EXAMPLE_NAME_NOT_SET</code>.</li></ul><h2 id=enum>Enumerations</h2><p>Given an enum definition like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_B</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_C</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1234</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate a C++ enum type called <code>Foo</code> with the
same set of values. In addition, the compiler will generate the following
functions:</p><ul><li><code>const EnumDescriptor* Foo_descriptor()</code>: Returns the type&rsquo;s descriptor,
which contains information about what values this enum type defines.</li><li><code>bool Foo_IsValid(int value)</code>: Returns <code>true</code> if the given numeric value
matches one of <code>Foo</code>&rsquo;s defined values. In the above example, it would return
<code>true</code> if the input were 0, 5, or 1234.</li><li><code>const string& Foo_Name(int value)</code>: Returns the name for given numeric
value. Returns an empty string if no such value exists. If multiple values
have this number, the first one defined is returned. In the above example,
<code>Foo_Name(5)</code> would return <code>"VALUE_B"</code>.</li><li><code>bool Foo_Parse(const string& name, Foo* value)</code>: If <code>name</code> is a valid value
name for this enum, assigns that value into <code>value</code> and returns true.
Otherwise returns false. In the above example, <code>Foo_Parse("VALUE_C", &some_foo)</code> would return true and set <code>some_foo</code> to 1234.</li><li><code>const Foo Foo_MIN</code>: the smallest valid value of the enum (VALUE_A in the
example).</li><li><code>const Foo Foo_MAX</code>: the largest valid value of the enum (VALUE_C in the
example).</li><li><code>const int Foo_ARRAYSIZE</code>: always defined as <code>Foo_MAX + 1</code>.</li></ul><p><strong>Be careful when casting integers to proto2 enums.</strong> If an integer is cast to a
proto2 enum value, the integer <em>must</em> be one of the valid values for that enum,
or the results may be undefined. If in doubt, use the generated <code>Foo_IsValid()</code>
function to test if the cast is valid. Setting an enum-typed field of a proto2
message to an invalid value may cause an assertion failure. If an invalid enum
value is read when parsing a proto2 message, it will be treated as an
<a href=/reference/cpp/api-docs/google.protobuf.unknown_field_set>unknown field</a>.
These semantics have been changed in proto3. It&rsquo;s safe to cast any integer to a
proto3 enum value as long as it fits into int32. Invalid enum values will also
be kept when parsing a proto3 message and returned by enum field accessors.</p><p><strong>Be careful when using proto3 enums in switch statements.</strong> Proto3 enums are
open enum types with possible values outside the range of specified symbols.
Unrecognized enum values will be kept when parsing a proto3 message and returned
by the enum field accessors. A switch statement on a proto3 enum without a
default case will not be able to catch all cases even if all the known fields
are listed. This could lead to unexpected behavior including data corruption and
runtime crashes. <strong>Always add a default case or explicitly call
<code>Foo_IsValid(int)</code> outside of the switch to handle unknown enum values.</strong></p><p>You can define an enum inside a message type. In this case, the protocol buffer
compiler generates code that makes it appear that the enum type itself was
declared nested inside the message&rsquo;s class. The <code>Foo_descriptor()</code> and
<code>Foo_IsValid()</code> functions are declared as static methods. In reality, the enum
type itself and its values are declared at the global scope with mangled names,
and are imported into the class&rsquo;s scope with a typedef and a series of constant
definitions. This is done only to get around problems with declaration ordering.
Do not depend on the mangled top-level names; pretend the enum really is nested
in the message class.</p><h2 id=extension>Extensions (proto2 only)</h2><p>Given a message with an extension range:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extensions</span> <span style=color:#0000cf;font-weight:700>100</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#0000cf;font-weight:700>199</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate some additional methods for <code>Foo</code>:
<code>HasExtension()</code>, <code>ExtensionSize()</code>, <code>ClearExtension()</code>, <code>GetExtension()</code>,
<code>SetExtension()</code>, <code>MutableExtension()</code>, <code>AddExtension()</code>,
<code>SetAllocatedExtension()</code> and <code>ReleaseExtension()</code>. Each of these methods takes,
as its first parameter, an extension identifier (described below), which
identifies an extension field. The remaining parameters and the return value are
exactly the same as those for the corresponding accessor methods that would be
generated for a normal (non-extension) field of the same type as the extension
identifier. (<code>GetExtension()</code> corresponds to the accessors with no special
prefix.)</p><p>Given an extension definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>123</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>repeated_bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>124</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For the singular extension field <code>bar</code>, the protocol buffer compiler generates
an &ldquo;extension identifier&rdquo; called <code>bar</code>, which you can use with <code>Foo</code>&rsquo;s extension
accessors to access this extension, like so:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HasExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HasExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ClearExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HasExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>));</span>
</span></span></code></pre></div><p>Similarly, for the repeated extension field <code>repeated_bar</code>, the compiler
generates an extension identifier called <code>repeated_bar</code>, which you can also use
with <code>Foo</code>&rsquo;s extension accessors:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>kSize</span><span style=color:#000;font-weight:700>;</span> <span style=color:#ce5c00;font-weight:700>++</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>repeated_bar</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ExtensionSize</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>repeated_bar</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>kSize</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>kSize</span><span style=color:#000;font-weight:700>;</span> <span style=color:#ce5c00;font-weight:700>++</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>repeated_bar</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>(The exact implementation of extension identifiers is complicated and involves
magical use of templates—however, you don&rsquo;t need to worry about how
extension identifiers work to use them.)</p><p>Extensions can be declared nested inside of another type. For example, a common
pattern is to do something like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Baz</span> <span style=color:#000>foo_ext</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>124</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, the extension identifier <code>foo_ext</code> is declared nested inside
<code>Baz</code>. It can be used as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>baz</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MutableExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>foo_ext</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>FillInMyBaz</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>baz</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h2 id=arena>Arena Allocation</h2><p>Arena allocation is a C++-only feature that helps you optimize your memory usage
and improve performance when working with protocol buffers. Enabling arena
allocation in your <code>.proto</code> adds additional code for working with arenas to your
C++ generated code. You can find out more about the arena allocation API in the
<a href=/reference/cpp/arenas>Arena Allocation Guide</a>.</p><h2 id=service>Services</h2><p>If the <code>.proto</code> file contains the following line:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>cc_generic_services</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>then the protocol buffer compiler will generate code based on the service
definitions found in the file as described in this section. However, the
generated code may be undesirable as it is not tied to any particular RPC
system, and thus requires more levels of indirection than code tailored to one
system. If you do NOT want this code to be generated, add this line to the file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>cc_generic_services</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>If neither of the above lines are given, the option defaults to <code>false</code>, as
generic services are deprecated. (Note that prior to 2.4.0, the option defaults
to <code>true</code>)</p><p>RPC systems based on <code>.proto</code>-language service definitions should provide
<a href=/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb>plugins</a>
to generate code appropriate for the system. These plugins are likely to require
that abstract services are disabled, so that they can generate their own classes
of the same names.</p><p>The remainder of this section describes what the protocol buffer compiler
generates when abstract services are enabled.</p><h3 id=interface>Interface</h3><p>Given a service definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>service</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FooRequest</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FooResponse</span><span style=color:#000;font-weight:700>);</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate a class <code>Foo</code> to represent this
service. <code>Foo</code> will have a virtual method for each method defined in the service
definition. In this case, the method <code>Bar</code> is defined as:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>virtual</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>RpcController</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>controller</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>FooRequest</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                 <span style=color:#000>FooResponse</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>response</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Closure</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>done</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>The parameters are equivalent to the parameters of <code>Service::CallMethod()</code>,
except that the <code>method</code> argument is implied and <code>request</code> and <code>response</code>
specify their exact type.</p><p>These generated methods are virtual, but not pure-virtual. The default
implementations simply call <code>controller->SetFailed()</code> with an error message
indicating that the method is unimplemented, then invoke the <code>done</code> callback.
When implementing your own service, you must subclass this generated service and
implement its methods as appropriate.</p><p><code>Foo</code> subclasses the <code>Service</code> interface. The protocol buffer compiler
automatically generates implementations of the methods of <code>Service</code> as follows:</p><ul><li><code>GetDescriptor</code>: Returns the service&rsquo;s <code>ServiceDescriptor</code>.</li><li><code>CallMethod</code>: Determines which method is being called based on the provided
method descriptor and calls it directly, down-casting the request and
response messages objects to the correct types.</li><li><code>GetRequestPrototype</code> and <code>GetResponsePrototype</code>: Returns the default
instance of the request or response of the correct type for the given
method.</li></ul><p>The following static method is also generated:</p><ul><li><code>static ServiceDescriptor descriptor()</code>: Returns the type&rsquo;s descriptor,
which contains information about what methods this service has and what
their input and output types are.</li></ul><h3 id=stub>Stub</h3><p>The protocol buffer compiler also generates a &ldquo;stub&rdquo; implementation of every
service interface, which is used by clients wishing to send requests to servers
implementing the service. For the <code>Foo</code> service (above), the stub implementation
<code>Foo_Stub</code> will be defined. As with nested message types, a typedef is used so
that <code>Foo_Stub</code> can also be referred to as <code>Foo::Stub</code>.</p><p><code>Foo_Stub</code> is a subclass of <code>Foo</code> which also implements the following methods:</p><ul><li><code>Foo_Stub(RpcChannel* channel)</code>: Constructs a new stub which sends requests
on the given channel.</li><li><code>Foo_Stub(RpcChannel* channel, ChannelOwnership ownership)</code>: Constructs a
new stub which sends requests on the given channel and possibly owns that
channel. If <code>ownership</code> is <code>Service::STUB_OWNS_CHANNEL</code> then when the stub
object is deleted it will delete the channel as well.</li><li><code>RpcChannel* channel()</code>: Returns this stub&rsquo;s channel, as passed to the
constructor.</li></ul><p>The stub additionally implements each of the service&rsquo;s methods as a wrapper
around the channel. Calling one of the methods simply calls
<code>channel->CallMethod()</code>.</p><p>The Protocol Buffer library does not include an RPC implementation. However, it
includes all of the tools you need to hook up a generated service class to any
arbitrary RPC implementation of your choice. You need only provide
implementations of <code>RpcChannel</code> and <code>RpcController</code>. See the documentation for
<code>service.h</code> for more information.</p><h2 id=plugins>Plugin Insertion Points</h2><p><a href=/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb>Code generator plugins</a>
which want to extend the output of the C++ code generator may insert code of the
following types using the given insertion point names. Each insertion point
appears in both the <code>.pb.cc</code> file and the <code>.pb.h</code> file unless otherwise noted.</p><ul><li><code>includes</code>: Include directives.</li><li><code>namespace_scope</code>: Declarations that belong in the file&rsquo;s package/namespace,
but not within any particular class. Appears after all other namespace-scope
code.</li><li><code>global_scope</code>: Declarations that belong at the top level, outside of the
file&rsquo;s namespace. Appears at the very end of the file.</li><li><code>class_scope:TYPENAME</code>: Member declarations that belong in a message class.
<code>TYPENAME</code> is the full proto name, e.g. <code>package.MessageType</code>. Appears after
all other public declarations in the class. This insertion point appears
only in the <code>.pb.h</code> file.</li></ul><p>Do not generate code which relies on private class members declared by the
standard code generator, as these implementation details may change in future
versions of Protocol Buffers.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-4fcd69b9f1f7e7e41854e902abbc3862>1.2 - C++ Arena Allocation Guide</h1><div class=lead>Arena allocation is a C++-only feature that helps you optimize your memory usage and improve performance when working with protocol buffers.</div><p>Arena allocation is a C++-only feature that helps you optimize your memory usage
and improve performance when working with protocol buffers. This page describes
exactly what C++ code the protocol buffer compiler generates in addition to the
code described in the
<a href=/reference/cpp/cpp-generated>C++ Generated Code Guide</a>
when arena allocation is enabled. It assumes that you are familiar with the
material in the <a href=/programming-guides/proto>language guide</a> and the
<a href=/reference/cpp/cpp-generated>C++ Generated Code Guide</a>.</p><h2 id=why>Why Use Arena Allocation?</h2><p>Memory allocation and deallocation constitutes a significant fraction of CPU
time spent in protocol buffers code. By default, protocol buffers performs heap
allocations for each message object, each of its subobjects, and several field
types, such as strings. These allocations occur in bulk when parsing a message
and when building new messages in memory, and associated deallocations happen
when messages and their subobject trees are freed.</p><p>Arena-based allocation has been designed to reduce this performance cost. With
arena allocation, new objects are allocated out of a large piece of preallocated
memory called the arena. Objects can all be freed at once by discarding the
entire arena, ideally without running destructors of any contained object
(though an arena can still maintain a &ldquo;destructor list&rdquo; when required). This
makes object allocation faster by reducing it to a simple pointer increment, and
makes deallocation almost free. Arena allocation also provides greater cache
efficiency: when messages are parsed, they are more likely to be allocated in
continuous memory, which makes traversing messages more likely to hit hot cache
lines.</p><p>To get these benefits you&rsquo;ll need to be aware of object lifetimes and find a
suitable granularity at which to use arenas (for servers, this is often
per-request). You can find out more about how to get the most from arena
allocation in <a href=#usage>Usage patterns and best practices</a>.</p><h2 id=gettingstarted>Getting Started</h2><p>The protocol buffer compiler generates code for arena allocation for the
messages in your file, as used in the following example.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#include</span> <span style=color:#8f5902;font-style:italic>&lt;google/protobuf/arena.h&gt;</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Arena</span> <span style=color:#000>arena</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>MyMessage</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Arena</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>CreateMessage</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>MyMessage</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>arena</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// ...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The message object created by <code>CreateMessage()</code> exists for as long as <code>arena</code>
exists, and you should not <code>delete</code> the returned message pointer. All of the
message object&rsquo;s internal storage (with a few exceptions<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>) and submessages
(for example, submessages in a repeated field within <code>MyMessage</code>) are allocated
on the arena as well.</p><p>For the most part, the rest of your code will be the same as if you weren&rsquo;t
using arena allocation.</p><p>We&rsquo;ll look at the arena API in more detail in the following sections, and you
can see a more extensive <a href=#example>example</a> at the end of the document.</p><h2 id=arenaclass>Arena Class API</h2><p>You create message objects on the arena using the
<a href=/reference/cpp/api-docs/google.protobuf.arena><code>google::protobuf::Arena</code></a>
class. This class implements the following public methods.</p><h3 id=constructors>Constructors</h3><ul><li><code>Arena()</code>: Creates a new arena with default parameters, tuned for average
use cases.</li><li><code>Arena(const ArenaOptions& options)</code>: Creates a new arena that uses the
specified allocation options. The options available in <code>ArenaOptions</code>
include the ability to use an initial block of user-provided memory for
allocations before resorting to the system allocator, control over the
initial and maximum request sizes for blocks of memory, and allowing you to
pass in custom block allocation and deallocation function pointers to build
freelists and others on top of the blocks.</li></ul><h3 id=allocation>Allocation Methods</h3><ul><li><p><code>template&lt;typename T> static T* CreateMessage(Arena* arena)</code>: Creates a new
protocol buffer object of message type <code>T</code> on the arena.</p><p>If <code>arena</code> is not NULL, the returned message object is allocated on the
arena, its internal storage and submessages (if any) will be allocated on
the same arena, and its lifetime is the same as that of the arena. The
object must not be deleted/freed manually: the arena owns the message object
for lifetime purposes.</p><p>If <code>arena</code> is NULL, the returned message object is allocated on the heap,
and the caller owns the object upon return.</p></li><li><p><code>template&lt;typename T> static T* Create(Arena* arena, args...)</code>: Similar to
<code>CreateMessage()</code> but lets you create an object of any class on the arena,
not just protocol buffer message types. For example, let&rsquo;s say you have this
C++ class:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>MyCustomClass</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>MyCustomClass</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>arg1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>arg2</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// ...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>};</span>
</span></span></code></pre></div><p>&mldr;you can create an instance of it on the arena like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>func</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// ...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Arena</span> <span style=color:#000>arena</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>MyCustomClass</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>c</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Arena</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Create</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>MyCustomClass</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>arena</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>constructor_arg1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>constructor_arg2</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// ...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div></li><li><p><code>template&lt;typename T> static T* CreateArray(Arena* arena, size_t n)</code>: If
<code>arena</code> is not NULL, this method allocates raw storage for <code>n</code> elements of
type <code>T</code> and returns it. The arena owns the returned memory and will free it
on its own destruction. If <code>arena</code> is NULL, this method allocates storage on
the heap and the caller receives ownership.</p><p><code>T</code> must have a trivial constructor: constructors are not called when the
array is created on the arena.</p></li></ul><h3 id=owned-list>&ldquo;Owned list&rdquo; Methods</h3><p>The following methods let you specify that particular objects or destructors are
&ldquo;owned&rdquo; by the arena, ensuring that they are deleted or called when the arena
itself is deleted</p><ul><li><code>template&lt;typename T> void Own(T* object)</code>: Adds <code>object</code> to the arena&rsquo;s
list of owned heap objects. When the arena is destroyed, it traverses this
list and frees each object using operator delete, i.e., the system memory
allocator. This method is useful in cases when an object&rsquo;s lifetime should
be tied to the arena but, for whatever reason, the object itself cannot be
or was not already allocated on the arena.</li><li><code>template&lt;typename T> void OwnDestructor(T* object)</code>: Adds the destructor of
<code>object</code> to the arena&rsquo;s list of destructors to call. When the arena is
destroyed, it traverses this list and calls each destructor in turn. It does
not attempt to free the underlying memory of object. This method is useful
when an object is embedded in arena-allocated storage but its destructor
will not otherwise be called, for example because its containing class is a
protobuf message whose destructor won&rsquo;t be called, or because it was
manually constructed in a block allocated by <code>AllocateArray()</code>.</li></ul><h3 id=other-methods>Other Methods</h3><ul><li><code>uint64 SpaceUsed() const</code>: Returns the total size of the arena, which is
the sum of the sizes of the underlying blocks. This method is thread-safe;
however, if there are concurrent allocations from multiple threads this
method&rsquo;s return value may not include the sizes of those new blocks.</li><li><code>uint64 Reset()</code>: Destroys the arena&rsquo;s storage, first calling all registered
destructors and freeing all registered heap objects and then discarding all
arena blocks. This teardown procedure is equivalent to that which occurs
when the arena&rsquo;s destructor runs, except the arena is reusable for new
allocations after this method returns. Returns the total size used by the
arena: this information is useful for tuning performance.</li><li><code>template&lt;typename T> Arena* GetArena()</code>: Returns a pointer to this arena.
Not directly very useful but allows <code>Arena</code> to be used in template
instantiations that expect <code>GetArena()</code> methods to be present.</li></ul><h3 id=thread-safety>Thread Safety</h3><p><code>google::protobuf::Arena</code>&rsquo;s allocation methods are thread-safe, and the
underlying implementation goes to some length to make multithreaded allocation
fast. The <code>Reset()</code> method is <em>not</em> thread-safe: the thread performing the arena
reset must synchronize with all threads performing allocations or using objects
allocated from that arena first.</p><h2 id=messageclass>Generated Message Class</h2><p>The following message class members are changed or added when you enable arena
allocation.</p><h3 id=message-class-methods>Message Class Methods</h3><ul><li><code>Message(Message&& other)</code>: If the source message is not on arena, the move
constructor efficiently <em>moves</em> all fields from one message to another
without making copies or heap allocations (the time complexity of this
operation is <code>O(number-of-declared-fields)</code>). However, if the source message
is on arena, it performs a <em>deep copy</em> of the underlying data. In both cases
the source message is left in a valid but unspecified state.</li><li><code>Message& operator=(Message&& other)</code>: If both messages are not on arena or
are on the <em>same</em> arena, the move-assignment operator efficiently <em>moves</em>
all fields from one message to another without making copies or heap
allocations (the time complexity of this operation is
<code>O(number-of-declared-fields)</code>). However, if only one message is on arena,
or the messages are on different arenas, it performs a <em>deep copy</em> of the
underlying data. In both cases the source message is left in a valid but
unspecified state.</li><li><code>void Swap(Message* other)</code>: If both messages to be swapped are not on
arenas or are on the <em>same</em> arena,
<a href=/reference/cpp/cpp-generated#message><code>Swap()</code></a> behaves
as it does without having arena allocation enabled: it efficiently swaps the
message objects&rsquo; contents, usually via cheap pointer swaps and avoiding
copies at all costs. However, if only one message is on an arena, or the
messages are on different arenas, <code>Swap()</code> performs <em>deep copies</em> of the
underlying data. This new behavior is necessary because otherwise the
swapped sub-objects could have differing lifetimes, leading potentially to
use-after-free bugs.</li><li><code>Message* New(Arena* arena)</code>: An alternate override for the standard <code>New()</code>
method. It allows a new message object of this type to be created on the
given arena. Its semantics are identical to <code>Arena::CreateMessage&lt;T>(arena)</code>
if the concrete message type on which it is called is generated with arena
allocation enabled. If the message type is not generated with arena
allocation enabled, then it is equivalent to an ordinary allocation followed
by <code>arena->Own(message)</code> if <code>arena</code> is not NULL.</li><li><code>Arena* GetArena()</code>: Returns the arena on which this message object was
allocated, if any.</li><li><code>void UnsafeArenaSwap(Message* other)</code>: Identical to <code>Swap()</code>, except it
assumes both objects are on the same arena (or not on arenas at all) and
always uses the efficient pointer-swapping implementation of this operation.
Using this method can improve performance as, unlike <code>Swap()</code>, it doesn&rsquo;t
need to check which messages live on which arena before performing the swap.
As the <code>Unsafe</code> prefix suggests, you should only use this method if you are
sure the messages you want to swap aren&rsquo;t on different arenas; otherwise
this method could have unpredictable results.</li></ul><h3 id=arenaembeddedmessage>Embedded Message Fields</h3><p>When you allocate a message object on an arena, its embedded message field
objects (submessages) are automatically owned by the arena as well. How these
message objects are allocated depends on where they are defined:</p><ul><li>If the message type is also defined in a <code>.proto</code> file with arena allocation
enabled, the object is allocated on the arena directly.</li><li>If the message type is from another <code>.proto</code> without arena allocation
enabled, the object is heap-allocated but is &ldquo;owned&rdquo; by the parent message&rsquo;s
arena. This means that when the arena is destroyed, the object will be freed
along with the objects on the arena itself.</li></ul><p>For either of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The following methods are added or have some special behavior when arena
allocation is enabled. Otherwise, accessor methods just use the
<a href=/reference/cpp/cpp-generated#embeddedmessage>default behavior</a>.</p><ul><li><code>Bar* mutable_foo()</code>: Returns a mutable pointer to the submessage instance.
If the parent object is on an arena then the returned object will be as
well.</li><li><code>void set_allocated_foo(Bar* bar)</code>: Takes a new object and adopts it as the
new value for the field. Arena support adds additional copying semantics to
maintain proper ownership when objects cross arena/arena or arena/heap
boundaries:<ul><li>If the parent object is on the heap and <code>bar</code> is on the heap, or if the
parent and message are on the same arena, this method&rsquo;s behavior is
unchanged.</li><li>If the parent is on an arena and <code>bar</code> is on the heap, the parent
message adds <code>bar</code> to its arena&rsquo;s ownership list with <code>arena->Own()</code>.</li><li>If the parent is on an arena and <code>bar</code> is on a different arena, this
method makes a copy of message and takes the copy as the new field
value.</li></ul></li><li><code>Bar* release_foo()</code>: Returns the existing submessage instance of the field,
if set, or a NULL pointer if not set, releasing ownership of this instance
to the caller and clearing the parent message&rsquo;s field. Arena support adds
additional copying semantics to maintain the contract that the returned
object is always <em>heap-allocated</em>:<ul><li>If the parent message is on an arena, this method will make a copy of
the submessage on the heap, clear the field value, and return the copy.</li><li>If the parent message is on the heap, the method behavior is unchanged.</li></ul></li><li><code>void unsafe_arena_set_allocated_foo(Bar* bar)</code>: Identical to
<code>set_allocated_foo</code>, but assumes both parent and submessage are on the same
arena. Using this version of the method can improve performance as it
doesn&rsquo;t need to check whether the messages are on a particular arena or the
heap. See <a href=#set-allocated>allocated/release patterns</a> for details on safe
ways to use this.</li><li><code>Bar* unsafe_arena_release_foo()</code>: Similar to <code>release_foo()</code>, but skips all
ownership checking. See <a href=#set-allocated>allocated/release patterns</a> for
details on safe ways to use this.</li></ul><h3 id=arenastring>String Fields</h3><p>Currently, string fields store their data on the heap even when their parent
message is on the arena. Because of this, string accessor methods use the
<a href=/reference/cpp/cpp-generated#string>default behavior</a> even
when arena allocation is enabled.</p><h3 id=arenarepeated>Repeated Fields</h3><p>Repeated fields allocate their internal array storage on the arena when the
containing message is arena-allocated, and also allocate their elements on the
arena when these elements are separate objects retained by pointer (messages or
strings). At the message-class level, generated methods for repeated fields do
not change. However, the <code>RepeatedField</code> and <code>RepeatedPtrField</code> objects that are
returned by accessors do have new methods and modified semantics when arena
support is enabled.</p><h4 id=repeated-numeric>Repeated Numeric Fields</h4><p><code>RepeatedField</code> objects that contain primitive types have the following
new/changed methods when arena allocation is enabled:</p><ul><li><code>void UnsafeArenaSwap(RepeatedField* other)</code>: Performs a swap of
<code>RepeatedField</code> contents without validating that this repeated field and
other are on the same arena. If they are not, the two repeated field objects
must be on arenas with equivalent lifetimes. The case where one is on an
arena and one is on the heap is checked and disallowed.</li><li><code>void Swap(RepeatedField* other)</code>: Checks each repeated field object&rsquo;s
arena, and if one is on an arena while one is on the heap or if both are on
arenas but on different ones, the underlying arrays are copied before the
swap occurs. This means that after the swap, each repeated field object
holds an array on its own arena or heap, as appropriate.</li></ul><h4 id=repeated-embedded>Repeated Embedded Message Fields</h4><p><code>RepeatedPtrField</code> objects that contain messages have the following new/changed
methods when arena allocation is enabled.</p><ul><li><code>void UnsafeArenaSwap(RepeatedPtrField* other)</code>: Performs a swap of
<code>RepeatedPtrField</code> contents without validating that this repeated field and
other have the same arena pointer. If they do not, the two repeated field
objects must have arena pointers with equivalent lifetimes. The case where
one has a non-NULL arena pointer and one has a NULL arena pointer is checked
and disallowed.</li><li><code>void Swap(RepeatedPtrField* other)</code>: Checks each repeated field object&rsquo;s
arena pointer, and if one is non-NULL (contents on arena) while one is NULL
(contents on heap) or if both are non-NULL but have different values, the
underlying arrays and their pointed-to objects are copied before the swap
occurs. This means that after the swap, each repeated field object holds an
array on its own arena or on the heap, as appropriate.</li><li><code>void AddAllocated(SubMessageType* value)</code>: Checks that the provided message
object is on the same arena as the repeated field&rsquo;s arena pointer. If it is
on the same arena, then the object pointer is added directly to the
underlying array. Otherwise, a copy is made, the original is freed if it was
heap-allocated, and the copy is placed on the array. This maintains the
invariant that all objects pointed to by a repeated field are in the same
ownership domain (heap or specific arena) as indicated by the repeated
field&rsquo;s arena pointer.</li><li><code>SubMessageType* ReleaseLast()</code>: Returns a heap-allocated message equivalent
to the last message in the repeated field, removing it from the repeated
field. If the repeated field itself has a NULL arena pointer (and thus, all
of its pointed-to messages are heap-allocated), then this method simply
returns a pointer to the original object. Otherwise, if the repeated field
has a non-NULL arena pointer, this method makes a copy that is
heap-allocated and returns that copy. In both cases, the caller receives
ownership of a heap-allocated object and is responsible for deleting the
object.</li><li><code>void UnsafeArenaAddAllocated(SubMessageType* value)</code>: Like
<code>AddAllocated()</code>, but does not perform heap/arena checks or any message
copies. It adds the provided pointer directly to the internal array of
pointers for this repeated field. See
<a href=#set-allocated>allocated/release patterns</a> for details on safe ways to use
this.</li><li><code>SubMessageType* UnsafeArenaReleaseLast()</code>: Like <code>ReleaseLast()</code> but
performs no copies, even if the repeated field has a non-NULL arena pointer.
Instead, it directly returns the pointer to the object as it was in the
repeated field. See <a href=#set-allocated>allocated/release patterns</a> for details
on safe ways to use this.</li><li><code>void ExtractSubrange(int start, int num, SubMessageType** elements)</code>:
Removes <code>num</code> elements from the repeated field, starting from index <code>start</code>,
and returns them in <code>elements</code> if it is not NULL. If the repeated field is
on an arena, and elements are being returned, the elements are copied to the
heap first. In both cases (arena or no arena), the caller owns the returned
objects on the heap.</li><li><code>void UnsafeArenaExtractSubrange(int start, int num, SubMessageType** elements)</code>: Removes <code>num</code> elements from the repeated field, starting from
index <code>start</code>, and returns them in <code>elements</code> if it is not NULL. Unlike
<code>ExtractSubrange()</code>, this method never copies the extracted elements. See
<a href=#set-allocated>allocated/release patterns</a> for details on safe ways to use
this.</li></ul><h4 id=repeated-string>Repeated String Fields</h4><p>Repeated fields of strings have the same new methods and modified semantics as
repeated fields of messages, because they also maintain their underlying objects
(namely, strings) by pointer reference.</p><h2 id=usage>Usage Patterns and Best Practices</h2><p>When using arena-allocated messages, several usage patterns can result in
unintended copies or other negative performance effects. You should be aware of
the following common patterns that may need to be altered when adapting code for
arenas. (Note that we have taken care in the API design to ensure that correct
behavior still occurs &mdash; but higher-performance solutions may require some
reworking.)</p><h3 id=unintended>Unintended Copies</h3><p>Several methods that never create object copies when not using arena allocation
may end up doing so when arena support is enabled. These unwanted copies can be
avoided if you make sure that your objects are allocated appropriately and/or
use provided arena-specific method versions, as described in more detail below.</p><h4 id=set-allocated>Set Allocated/Add Allocated/Release</h4><p>By default, the <code>release_field()</code> and <code>set_allocated_field()</code> methods (for
singular message fields), and the <code>ReleaseLast()</code> and <code>AddAllocated()</code> methods
(for repeated message fields) allow user code to directly attach and detach
submessages, passing ownership of pointers without copying any data.</p><p>However, when the parent message is on an arena, these methods now sometimes
need to copy the passed in or returned object to maintain compatibility with
existing ownership contracts. More specifically, methods that take ownership
(<code>set_allocated_field()</code> and <code>AddAllocated()</code>) may copy data if the parent is on
an arena and the new subobject is not, or vice versa, or they are on different
arenas. Methods that release ownership (<code>release_field()</code> and <code>ReleaseLast()</code>)
may copy data if the parent is on the arena, because the returned object must be
on the heap, by contract.</p><p>To avoid such copies, we have added corresponding &ldquo;unsafe arena&rdquo; versions of
these methods where copies are <strong>never performed</strong>:
<code>unsafe_arena_set_allocated_field()</code>, <code>unsafe_arena_release_field()</code>,
<code>UnsafeArenaAddAllocated()</code>, and <code>UnsafeArenaRelease()</code> for singular and
repeated fields, respectively. These methods should be used only when you know
they are safe to do so. There are two common patterns for these methods:</p><ul><li>Moving messages trees between parts of the same arena. Note that the
messages must be on the same arena for this case to be safe.</li><li>Temporarily loaning an owned message to a tree to avoid copies. Pairing an
unsafe <em>add</em>/<em>set</em> method with an unsafe <em>release</em> method performs the loan
in the cheapest way possible regardless of how either message is owned (this
pattern works when they are on the same arena, different arena, or no arena
at all). Note that between the unsafe <em>add</em>/<em>set</em> and its corresponding
<em>release</em>, the borrower must not be swapped, moved, cleared or destroyed;
the loaned message must not be swapped or moved; the loaned message must not
be cleared or released by the borrower; and the loaned message must not be
destroyed.</li></ul><p>Here&rsquo;s an example of how you can avoid unnecessary copies with these methods.
Let&rsquo;s say you have created the following messages on an arena.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>Arena</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>arena</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Arena</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>MyFeatureMessage</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>arena_message_1</span> <span style=color:#ce5c00;font-weight:700>=</span>
</span></span><span style=display:flex><span>  <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Arena</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>CreateMessage</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>MyFeatureMessage</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>arena</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>arena_message_1</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>mutable_nested_message</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>set_feature_id</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>11</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>MyFeatureMessage</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>arena_message_2</span> <span style=color:#ce5c00;font-weight:700>=</span>
</span></span><span style=display:flex><span>  <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Arena</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>CreateMessage</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>MyFeatureMessage</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>arena</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>The following code makes inefficient usage of the <code>release_...()</code> API:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>arena_message_2</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>set_allocated_nested_message</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>arena_message_1</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>release_nested_message</span><span style=color:#000;font-weight:700>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>arena_message_1</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>release_message</span><span style=color:#000;font-weight:700>();</span> <span style=color:#8f5902;font-style:italic>// returns a copy of the underlying nested_message and deletes underlying pointer
</span></span></span></code></pre></div><p>Using the &ldquo;unsafe arena&rdquo; version instead avoids the copy:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>arena_message_2</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>unsafe_arena_set_allocated_nested_message</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>   <span style=color:#000>arena_message_1</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>unsafe_arena_release_nested_message</span><span style=color:#000;font-weight:700>());</span>
</span></span></code></pre></div><p>You can find out more about these methods in the
<a href=#arenaembeddedmessage>Embedded message fields</a> section above.</p><h4 id=swap>Swap</h4><p>When two messages&rsquo; contents are swapped with <code>Swap()</code>, the underlying subobjects
may be copied if the two messages live on different arenas, or if one is on the
arena and the other is on the heap. If you want to avoid this copy and either
(i) know that the two messages are on the same arena or different arenas but the
arenas have equivalent lifetimes, or (ii) know that the two messages are on the
heap, you can use a new method, <code>UnsafeArenaSwap()</code>. This method both avoids the
overhead of performing the arena check and avoids the copy if one would have
occurred.</p><p>For example, the following code incurs a copy in the <code>Swap()</code> call:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>MyFeatureMessage</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>message_1</span> <span style=color:#ce5c00;font-weight:700>=</span>
</span></span><span style=display:flex><span>  <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Arena</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>CreateMessage</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>MyFeatureMessage</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>arena</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>message_1</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>mutable_nested_message</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>set_feature_id</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>11</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>MyFeatureMessage</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>message_2</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>MyFeatureMessage</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>message_2</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>mutable_nested_message</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>set_feature_id</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>22</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>message_1</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>Swap</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message_2</span><span style=color:#000;font-weight:700>);</span> <span style=color:#8f5902;font-style:italic>// Inefficient swap!
</span></span></span></code></pre></div><p>To avoid the copy in this code, you allocate <code>message_2</code> on the same arena as
<code>message_1</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>MyFeatureMessage</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>message_2</span> <span style=color:#ce5c00;font-weight:700>=</span>
</span></span><span style=display:flex><span>   <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Arena</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>CreateMessage</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>MyFeatureMessage</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>arena</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h3 id=granularity>Granularity</h3><p>We have found in most application server use cases that an &ldquo;arena-per-request&rdquo;
model works well. You may be tempted to divide arena use further, either to
reduce heap overhead (by destroying smaller arenas more often) or to reduce
perceived thread-contention issues. However, the use of more fine-grained arenas
may lead to unintended message copying, as we describe above. We have also spent
effort to optimize the <code>Arena</code> implementation for the multithreaded use-case, so
a single arena should be appropriate for use throughout a request lifetime even
if multiple threads process that request.</p><h2 id=example>Example</h2><p>Here&rsquo;s a simple complete example demonstrating some of the features of the arena
allocation API.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// my_feature.proto
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000>syntax</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;proto2&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#4e9a06>&#34;nested_message.proto&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>feature_package</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902;font-style:italic>// NEXT Tag to use: 4
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MyFeatureMessage</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>feature_name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>feature_data</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>NestedMessage</span> <span style=color:#000>nested_message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>};</span><span style=color:#a40000>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// nested_message.proto
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000>syntax</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;proto2&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>feature_package</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902;font-style:italic>// NEXT Tag to use: 2
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>NestedMessage</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>feature_id</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>};</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>Message construction and deallocation:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#include</span> <span style=color:#8f5902;font-style:italic>&lt;google/protobuf/arena.h&gt;</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#000>Arena</span> <span style=color:#000>arena</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>MyFeatureMessage</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>arena_message</span> <span style=color:#ce5c00;font-weight:700>=</span>
</span></span><span style=display:flex><span>   <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Arena</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>CreateMessage</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>MyFeatureMessage</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>arena</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>arena_message</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>set_feature_name</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Proto2 Arena&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>arena_message</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>mutable_feature_data</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>arena_message</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>mutable_feature_data</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>arena_message</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>mutable_nested_message</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>set_feature_id</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>247</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Currently, string fields store their data on the heap even when the
containing message is on the arena. Unknown fields are also
heap-allocated.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=td-content style=page-break-before:always><h1 id=pg-ae82dadca65574fba74a91f6c6679854>1.3 - C++ API</h1></div><div class=td-content style=page-break-before:always><h1 id=pg-d44cdb890b7500b566f4c26e160a2745>1.4 -</h1><html devsite><head><title>C++ API</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml><link href=includes/stylesheet.css rel=stylesheet></head><body><h1>C++ API</h1><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Packages</h3></th></tr><tr><td><div><code><a href=#google.protobuf>google::protobuf</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr><tr><td><div><code><a href=#google.protobuf.io>google::protobuf::io</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Auxiliary classes used for I/O.</div></td></tr><tr><td><div><code><a href=#google.protobuf.util>google::protobuf::util</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Utility classes.</div></td></tr><tr><td><div><code><a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Implementation of the Protocol Buffer compiler.</div></td></tr></table><h2 id=google.protobuf>google::protobuf</h2><p></p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Files</h3></th></tr><tr><td><div><code><a href=google.protobuf.arena>google/protobuf/arena.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This file defines an <a href=google.protobuf.arena#Arena>Arena</a> allocator for better allocation performance.</div></td></tr><tr><td><div><code><a href=google.protobuf.descriptor>google/protobuf/descriptor.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This file contains classes which describe a type of protocol message.</div></td></tr><tr><td><div><code><a href=google.protobuf.descriptor.pb>google/protobuf/descriptor.pb.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Protocol buffer representations of descriptors.</div></td></tr><tr><td><div><code><a href=google.protobuf.descriptor_database>google/protobuf/descriptor_database.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Interface for manipulating databases of descriptors.</div></td></tr><tr><td><div><code><a href=google.protobuf.dynamic_message>google/protobuf/dynamic_message.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Defines an implementation of <a href=google.protobuf.message#Message>Message</a> which can emulate types which are not known at compile-time.</div></td></tr><tr><td><div><code><a href=google.protobuf.map>google/protobuf/map.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This file defines the map container and its helpers to support protobuf maps.</div></td></tr><tr><td><div><code><a href=google.protobuf.message>google/protobuf/message.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Defines <a href=google.protobuf.message#Message>Message</a>, the abstract interface implemented by non-lite protocol message objects.</div></td></tr><tr><td><div><code><a href=google.protobuf.message_lite>google/protobuf/message_lite.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Defines <a href=google.protobuf.message_lite#MessageLite>MessageLite</a>, the abstract interface implemented by all (lite and non-lite) protocol message objects.</div></td></tr><tr><td><div><code><a href=google.protobuf.repeated_field>google/protobuf/repeated_field.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> and <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> are used by generated protocol message classes to manipulate repeated fields.</div></td></tr><tr><td><div><code><a href=google.protobuf.service>google/protobuf/service.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>DEPRECATED: This module declares the abstract interfaces underlying proto2 RPC services.</div></td></tr><tr><td><div><code><a href=google.protobuf.text_format>google/protobuf/text_format.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Utilities for printing and parsing protocol messages in a human-readable, text-based format.</div></td></tr><tr><td><div><code><a href=google.protobuf.unknown_field_set>google/protobuf/unknown_field_set.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Contains classes used to keep track of unrecognized fields seen while parsing a protocol message.</div></td></tr></table><h2 id=google.protobuf.io>google::protobuf::io</h2><p>Auxiliary classes used for I/O.</p><p>The Protocol Buffer library uses the classes in this package to deal with I/O and encoding/decoding raw bytes. Most users will not need to deal with this package. However, users who want to adapt the system to work with their own I/O abstractions &ndash; e.g., to allow Protocol Buffers to be read from a different kind of input stream without the need for a temporary buffer &ndash; should take a closer look.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Files</h3></th></tr><tr><td><div><code><a href=google.protobuf.io.coded_stream>google/protobuf/io/coded_stream.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This file contains the <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> and <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a> classes, which wrap a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> or <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a>, respectively, and allow you to read or write individual pieces of data in various formats.</div></td></tr><tr><td><div><code><a href=google.protobuf.io.printer>google/protobuf/io/printer.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Utility class for writing text to a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a>.</div></td></tr><tr><td><div><code><a href=google.protobuf.io.tokenizer>google/protobuf/io/tokenizer.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Class for parsing tokenized text from a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a>.</div></td></tr><tr><td><div><code><a href=google.protobuf.io.zero_copy_stream>google/protobuf/io/zero_copy_stream.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This file contains the <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> and <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> interfaces, which represent abstract I/O streams to and from which protocol buffers can be read and written.</div></td></tr><tr><td><div><code><a href=google.protobuf.io.zero_copy_stream_impl>google/protobuf/io/zero_copy_stream_impl.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This file contains common implementations of the interfaces defined in <a href=google.protobuf.io.zero_copy_stream>zero_copy_stream.h</a> which are only included in the full (non-lite) protobuf library.</div></td></tr><tr><td><div><code><a href=google.protobuf.io.zero_copy_stream_impl_lite>google/protobuf/io/zero_copy_stream_impl_lite.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This file contains common implementations of the interfaces defined in <a href=google.protobuf.io.zero_copy_stream>zero_copy_stream.h</a> which are included in the "lite" protobuf library.</div></td></tr></table><h2 id=google.protobuf.util>google::protobuf::util</h2><p>Utility classes.</p><p>This package contains various utilities for message comparison, JSON conversion, well known types, etc.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Files</h3></th></tr><tr><td><div><code><a href=google.protobuf.util.field_comparator>google/protobuf/util/field_comparator.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Defines classes for field comparison.</div></td></tr><tr><td><div><code><a href=google.protobuf.util.field_mask_util>google/protobuf/util/field_mask_util.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Defines utilities for the FieldMask well known type.</div></td></tr><tr><td><div><code><a href=google.protobuf.util.json_util>google/protobuf/util/json_util.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Utility functions to convert between protobuf binary format and proto3 JSON format.</div></td></tr><tr><td><div><code><a href=google.protobuf.util.message_differencer>google/protobuf/util/message_differencer.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This file defines static methods and classes for comparing Protocol Messages.</div></td></tr><tr><td><div><code><a href=google.protobuf.util.time_util>google/protobuf/util/time_util.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Defines utilities for the Timestamp and Duration well known types.</div></td></tr><tr><td><div><code><a href=google.protobuf.util.type_resolver>google/protobuf/util/type_resolver.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Defines a TypeResolver for the Any message.</div></td></tr><tr><td><div><code><a href=google.protobuf.util.type_resolver_util>google/protobuf/util/type_resolver_util.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Defines utilities for the TypeResolver.</div></td></tr></table><h2 id=google.protobuf.compiler>google::protobuf::compiler</h2><p>Implementation of the Protocol Buffer compiler.</p><p>This package contains code for parsing .proto files and generating code based on them. There are two reasons you might be interested in this package:</p><ul><li>You want to parse .proto files at runtime. In this case, you should look at <a href=google.protobuf.compiler.importer>importer.h</a>. Since this functionality is widely useful, it is included in the libprotobuf base library; you do not have to link against libprotoc.</li><li>You want to write a custom protocol compiler which generates different kinds of code, e.g. code in a different language which is not supported by the official compiler. For this purpose, <a href=google.protobuf.compiler.command_line_interface>command_line_interface.h</a> provides you with a complete compiler front-end, so all you need to do is write a custom implementation of <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> and a trivial main() function. You can even make your compiler support the official languages in addition to your own. Since this functionality is only useful to those writing custom compilers, it is in a separate library called "libprotoc" which you will have to link against.</li></ul><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Files</h3></th></tr><tr><td><div><code><a href=google.protobuf.compiler.code_generator>google/protobuf/compiler/code_generator.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Defines the abstract interface implemented by each of the language-specific code generators.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.command_line_interface>google/protobuf/compiler/command_line_interface.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Implements the Protocol Compiler front-end such that it may be reused by custom compilers written to support other languages.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.importer>google/protobuf/compiler/importer.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This file is the public interface to the .proto file parser.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.parser>google/protobuf/compiler/parser.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Implements parsing of .proto files to FileDescriptorProtos.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.plugin>google/protobuf/compiler/plugin.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Front-end for protoc code generator plugins written in C++.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.plugin.pb>google/protobuf/compiler/plugin.pb.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>API for protoc plugins.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.cpp_generator>google/protobuf/compiler/cpp/cpp_generator.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates C++ code for a given .proto file.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.csharp_generator>google/protobuf/compiler/csharp/csharp_generator.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates C# code for a given .proto file.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.csharp_names>google/protobuf/compiler/csharp/csharp_names.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Provides a mechanism for mapping a descriptor to the fully-qualified name of the corresponding C# class.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.java_generator>google/protobuf/compiler/java/java_generator.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates Java code for a given .proto file.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.java_names>google/protobuf/compiler/java/java_names.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Provides a mechanism for mapping a descriptor to the fully-qualified name of the corresponding Java class.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.js_generator>google/protobuf/compiler/js/js_generator.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates JavaScript code for a given .proto file.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.objectivec_generator>google/protobuf/compiler/objectivec/objectivec_generator.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates ObjectiveC code for a given .proto file.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.objectivec_helpers>google/protobuf/compiler/objectivec/objectivec_helpers.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Helper functions for generating ObjectiveC code.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.python_generator>google/protobuf/compiler/python/python_generator.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates Python code for a given .proto file.</div></td></tr><tr><td><div><code><a href=google.protobuf.compiler.ruby_generator>google/protobuf/compiler/ruby/ruby_generator.h</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates Ruby code for a given .proto file.</div></td></tr></table></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-ef0424ba8a99c277723aa8ef8a5eaf87>1.4.1 -</h1><html devsite><head><title>arena.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>arena.h</h1><p><code>#include &lt;google/protobuf/arena.h><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>This file defines an <a href=#Arena>Arena</a> allocator for better allocation performance.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#ArenaOptions>ArenaOptions</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#ArenaOptions>ArenaOptions</a> provides optional additional parameters to arena construction that control its block-allocation behavior.</div></td></tr><tr><td><div><code><a href=#Arena>Arena</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#Arena>Arena</a> allocator.</div></td></tr><tr><td><div><code><a href=#Arena.InternalHelper>Arena::InternalHelper</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr><tr><td><div><code><a href=#Arena.is_arena_constructable>Arena::is_arena_constructable</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Helper typetraits that indicates support for arenas in a type T at compile time.</div></td></tr><tr><td><div><code><a href=#Arena.is_destructor_skippable>Arena::is_destructor_skippable</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr></table><h2 id=ArenaOptions>struct ArenaOptions</h2><p><code>#include &lt;<a href=#>google/protobuf/arena.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p><a href=#ArenaOptions>ArenaOptions</a> provides optional additional parameters to arena construction that control its block-allocation behavior.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>size_t</code></td><td style=border-left-width:0 id=ArenaOptions.start_block_size><div style=padding-left:16px;text-indent:-16px><code><b>start_block_size</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This defines the size of the first block requested from the system malloc. <a href=#ArenaOptions.start_block_size.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>size_t</code></td><td style=border-left-width:0 id=ArenaOptions.max_block_size><div style=padding-left:16px;text-indent:-16px><code><b>max_block_size</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This defines the maximum block size requested from system malloc (unless an individual arena allocation request occurs with a size larger than this maximum). <a href=#ArenaOptions.max_block_size.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>char *</code></td><td style=border-left-width:0 id=ArenaOptions.initial_block><div style=padding-left:16px;text-indent:-16px><code><b>initial_block</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>An initial block of memory for the arena to use, or NULL for none. <a href=#ArenaOptions.initial_block.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>size_t</code></td><td style=border-left-width:0 id=ArenaOptions.initial_block_size><div style=padding-left:16px;text-indent:-16px><code><b>initial_block_size</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The size of the initial block, if provided.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void *(*</code></td><td style=border-left-width:0 id=ArenaOptions.block_alloc><div style=padding-left:16px;text-indent:-16px><code><b>block_alloc</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A function pointer to an alloc method that returns memory blocks of size requested. <a href=#ArenaOptions.block_alloc.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void(*</code></td><td style=border-left-width:0 id=ArenaOptions.block_dealloc><div style=padding-left:16px;text-indent:-16px><code><b>block_dealloc</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A function pointer to a dealloc method that takes ownership of the blocks from the arena. <a href=#ArenaOptions.block_dealloc.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ArenaOptions.ArenaOptions><div style=padding-left:16px;text-indent:-16px><code><b>ArenaOptions</b>()</code></div></td></tr></table><hr><h3 id=ArenaOptions.start_block_size.details><code>size_t ArenaOptions::start_block_size</code></h3><div style=margin-left:16px><p>This defines the size of the first block requested from the system malloc.</p><p>Subsequent block sizes will increase in a geometric series up to a maximum.</p></div><hr><h3 id=ArenaOptions.max_block_size.details><code>size_t ArenaOptions::max_block_size</code></h3><div style=margin-left:16px><p>This defines the maximum block size requested from system malloc (unless an individual arena allocation request occurs with a size larger than this maximum).</p><p>Requested block sizes increase up to this value, then remain here.</p></div><hr><h3 id=ArenaOptions.initial_block.details><code>char * ArenaOptions::initial_block</code></h3><div style=margin-left:16px><p>An initial block of memory for the arena to use, or NULL for none.</p><p>If provided, the block must live at least as long as the arena itself. The creator of the <a href=#Arena>Arena</a> retains ownership of the block after the <a href=#Arena>Arena</a> is destroyed.</p></div><hr><h3 id=ArenaOptions.block_alloc.details><code>void *(* ArenaOptions::block_alloc</code></h3><div style=margin-left:16px><p>A function pointer to an alloc method that returns memory blocks of size requested.</p><p>By default, it contains a ptr to the malloc function.</p><p>NOTE: block_alloc and dealloc functions are expected to behave like malloc and free, including Asan poisoning.</p></div><hr><h3 id=ArenaOptions.block_dealloc.details><code>void(* ArenaOptions::block_dealloc</code></h3><div style=margin-left:16px><p>A function pointer to a dealloc method that takes ownership of the blocks from the arena.</p><p>By default, it contains a ptr to a wrapper function that calls free.</p></div><h2 id=Arena>class Arena</h2><p><code>#include &lt;<a href=#>google/protobuf/arena.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p><a href=#Arena>Arena</a> allocator.</p><p><a href=#Arena>Arena</a> allocation replaces ordinary (heap-based) allocation with new/delete, and improves performance by aggregating allocations into larger blocks and freeing allocations all at once. Protocol messages are allocated on an arena by using Arena::CreateMessage&lt;T>(Arena*), below, and are automatically freed when the arena is destroyed.</p><p>This is a thread-safe implementation: multiple threads may allocate from the arena concurrently. Destruction is not thread-safe and the destructing thread must synchronize with users of the arena first.</p><p>An arena provides two allocation interfaces: CreateMessage&lt;T>, which works for arena-enabled proto2 message types as well as other types that satisfy the appropriate protocol (described below), and Create&lt;T>, which works for any arbitrary type T. CreateMessage&lt;T> is better when the type T supports it, because this interface (i) passes the arena pointer to the created object so that its sub-objects and internal allocations can use the arena too, and (ii) elides the object's destructor call when possible. Create&lt;T> does not place any special requirements on the type T, and will invoke the object's destructor when the arena is destroyed.</p><p>The arena message allocation protocol, required by <a href=#Arena.CreateMessage>CreateMessage&lt;T>(Arena* arena, Args&&... args)</a>, is as follows:</p><ul><li>The type T must have (at least) two constructors: a constructor callable with <code>args</code> (without <code>arena</code>), called when a T is allocated on the heap; and a constructor callable with <code>Arena* arena, Args&&... args</code>, called when a T is allocated on an arena. If the second constructor is called with a NULL arena pointer, it must be equivalent to invoking the first (<code>args</code>-only) constructor.</li><li>The type T must have a particular type trait: a nested type |InternalArenaConstructable_|. This is usually a typedef to |void|. If no such type trait exists, then the instantiation CreateMessage&lt;T> will fail to compile.</li><li>The type T <i>may</i> have the type trait |DestructorSkippable_|. If this type trait is present in the type, then its destructor will not be called if and only if it was passed a non-NULL arena pointer. If this type trait is not present on the type, then its destructor is always called when the containing arena is destroyed.</li></ul><p>This protocol is implemented by all arena-enabled proto2 message classes as well as protobuf container types like <a href=../google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> and <a href=../google.protobuf.map#Map>Map</a>. The protocol is internal to protobuf and is not guaranteed to be stable. Non-proto types should not rely on this protocol.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>const size_t</code></td><td style=border-left-width:0 id=Arena.kBlockOverhead><div style=padding-left:16px;text-indent:-16px><code><b>kBlockOverhead</b> = =
internal::ThreadSafeArena::kBlockHeaderSize +
internal::ThreadSafeArena::kSerialArenaSize</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Block overhead. <a href=#Arena.kBlockOverhead.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Arena.Arena><div style=padding-left:16px;text-indent:-16px><code><b>Arena</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Default constructor with sensible default options, tuned for average use-cases.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Arena.Arena><div style=padding-left:16px;text-indent:-16px><code><b>Arena</b>(char * initial_block, size_t initial_block_size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Construct an arena with default options, except for the supplied initial block. <a href=#Arena.Arena.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=Arena.Arena><div style=padding-left:16px;text-indent:-16px><code><b>Arena</b>(const <a href=#ArenaOptions>ArenaOptions</a> & options)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#Arena>Arena</a> constructor taking custom options. <a href=#Arena.Arena.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Arena.~Arena><div style=padding-left:16px;text-indent:-16px><code><b>~Arena</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Arena.Init><div style=padding-left:16px;text-indent:-16px><code><b>Init</b>(const <a href=#ArenaOptions>ArenaOptions</a> & )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint64</code></td><td style=border-left-width:0 id=Arena.SpaceAllocated><div style=padding-left:16px;text-indent:-16px><code><b>SpaceAllocated</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The following are routines are for monitoring. <a href=#Arena.SpaceAllocated.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint64</code></td><td style=border-left-width:0 id=Arena.SpaceUsed><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsed</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total space used by the arena. <a href=#Arena.SpaceUsed.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint64</code></td><td style=border-left-width:0 id=Arena.Reset><div style=padding-left:16px;text-indent:-16px><code><b>Reset</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Frees all storage allocated by this arena after calling destructors registered with <a href=#Arena.OwnDestructor>OwnDestructor()</a> and freeing objects registered with <a href=#Arena.Own>Own()</a>. <a href=#Arena.Reset.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=Arena.Own><div style=padding-left:16px;text-indent:-16px><code><b>Own</b>(T * object)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Adds |object| to a list of heap-allocated objects to be freed with |delete| when the arena is destroyed or reset.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=Arena.OwnDestructor><div style=padding-left:16px;text-indent:-16px><code><b>OwnDestructor</b>(T * object)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Adds |object| to a list of objects whose destructors will be manually called when the arena is destroyed or reset. <a href=#Arena.OwnDestructor.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Arena.OwnCustomDestructor><div style=padding-left:16px;text-indent:-16px><code><b>OwnCustomDestructor</b>(void * object, void(*)(void *) destruct)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Adds a custom member function on an object to the list of destructors that will be manually called when the arena is destroyed or reset. <a href=#Arena.OwnCustomDestructor.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static T *</code></td><td style=border-left-width:0 id=Arena.CreateMessage><div style=padding-left:16px;text-indent:-16px><code><b>CreateMessage</b>(<a href=#Arena>Arena</a> * arena, Args &&... args)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>API to create proto2 message objects on the arena. <a href=#Arena.CreateMessage.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static PROTOBUF_NDEBUG_INLINE T *</code></td><td style=border-left-width:0 id=Arena.Create><div style=padding-left:16px;text-indent:-16px><code><b>Create</b>(<a href=#Arena>Arena</a> * arena, Args &&... args)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>API to create any objects on the arena. <a href=#Arena.Create.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static PROTOBUF_NDEBUG_INLINE T *</code></td><td style=border-left-width:0 id=Arena.CreateArray><div style=padding-left:16px;text-indent:-16px><code><b>CreateArray</b>(<a href=#Arena>Arena</a> * arena, size_t num_elements)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create an array of object type T on the arena <i>without</i> invoking the constructor of T. <a href=#Arena.CreateArray.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static <a href=#Arena>Arena</a> *</code></td><td style=border-left-width:0 id=Arena.GetArena><div style=padding-left:16px;text-indent:-16px><code><b>GetArena</b>(const T * value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Retrieves the arena associated with |value| if |value| is an arena-capable message, or NULL otherwise. <a href=#Arena.GetArena.details>more...</a></div></td></tr></table><hr><h3 id=Arena.kBlockOverhead.details><code>const size_t Arena::kBlockOverhead = =
internal::ThreadSafeArena::kBlockHeaderSize +
internal::ThreadSafeArena::kSerialArenaSize</code></h3><div style=margin-left:16px><p>Block overhead.</p><p>Use this as a guide for how much to over-allocate the initial block if you want an allocation of size N to fit inside it.</p><p>WARNING: if you allocate multiple objects, it is difficult to guarantee that a series of allocations will fit in the initial block, especially if <a href=#Arena>Arena</a> changes its alignment guarantees in the future!</p></div><hr><h3 id=Arena.Arena.details><code>Arena::Arena(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char * initial_block,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_t initial_block_size)</code></h3><div style=margin-left:16px><p>Construct an arena with default options, except for the supplied initial block.</p><p>It is more efficient to use this constructor instead of passing <a href=#ArenaOptions>ArenaOptions</a> if the only configuration needed by the caller is supplying an initial block.</p></div><hr><h3 id=Arena.Arena.details><code>explicit Arena::Arena(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=#ArenaOptions>ArenaOptions</a> & options)</code></h3><div style=margin-left:16px><p><a href=#Arena>Arena</a> constructor taking custom options.</p><p>See <a href=#ArenaOptions>ArenaOptions</a> above for descriptions of the options available.</p></div><hr><h3 id=Arena.SpaceAllocated.details><code>uint64 Arena::SpaceAllocated() const</code></h3><div style=margin-left:16px><p>The following are routines are for monitoring.</p><p>They will approximate the total sum allocated and used memory, but the exact value is an implementation deal. For instance allocated space depends on growth policies. Do not use these in unit tests. Returns the total space allocated by the arena, which is the sum of the sizes of the underlying blocks.</p></div><hr><h3 id=Arena.SpaceUsed.details><code>uint64 Arena::SpaceUsed() const</code></h3><div style=margin-left:16px><p>Returns the total space used by the arena.</p><p>Similar to SpaceAllocated but does not include free space and block overhead. The total space returned may not include space used by other threads executing concurrently with the call to this method.</p></div><hr><h3 id=Arena.Reset.details><code>uint64 Arena::Reset()</code></h3><div style=margin-left:16px><p>Frees all storage allocated by this arena after calling destructors registered with <a href=#Arena.OwnDestructor>OwnDestructor()</a> and freeing objects registered with <a href=#Arena.Own>Own()</a>.</p><p>Any objects allocated on this arena are unusable after this call. It also returns the total space used by the arena which is the sums of the sizes of the allocated blocks. This method is not thread-safe.</p></div><hr><h3 id=Arena.OwnDestructor.details><code>template void Arena::OwnDestructor(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T * object)</code></h3><div style=margin-left:16px><p>Adds |object| to a list of objects whose destructors will be manually called when the arena is destroyed or reset.</p><p>This differs from <a href=#Arena.Own>Own()</a> in that it does not free the underlying memory with |delete|; hence, it is normally only used for objects that are placement-newed into arena-allocated memory.</p></div><hr><h3 id=Arena.OwnCustomDestructor.details><code>void Arena::OwnCustomDestructor(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void * object,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void(*)(void *) destruct)</code></h3><div style=margin-left:16px><p>Adds a custom member function on an object to the list of destructors that will be manually called when the arena is destroyed or reset.</p><p>This differs from <a href=#Arena.OwnDestructor>OwnDestructor()</a> in that any member function may be specified, not only the class destructor.</p></div><hr><h3 id=Arena.CreateMessage.details><code>template static T * Arena::CreateMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=#Arena>Arena</a> * arena,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args &&... args)</code></h3><div style=margin-left:16px><p>API to create proto2 message objects on the arena.</p><p>If the arena passed in is NULL, then a heap allocated object is returned. Type T must be a message defined in a .proto file with cc_enable_arenas set to true, otherwise a compilation error will occur.</p><p><a href=../google.protobuf.repeated_field#RepeatedField>RepeatedField</a> and <a href=../google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> may also be instantiated directly on an arena with this method.</p><p>This function also accepts any type T that satisfies the arena message allocation protocol, documented above.</p></div><hr><h3 id=Arena.Create.details><code>template static PROTOBUF_NDEBUG_INLINE T *<br>&nbsp;&nbsp;&nbsp;&nbsp;Arena::Create(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=#Arena>Arena</a> * arena,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args &&... args)</code></h3><div style=margin-left:16px><p>API to create any objects on the arena.</p><p>Note that only the object will be created on the arena; the underlying ptrs (in case of a proto2 message) will be still heap allocated. Proto messages should usually be allocated with <a href=#Arena.CreateMessage>CreateMessage&lt;T>()</a> instead.</p><p>Note that even if T satisfies the arena message construction protocol (InternalArenaConstructable_ trait and optional DestructorSkippable_ trait), as described above, this function does not follow the protocol; instead, it treats T as a black-box type, just as if it did not have these traits. Specifically, T's constructor arguments will always be only those passed to <a href=#Arena.Create>Create&lt;T>()</a> &ndash; no additional arena pointer is implicitly added. Furthermore, the destructor will always be called at arena destruction time (unless the destructor is trivial). Hence, from T's point of view, it is as if the object were allocated on the heap (except that the underlying memory is obtained from the arena).</p></div><hr><h3 id=Arena.CreateArray.details><code>template static PROTOBUF_NDEBUG_INLINE T *<br>&nbsp;&nbsp;&nbsp;&nbsp;Arena::CreateArray(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=#Arena>Arena</a> * arena,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_t num_elements)</code></h3><div style=margin-left:16px><p>Create an array of object type T on the arena <i>without</i> invoking the constructor of T.</p><p>If <code>arena</code> is null, then the return value should be freed with <code>delete[[]] x;</code> (or <code>::operator delete[[]](x);</code>). To ensure safe uses, this function checks at compile time (when compiled as C++11) that T is trivially default-constructible and trivially destructible.</p></div><hr><h3 id=Arena.GetArena.details><code>template static <a href=#Arena>Arena</a> * Arena::GetArena(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const T * value)</code></h3><div style=margin-left:16px><p>Retrieves the arena associated with |value| if |value| is an arena-capable message, or NULL otherwise.</p><p>If possible, the call resolves at compile time. Note that we can often devirtualize calls to <code>value-><a href=#Arena.GetArena>GetArena()</a></code> so usually calling this method is unnecessary.</p></div><h2 id=Arena.InternalHelper>template class Arena::InternalHelper</h2><p><code>#include &lt;<a href=#>google/protobuf/arena.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a><br><br>template &lt;typename ></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>static <a href=#Arena>Arena</a> *</code></td><td style=border-left-width:0 id=Arena.InternalHelper.GetOwningArena><div style=padding-left:16px;text-indent:-16px><code><b>GetOwningArena</b>(const T * p)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Provides access to protected GetOwningArena to generated messages.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static <a href=#Arena>Arena</a> *</code></td><td style=border-left-width:0 id=Arena.InternalHelper.GetArenaForAllocation><div style=padding-left:16px;text-indent:-16px><code><b>GetArenaForAllocation</b>(const T * p)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Provides access to protected GetArenaForAllocation to generated messages.</div></td></tr></table><h2 id=Arena.is_arena_constructable>template struct Arena::is_arena_constructable</h2><p><code>#include &lt;<a href=#>google/protobuf/arena.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a><br><br>template &lt;typename ></code></p><p>Helper typetraits that indicates support for arenas in a type T at compile time.</p><p>This is public only to allow construction of higher-level templated utilities.</p><p>is_arena_constructable&lt;T>::value is true if the message type T has arena support enabled, and false otherwise.</p><p>is_destructor_skippable&lt;T>::value is true if the message type T has told the arena that it is safe to skip the destructor, and false otherwise.</p><p>This is inside <a href=#Arena>Arena</a> because only <a href=#Arena>Arena</a> has the friend relationships necessary to see the underlying generated code traits.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr></table><h2 id=Arena.is_destructor_skippable>template struct Arena::is_destructor_skippable</h2><p><code>#include &lt;<a href=#>google/protobuf/arena.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a><br><br>template &lt;typename ></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr></table></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-81d18c5d52fb17801e7368f63c918e1e>1.4.2 -</h1><html devsite><head><title>common.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>common.h</h1><p><code>#include &lt;google/protobuf/stubs/common.h><br>namespace google::protobuf</code></p><p>Contains basic types and utilities used by the rest of the library.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr></table></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-26a049ec78cdf9faa9d0124ee1e9b707>1.4.3 -</h1><html devsite><head><title>code_generator.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>code_generator.h</h1><p><code>#include &lt;google/protobuf/compiler/code_generator.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>Defines the abstract interface implemented by each of the language-specific code generators.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#CodeGenerator>CodeGenerator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The abstract interface to a class which generates code implementing a particular proto file in a particular language.</div></td></tr><tr><td><div><code><a href=#GeneratorContext>GeneratorContext</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>CodeGenerators generate one or more files in a given directory.</div></td></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=OutputDirectory><div style=padding-left:16px;text-indent:-16px><code><a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> <b>OutputDirectory</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The type <a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> was once called OutputDirectory. <a href=#OutputDirectory.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=ParseGeneratorParameter><div style=padding-left:16px;text-indent:-16px><code><b>ParseGeneratorParameter</b>(const std::string & , std::vector&lt; std::pair&lt; std::string, std::string > > * )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Several code generators treat the parameter argument as holding a list of options separated by commas. <a href=#ParseGeneratorParameter.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=StripProto><div style=padding-left:16px;text-indent:-16px><code><b>StripProto</b>(const std::string & filename)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Strips ".proto" or ".protodevel" from the end of a filename.</div></td></tr></table><hr><h3 id=OutputDirectory.details><code>typedef compiler::OutputDirectory</code></h3><div style=margin-left:16px><p>The type <a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> was once called OutputDirectory.</p><p>This typedef provides backward compatibility.</p></div><hr><h3 id=ParseGeneratorParameter.details><code>void compiler::ParseGeneratorParameter(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; std::pair&lt; std::string, std::string > > * )</code></h3><div style=margin-left:16px><p>Several code generators treat the parameter argument as holding a list of options separated by commas.</p><p>This helper function parses a set of comma-delimited name/value pairs: e.g., "foo=bar,baz,qux=corge" parses to the pairs:</p><pre>("foo", "bar"), ("baz", ""), ("qux", "corge")</pre></div><h2 id=CodeGenerator>class CodeGenerator</h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/code_generator.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>The abstract interface to a class which generates code implementing a particular proto file in a particular language.</p><p>A number of these may be registered with <a href=google.protobuf.compiler.command_line_interface#CommandLineInterface>CommandLineInterface</a> to support various languages.</p><p>Known subclasses:</p><ul><li><code><a href=google.protobuf.compiler.cpp_generator#CppGenerator>CppGenerator</a></code></li><li><code><a href=google.protobuf.compiler.csharp_generator#Generator>Generator</a></code></li><li><code><a href=google.protobuf.compiler.java_generator#JavaGenerator>JavaGenerator</a></code></li><li><code><a href=google.protobuf.compiler.js_generator#Generator>Generator</a></code></li><li><code><a href=google.protobuf.compiler.objectivec_generator#ObjectiveCGenerator>ObjectiveCGenerator</a></code></li><li><code><a href=google.protobuf.compiler.python_generator#Generator>Generator</a></code></li><li><code><a href=google.protobuf.compiler.ruby_generator#Generator>Generator</a></code></li></ul><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=CodeGenerator.Feature><div style=padding-left:16px;text-indent:-16px><code><b>Feature</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sync with plugin.proto. <a href=#CodeGenerator.Feature.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=CodeGenerator.CodeGenerator><div style=padding-left:16px;text-indent:-16px><code><b>CodeGenerator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=CodeGenerator.~CodeGenerator><div style=padding-left:16px;text-indent:-16px><code><b>~CodeGenerator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CodeGenerator.Generate><div style=padding-left:16px;text-indent:-16px><code><b>Generate</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file, const std::string & parameter, <a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context, std::string * error) const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates code for the given proto file, generating one or more files in the given output directory. <a href=#CodeGenerator.Generate.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CodeGenerator.GenerateAll><div style=padding-left:16px;text-indent:-16px><code><b>GenerateAll</b>(const std::vector&lt; const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * > & files, const std::string & parameter, <a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context, std::string * error) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates code for all given proto files. <a href=#CodeGenerator.GenerateAll.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual uint64_t</code></td><td style=border-left-width:0 id=CodeGenerator.GetSupportedFeatures><div style=padding-left:16px;text-indent:-16px><code><b>GetSupportedFeatures</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Implement this to indicate what features this code generator supports. <a href=#CodeGenerator.GetSupportedFeatures.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CodeGenerator.HasGenerateAll><div style=padding-left:16px;text-indent:-16px><code><b>HasGenerateAll</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This is no longer used, but this class is part of the opensource protobuf library, so it has to remain to keep vtables the same for the current version of the library. <a href=#CodeGenerator.HasGenerateAll.details>more...</a></div></td></tr></table><hr><h3 id=CodeGenerator.Feature.details><code>enum CodeGenerator::Feature {<br>&nbsp;&nbsp;FEATURE_PROTO3_OPTIONAL = = 1<br>}</code></h3><div style=margin-left:16px><p>Sync with plugin.proto.</p><table><tr><td>FEATURE_PROTO3_OPTIONAL</td><td></td></tr></table></div><hr><h3 id=CodeGenerator.Generate.details><code>virtual bool CodeGenerator::Generate(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & parameter,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * error) const = 0</code></h3><div style=margin-left:16px><p>Generates code for the given proto file, generating one or more files in the given output directory.</p><p>A parameter to be passed to the generator can be specified on the command line. This is intended to be used to pass generator specific parameters. It is empty if no parameter was given. ParseGeneratorParameter (below), can be used to accept multiple parameters within the single parameter command line flag.</p><p>Returns true if successful. Otherwise, sets *error to a description of the problem (e.g. "invalid parameter") and returns false.</p></div><hr><h3 id=CodeGenerator.GenerateAll.details><code>virtual bool CodeGenerator::GenerateAll(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * > & files,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & parameter,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * error) const</code></h3><div style=margin-left:16px><p>Generates code for all given proto files.</p><p>WARNING: The canonical code generator design produces one or two output files per input .proto file, and we do not wish to encourage alternate designs.</p><p>A parameter is given as passed on the command line, as in |Generate()| above.</p><p>Returns true if successful. Otherwise, sets *error to a description of the problem (e.g. "invalid parameter") and returns false.</p></div><hr><h3 id=CodeGenerator.GetSupportedFeatures.details><code>virtual uint64_t CodeGenerator::GetSupportedFeatures() const</code></h3><div style=margin-left:16px><p>Implement this to indicate what features this code generator supports.</p><p>This should be a bitwise OR of features from the Features enum in plugin.proto.</p></div><hr><h3 id=CodeGenerator.HasGenerateAll.details><code>virtual bool CodeGenerator::HasGenerateAll() const</code></h3><div style=margin-left:16px><p>This is no longer used, but this class is part of the opensource protobuf library, so it has to remain to keep vtables the same for the current version of the library.</p><p>When protobufs does a api breaking change, the method can be removed.</p></div><h2 id=GeneratorContext>class GeneratorContext</h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/code_generator.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>CodeGenerators generate one or more files in a given directory.</p><p>This abstract interface represents the directory to which the <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> is to write and other information about the context in which the Generator runs.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=GeneratorContext.GeneratorContext><div style=padding-left:16px;text-indent:-16px><code><b>GeneratorContext</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=GeneratorContext.~GeneratorContext><div style=padding-left:16px;text-indent:-16px><code><b>~GeneratorContext</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> *</code></td><td style=border-left-width:0 id=GeneratorContext.Open><div style=padding-left:16px;text-indent:-16px><code><b>Open</b>(const std::string & filename) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Opens the given file, truncating it if it exists, and returns a ZeroCopyOutputStream that writes to the file. <a href=#GeneratorContext.Open.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> *</code></td><td style=border-left-width:0 id=GeneratorContext.OpenForAppend><div style=padding-left:16px;text-indent:-16px><code><b>OpenForAppend</b>(const std::string & filename)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Similar to <a href=google.protobuf.compiler.code_generator#GeneratorContext.Open>Open()</a> but the output will be appended to the file if exists.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> *</code></td><td style=border-left-width:0 id=GeneratorContext.OpenForInsert><div style=padding-left:16px;text-indent:-16px><code><b>OpenForInsert</b>(const std::string & filename, const std::string & insertion_point)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates a ZeroCopyOutputStream which will insert code into the given file at the given insertion point. <a href=#GeneratorContext.OpenForInsert.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> *</code></td><td style=border-left-width:0 id=GeneratorContext.OpenForInsertWithGeneratedCodeInfo><div style=padding-left:16px;text-indent:-16px><code><b>OpenForInsertWithGeneratedCodeInfo</b>(const std::string & filename, const std::string & insertion_point, const google::protobuf::GeneratedCodeInfo & info)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Similar to OpenForInsert, but if <code>info</code> is non-empty, will open (or create) filename.pb.meta and insert info at the appropriate place with the necessary shifts. <a href=#GeneratorContext.OpenForInsertWithGeneratedCodeInfo.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=GeneratorContext.ListParsedFiles><div style=padding-left:16px;text-indent:-16px><code><b>ListParsedFiles</b>(std::vector&lt; const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * > * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns a vector of FileDescriptors for all the files being compiled in this run. <a href=#GeneratorContext.ListParsedFiles.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=GeneratorContext.GetCompilerVersion><div style=padding-left:16px;text-indent:-16px><code><b>GetCompilerVersion</b>(Version * version) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Retrieves the version number of the protocol compiler associated with this <a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a>.</div></td></tr></table><hr><h3 id=GeneratorContext.Open.details><code>virtual <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;GeneratorContext::Open(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & filename) = 0</code></h3><div style=margin-left:16px><p>Opens the given file, truncating it if it exists, and returns a ZeroCopyOutputStream that writes to the file.</p><p>The caller takes ownership of the returned object. This method never fails (a dummy stream will be returned instead).</p><p>The filename given should be relative to the root of the source tree. E.g. the C++ generator, when generating code for "foo/bar.proto", will generate the files "foo/bar.pb.h" and "foo/bar.pb.cc"; note that "foo/" is included in these filenames. The filename is not allowed to contain "." or ".." components.</p></div><hr><h3 id=GeneratorContext.OpenForInsert.details><code>virtual <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;GeneratorContext::OpenForInsert(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & filename,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & insertion_point)</code></h3><div style=margin-left:16px><p>Creates a ZeroCopyOutputStream which will insert code into the given file at the given insertion point.</p><p>See plugin.proto (<a href=google.protobuf.compiler.plugin.pb>plugin.pb.h</a>) for more information on insertion points. The default implementation assert-fails &ndash; it exists only for backwards-compatibility.</p><p>WARNING: This feature is currently EXPERIMENTAL and is subject to change.</p></div><hr><h3 id=GeneratorContext.OpenForInsertWithGeneratedCodeInfo.details><code>virtual <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;GeneratorContext::OpenForInsertWithGeneratedCodeInfo(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & filename,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & insertion_point,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const google::protobuf::GeneratedCodeInfo & info)</code></h3><div style=margin-left:16px><p>Similar to OpenForInsert, but if <code>info</code> is non-empty, will open (or create) filename.pb.meta and insert info at the appropriate place with the necessary shifts.</p><p>The default implementation ignores <code>info</code>.</p><p>WARNING: This feature will be REMOVED in the near future.</p></div><hr><h3 id=GeneratorContext.ListParsedFiles.details><code>virtual void GeneratorContext::ListParsedFiles(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * > * output)</code></h3><div style=margin-left:16px><p>Returns a vector of FileDescriptors for all the files being compiled in this run.</p><p>Useful for languages, such as Go, that treat files differently when compiled as a set rather than individually.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-d48160e666da842d564441f09d5bf0b9>1.4.4 -</h1><html devsite><head><title>command_line_interface.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>command_line_interface.h</h1><p><code>#include &lt;google/protobuf/compiler/command_line_interface.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>Implements the Protocol Compiler front-end such that it may be reused by custom compilers written to support other languages.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#CommandLineInterface>CommandLineInterface</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This class implements the command-line interface to the protocol compiler.</div></td></tr></table><h2 id=CommandLineInterface>class CommandLineInterface</h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/command_line_interface.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>This class implements the command-line interface to the protocol compiler.</p><p>It is designed to make it very easy to create a custom protocol compiler supporting the languages of your choice. For example, if you wanted to create a custom protocol compiler binary which includes both the regular C++ support plus support for your own custom output "Foo", you would write a class "FooGenerator" which implements the <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> interface, then write a main() procedure like this:</p><pre>int main(int argc, char* argv[[]]) {
  google::protobuf::compiler::CommandLineInterface cli;
<p>// Support generation of C++ source and headers.
google::protobuf::compiler::cpp::CppGenerator cpp_generator;
cli.RegisterGenerator(&quot;&ndash;cpp_out&quot;, &amp;cpp_generator,
&ldquo;Generate C++ source and header.&rdquo;);</p>
<p>// Support generation of Foo code.
FooGenerator foo_generator;
cli.RegisterGenerator(&quot;&ndash;foo_out&quot;, &amp;foo_generator,
&ldquo;Generate Foo file.&rdquo;);</p>
<p>return cli.Run(argc, argv);
}</pre></p><p>The compiler is invoked with syntax like:</p><pre>protoc --cpp_out=outdir --foo_out=outdir --proto_path=src src/foo.proto</pre><p>The .proto file to compile can be specified on the command line using either its physical file path, or a virtual path relative to a directory specified in &ndash;proto_path. For example, for src/foo.proto, the following two protoc invocations work the same way:</p><pre>1. protoc --proto_path=src src/foo.proto (physical file path)
2. protoc --proto_path=src foo.proto (virtual path relative to src)</pre><p>If a file path can be interpreted both as a physical file path and as a relative virtual path, the physical file path takes precedence.</p><p>For a full description of the command-line syntax, invoke it with &ndash;help.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>const char *const</code></td><td style=border-left-width:0 id=CommandLineInterface.kPathSeparator><div style=padding-left:16px;text-indent:-16px><code><b>kPathSeparator</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=CommandLineInterface.CommandLineInterface><div style=padding-left:16px;text-indent:-16px><code><b>CommandLineInterface</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=CommandLineInterface.~CommandLineInterface><div style=padding-left:16px;text-indent:-16px><code><b>~CommandLineInterface</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CommandLineInterface.RegisterGenerator><div style=padding-left:16px;text-indent:-16px><code><b>RegisterGenerator</b>(const std::string & flag_name, <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> * generator, const std::string & help_text)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Register a code generator for a language. <a href=#CommandLineInterface.RegisterGenerator.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CommandLineInterface.RegisterGenerator><div style=padding-left:16px;text-indent:-16px><code><b>RegisterGenerator</b>(const std::string & flag_name, const std::string & option_flag_name, <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> * generator, const std::string & help_text)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Register a code generator for a language. <a href=#CommandLineInterface.RegisterGenerator.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CommandLineInterface.AllowPlugins><div style=padding-left:16px;text-indent:-16px><code><b>AllowPlugins</b>(const std::string & exe_name_prefix)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Enables "plugins". <a href=#CommandLineInterface.AllowPlugins.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=CommandLineInterface.Run><div style=padding-left:16px;text-indent:-16px><code><b>Run</b>(int argc, const char *const argv)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Run the Protocol Compiler with the given command-line parameters. <a href=#CommandLineInterface.Run.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CommandLineInterface.SetInputsAreProtoPathRelative><div style=padding-left:16px;text-indent:-16px><code><b>SetInputsAreProtoPathRelative</b>(bool )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>DEPRECATED. <a href=#CommandLineInterface.SetInputsAreProtoPathRelative.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CommandLineInterface.SetVersionInfo><div style=padding-left:16px;text-indent:-16px><code><b>SetVersionInfo</b>(const std::string & text)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Provides some text which will be printed when the &ndash;version flag is used. <a href=#CommandLineInterface.SetVersionInfo.details>more...</a></div></td></tr></table><hr><h3 id=CommandLineInterface.RegisterGenerator.details><code>void CommandLineInterface::RegisterGenerator(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & flag_name,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> * generator,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & help_text)</code></h3><div style=margin-left:16px><p>Register a code generator for a language.</p><p>Parameters:</p><ul><li>flag_name: The command-line flag used to specify an output file of this type. The name must start with a '-'. If the name is longer than one letter, it must start with two '-'s.</li><li>generator: The <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> which will be called to generate files of this type.</li><li>help_text: Text describing this flag in the &ndash;help output.</li></ul><p>Some generators accept extra parameters. You can specify this parameter on the command-line by placing it before the output directory, separated by a colon:</p><pre>protoc --foo_out=enable_bar:outdir</pre><p>The text before the colon is passed to <a href=google.protobuf.compiler.code_generator#CodeGenerator.Generate>CodeGenerator::Generate()</a> as the "parameter".</p></div><hr><h3 id=CommandLineInterface.RegisterGenerator.details><code>void CommandLineInterface::RegisterGenerator(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & flag_name,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & option_flag_name,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> * generator,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & help_text)</code></h3><div style=margin-left:16px><p>Register a code generator for a language.</p><p>Besides flag_name you can specify another option_flag_name that could be used to pass extra parameters to the registered code generator. Suppose you have registered a generator by calling:</p><pre>command_line_interface.RegisterGenerator("--foo_out", "--foo_opt", ...)</pre><p>Then you could invoke the compiler with a command like:</p><pre>protoc --foo_out=enable_bar:outdir --foo_opt=enable_baz</pre><p>This will pass "enable_bar,enable_baz" as the parameter to the generator.</p></div><hr><h3 id=CommandLineInterface.AllowPlugins.details><code>void CommandLineInterface::AllowPlugins(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & exe_name_prefix)</code></h3><div style=margin-left:16px><p>Enables "plugins".</p><p>In this mode, if a command-line flag ends with "_out" but does not match any registered generator, the compiler will attempt to find a "plugin" to implement the generator. Plugins are just executables. They should live somewhere in the PATH.</p><p>The compiler determines the executable name to search for by concatenating exe_name_prefix with the unrecognized flag name, removing "_out". So, for example, if exe_name_prefix is "protoc-" and you pass the flag &ndash;foo_out, the compiler will try to run the program "protoc-gen-foo".</p><p>The plugin program should implement the following usage:</p><pre>plugin [[]--out=OUTDIR] [[]--parameter=PARAMETER] PROTO_FILES &lt; DESCRIPTORS</pre><p>&ndash;out indicates the output directory (as passed to the &ndash;foo_out parameter); if omitted, the current directory should be used. &ndash;parameter gives the generator parameter, if any was provided (see below). The PROTO_FILES list the .proto files which were given on the compiler command-line; these are the files for which the plugin is expected to generate output code. Finally, DESCRIPTORS is an encoded FileDescriptorSet (as defined in descriptor.proto). This is piped to the plugin's stdin. The set will include descriptors for all the files listed in PROTO_FILES as well as all files that they import. The plugin MUST NOT attempt to read the PROTO_FILES directly &ndash; it must use the FileDescriptorSet.</p><p>The plugin should generate whatever files are necessary, as code generators normally do. It should write the names of all files it generates to stdout. The names should be relative to the output directory, NOT absolute names or relative to the current directory. If any errors occur, error messages should be written to stderr. If an error is fatal, the plugin should exit with a non-zero exit code.</p><p>Plugins can have generator parameters similar to normal built-in generators. Extra generator parameters can be passed in via a matching "_opt" parameter. For example:</p><pre>protoc --plug_out=enable_bar:outdir --plug_opt=enable_baz</pre><p>This will pass "enable_bar,enable_baz" as the parameter to the plugin.</p></div><hr><h3 id=CommandLineInterface.Run.details><code>int CommandLineInterface::Run(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int argc,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const char *const argv)</code></h3><div style=margin-left:16px><p>Run the Protocol Compiler with the given command-line parameters.</p><p>Returns the error code which should be returned by main().</p><p>It may not be safe to call <a href=google.protobuf.compiler.command_line_interface#CommandLineInterface.Run>Run()</a> in a multi-threaded environment because it calls strerror(). I'm not sure why you'd want to do this anyway.</p></div><hr><h3 id=CommandLineInterface.SetInputsAreProtoPathRelative.details><code>void CommandLineInterface::SetInputsAreProtoPathRelative(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool )</code></h3><div style=margin-left:16px><p>DEPRECATED.</p><p>Calling this method has no effect. Protocol compiler now always try to find the .proto file relative to the current directory first and if the file is not found, it will then treat the input path as a virtual path.</p></div><hr><h3 id=CommandLineInterface.SetVersionInfo.details><code>void CommandLineInterface::SetVersionInfo(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & text)</code></h3><div style=margin-left:16px><p>Provides some text which will be printed when the &ndash;version flag is used.</p><p>The version of libprotoc will also be printed on the next line after this text.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-fc1fdb439bf0a93588981dd41a8e24de>1.4.5 -</h1><html devsite><head><title>cpp_generator.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>cpp_generator.h</h1><p><code>#include &lt;google/protobuf/compiler/cpp/cpp_generator.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::cpp</a></code></p><p>Generates C++ code for a given .proto file.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#CppGenerator>CppGenerator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation which generates a C++ source file and header.</div></td></tr></table><h2 id=CppGenerator>class CppGenerator: public <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a></h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/cpp/cpp_generator.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::cpp</a></code></p><p><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation which generates a C++ source file and header.</p><p>If you create your own protocol compiler binary and you want it to support C++ output, you can do so by registering an instance of this <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> with the <a href=google.protobuf.compiler.command_line_interface#CommandLineInterface>CommandLineInterface</a> in your main() function.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=CppGenerator.Runtime><div style=padding-left:16px;text-indent:-16px><code><b>Runtime</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#CppGenerator.Runtime.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=CppGenerator.CppGenerator><div style=padding-left:16px;text-indent:-16px><code><b>CppGenerator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=CppGenerator.~CppGenerator><div style=padding-left:16px;text-indent:-16px><code><b>~CppGenerator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CppGenerator.set_opensource_runtime><div style=padding-left:16px;text-indent:-16px><code><b>set_opensource_runtime</b>(bool opensource)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CppGenerator.set_runtime_include_base><div style=padding-left:16px;text-indent:-16px><code><b>set_runtime_include_base</b>(const std::string & base)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If set to a non-empty string, generated code will do: <a href=#CppGenerator.set_runtime_include_base.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CppGenerator.Generate><div style=padding-left:16px;text-indent:-16px><code><b>Generate</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file, const std::string & parameter, <a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context, std::string * error) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates code for the given proto file, generating one or more files in the given output directory. <a href=#CppGenerator.Generate.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual uint64_t</code></td><td style=border-left-width:0 id=CppGenerator.GetSupportedFeatures><div style=padding-left:16px;text-indent:-16px><code><b>GetSupportedFeatures</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Implement this to indicate what features this code generator supports. <a href=#CppGenerator.GetSupportedFeatures.details>more...</a></div></td></tr></table><hr><h3 id=CppGenerator.Runtime.details><code>enum CppGenerator::Runtime {<br>&nbsp;&nbsp;kGoogle3,<br>&nbsp;&nbsp;kOpensource,<br>&nbsp;&nbsp;kOpensourceGoogle3<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>kGoogle3</td><td>Use the internal google3 runtime.</td></tr><tr><td>kOpensource</td><td>Use the open-source runtime.</td></tr><tr><td>kOpensourceGoogle3</td><td><p>Use the open-source runtime with google3 #include paths.</p><p>We make these absolute to avoid ambiguity, so the runtime will be #included like:</p><pre></pre></td></tr></table></div><hr><h3 id=CppGenerator.set_runtime_include_base.details><code>void CppGenerator::set_runtime_include_base(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & base)</code></h3><div style=margin-left:16px><p>If set to a non-empty string, generated code will do:</p><pre>/google/protobuf/message.h"</pre><p>instead of:</p><pre></pre><p>This has no effect if opensource_runtime = false.</p></div><hr><h3 id=CppGenerator.Generate.details><code>virtual bool CppGenerator::Generate(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & parameter,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * error) const</code></h3><div style=margin-left:16px><p>Generates code for the given proto file, generating one or more files in the given output directory.</p><p>A parameter to be passed to the generator can be specified on the command line. This is intended to be used to pass generator specific parameters. It is empty if no parameter was given. ParseGeneratorParameter (below), can be used to accept multiple parameters within the single parameter command line flag.</p><p>Returns true if successful. Otherwise, sets *error to a description of the problem (e.g. "invalid parameter") and returns false.</p></div><hr><h3 id=CppGenerator.GetSupportedFeatures.details><code>virtual uint64_t CppGenerator::GetSupportedFeatures() const</code></h3><div style=margin-left:16px><p>Implement this to indicate what features this code generator supports.</p><p>This should be a bitwise OR of features from the Features enum in plugin.proto.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-4367d0efc632b1fd55136db9c84dd6b2>1.4.6 -</h1><html devsite><head><title>csharp_generator.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>csharp_generator.h</h1><p><code>#include &lt;google/protobuf/compiler/csharp/csharp_generator.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::csharp</a></code></p><p>Generates C# code for a given .proto file.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#Generator>Generator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation which generates a C# source file and header.</div></td></tr></table><h2 id=Generator>class Generator: public <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a></h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/csharp/csharp_generator.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::csharp</a></code></p><p><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation which generates a C# source file and header.</p><p>If you create your own protocol compiler binary and you want it to support C# output, you can do so by registering an instance of this <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> with the <a href=google.protobuf.compiler.command_line_interface#CommandLineInterface>CommandLineInterface</a> in your main() function.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Generator.Generator><div style=padding-left:16px;text-indent:-16px><code><b>Generator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Generator.~Generator><div style=padding-left:16px;text-indent:-16px><code><b>~Generator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=Generator.Generate><div style=padding-left:16px;text-indent:-16px><code><b>Generate</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file, const std::string & parameter, <a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context, std::string * error) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates code for the given proto file, generating one or more files in the given output directory. <a href=#Generator.Generate.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual uint64_t</code></td><td style=border-left-width:0 id=Generator.GetSupportedFeatures><div style=padding-left:16px;text-indent:-16px><code><b>GetSupportedFeatures</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Implement this to indicate what features this code generator supports. <a href=#Generator.GetSupportedFeatures.details>more...</a></div></td></tr></table><hr><h3 id=Generator.Generate.details><code>virtual bool Generator::Generate(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & parameter,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * error) const</code></h3><div style=margin-left:16px><p>Generates code for the given proto file, generating one or more files in the given output directory.</p><p>A parameter to be passed to the generator can be specified on the command line. This is intended to be used to pass generator specific parameters. It is empty if no parameter was given. ParseGeneratorParameter (below), can be used to accept multiple parameters within the single parameter command line flag.</p><p>Returns true if successful. Otherwise, sets *error to a description of the problem (e.g. "invalid parameter") and returns false.</p></div><hr><h3 id=Generator.GetSupportedFeatures.details><code>virtual uint64_t Generator::GetSupportedFeatures() const</code></h3><div style=margin-left:16px><p>Implement this to indicate what features this code generator supports.</p><p>This should be a bitwise OR of features from the Features enum in plugin.proto.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-fc614df16a0ac906f461ab492ae4b08f>1.4.7 -</h1><html devsite><head><title>csharp_names.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>csharp_names.h</h1><p><code>#include &lt;google/protobuf/compiler/csharp/csharp_names.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::csharp</a></code></p><p>Provides a mechanism for mapping a descriptor to the fully-qualified name of the corresponding C# class.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=GetFileNamespace><div style=padding-left:16px;text-indent:-16px><code><b>GetFileNamespace</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Requires: <a href=#GetFileNamespace.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=GetClassName><div style=padding-left:16px;text-indent:-16px><code><b>GetClassName</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Requires: <a href=#GetClassName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=GetReflectionClassName><div style=padding-left:16px;text-indent:-16px><code><b>GetReflectionClassName</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Requires: <a href=#GetReflectionClassName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=GetOutputFile><div style=padding-left:16px;text-indent:-16px><code><b>GetOutputFile</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * descriptor, const std::string file_extension, const bool generate_directories, const std::string base_namespace, std::string * error)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates output file name for given file descriptor. <a href=#GetOutputFile.details>more...</a></div></td></tr></table><hr><h3 id=GetFileNamespace.details><code>std::string csharp::GetFileNamespace(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * descriptor)</code></h3><div style=margin-left:16px><p>Requires:</p><pre>descriptor != NULL</pre><p>Returns:</p><pre>The namespace to use for given file descriptor.</pre></div><hr><h3 id=GetClassName.details><code>std::string csharp::GetClassName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor)</code></h3><div style=margin-left:16px><p>Requires:</p><pre>descriptor != NULL</pre><p>Returns:</p><pre>The fully-qualified C# class name.</pre></div><hr><h3 id=GetReflectionClassName.details><code>std::string csharp::GetReflectionClassName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * descriptor)</code></h3><div style=margin-left:16px><p>Requires:</p><pre>descriptor != NULL</pre><p>Returns:</p><pre>The fully-qualified name of the C# class that provides
access to the file descriptor. Proto compiler generates
such class for each .proto file processed.</pre></div><hr><h3 id=GetOutputFile.details><code>std::string csharp::GetOutputFile(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * descriptor,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string file_extension,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const bool generate_directories,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string base_namespace,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * error)</code></h3><div style=margin-left:16px><p>Generates output file name for given file descriptor.</p><p>If generate_directories is true, the output file will be put under directory corresponding to file's namespace. base_namespace can be used to strip some of the top level directories. E.g. for file with namespace "Bar.Foo" and base_namespace="Bar", the resulting file will be put under directory "Foo" (and not "Bar/Foo").</p><p>Requires:</p><pre>descriptor != NULL
error != NULL</pre><p>Returns:</p><pre>The file name to use as output file for given file descriptor. In case
of failure, this function will return empty string and error parameter
will contain the error message.</pre></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-96c1caf9a8f53bb6bd977d07056ccfe1>1.4.8 -</h1><html devsite><head><title>importer.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>importer.h</h1><p><code>#include &lt;google/protobuf/compiler/importer.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>This file is the public interface to the .proto file parser.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#SourceTreeDescriptorDatabase>SourceTreeDescriptorDatabase</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>An implementation of <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> which loads files from a <a href=google.protobuf.compiler.importer#SourceTree>SourceTree</a> and parses them.</div></td></tr><tr><td><div><code><a href=#Importer>Importer</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Simple interface for parsing .proto files.</div></td></tr><tr><td><div><code><a href=#MultiFileErrorCollector>MultiFileErrorCollector</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If the importer encounters problems while trying to import the proto files, it reports them to a <a href=google.protobuf.compiler.importer#MultiFileErrorCollector>MultiFileErrorCollector</a>.</div></td></tr><tr><td><div><code><a href=#SourceTree>SourceTree</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Abstract interface which represents a directory tree containing proto files.</div></td></tr><tr><td><div><code><a href=#DiskSourceTree>DiskSourceTree</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>An implementation of <a href=google.protobuf.compiler.importer#SourceTree>SourceTree</a> which loads files from locations on disk.</div></td></tr></table><h2 id=SourceTreeDescriptorDatabase>class SourceTreeDescriptorDatabase: public <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a></h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/importer.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>An implementation of <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> which loads files from a <a href=google.protobuf.compiler.importer#SourceTree>SourceTree</a> and parses them.</p><p>Note: This class is not thread-safe since it maintains a table of source code locations for error reporting. However, when a <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> wraps a <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a>, it uses mutex locking to make sure only one method of the database is called at a time, even if the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> is used from multiple threads. Therefore, there is only a problem if you create multiple DescriptorPools wrapping the same <a href=google.protobuf.compiler.importer#SourceTreeDescriptorDatabase>SourceTreeDescriptorDatabase</a> and use them from multiple threads.</p><p>Note: This class does not implement <a href=google.protobuf.compiler.importer#SourceTreeDescriptorDatabase.FindFileContainingSymbol>FindFileContainingSymbol()</a> or <a href=google.protobuf.compiler.importer#SourceTreeDescriptorDatabase.FindFileContainingExtension>FindFileContainingExtension()</a>; these will always return false.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=SourceTreeDescriptorDatabase.SourceTreeDescriptorDatabase><div style=padding-left:16px;text-indent:-16px><code><b>SourceTreeDescriptorDatabase</b>(<a href=google.protobuf.compiler.importer#SourceTree>SourceTree</a> * source_tree)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=SourceTreeDescriptorDatabase.SourceTreeDescriptorDatabase><div style=padding-left:16px;text-indent:-16px><code><b>SourceTreeDescriptorDatabase</b>(<a href=google.protobuf.compiler.importer#SourceTree>SourceTree</a> * source_tree, <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> * fallback_database)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If non-NULL, fallback_database will be checked if a file doesn't exist in the specified source_tree.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=SourceTreeDescriptorDatabase.~SourceTreeDescriptorDatabase><div style=padding-left:16px;text-indent:-16px><code><b>~SourceTreeDescriptorDatabase</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=SourceTreeDescriptorDatabase.RecordErrorsTo><div style=padding-left:16px;text-indent:-16px><code><b>RecordErrorsTo</b>(<a href=google.protobuf.compiler.importer#MultiFileErrorCollector>MultiFileErrorCollector</a> * error_collector)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Instructs the <a href=google.protobuf.compiler.importer#SourceTreeDescriptorDatabase>SourceTreeDescriptorDatabase</a> to report any parse errors to the given <a href=google.protobuf.compiler.importer#MultiFileErrorCollector>MultiFileErrorCollector</a>. <a href=#SourceTreeDescriptorDatabase.RecordErrorsTo.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector>DescriptorPool::ErrorCollector</a> *</code></td><td style=border-left-width:0 id=SourceTreeDescriptorDatabase.GetValidationErrorCollector><div style=padding-left:16px;text-indent:-16px><code><b>GetValidationErrorCollector</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets a <a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector>DescriptorPool::ErrorCollector</a> which records errors to the <a href=google.protobuf.compiler.importer#MultiFileErrorCollector>MultiFileErrorCollector</a> specified with <a href=google.protobuf.compiler.importer#SourceTreeDescriptorDatabase.RecordErrorsTo>RecordErrorsTo()</a>. <a href=#SourceTreeDescriptorDatabase.GetValidationErrorCollector.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=SourceTreeDescriptorDatabase.FindFileByName><div style=padding-left:16px;text-indent:-16px><code><b>FindFileByName</b>(const std::string & filename, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find a file by file name. <a href=#SourceTreeDescriptorDatabase.FindFileByName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=SourceTreeDescriptorDatabase.FindFileContainingSymbol><div style=padding-left:16px;text-indent:-16px><code><b>FindFileContainingSymbol</b>(const std::string & symbol_name, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the file that declares the given fully-qualified symbol name. <a href=#SourceTreeDescriptorDatabase.FindFileContainingSymbol.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=SourceTreeDescriptorDatabase.FindFileContainingExtension><div style=padding-left:16px;text-indent:-16px><code><b>FindFileContainingExtension</b>(const std::string & containing_type, int field_number, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the file which defines an extension extending the given message type with the given field number. <a href=#SourceTreeDescriptorDatabase.FindFileContainingExtension.details>more...</a></div></td></tr></table><hr><h3 id=SourceTreeDescriptorDatabase.RecordErrorsTo.details><code>void SourceTreeDescriptorDatabase::RecordErrorsTo(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.compiler.importer#MultiFileErrorCollector>MultiFileErrorCollector</a> * error_collector)</code></h3><div style=margin-left:16px><p>Instructs the <a href=google.protobuf.compiler.importer#SourceTreeDescriptorDatabase>SourceTreeDescriptorDatabase</a> to report any parse errors to the given <a href=google.protobuf.compiler.importer#MultiFileErrorCollector>MultiFileErrorCollector</a>.</p><p>This should be called before parsing. error_collector must remain valid until either this method is called again or the <a href=google.protobuf.compiler.importer#SourceTreeDescriptorDatabase>SourceTreeDescriptorDatabase</a> is destroyed.</p></div><hr><h3 id=SourceTreeDescriptorDatabase.GetValidationErrorCollector.details><code><a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector>DescriptorPool::ErrorCollector</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;SourceTreeDescriptorDatabase::GetValidationErrorCollector()</code></h3><div style=margin-left:16px><p>Gets a <a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector>DescriptorPool::ErrorCollector</a> which records errors to the <a href=google.protobuf.compiler.importer#MultiFileErrorCollector>MultiFileErrorCollector</a> specified with <a href=google.protobuf.compiler.importer#SourceTreeDescriptorDatabase.RecordErrorsTo>RecordErrorsTo()</a>.</p><p>This collector has the ability to determine exact line and column numbers of errors from the information given to it by the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a>.</p></div><hr><h3 id=SourceTreeDescriptorDatabase.FindFileByName.details><code>virtual bool SourceTreeDescriptorDatabase::FindFileByName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & filename,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find a file by file name.</p><p>Fills in in *output and returns true if found. Otherwise, returns false, leaving the contents of *output undefined.</p></div><hr><h3 id=SourceTreeDescriptorDatabase.FindFileContainingSymbol.details><code>virtual bool SourceTreeDescriptorDatabase::FindFileContainingSymbol(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & symbol_name,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find the file that declares the given fully-qualified symbol name.</p><p>If found, fills in *output and returns true, otherwise returns false and leaves *output undefined.</p></div><hr><h3 id=SourceTreeDescriptorDatabase.FindFileContainingExtension.details><code>virtual bool SourceTreeDescriptorDatabase::FindFileContainingExtension(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & containing_type,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int field_number,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find the file which defines an extension extending the given message type with the given field number.</p><p>If found, fills in *output and returns true, otherwise returns false and leaves *output undefined. containing_type must be a fully-qualified type name.</p></div><h2 id=Importer>class Importer</h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/importer.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>Simple interface for parsing .proto files.</p><p>This wraps the process of opening the file, parsing it with a <a href=google.protobuf.compiler.parser#Parser>Parser</a>, recursively parsing all its imports, and then cross-linking the results to produce a <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a>.</p><p>This is really just a thin wrapper around <a href=google.protobuf.compiler.importer#SourceTreeDescriptorDatabase>SourceTreeDescriptorDatabase</a>. You may find that <a href=google.protobuf.compiler.importer#SourceTreeDescriptorDatabase>SourceTreeDescriptorDatabase</a> is more flexible.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Importer.Importer><div style=padding-left:16px;text-indent:-16px><code><b>Importer</b>(<a href=google.protobuf.compiler.importer#SourceTree>SourceTree</a> * source_tree, <a href=google.protobuf.compiler.importer#MultiFileErrorCollector>MultiFileErrorCollector</a> * error_collector)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Importer.~Importer><div style=padding-left:16px;text-indent:-16px><code><b>~Importer</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=Importer.Import><div style=padding-left:16px;text-indent:-16px><code><b>Import</b>(const std::string & filename)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Import the given file and build a <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> representing it. <a href=#Importer.Import.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> *</code></td><td style=border-left-width:0 id=Importer.pool><div style=padding-left:16px;text-indent:-16px><code><b>pool</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> in which all imported FileDescriptors and their contents are stored.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Importer.AddUnusedImportTrackFile><div style=padding-left:16px;text-indent:-16px><code><b>AddUnusedImportTrackFile</b>(const std::string & file_name, bool is_error = false)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Importer.ClearUnusedImportTrackFiles><div style=padding-left:16px;text-indent:-16px><code><b>ClearUnusedImportTrackFiles</b>()</code></div></td></tr></table><hr><h3 id=Importer.Import.details><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Importer::Import(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & filename)</code></h3><div style=margin-left:16px><p>Import the given file and build a <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> representing it.</p><p>If the file is already in the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a>, the existing <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> will be returned. The <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> is property of the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a>, and will remain valid until it is destroyed. If any errors occur, they will be reported using the error collector and <a href=google.protobuf.compiler.importer#Importer.Import>Import()</a> will return NULL.</p><p>A particular <a href=google.protobuf.compiler.importer#Importer>Importer</a> object will only report errors for a particular file once. All future attempts to import the same file will return NULL without reporting any errors. The idea is that you might want to import a lot of files without seeing the same errors over and over again. If you want to see errors for the same files repeatedly, you can use a separate <a href=google.protobuf.compiler.importer#Importer>Importer</a> object to import each one (but use the same <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> so that they can be cross-linked).</p></div><h2 id=MultiFileErrorCollector>class MultiFileErrorCollector</h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/importer.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>If the importer encounters problems while trying to import the proto files, it reports them to a <a href=google.protobuf.compiler.importer#MultiFileErrorCollector>MultiFileErrorCollector</a>.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=MultiFileErrorCollector.MultiFileErrorCollector><div style=padding-left:16px;text-indent:-16px><code><b>MultiFileErrorCollector</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=MultiFileErrorCollector.~MultiFileErrorCollector><div style=padding-left:16px;text-indent:-16px><code><b>~MultiFileErrorCollector</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MultiFileErrorCollector.AddError><div style=padding-left:16px;text-indent:-16px><code><b>AddError</b>(const std::string & filename, int line, int column, const std::string & message) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Line and column numbers are zero-based. <a href=#MultiFileErrorCollector.AddError.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MultiFileErrorCollector.AddWarning><div style=padding-left:16px;text-indent:-16px><code><b>AddWarning</b>(const std::string & , int , int , const std::string & )</code></div></td></tr></table><hr><h3 id=MultiFileErrorCollector.AddError.details><code>virtual void MultiFileErrorCollector::AddError(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & filename,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int line,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int column,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & message) = 0</code></h3><div style=margin-left:16px><p>Line and column numbers are zero-based.</p><p>A line number of -1 indicates an error with the entire file (e.g. "not found").</p></div><h2 id=SourceTree>class SourceTree</h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/importer.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>Abstract interface which represents a directory tree containing proto files.</p><p>Used by the default implementation of <a href=google.protobuf.compiler.importer#Importer>Importer</a> to resolve import statements Most users will probably want to use the <a href=google.protobuf.compiler.importer#DiskSourceTree>DiskSourceTree</a> implementation, below.</p><p>Known subclasses:</p><ul><li><code><a href=google.protobuf.compiler.importer#DiskSourceTree>DiskSourceTree</a></code></li></ul><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=SourceTree.SourceTree><div style=padding-left:16px;text-indent:-16px><code><b>SourceTree</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=SourceTree.~SourceTree><div style=padding-left:16px;text-indent:-16px><code><b>~SourceTree</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> *</code></td><td style=border-left-width:0 id=SourceTree.Open><div style=padding-left:16px;text-indent:-16px><code><b>Open</b>(const std::string & filename) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Open the given file and return a stream that reads it, or NULL if not found. <a href=#SourceTree.Open.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=SourceTree.GetLastErrorMessage><div style=padding-left:16px;text-indent:-16px><code><b>GetLastErrorMessage</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If <a href=google.protobuf.compiler.importer#SourceTree.Open>Open()</a> returns NULL, calling this method immediately will return an description of the error. <a href=#SourceTree.GetLastErrorMessage.details>more...</a></div></td></tr></table><hr><h3 id=SourceTree.Open.details><code>virtual <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;SourceTree::Open(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & filename) = 0</code></h3><div style=margin-left:16px><p>Open the given file and return a stream that reads it, or NULL if not found.</p><p>The caller takes ownership of the returned object. The filename must be a path relative to the root of the source tree and must not contain "." or ".." components.</p></div><hr><h3 id=SourceTree.GetLastErrorMessage.details><code>virtual std::string SourceTree::GetLastErrorMessage()</code></h3><div style=margin-left:16px><p>If <a href=google.protobuf.compiler.importer#SourceTree.Open>Open()</a> returns NULL, calling this method immediately will return an description of the error.</p><p>Subclasses should implement this method and return a meaningful value for better error reporting.</p></div><h2 id=DiskSourceTree>class DiskSourceTree: public <a href=google.protobuf.compiler.importer#SourceTree>SourceTree</a></h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/importer.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>An implementation of <a href=google.protobuf.compiler.importer#SourceTree>SourceTree</a> which loads files from locations on disk.</p><p>Multiple mappings can be set up to map locations in the <a href=google.protobuf.compiler.importer#DiskSourceTree>DiskSourceTree</a> to locations in the physical filesystem.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=DiskSourceTree.DiskFileToVirtualFileResult><div style=padding-left:16px;text-indent:-16px><code><b>DiskFileToVirtualFileResult</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Return type for <a href=google.protobuf.compiler.importer#DiskSourceTree.DiskFileToVirtualFile>DiskFileToVirtualFile()</a>. <a href=#DiskSourceTree.DiskFileToVirtualFileResult.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=DiskSourceTree.DiskSourceTree><div style=padding-left:16px;text-indent:-16px><code><b>DiskSourceTree</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=DiskSourceTree.~DiskSourceTree><div style=padding-left:16px;text-indent:-16px><code><b>~DiskSourceTree</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=DiskSourceTree.MapPath><div style=padding-left:16px;text-indent:-16px><code><b>MapPath</b>(const std::string & virtual_path, const std::string & disk_path)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.map#Map>Map</a> a path on disk to a location in the <a href=google.protobuf.compiler.importer#SourceTree>SourceTree</a>. <a href=#DiskSourceTree.MapPath.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.compiler.importer#DiskSourceTree.DiskFileToVirtualFileResult>DiskFileToVirtualFileResult</a></code></td><td style=border-left-width:0 id=DiskSourceTree.DiskFileToVirtualFile><div style=padding-left:16px;text-indent:-16px><code><b>DiskFileToVirtualFile</b>(const std::string & disk_file, std::string * virtual_file, std::string * shadowing_disk_file)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Given a path to a file on disk, find a virtual path mapping to that file. <a href=#DiskSourceTree.DiskFileToVirtualFile.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=DiskSourceTree.VirtualFileToDiskFile><div style=padding-left:16px;text-indent:-16px><code><b>VirtualFileToDiskFile</b>(const std::string & virtual_file, std::string * disk_file)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Given a virtual path, find the path to the file on disk. <a href=#DiskSourceTree.VirtualFileToDiskFile.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.compiler.importer#SourceTree>SourceTree</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> *</code></td><td style=border-left-width:0 id=DiskSourceTree.Open><div style=padding-left:16px;text-indent:-16px><code><b>Open</b>(const std::string & filename)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Open the given file and return a stream that reads it, or NULL if not found. <a href=#DiskSourceTree.Open.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=DiskSourceTree.GetLastErrorMessage><div style=padding-left:16px;text-indent:-16px><code><b>GetLastErrorMessage</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If <a href=google.protobuf.compiler.importer#DiskSourceTree.Open>Open()</a> returns NULL, calling this method immediately will return an description of the error. <a href=#DiskSourceTree.GetLastErrorMessage.details>more...</a></div></td></tr></table><hr><h3 id=DiskSourceTree.DiskFileToVirtualFileResult.details><code>enum DiskSourceTree::DiskFileToVirtualFileResult {<br>&nbsp;&nbsp;SUCCESS,<br>&nbsp;&nbsp;SHADOWED,<br>&nbsp;&nbsp;CANNOT_OPEN,<br>&nbsp;&nbsp;NO_MAPPING<br>}</code></h3><div style=margin-left:16px><p>Return type for <a href=google.protobuf.compiler.importer#DiskSourceTree.DiskFileToVirtualFile>DiskFileToVirtualFile()</a>.</p><table><tr><td>SUCCESS</td><td></td></tr><tr><td>SHADOWED</td><td></td></tr><tr><td>CANNOT_OPEN</td><td></td></tr><tr><td>NO_MAPPING</td><td></td></tr></table></div><hr><h3 id=DiskSourceTree.MapPath.details><code>void DiskSourceTree::MapPath(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & virtual_path,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & disk_path)</code></h3><div style=margin-left:16px><p><a href=google.protobuf.map#Map>Map</a> a path on disk to a location in the <a href=google.protobuf.compiler.importer#SourceTree>SourceTree</a>.</p><p>The path may be either a file or a directory. If it is a directory, the entire tree under it will be mapped to the given virtual location. To map a directory to the root of the source tree, pass an empty string for virtual_path.</p><p>If multiple mapped paths apply when opening a file, they will be searched in order. For example, if you do:</p><pre>MapPath("bar", "foo/bar");
MapPath("", "baz");</pre><p>and then you do:</p><pre>Open("bar/qux");</pre><p>the <a href=google.protobuf.compiler.importer#DiskSourceTree>DiskSourceTree</a> will first try to open foo/bar/qux, then baz/bar/qux, returning the first one that opens successfully.</p><p>disk_path may be an absolute path or relative to the current directory, just like a path you'd pass to open().</p></div><hr><h3 id=DiskSourceTree.DiskFileToVirtualFile.details><code><a href=google.protobuf.compiler.importer#DiskSourceTree.DiskFileToVirtualFileResult>DiskFileToVirtualFileResult</a><br>&nbsp;&nbsp;&nbsp;&nbsp;DiskSourceTree::DiskFileToVirtualFile(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & disk_file,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * virtual_file,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * shadowing_disk_file)</code></h3><div style=margin-left:16px><p>Given a path to a file on disk, find a virtual path mapping to that file.</p><p>The first mapping created with <a href=google.protobuf.compiler.importer#DiskSourceTree.MapPath>MapPath()</a> whose disk_path contains the filename is used. However, that virtual path may not actually be usable to open the given file. Possible return values are:</p><ul><li>SUCCESS: The mapping was found. *virtual_file is filled in so that calling Open(*virtual_file) will open the file named by disk_file.</li><li>SHADOWED: A mapping was found, but using <a href=google.protobuf.compiler.importer#DiskSourceTree.Open>Open()</a> to open this virtual path will end up returning some different file. This is because some other mapping with a higher precedence also matches this virtual path and maps it to a different file that exists on disk. *virtual_file is filled in as it would be in the SUCCESS case. *shadowing_disk_file is filled in with the disk path of the file which would be opened if you were to call Open(*virtual_file).</li><li>CANNOT_OPEN: The mapping was found and was not shadowed, but the file specified cannot be opened. When this value is returned, errno will indicate the reason the file cannot be opened. *virtual_file will be set to the virtual path as in the SUCCESS case, even though it is not useful.</li><li>NO_MAPPING: Indicates that no mapping was found which contains this file.</li></ul></div><hr><h3 id=DiskSourceTree.VirtualFileToDiskFile.details><code>bool DiskSourceTree::VirtualFileToDiskFile(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & virtual_file,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * disk_file)</code></h3><div style=margin-left:16px><p>Given a virtual path, find the path to the file on disk.</p><p>Return true and update disk_file with the on-disk path if the file exists. Return false and leave disk_file untouched if the file doesn't exist.</p></div><hr><h3 id=DiskSourceTree.Open.details><code>virtual <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;DiskSourceTree::Open(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & filename)</code></h3><div style=margin-left:16px><p>Open the given file and return a stream that reads it, or NULL if not found.</p><p>The caller takes ownership of the returned object. The filename must be a path relative to the root of the source tree and must not contain "." or ".." components.</p></div><hr><h3 id=DiskSourceTree.GetLastErrorMessage.details><code>virtual std::string DiskSourceTree::GetLastErrorMessage()</code></h3><div style=margin-left:16px><p>If <a href=google.protobuf.compiler.importer#DiskSourceTree.Open>Open()</a> returns NULL, calling this method immediately will return an description of the error.</p><p>Subclasses should implement this method and return a meaningful value for better error reporting.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-7b92f6aa1c14f9adb2b9f0a754a8522a>1.4.9 -</h1><html devsite><head><title>java_generator.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>java_generator.h</h1><p><code>#include &lt;google/protobuf/compiler/java/java_generator.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::java</a></code></p><p>Generates Java code for a given .proto file.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#JavaGenerator>JavaGenerator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation which generates Java code.</div></td></tr></table><h2 id=JavaGenerator>class JavaGenerator: public <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a></h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/java/java_generator.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::java</a></code></p><p><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation which generates Java code.</p><p>If you create your own protocol compiler binary and you want it to support Java output, you can do so by registering an instance of this <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> with the <a href=google.protobuf.compiler.command_line_interface#CommandLineInterface>CommandLineInterface</a> in your main() function.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=JavaGenerator.JavaGenerator><div style=padding-left:16px;text-indent:-16px><code><b>JavaGenerator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=JavaGenerator.~JavaGenerator><div style=padding-left:16px;text-indent:-16px><code><b>~JavaGenerator</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=JavaGenerator.Generate><div style=padding-left:16px;text-indent:-16px><code><b>Generate</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file, const std::string & parameter, <a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context, std::string * error) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates code for the given proto file, generating one or more files in the given output directory. <a href=#JavaGenerator.Generate.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual uint64_t</code></td><td style=border-left-width:0 id=JavaGenerator.GetSupportedFeatures><div style=padding-left:16px;text-indent:-16px><code><b>GetSupportedFeatures</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Implement this to indicate what features this code generator supports. <a href=#JavaGenerator.GetSupportedFeatures.details>more...</a></div></td></tr></table><hr><h3 id=JavaGenerator.Generate.details><code>virtual bool JavaGenerator::Generate(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & parameter,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * error) const</code></h3><div style=margin-left:16px><p>Generates code for the given proto file, generating one or more files in the given output directory.</p><p>A parameter to be passed to the generator can be specified on the command line. This is intended to be used to pass generator specific parameters. It is empty if no parameter was given. ParseGeneratorParameter (below), can be used to accept multiple parameters within the single parameter command line flag.</p><p>Returns true if successful. Otherwise, sets *error to a description of the problem (e.g. "invalid parameter") and returns false.</p></div><hr><h3 id=JavaGenerator.GetSupportedFeatures.details><code>virtual uint64_t JavaGenerator::GetSupportedFeatures() const</code></h3><div style=margin-left:16px><p>Implement this to indicate what features this code generator supports.</p><p>This should be a bitwise OR of features from the Features enum in plugin.proto.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-fc93e9913230a52dedc38b9c1fb11779>1.4.10 -</h1><html devsite><head><title>java_names.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>java_names.h</h1><p><code>#include &lt;google/protobuf/compiler/java/java_names.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::java</a></code></p><p>Provides a mechanism for mapping a descriptor to the fully-qualified name of the corresponding Java class.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=ClassName><div style=padding-left:16px;text-indent:-16px><code><b>ClassName</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Requires: <a href=#ClassName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=ClassName><div style=padding-left:16px;text-indent:-16px><code><b>ClassName</b>(const <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Requires: <a href=#ClassName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=ClassName><div style=padding-left:16px;text-indent:-16px><code><b>ClassName</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Requires: <a href=#ClassName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=ClassName><div style=padding-left:16px;text-indent:-16px><code><b>ClassName</b>(const <a href=google.protobuf.descriptor#ServiceDescriptor>ServiceDescriptor</a> * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Requires: <a href=#ClassName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=FileJavaPackage><div style=padding-left:16px;text-indent:-16px><code><b>FileJavaPackage</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Requires: <a href=#FileJavaPackage.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=CapitalizedFieldName><div style=padding-left:16px;text-indent:-16px><code><b>CapitalizedFieldName</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Requires: <a href=#CapitalizedFieldName.details>more...</a></div></td></tr></table><hr><h3 id=ClassName.details><code>std::string java::ClassName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor)</code></h3><div style=margin-left:16px><p>Requires:</p><pre>descriptor != NULL</pre><p>Returns:</p><pre>The fully-qualified Java class name.</pre></div><hr><h3 id=ClassName.details><code>std::string java::ClassName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> * descriptor)</code></h3><div style=margin-left:16px><p>Requires:</p><pre>descriptor != NULL</pre><p>Returns:</p><pre>The fully-qualified Java class name.</pre></div><hr><h3 id=ClassName.details><code>std::string java::ClassName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * descriptor)</code></h3><div style=margin-left:16px><p>Requires:</p><pre>descriptor != NULL</pre><p>Returns:</p><pre>The fully-qualified Java class name.</pre></div><hr><h3 id=ClassName.details><code>std::string java::ClassName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#ServiceDescriptor>ServiceDescriptor</a> * descriptor)</code></h3><div style=margin-left:16px><p>Requires:</p><pre>descriptor != NULL</pre><p>Returns:</p><pre>The fully-qualified Java class name.</pre></div><hr><h3 id=FileJavaPackage.details><code>std::string java::FileJavaPackage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * descriptor)</code></h3><div style=margin-left:16px><p>Requires:</p><pre>descriptor != NULL</pre><p>Returns:</p><pre>Java package name.</pre></div><hr><h3 id=CapitalizedFieldName.details><code>std::string java::CapitalizedFieldName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * descriptor)</code></h3><div style=margin-left:16px><p>Requires:</p><pre>descriptor != NULL</pre><p>Returns:</p><pre>Capitalized camel case name field name.</pre></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-d5de939c0d829d7021a045cfae179e3c>1.4.11 -</h1><html devsite><head><title>javanano_generator.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>javanano_generator.h</h1><p><code>#include &lt;google/protobuf/compiler/javanano/javanano_generator.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::javanano</a></code></p><p>Generates Java nano code for a given .proto file.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#JavaNanoGenerator>JavaNanoGenerator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation which generates Java nano code.</div></td></tr></table><h2 id=JavaNanoGenerator>class JavaNanoGenerator: public <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a></h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/javanano/javanano_generator.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::javanano</a></code></p><p><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation which generates Java nano code.</p><p>If you create your own protocol compiler binary and you want it to support Java output for the nano runtime, you can do so by registering an instance of this <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> with the <a href=google.protobuf.compiler.command_line_interface#CommandLineInterface>CommandLineInterface</a> in your main() function.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=JavaNanoGenerator.JavaNanoGenerator><div style=padding-left:16px;text-indent:-16px><code><b>JavaNanoGenerator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=JavaNanoGenerator.~JavaNanoGenerator><div style=padding-left:16px;text-indent:-16px><code><b>~JavaNanoGenerator</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=JavaNanoGenerator.Generate><div style=padding-left:16px;text-indent:-16px><code><b>Generate</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file, const string & parameter, <a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context, string * error) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates code for the given proto file, generating one or more files in the given output directory. <a href=#JavaNanoGenerator.Generate.details>more...</a></div></td></tr></table><hr><h3 id=JavaNanoGenerator.Generate.details><code>virtual bool JavaNanoGenerator::Generate(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const string & parameter,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string * error) const</code></h3><div style=margin-left:16px><p>Generates code for the given proto file, generating one or more files in the given output directory.</p><p>A parameter to be passed to the generator can be specified on the command line. This is intended to be used to pass generator specific parameters. It is empty if no parameter was given. ParseGeneratorParameter (below), can be used to accept multiple parameters within the single parameter command line flag.</p><p>Returns true if successful. Otherwise, sets *error to a description of the problem (e.g. "invalid parameter") and returns false.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-8b5974e7552037e2c26059115e5e903e>1.4.12 -</h1><html devsite><head><title>js_generator.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>js_generator.h</h1><p><code>#include &lt;google/protobuf/compiler/js/js_generator.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::js</a></code></p><p>Generates JavaScript code for a given .proto file.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#GeneratorOptions>GeneratorOptions</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr><tr><td><div><code><a href=#Generator>Generator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=../google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation which generates a JavaScript source file and header.</div></td></tr></table><h2 id=GeneratorOptions>struct GeneratorOptions</h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/js/js_generator.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::js</a></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=GeneratorOptions.ImportStyle><div style=padding-left:16px;text-indent:-16px><code><b>ImportStyle</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>What style of imports should be used. <a href=#GeneratorOptions.ImportStyle.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=GeneratorOptions.OutputMode><div style=padding-left:16px;text-indent:-16px><code><b>OutputMode</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#GeneratorOptions.OutputMode.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=GeneratorOptions.output_dir><div style=padding-left:16px;text-indent:-16px><code><b>output_dir</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Output path.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=GeneratorOptions.namespace_prefix><div style=padding-left:16px;text-indent:-16px><code><b>namespace_prefix</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Namespace prefix.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=GeneratorOptions.binary><div style=padding-left:16px;text-indent:-16px><code><b>binary</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Enable binary-format support?</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>enum <a href=../google.protobuf.compiler.js_generator#GeneratorOptions.ImportStyle>google::protobuf::compiler::js::GeneratorOptions::ImportStyle</a></code></td><td style=border-left-width:0 id=GeneratorOptions.import_style><div style=padding-left:16px;text-indent:-16px><code><b>import_style</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=GeneratorOptions.add_require_for_enums><div style=padding-left:16px;text-indent:-16px><code><b>add_require_for_enums</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Add a <code>goog.requires()</code> call for each enum type used. <a href=#GeneratorOptions.add_require_for_enums.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=GeneratorOptions.testonly><div style=padding-left:16px;text-indent:-16px><code><b>testonly</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Set this as a test-only module via <code>goog.setTestOnly();</code>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=GeneratorOptions.library><div style=padding-left:16px;text-indent:-16px><code><b>library</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create a library with name &lt;name>_lib.js rather than a separate .js file per type?</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=GeneratorOptions.error_on_name_conflict><div style=padding-left:16px;text-indent:-16px><code><b>error_on_name_conflict</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Error if there are two types that would generate the same output file?</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=GeneratorOptions.extension><div style=padding-left:16px;text-indent:-16px><code><b>extension</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The extension to use for output file names.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=GeneratorOptions.one_output_file_per_input_file><div style=padding-left:16px;text-indent:-16px><code><b>one_output_file_per_input_file</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create a separate output file for each input file?</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=GeneratorOptions.annotate_code><div style=padding-left:16px;text-indent:-16px><code><b>annotate_code</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If true, we should append annotations as comments on the last line for generated .js file. <a href=#GeneratorOptions.annotate_code.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=GeneratorOptions.GeneratorOptions><div style=padding-left:16px;text-indent:-16px><code><b>GeneratorOptions</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=GeneratorOptions.ParseFromOptions><div style=padding-left:16px;text-indent:-16px><code><b>ParseFromOptions</b>(const std::vector&lt; std::pair&lt; std::string, std::string > > & options, std::string * error)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=GeneratorOptions.GetFileNameExtension><div style=padding-left:16px;text-indent:-16px><code><b>GetFileNameExtension</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the file name extension to use for generated code.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=../google.protobuf.compiler.js_generator#GeneratorOptions.OutputMode>OutputMode</a></code></td><td style=border-left-width:0 id=GeneratorOptions.output_mode><div style=padding-left:16px;text-indent:-16px><code><b>output_mode</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Indicates how to output the generated code based on the provided options.</div></td></tr></table><hr><h3 id=GeneratorOptions.ImportStyle.details><code>enum GeneratorOptions::ImportStyle {<br>&nbsp;&nbsp;kImportClosure,<br>&nbsp;&nbsp;kImportCommonJs,<br>&nbsp;&nbsp;kImportCommonJsStrict,<br>&nbsp;&nbsp;kImportBrowser,<br>&nbsp;&nbsp;kImportEs6<br>}</code></h3><div style=margin-left:16px><p>What style of imports should be used.</p><table><tr><td>kImportClosure</td><td>goog.require()</td></tr><tr><td>kImportCommonJs</td><td>require()</td></tr><tr><td>kImportCommonJsStrict</td><td>require() with no global export</td></tr><tr><td>kImportBrowser</td><td>no import statements</td></tr><tr><td>kImportEs6</td><td>import { member } from ''</td></tr></table></div><hr><h3 id=GeneratorOptions.OutputMode.details><code>enum GeneratorOptions::OutputMode {<br>&nbsp;&nbsp;kOneOutputFilePerInputFile,<br>&nbsp;&nbsp;kOneOutputFilePerSCC,<br>&nbsp;&nbsp;kEverythingInOneFile<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>kOneOutputFilePerInputFile</td><td>Create an output file for each input .proto file.</td></tr><tr><td>kOneOutputFilePerSCC</td><td>Create an output file for each type.</td></tr><tr><td>kEverythingInOneFile</td><td>Put everything in a single file named by the library option.</td></tr></table></div><hr><h3 id=GeneratorOptions.add_require_for_enums.details><code>bool GeneratorOptions::add_require_for_enums</code></h3><div style=margin-left:16px><p>Add a <code>goog.requires()</code> call for each enum type used.</p><p>If not set, a forward declaration with <code>goog.forwardDeclare</code> is produced instead.</p></div><hr><h3 id=GeneratorOptions.annotate_code.details><code>bool GeneratorOptions::annotate_code</code></h3><div style=margin-left:16px><p>If true, we should append annotations as comments on the last line for generated .js file.</p><p>Annotations used by tools like <a href=https://kythe.io></a> to provide cross-references between .js and .proto files. Annotations are encoded as base64 proto of GeneratedCodeInfo message (see descriptor.proto).</p></div><h2 id=Generator>class Generator: public <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a></h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/js/js_generator.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::js</a></code></p><p><a href=../google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation which generates a JavaScript source file and header.</p><p>If you create your own protocol compiler binary and you want it to support JavaScript output, you can do so by registering an instance of this <a href=../google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> with the <a href=../google.protobuf.compiler.command_line_interface#CommandLineInterface>CommandLineInterface</a> in your main() function.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Generator.Generator><div style=padding-left:16px;text-indent:-16px><code><b>Generator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=Generator.~Generator><div style=padding-left:16px;text-indent:-16px><code><b>~Generator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=Generator.Generate><div style=padding-left:16px;text-indent:-16px><code><b>Generate</b>(const <a href=../google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file, const std::string & parameter, <a href=../google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context, std::string * error) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates code for the given proto file, generating one or more files in the given output directory. <a href=#Generator.Generate.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=Generator.HasGenerateAll><div style=padding-left:16px;text-indent:-16px><code><b>HasGenerateAll</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This is no longer used, but this class is part of the opensource protobuf library, so it has to remain to keep vtables the same for the current version of the library. <a href=#Generator.HasGenerateAll.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=Generator.GenerateAll><div style=padding-left:16px;text-indent:-16px><code><b>GenerateAll</b>(const std::vector&lt; const <a href=../google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * > & files, const std::string & parameter, <a href=../google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context, std::string * error) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates code for all given proto files. <a href=#Generator.GenerateAll.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual uint64</code></td><td style=border-left-width:0 id=Generator.GetSupportedFeatures><div style=padding-left:16px;text-indent:-16px><code><b>GetSupportedFeatures</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Implement this to indicate what features this code generator supports. <a href=#Generator.GetSupportedFeatures.details>more...</a></div></td></tr></table><hr><h3 id=Generator.Generate.details><code>virtual bool Generator::Generate(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=../google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & parameter,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=../google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * error) const</code></h3><div style=margin-left:16px><p>Generates code for the given proto file, generating one or more files in the given output directory.</p><p>A parameter to be passed to the generator can be specified on the command line. This is intended to be used to pass generator specific parameters. It is empty if no parameter was given. ParseGeneratorParameter (below), can be used to accept multiple parameters within the single parameter command line flag.</p><p>Returns true if successful. Otherwise, sets *error to a description of the problem (e.g. "invalid parameter") and returns false.</p></div><hr><h3 id=Generator.HasGenerateAll.details><code>virtual bool Generator::HasGenerateAll() const</code></h3><div style=margin-left:16px><p>This is no longer used, but this class is part of the opensource protobuf library, so it has to remain to keep vtables the same for the current version of the library.</p><p>When protobufs does a api breaking change, the method can be removed.</p></div><hr><h3 id=Generator.GenerateAll.details><code>virtual bool Generator::GenerateAll(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; const <a href=../google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * > & files,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & parameter,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=../google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * error) const</code></h3><div style=margin-left:16px><p>Generates code for all given proto files.</p><p>WARNING: The canonical code generator design produces one or two output files per input .proto file, and we do not wish to encourage alternate designs.</p><p>A parameter is given as passed on the command line, as in |Generate()| above.</p><p>Returns true if successful. Otherwise, sets *error to a description of the problem (e.g. "invalid parameter") and returns false.</p></div><hr><h3 id=Generator.GetSupportedFeatures.details><code>virtual uint64 Generator::GetSupportedFeatures() const</code></h3><div style=margin-left:16px><p>Implement this to indicate what features this code generator supports.</p><p>This should be a bitwise OR of features from the Features enum in plugin.proto.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-e7588ac3926285d135f682109f59182f>1.4.13 -</h1><html devsite><head><title>objectivec_generator.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>objectivec_generator.h</h1><p><code>#include &lt;google/protobuf/compiler/objectivec/objectivec_generator.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::objectivec</a></code></p><p>Generates ObjectiveC code for a given .proto file.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#ObjectiveCGenerator>ObjectiveCGenerator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation which generates a ObjectiveC source file and header.</div></td></tr></table><h2 id=ObjectiveCGenerator>class ObjectiveCGenerator: public <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a></h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/objectivec/objectivec_generator.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::objectivec</a></code></p><p><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation which generates a ObjectiveC source file and header.</p><p>If you create your own protocol compiler binary and you want it to support ObjectiveC output, you can do so by registering an instance of this <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> with the <a href=google.protobuf.compiler.command_line_interface#CommandLineInterface>CommandLineInterface</a> in your main() function.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ObjectiveCGenerator.ObjectiveCGenerator><div style=padding-left:16px;text-indent:-16px><code><b>ObjectiveCGenerator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ObjectiveCGenerator.~ObjectiveCGenerator><div style=padding-left:16px;text-indent:-16px><code><b>~ObjectiveCGenerator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ObjectiveCGenerator.ObjectiveCGenerator><div style=padding-left:16px;text-indent:-16px><code><b>ObjectiveCGenerator</b>(const <a href=google.protobuf.compiler.objectivec_generator#ObjectiveCGenerator>ObjectiveCGenerator</a> & )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.compiler.objectivec_generator#ObjectiveCGenerator>ObjectiveCGenerator</a> &</code></td><td style=border-left-width:0 id="ObjectiveCGenerator.operator="><div style=padding-left:16px;text-indent:-16px><code><b>operator=</b>(const <a href=google.protobuf.compiler.objectivec_generator#ObjectiveCGenerator>ObjectiveCGenerator</a> & )</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ObjectiveCGenerator.HasGenerateAll><div style=padding-left:16px;text-indent:-16px><code><b>HasGenerateAll</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This is no longer used, but this class is part of the opensource protobuf library, so it has to remain to keep vtables the same for the current version of the library. <a href=#ObjectiveCGenerator.HasGenerateAll.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ObjectiveCGenerator.Generate><div style=padding-left:16px;text-indent:-16px><code><b>Generate</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file, const std::string & parameter, <a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context, std::string * error) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates code for the given proto file, generating one or more files in the given output directory. <a href=#ObjectiveCGenerator.Generate.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ObjectiveCGenerator.GenerateAll><div style=padding-left:16px;text-indent:-16px><code><b>GenerateAll</b>(const std::vector&lt; const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * > & files, const std::string & parameter, <a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context, std::string * error) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates code for all given proto files. <a href=#ObjectiveCGenerator.GenerateAll.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual uint64_t</code></td><td style=border-left-width:0 id=ObjectiveCGenerator.GetSupportedFeatures><div style=padding-left:16px;text-indent:-16px><code><b>GetSupportedFeatures</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Implement this to indicate what features this code generator supports. <a href=#ObjectiveCGenerator.GetSupportedFeatures.details>more...</a></div></td></tr></table><hr><h3 id=ObjectiveCGenerator.HasGenerateAll.details><code>virtual bool ObjectiveCGenerator::HasGenerateAll() const</code></h3><div style=margin-left:16px><p>This is no longer used, but this class is part of the opensource protobuf library, so it has to remain to keep vtables the same for the current version of the library.</p><p>When protobufs does a api breaking change, the method can be removed.</p></div><hr><h3 id=ObjectiveCGenerator.Generate.details><code>virtual bool ObjectiveCGenerator::Generate(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & parameter,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * error) const</code></h3><div style=margin-left:16px><p>Generates code for the given proto file, generating one or more files in the given output directory.</p><p>A parameter to be passed to the generator can be specified on the command line. This is intended to be used to pass generator specific parameters. It is empty if no parameter was given. ParseGeneratorParameter (below), can be used to accept multiple parameters within the single parameter command line flag.</p><p>Returns true if successful. Otherwise, sets *error to a description of the problem (e.g. "invalid parameter") and returns false.</p></div><hr><h3 id=ObjectiveCGenerator.GenerateAll.details><code>virtual bool ObjectiveCGenerator::GenerateAll(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * > & files,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & parameter,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * error) const</code></h3><div style=margin-left:16px><p>Generates code for all given proto files.</p><p>WARNING: The canonical code generator design produces one or two output files per input .proto file, and we do not wish to encourage alternate designs.</p><p>A parameter is given as passed on the command line, as in |Generate()| above.</p><p>Returns true if successful. Otherwise, sets *error to a description of the problem (e.g. "invalid parameter") and returns false.</p></div><hr><h3 id=ObjectiveCGenerator.GetSupportedFeatures.details><code>virtual uint64_t ObjectiveCGenerator::GetSupportedFeatures() const</code></h3><div style=margin-left:16px><p>Implement this to indicate what features this code generator supports.</p><p>This should be a bitwise OR of features from the Features enum in plugin.proto.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-782ea9d1a5801653384fd344e904fdb8>1.4.14 -</h1><html devsite><head><title>objectivec_helpers.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>objectivec_helpers.h</h1><p><code>#include &lt;google/protobuf/compiler/objectivec/objectivec_helpers.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::objectivec</a></code></p><p>Helper functions for generating ObjectiveC code.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#Options>Options</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generator options (see objectivec_generator.cc for a description of each):</div></td></tr><tr><td><div><code><a href=#TextFormatDecodeData>TextFormatDecodeData</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generate decode data needed for ObjC's GPBDecodeTextFormatName() to transform the input into the expected output.</div></td></tr><tr><td><div><code><a href=#LineConsumer>LineConsumer</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Helper for parsing simple files.</div></td></tr><tr><td><div><code><a href=#ImportWriter>ImportWriter</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Helper class for parsing framework import mappings and generating import statements.</div></td></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=ObjectiveCType><div style=padding-left:16px;text-indent:-16px><code><b>ObjectiveCType</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#ObjectiveCType.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=FlagType><div style=padding-left:16px;text-indent:-16px><code><b>FlagType</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#FlagType.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const char *const</code></td><td style=border-left-width:0 id=ProtobufLibraryFrameworkName><div style=padding-left:16px;text-indent:-16px><code><b>ProtobufLibraryFrameworkName</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The name the commonly used by the library when built as a framework. <a href=#ProtobufLibraryFrameworkName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=EscapeTrigraphs><div style=padding-left:16px;text-indent:-16px><code><b>EscapeTrigraphs</b>(const std::string & to_escape)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Escape C++ trigraphs by escaping question marks to "\?".</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TrimWhitespace><div style=padding-left:16px;text-indent:-16px><code><b>TrimWhitespace</b>(StringPiece * input)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Remove white space from either end of a StringPiece.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=IsRetainedName><div style=padding-left:16px;text-indent:-16px><code><b>IsRetainedName</b>(const std::string & name)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if the name requires a ns_returns_not_retained attribute applied to it.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=IsInitName><div style=padding-left:16px;text-indent:-16px><code><b>IsInitName</b>(const std::string & name)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if the name starts with "init" and will need to have special handling under ARC.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=FileClassPrefix><div style=padding-left:16px;text-indent:-16px><code><b>FileClassPrefix</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets the objc_class_prefix.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=FilePath><div style=padding-left:16px;text-indent:-16px><code><b>FilePath</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets the path of the file we're going to generate (sans the .pb.h extension). <a href=#FilePath.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=FilePathBasename><div style=padding-left:16px;text-indent:-16px><code><b>FilePathBasename</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Just like <a href=google.protobuf.compiler.objectivec_helpers#FilePath>FilePath()</a>, but without the directory part.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=FileClassName><div style=padding-left:16px;text-indent:-16px><code><b>FileClassName</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets the name of the root class we'll generate in the file. <a href=#FileClassName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=ClassName><div style=padding-left:16px;text-indent:-16px><code><b>ClassName</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>These return the fully-qualified class name corresponding to the given descriptor.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=ClassName><div style=padding-left:16px;text-indent:-16px><code><b>ClassName</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor, std::string * out_suffix_added)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=EnumName><div style=padding-left:16px;text-indent:-16px><code><b>EnumName</b>(const <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> * descriptor)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=EnumValueName><div style=padding-left:16px;text-indent:-16px><code><b>EnumValueName</b>(const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the fully-qualified name of the enum value corresponding to the the descriptor.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=EnumValueShortName><div style=padding-left:16px;text-indent:-16px><code><b>EnumValueShortName</b>(const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the name of the enum value corresponding to the descriptor.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=UnCamelCaseEnumShortName><div style=padding-left:16px;text-indent:-16px><code><b>UnCamelCaseEnumShortName</b>(const std::string & name)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reverse what an enum does.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=ExtensionMethodName><div style=padding-left:16px;text-indent:-16px><code><b>ExtensionMethodName</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the name to use for the extension (used as the method off the file's Root class).</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=FieldName><div style=padding-left:16px;text-indent:-16px><code><b>FieldName</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the transformed field name.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=FieldNameCapitalized><div style=padding-left:16px;text-indent:-16px><code><b>FieldNameCapitalized</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=OneofEnumName><div style=padding-left:16px;text-indent:-16px><code><b>OneofEnumName</b>(const <a href=google.protobuf.descriptor#OneofDescriptor>OneofDescriptor</a> * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the transformed oneof name.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=OneofName><div style=padding-left:16px;text-indent:-16px><code><b>OneofName</b>(const <a href=google.protobuf.descriptor#OneofDescriptor>OneofDescriptor</a> * descriptor)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=OneofNameCapitalized><div style=padding-left:16px;text-indent:-16px><code><b>OneofNameCapitalized</b>(const <a href=google.protobuf.descriptor#OneofDescriptor>OneofDescriptor</a> * descriptor)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=ObjCClass><div style=padding-left:16px;text-indent:-16px><code><b>ObjCClass</b>(const std::string & class_name)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns a symbol that can be used in C code to refer to an Objective C class without initializing the class.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=ObjCClassDeclaration><div style=padding-left:16px;text-indent:-16px><code><b>ObjCClassDeclaration</b>(const std::string & class_name)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Declares an Objective C class without initializing the class so that it can be refrerred to by ObjCClass.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=HasPreservingUnknownEnumSemantics><div style=padding-left:16px;text-indent:-16px><code><b>HasPreservingUnknownEnumSemantics</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=IsMapEntryMessage><div style=padding-left:16px;text-indent:-16px><code><b>IsMapEntryMessage</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=UnCamelCaseFieldName><div style=padding-left:16px;text-indent:-16px><code><b>UnCamelCaseFieldName</b>(const std::string & name, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reverse of the above.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template std::string</code></td><td style=border-left-width:0 id=GetOptionalDeprecatedAttribute><div style=padding-left:16px;text-indent:-16px><code><b>GetOptionalDeprecatedAttribute</b>(const TDescriptor * descriptor, const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file = NULL, bool preSpace = true, bool postNewline = false)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=GetCapitalizedType><div style=padding-left:16px;text-indent:-16px><code><b>GetCapitalizedType</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>ObjectiveCType</code></td><td style=border-left-width:0 id=GetObjectiveCType><div style=padding-left:16px;text-indent:-16px><code><b>GetObjectiveCType</b>(<a href=google.protobuf.descriptor#FieldDescriptor.Type>FieldDescriptor::Type</a> field_type)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>ObjectiveCType</code></td><td style=border-left-width:0 id=GetObjectiveCType><div style=padding-left:16px;text-indent:-16px><code><b>GetObjectiveCType</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=IsPrimitiveType><div style=padding-left:16px;text-indent:-16px><code><b>IsPrimitiveType</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=IsReferenceType><div style=padding-left:16px;text-indent:-16px><code><b>IsReferenceType</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=GPBGenericValueFieldName><div style=padding-left:16px;text-indent:-16px><code><b>GPBGenericValueFieldName</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=DefaultValue><div style=padding-left:16px;text-indent:-16px><code><b>DefaultValue</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=HasNonZeroDefaultValue><div style=padding-left:16px;text-indent:-16px><code><b>HasNonZeroDefaultValue</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=BuildFlagsString><div style=padding-left:16px;text-indent:-16px><code><b>BuildFlagsString</b>(const FlagType type, const std::vector&lt; std::string > & strings)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=BuildCommentsString><div style=padding-left:16px;text-indent:-16px><code><b>BuildCommentsString</b>(const <a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> & location, bool prefer_single_line)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Builds HeaderDoc/appledoc style comments out of the comments in the .proto file.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=ProtobufFrameworkImportSymbol><div style=padding-left:16px;text-indent:-16px><code><b>ProtobufFrameworkImportSymbol</b>(const std::string & framework_name)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the CPP symbol name to use as the gate for framework style imports for the given framework name to use.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=IsProtobufLibraryBundledProtoFile><div style=padding-left:16px;text-indent:-16px><code><b>IsProtobufLibraryBundledProtoFile</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Checks if the file is one of the proto's bundled with the library.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=ValidateObjCClassPrefixes><div style=padding-left:16px;text-indent:-16px><code><b>ValidateObjCClassPrefixes</b>(const std::vector&lt; const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * > & files, const <a href=google.protobuf.compiler.objectivec_helpers#Options>Options</a> & generation_options, std::string * out_error)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Checks the prefix for the given files and outputs any warnings as needed. <a href=#ValidateObjCClassPrefixes.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=ParseSimpleFile><div style=padding-left:16px;text-indent:-16px><code><b>ParseSimpleFile</b>(const std::string & path, <a href=google.protobuf.compiler.objectivec_helpers#LineConsumer>LineConsumer</a> * line_consumer, std::string * out_error)</code></div></td></tr></table><hr><h3 id=ObjectiveCType.details><code>enum objectivec::ObjectiveCType {<br>&nbsp;&nbsp;OBJECTIVECTYPE_INT32,<br>&nbsp;&nbsp;OBJECTIVECTYPE_UINT32,<br>&nbsp;&nbsp;OBJECTIVECTYPE_INT64,<br>&nbsp;&nbsp;OBJECTIVECTYPE_UINT64,<br>&nbsp;&nbsp;OBJECTIVECTYPE_FLOAT,<br>&nbsp;&nbsp;OBJECTIVECTYPE_DOUBLE,<br>&nbsp;&nbsp;OBJECTIVECTYPE_BOOLEAN,<br>&nbsp;&nbsp;OBJECTIVECTYPE_STRING,<br>&nbsp;&nbsp;OBJECTIVECTYPE_DATA,<br>&nbsp;&nbsp;OBJECTIVECTYPE_ENUM,<br>&nbsp;&nbsp;OBJECTIVECTYPE_MESSAGE<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>OBJECTIVECTYPE_INT32</td><td></td></tr><tr><td>OBJECTIVECTYPE_UINT32</td><td></td></tr><tr><td>OBJECTIVECTYPE_INT64</td><td></td></tr><tr><td>OBJECTIVECTYPE_UINT64</td><td></td></tr><tr><td>OBJECTIVECTYPE_FLOAT</td><td></td></tr><tr><td>OBJECTIVECTYPE_DOUBLE</td><td></td></tr><tr><td>OBJECTIVECTYPE_BOOLEAN</td><td></td></tr><tr><td>OBJECTIVECTYPE_STRING</td><td></td></tr><tr><td>OBJECTIVECTYPE_DATA</td><td></td></tr><tr><td>OBJECTIVECTYPE_ENUM</td><td></td></tr><tr><td>OBJECTIVECTYPE_MESSAGE</td><td></td></tr></table></div><hr><h3 id=FlagType.details><code>enum objectivec::FlagType {<br>&nbsp;&nbsp;FLAGTYPE_DESCRIPTOR_INITIALIZATION,<br>&nbsp;&nbsp;FLAGTYPE_EXTENSION,<br>&nbsp;&nbsp;FLAGTYPE_FIELD<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>FLAGTYPE_DESCRIPTOR_INITIALIZATION</td><td></td></tr><tr><td>FLAGTYPE_EXTENSION</td><td></td></tr><tr><td>FLAGTYPE_FIELD</td><td></td></tr></table></div><hr><h3 id=ProtobufLibraryFrameworkName.details><code>const char *const objectivec::ProtobufLibraryFrameworkName</code></h3><div style=margin-left:16px><p>The name the commonly used by the library when built as a framework.</p><p>This lines up to the name used in the CocoaPod.</p></div><hr><h3 id=FilePath.details><code>std::string objectivec::FilePath(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file)</code></h3><div style=margin-left:16px><p>Gets the path of the file we're going to generate (sans the .pb.h extension).</p><p>The path will be dependent on the objectivec package declared in the proto package.</p></div><hr><h3 id=FileClassName.details><code>std::string objectivec::FileClassName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file)</code></h3><div style=margin-left:16px><p>Gets the name of the root class we'll generate in the file.</p><p>This class is not meant for external consumption, but instead contains helpers that the rest of the classes need</p></div><hr><h3 id=ValidateObjCClassPrefixes.details><code>bool objectivec::ValidateObjCClassPrefixes(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * > & files,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.compiler.objectivec_helpers#Options>Options</a> & generation_options,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * out_error)</code></h3><div style=margin-left:16px><p>Checks the prefix for the given files and outputs any warnings as needed.</p><p>If there are flat out errors, then out_error is filled in with the first error and the result is false.</p></div><h2 id=Options>struct Options</h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/objectivec/objectivec_helpers.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::objectivec</a></code></p><p>Generator options (see objectivec_generator.cc for a description of each):</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=Options.expected_prefixes_path><div style=padding-left:16px;text-indent:-16px><code><b>expected_prefixes_path</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::vector&lt; std::string ></code></td><td style=border-left-width:0 id=Options.expected_prefixes_suppressions><div style=padding-left:16px;text-indent:-16px><code><b>expected_prefixes_suppressions</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=Options.generate_for_named_framework><div style=padding-left:16px;text-indent:-16px><code><b>generate_for_named_framework</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=Options.named_framework_to_proto_path_mappings_path><div style=padding-left:16px;text-indent:-16px><code><b>named_framework_to_proto_path_mappings_path</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=Options.runtime_import_prefix><div style=padding-left:16px;text-indent:-16px><code><b>runtime_import_prefix</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Options.Options><div style=padding-left:16px;text-indent:-16px><code><b>Options</b>()</code></div></td></tr></table><h2 id=TextFormatDecodeData>class TextFormatDecodeData</h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/objectivec/objectivec_helpers.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::objectivec</a></code></p><p>Generate decode data needed for ObjC's GPBDecodeTextFormatName() to transform the input into the expected output.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=TextFormatDecodeData.TextFormatDecodeData><div style=padding-left:16px;text-indent:-16px><code><b>TextFormatDecodeData</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=TextFormatDecodeData.~TextFormatDecodeData><div style=padding-left:16px;text-indent:-16px><code><b>~TextFormatDecodeData</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=TextFormatDecodeData.TextFormatDecodeData><div style=padding-left:16px;text-indent:-16px><code><b>TextFormatDecodeData</b>(const <a href=google.protobuf.compiler.objectivec_helpers#TextFormatDecodeData>TextFormatDecodeData</a> & )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.compiler.objectivec_helpers#TextFormatDecodeData>TextFormatDecodeData</a> &</code></td><td style=border-left-width:0 id="TextFormatDecodeData.operator="><div style=padding-left:16px;text-indent:-16px><code><b>operator=</b>(const <a href=google.protobuf.compiler.objectivec_helpers#TextFormatDecodeData>TextFormatDecodeData</a> & )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormatDecodeData.AddString><div style=padding-left:16px;text-indent:-16px><code><b>AddString</b>(int32 key, const std::string & input_for_decode, const std::string & desired_output)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>size_t</code></td><td style=border-left-width:0 id=TextFormatDecodeData.num_entries><div style=padding-left:16px;text-indent:-16px><code><b>num_entries</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=TextFormatDecodeData.Data><div style=padding-left:16px;text-indent:-16px><code><b>Data</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static std::string</code></td><td style=border-left-width:0 id=TextFormatDecodeData.DecodeDataForString><div style=padding-left:16px;text-indent:-16px><code><b>DecodeDataForString</b>(const std::string & input_for_decode, const std::string & desired_output)</code></div></td></tr></table><h2 id=LineConsumer>class LineConsumer</h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/objectivec/objectivec_helpers.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::objectivec</a></code></p><p>Helper for parsing simple files.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=LineConsumer.LineConsumer><div style=padding-left:16px;text-indent:-16px><code><b>LineConsumer</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=LineConsumer.~LineConsumer><div style=padding-left:16px;text-indent:-16px><code><b>~LineConsumer</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=LineConsumer.ConsumeLine><div style=padding-left:16px;text-indent:-16px><code><b>ConsumeLine</b>(const StringPiece & line, std::string * out_error) = 0</code></div></td></tr></table><h2 id=ImportWriter>class ImportWriter</h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/objectivec/objectivec_helpers.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::objectivec</a></code></p><p>Helper class for parsing framework import mappings and generating import statements.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ImportWriter.ImportWriter><div style=padding-left:16px;text-indent:-16px><code><b>ImportWriter</b>(const std::string & generate_for_named_framework, const std::string & named_framework_to_proto_path_mappings_path, const std::string & runtime_import_prefix, bool include_wkt_imports)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ImportWriter.~ImportWriter><div style=padding-left:16px;text-indent:-16px><code><b>~ImportWriter</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=ImportWriter.AddFile><div style=padding-left:16px;text-indent:-16px><code><b>AddFile</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file, const std::string & header_extension)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=ImportWriter.Print><div style=padding-left:16px;text-indent:-16px><code><b>Print</b>(<a href=google.protobuf.io.printer#Printer>io::Printer</a> * printer) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=ImportWriter.PrintRuntimeImports><div style=padding-left:16px;text-indent:-16px><code><b>PrintRuntimeImports</b>(<a href=google.protobuf.io.printer#Printer>io::Printer</a> * printer, const std::vector&lt; std::string > & header_to_import, const std::string & runtime_import_prefix, bool default_cpp_symbol = false)</code></div></td></tr></table></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-379bdfdc376126485613cd7077cf9f43>1.4.15 -</h1><html devsite><head><title>parser.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>parser.h</h1><p><code>#include &lt;google/protobuf/compiler/parser.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>Implements parsing of .proto files to FileDescriptorProtos.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#Parser>Parser</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Implements parsing of protocol definitions (such as .proto files).</div></td></tr><tr><td><div><code><a href=#SourceLocationTable>SourceLocationTable</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A table mapping (descriptor, ErrorLocation) pairs &ndash; as reported by <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> when validating descriptors &ndash; to line and column numbers within the original source code.</div></td></tr></table><h2 id=Parser>class Parser</h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/parser.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>Implements parsing of protocol definitions (such as .proto files).</p><p>Note that most users will be more interested in the <a href=google.protobuf.compiler.importer#Importer>Importer</a> class. <a href=google.protobuf.compiler.parser#Parser>Parser</a> is a lower-level class which simply converts a single .proto file to a FileDescriptorProto. It does not resolve import directives or perform many other kinds of validation needed to construct a complete <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a>.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Parser.Parser><div style=padding-left:16px;text-indent:-16px><code><b>Parser</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Parser.~Parser><div style=padding-left:16px;text-indent:-16px><code><b>~Parser</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Parser.Parse><div style=padding-left:16px;text-indent:-16px><code><b>Parse</b>(<a href=google.protobuf.io.tokenizer#Tokenizer>io::Tokenizer</a> * input, FileDescriptorProto * file)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Parse the entire input and construct a FileDescriptorProto representing it. <a href=#Parser.Parse.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Parser.RecordSourceLocationsTo><div style=padding-left:16px;text-indent:-16px><code><b>RecordSourceLocationsTo</b>(<a href=google.protobuf.compiler.parser#SourceLocationTable>SourceLocationTable</a> * location_table)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>DEPRECATED: New code should use the SourceCodeInfo embedded in the FileDescriptorProto. <a href=#Parser.RecordSourceLocationsTo.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Parser.RecordErrorsTo><div style=padding-left:16px;text-indent:-16px><code><b>RecordErrorsTo</b>(<a href=google.protobuf.io.tokenizer#ErrorCollector>io::ErrorCollector</a> * error_collector)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Requests that errors be recorded to the given ErrorCollector while parsing. <a href=#Parser.RecordErrorsTo.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=Parser.GetSyntaxIdentifier><div style=padding-left:16px;text-indent:-16px><code><b>GetSyntaxIdentifier</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the identifier used in the "syntax = " declaration, if one was seen during the last call to <a href=google.protobuf.compiler.parser#Parser.Parse>Parse()</a>, or the empty string otherwise.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Parser.SetRequireSyntaxIdentifier><div style=padding-left:16px;text-indent:-16px><code><b>SetRequireSyntaxIdentifier</b>(bool value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If set true, input files will be required to begin with a syntax identifier. <a href=#Parser.SetRequireSyntaxIdentifier.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Parser.SetStopAfterSyntaxIdentifier><div style=padding-left:16px;text-indent:-16px><code><b>SetStopAfterSyntaxIdentifier</b>(bool value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Call SetStopAfterSyntaxIdentifier(true) to tell the parser to stop parsing as soon as it has seen the syntax identifier, or lack thereof. <a href=#Parser.SetStopAfterSyntaxIdentifier.details>more...</a></div></td></tr></table><hr><h3 id=Parser.Parse.details><code>bool Parser::Parse(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.tokenizer#Tokenizer>io::Tokenizer</a> * input,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * file)</code></h3><div style=margin-left:16px><p>Parse the entire input and construct a FileDescriptorProto representing it.</p><p>Returns true if no errors occurred, false otherwise.</p></div><hr><h3 id=Parser.RecordSourceLocationsTo.details><code>void Parser::RecordSourceLocationsTo(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.compiler.parser#SourceLocationTable>SourceLocationTable</a> * location_table)</code></h3><div style=margin-left:16px><p>DEPRECATED: New code should use the SourceCodeInfo embedded in the FileDescriptorProto.</p><p>Requests that locations of certain definitions be recorded to the given <a href=google.protobuf.compiler.parser#SourceLocationTable>SourceLocationTable</a> while parsing. This can be used to look up exact line and column numbers for errors reported by <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> during validation. Set to NULL (the default) to discard source location information.</p></div><hr><h3 id=Parser.RecordErrorsTo.details><code>void Parser::RecordErrorsTo(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.tokenizer#ErrorCollector>io::ErrorCollector</a> * error_collector)</code></h3><div style=margin-left:16px><p>Requests that errors be recorded to the given ErrorCollector while parsing.</p><p>Set to NULL (the default) to discard error messages.</p></div><hr><h3 id=Parser.SetRequireSyntaxIdentifier.details><code>void Parser::SetRequireSyntaxIdentifier(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool value)</code></h3><div style=margin-left:16px><p>If set true, input files will be required to begin with a syntax identifier.</p><p>Otherwise, files may omit this. If a syntax identifier is provided, it must be 'syntax = "proto2";' and must appear at the top of this file regardless of whether or not it was required.</p></div><hr><h3 id=Parser.SetStopAfterSyntaxIdentifier.details><code>void Parser::SetStopAfterSyntaxIdentifier(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool value)</code></h3><div style=margin-left:16px><p>Call SetStopAfterSyntaxIdentifier(true) to tell the parser to stop parsing as soon as it has seen the syntax identifier, or lack thereof.</p><p>This is useful for quickly identifying the syntax of the file without parsing the whole thing. If this is enabled, no error will be recorded if the syntax identifier is something other than "proto2" (since presumably the caller intends to deal with that), but other kinds of errors (e.g. parse errors) will still be reported. When this is enabled, you may pass a NULL FileDescriptorProto to <a href=google.protobuf.compiler.parser#Parser.Parse>Parse()</a>.</p></div><h2 id=SourceLocationTable>class SourceLocationTable</h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/parser.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>A table mapping (descriptor, ErrorLocation) pairs &ndash; as reported by <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> when validating descriptors &ndash; to line and column numbers within the original source code.</p><p>This is semi-obsolete: FileDescriptorProto.source_code_info now contains far more complete information about source locations. However, as of this writing you still need to use <a href=google.protobuf.compiler.parser#SourceLocationTable>SourceLocationTable</a> when integrating with <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a>.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=SourceLocationTable.SourceLocationTable><div style=padding-left:16px;text-indent:-16px><code><b>SourceLocationTable</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=SourceLocationTable.~SourceLocationTable><div style=padding-left:16px;text-indent:-16px><code><b>~SourceLocationTable</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=SourceLocationTable.Find><div style=padding-left:16px;text-indent:-16px><code><b>Find</b>(const <a href=google.protobuf.message#Message>Message</a> * descriptor, <a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector.ErrorLocation>DescriptorPool::ErrorCollector::ErrorLocation</a> location, int * line, int * column) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Finds the precise location of the given error and fills in *line and *column with the line and column numbers. <a href=#SourceLocationTable.Find.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=SourceLocationTable.FindImport><div style=padding-left:16px;text-indent:-16px><code><b>FindImport</b>(const <a href=google.protobuf.message#Message>Message</a> * descriptor, const std::string & name, int * line, int * column) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=SourceLocationTable.Add><div style=padding-left:16px;text-indent:-16px><code><b>Add</b>(const <a href=google.protobuf.message#Message>Message</a> * descriptor, <a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector.ErrorLocation>DescriptorPool::ErrorCollector::ErrorLocation</a> location, int line, int column)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Adds a location to the table.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=SourceLocationTable.AddImport><div style=padding-left:16px;text-indent:-16px><code><b>AddImport</b>(const <a href=google.protobuf.message#Message>Message</a> * descriptor, const std::string & name, int line, int column)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=SourceLocationTable.Clear><div style=padding-left:16px;text-indent:-16px><code><b>Clear</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Clears the contents of the table.</div></td></tr></table><hr><h3 id=SourceLocationTable.Find.details><code>bool SourceLocationTable::Find(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> * descriptor,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector.ErrorLocation>DescriptorPool::ErrorCollector::ErrorLocation</a> location,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * line,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * column) const</code></h3><div style=margin-left:16px><p>Finds the precise location of the given error and fills in *line and *column with the line and column numbers.</p><p>If not found, sets *line to -1 and *column to 0 (since line = -1 is used to mean "error has no exact
location" in the ErrorCollector interface). Returns true if found, false otherwise.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-ae699e060fc9b0aa12442e4903212b7f>1.4.16 -</h1><html devsite><head><title>plugin.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>plugin.h</h1><p><code>#include &lt;google/protobuf/compiler/plugin.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>Front-end for protoc code generator plugins written in C++.</p><p>To implement a protoc plugin in C++, simply write an implementation of <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a>, then create a main() function like:</p><pre>int main(int argc, char* argv[[]]) {
  MyCodeGenerator generator;
  return google::protobuf::compiler::PluginMain(argc, argv, &amp;generator);
}</pre><p>You must link your plugin against libprotobuf and libprotoc.</p><p>The core part of PluginMain is to invoke the given <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> on a CodeGeneratorRequest to generate a CodeGeneratorResponse. This part is abstracted out and made into function GenerateCode so that it can be reused, for example, to implement a variant of PluginMain that does some preprocessing on the input CodeGeneratorRequest before feeding the request to the given code generator.</p><p>To get protoc to use the plugin, do one of the following:</p><ul><li>Place the plugin binary somewhere in the PATH and give it the name "protoc-gen-NAME" (replacing "NAME" with the name of your plugin). If you then invoke protoc with the parameter &ndash;NAME_out=OUT_DIR (again, replace "NAME" with your plugin's name), protoc will invoke your plugin to generate the output, which will be placed in OUT_DIR.</li><li><p>Place the plugin binary anywhere, with any name, and pass the &ndash;plugin parameter to protoc to direct it to your plugin like so:</p><pre>protoc --plugin=protoc-gen-NAME=path/to/mybinary --NAME_out=OUT_DIR</pre><p>On Windows, make sure to include the .exe suffix:</p><pre>protoc --plugin=protoc-gen-NAME=path/to/mybinary.exe --NAME_out=OUT_DIR</pre></li></ul><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=PluginMain><div style=padding-left:16px;text-indent:-16px><code><b>PluginMain</b>(int argc, char * argv, const <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> * generator)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Implements main() for a protoc plugin exposing the given code generator.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=GenerateCode><div style=padding-left:16px;text-indent:-16px><code><b>GenerateCode</b>(const CodeGeneratorRequest & request, const <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> & generator, CodeGeneratorResponse * response, std::string * error_msg)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates code using the given code generator. <a href=#GenerateCode.details>more...</a></div></td></tr></table><hr><h3 id=GenerateCode.details><code>bool compiler::GenerateCode(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const CodeGeneratorRequest & request,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> & generator,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CodeGeneratorResponse * response,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * error_msg)</code></h3><div style=margin-left:16px><p>Generates code using the given code generator.</p><p>Returns true if the code generation is successful. If the code generation fails, error_msg may be populated to describe the failure cause.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-4aeff5f3b1ae863d0766176598b96b50>1.4.17 -</h1><html devsite><head><title>plugin.pb.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>plugin.pb.h</h1><p><code>#include &lt;google/protobuf/compiler/plugin.pb.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler</a></code></p><p>API for protoc plugins.</p><p>This file defines a set of protocol message classes which make up the API to protoc code generator plugins. Plugins written in C++ should probably build on the API in <a href=google.protobuf.compiler.plugin>plugin.h</a> instead of dealing with the protobuf-level API, but plugins in other languages will need to deal with the raw messages as defined below.</p><p>The protocol compiler currently doesn't support auto-generated documentation, hence this page contains no descriptions. This file was generated by the protocol compiler from <code>plugin.proto</code>, whose contents are as follows:</p><pre>// Protocol Buffers - Google's data interchange format
// Copyright 2008 Google Inc.  All rights reserved.
// https://developers.google.com/protocol-buffers/
//
// Redistribution and use in source and binary forms, with or without
// modification, are permitted provided that the following conditions are
// met:
//
//     * Redistributions of source code must retain the above copyright
// notice, this list of conditions and the following disclaimer.
//     * Redistributions in binary form must reproduce the above
// copyright notice, this list of conditions and the following disclaimer
// in the documentation and/or other materials provided with the
// distribution.
//     * Neither the name of Google Inc. nor the names of its
// contributors may be used to endorse or promote products derived from
// this software without specific prior written permission.
//
// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
// "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
<p>// Author: <a href=mailto:kenton@google.com>kenton@google.com</a> (Kenton Varda)
//
// WARNING:  The plugin interface is currently EXPERIMENTAL and is subject to
//   change.
//
// protoc (aka the Protocol Compiler) can be extended via plugins.  A plugin is
// just a program that reads a CodeGeneratorRequest from stdin and writes a
// CodeGeneratorResponse to stdout.
//
// Plugins written using C++ can use google/protobuf/compiler/plugin.h instead
// of dealing with the raw protocol defined here.
//
// A plugin executable needs only to be placed somewhere in the path.  The
// plugin should be named &ldquo;protoc-gen-$NAME&rdquo;, and will then be used when the
// flag &ldquo;&ndash;${NAME}_out&rdquo; is passed to protoc.</p>
<p>syntax = &ldquo;proto2&rdquo;;</p>
<p>package google.protobuf.compiler;
option java_package = &ldquo;com.google.protobuf.compiler&rdquo;;
option java_outer_classname = &ldquo;PluginProtos&rdquo;;</p>
<p>option go_package = &ldquo;google.golang.org/protobuf/types/pluginpb&rdquo;;</p>
<p>import &ldquo;google/protobuf/descriptor.proto&rdquo;;</p>
<p>// The version number of protocol compiler.
message Version {
optional int32 major = 1;
optional int32 minor = 2;
optional int32 patch = 3;
// A suffix for alpha, beta or rc release, e.g., &ldquo;alpha-1&rdquo;, &ldquo;rc2&rdquo;. It should
// be empty for mainline stable releases.
optional string suffix = 4;
}</p>
<p>// An encoded CodeGeneratorRequest is written to the plugin&rsquo;s stdin.
message CodeGeneratorRequest {
// The .proto files that were explicitly listed on the command-line.  The
// code generator should generate code only for these files.  Each file&rsquo;s
// descriptor will be included in proto_file, below.
repeated string file_to_generate = 1;</p>
<p>// The generator parameter passed on the command-line.
optional string parameter = 2;</p>
<p>// FileDescriptorProtos for all files in files_to_generate and everything
// they import.  The files will appear in topological order, so each file
// appears before any file that imports it.
//
// protoc guarantees that all proto_files will be written after
// the fields above, even though this is not technically guaranteed by the
// protobuf wire format.  This theoretically could allow a plugin to stream
// in the FileDescriptorProtos and handle them one by one rather than read
// the entire set into memory at once.  However, as of this writing, this
// is not similarly optimized on protoc&rsquo;s end &ndash; it will store all fields in
// memory at once before sending them to the plugin.
//
// Type names of fields and extensions in the FileDescriptorProto are always
// fully qualified.
repeated FileDescriptorProto proto_file = 15;</p>
<p>// The version number of protocol compiler.
optional Version compiler_version = 3;</p>
<p>}</p>
<p>// The plugin writes an encoded CodeGeneratorResponse to stdout.
message CodeGeneratorResponse {
// Error message.  If non-empty, code generation failed.  The plugin process
// should exit with status code zero even if it reports an error in this way.
//
// This should be used to indicate errors in .proto files which prevent the
// code generator from generating correct code.  Errors which indicate a
// problem in protoc itself &ndash; such as the input CodeGeneratorRequest being
// unparseable &ndash; should be reported by writing a message to stderr and
// exiting with a non-zero status code.
optional string error = 1;</p>
<p>// A bitmask of supported features that the code generator supports.
// This is a bitwise &ldquo;or&rdquo; of values from the Feature enum.
optional uint64 supported_features = 2;</p>
<p>// Sync with code_generator.h.
enum Feature {
FEATURE_NONE = 0;
FEATURE_PROTO3_OPTIONAL = 1;
}</p>
<p>// Represents a single generated file.
message File {
// The file name, relative to the output directory.  The name must not
// contain &ldquo;.&rdquo; or &ldquo;..&rdquo; components and must be relative, not be absolute (so,
// the file cannot lie outside the output directory).  &ldquo;/&rdquo; must be used as
// the path separator, not &ldquo;&quot;.
//
// If the name is omitted, the content will be appended to the previous
// file.  This allows the generator to break large files into small chunks,
// and allows the generated text to be streamed back to protoc so that large
// files need not reside completely in memory at one time.  Note that as of
// this writing protoc does not optimize for this &ndash; it will read the entire
// CodeGeneratorResponse before writing files to disk.
optional string name = 1;</p>
<pre><code>// If non-empty, indicates that the named file should already exist, and the
// content here is to be inserted into that file at a defined insertion
// point.  This feature allows a code generator to extend the output
// produced by another code generator.  The original generator may provide
// insertion points by placing special annotations in the file that look
// like:
//   @@protoc_insertion_point(NAME)
// The annotation can have arbitrary text before and after it on the line,
// which allows it to be placed in a comment.  NAME should be replaced with
// an identifier naming the point -- this is what other generators will use
// as the insertion_point.  Code inserted at this point will be placed
// immediately above the line containing the insertion point (thus multiple
// insertions to the same point will come out in the order they were added).
// The double-@ is intended to make it unlikely that the generated code
// could contain things that look like insertion points by accident.
//
// For example, the C++ code generator places the following line in the
// .pb.h files that it generates:
//   // @@protoc_insertion_point(namespace_scope)
// This line appears within the scope of the file's package namespace, but
// outside of any particular class.  Another plugin can then specify the
// insertion_point &quot;namespace_scope&quot; to generate additional classes or
// other declarations that should be placed in this scope.
//
// Note that if the line containing the insertion point begins with
// whitespace, the same whitespace will be added to every line of the
// inserted text.  This is useful for languages like Python, where
// indentation matters.  In these languages, the insertion point comment
// should be indented the same amount as any inserted code will need to be
// in order to work correctly in that context.
//
// The code generator that generates the initial file and the one which
// inserts into it must both run as part of a single invocation of protoc.
// Code generators are executed in the order in which they appear on the
// command line.
//
// If |insertion_point| is present, |name| must also be present.
optional string insertion_point = 2;

// The file contents.
optional string content = 15;

// Information describing the file content being inserted. If an insertion
// point is used, this information will be appropriately offset and inserted
// into the code generation metadata for the generated files.
optional GeneratedCodeInfo generated_code_info = 16;
</code></pre><p>}
repeated File file = 15;
}</pre><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>const ::protobuf::internal::DescriptorTable</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;descriptor_table_google_2fprotobuf_2fcompiler_2fplugin_2eproto&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>descriptor_table_google_2fprotobuf_2fcompiler_2fplugin_2eproto</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_NAMESPACE_CLOSE PROTOBUF_NAMESPACE_OPEN protobuf::compiler::CodeGeneratorRequest *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::compiler::CodeGeneratorRequest >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::compiler::CodeGeneratorRequest ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::compiler::CodeGeneratorResponse *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::compiler::CodeGeneratorResponse >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::compiler::CodeGeneratorResponse ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::compiler::CodeGeneratorResponse_File *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::compiler::CodeGeneratorResponse_File >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::compiler::CodeGeneratorResponse_File ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::compiler::Version *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::compiler::Version >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::compiler::Version ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const EnumDescriptor *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;GetEnumDescriptor&lt; protobuf::compiler::CodeGeneratorResponse_Feature >"><div style=padding-left:16px;text-indent:-16px><code><b>GetEnumDescriptor&lt; protobuf::compiler::CodeGeneratorResponse_Feature ></b>()</code></div></td></tr></table></body></html></p></div><div class=td-content style=page-break-before:always><h1 id=pg-b649e6469c663df30d7912d3bbed219e>1.4.18 -</h1><html devsite><head><title>python_generator.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>python_generator.h</h1><p><code>#include &lt;google/protobuf/compiler/python/python_generator.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::python</a></code></p><p>Generates Python code for a given .proto file.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#Generator>Generator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation for generated Python protocol buffer classes.</div></td></tr></table><h2 id=Generator>class Generator: public <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a></h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/python/python_generator.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::python</a></code></p><p><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation for generated Python protocol buffer classes.</p><p>If you create your own protocol compiler binary and you want it to support Python output, you can do so by registering an instance of this <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> with the <a href=google.protobuf.compiler.command_line_interface#CommandLineInterface>CommandLineInterface</a> in your main() function.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Generator.Generator><div style=padding-left:16px;text-indent:-16px><code><b>Generator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=Generator.~Generator><div style=padding-left:16px;text-indent:-16px><code><b>~Generator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=Generator.Generate><div style=padding-left:16px;text-indent:-16px><code><b>Generate</b>(const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> * file, const std::string & parameter, <a href=google.protobuf.compiler.code_generator#GeneratorContext>GeneratorContext</a> * generator_context, std::string * error) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> methods.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual uint64_t</code></td><td style=border-left-width:0 id=Generator.GetSupportedFeatures><div style=padding-left:16px;text-indent:-16px><code><b>GetSupportedFeatures</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Implement this to indicate what features this code generator supports. <a href=#Generator.GetSupportedFeatures.details>more...</a></div></td></tr></table><hr><h3 id=Generator.GetSupportedFeatures.details><code>virtual uint64_t Generator::GetSupportedFeatures() const</code></h3><div style=margin-left:16px><p>Implement this to indicate what features this code generator supports.</p><p>This should be a bitwise OR of features from the Features enum in plugin.proto.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-f56a1456aa7cfc89f0e1f5bdc258bcd2>1.4.19 -</h1><html devsite><head><title>ruby_generator.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>ruby_generator.h</h1><p><code>#include &lt;google/protobuf/compiler/ruby/ruby_generator.h><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::ruby</a></code></p><p>Generates Ruby code for a given .proto file.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#Generator>Generator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation for generated Ruby protocol buffer classes.</div></td></tr></table><h2 id=Generator>class Generator: public <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a></h2><p><code>#include &lt;<a href=#>google/protobuf/compiler/ruby/ruby_generator.h</a>><br>namespace <a href=#google.protobuf.compiler>google::protobuf::compiler::ruby</a></code></p><p><a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> implementation for generated Ruby protocol buffer classes.</p><p>If you create your own protocol compiler binary and you want it to support Ruby output, you can do so by registering an instance of this <a href=google.protobuf.compiler.code_generator#CodeGenerator>CodeGenerator</a> with the <a href=google.protobuf.compiler.command_line_interface#CommandLineInterface>CommandLineInterface</a> in your main() function.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr></table></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-8229fb8294e9a918160a6eb878e57756>1.4.20 -</h1><html devsite><head><title>descriptor.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>descriptor.h</h1><p><code>#include &lt;google/protobuf/descriptor.h><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>This file contains classes which describe a type of protocol message.</p><p>You can use a message's descriptor to learn at runtime what fields it contains and what the types of those fields are. The <a href=google.protobuf.message#Message>Message</a> interface also allows you to dynamically access and modify individual fields by passing the <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> of the field you are interested in.</p><p>Most users will not care about descriptors, because they will write code specific to certain protocol types and will simply use the classes generated by the protocol compiler directly. Advanced users who want to operate on arbitrary types (not known at compile time) may want to read descriptors in order to learn about the contents of a message. A very small number of users will want to construct their own Descriptors, either because they are implementing <a href=google.protobuf.message#Message>Message</a> manually or because they are writing something like the protocol compiler.</p><p>For an example of how you might use descriptors, see the code example at the top of <a href=google.protobuf.message>message.h</a>.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#SourceLocation>SourceLocation</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>NB, all indices are zero-based.</div></td></tr><tr><td><div><code><a href=#DebugStringOptions>DebugStringOptions</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Options when generating machine-parsable output from a descriptor with DebugString().</div></td></tr><tr><td><div><code><a href=#Descriptor>Descriptor</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Describes a type of protocol message, or a particular group within a message.</div></td></tr><tr><td><div><code><a href=#Descriptor.ExtensionRange>Descriptor::ExtensionRange</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A range of field numbers which are designated for third-party extensions.</div></td></tr><tr><td><div><code><a href=#Descriptor.ReservedRange>Descriptor::ReservedRange</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A range of reserved field numbers.</div></td></tr><tr><td><div><code><a href=#FieldDescriptor>FieldDescriptor</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Describes a single field of a message.</div></td></tr><tr><td><div><code><a href=#OneofDescriptor>OneofDescriptor</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Describes a oneof defined in a message type.</div></td></tr><tr><td><div><code><a href=#EnumDescriptor>EnumDescriptor</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Describes an enum type defined in a .proto file.</div></td></tr><tr><td><div><code><a href=#EnumDescriptor.ReservedRange>EnumDescriptor::ReservedRange</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A range of reserved field numbers.</div></td></tr><tr><td><div><code><a href=#EnumValueDescriptor>EnumValueDescriptor</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Describes an individual enum constant of a particular type.</div></td></tr><tr><td><div><code><a href=#ServiceDescriptor>ServiceDescriptor</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Describes an RPC service.</div></td></tr><tr><td><div><code><a href=#MethodDescriptor>MethodDescriptor</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Describes an individual service method.</div></td></tr><tr><td><div><code><a href=#FileDescriptor>FileDescriptor</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Describes a whole .proto file.</div></td></tr><tr><td><div><code><a href=#DescriptorPool>DescriptorPool</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Used to construct descriptors.</div></td></tr><tr><td><div><code><a href=#DescriptorPool.ErrorCollector>DescriptorPool::ErrorCollector</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>When converting a FileDescriptorProto to a <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a>, various errors might be detected in the input.</div></td></tr></table><h2 id=SourceLocation>struct SourceLocation</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>NB, all indices are zero-based.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=SourceLocation.start_line><div style=padding-left:16px;text-indent:-16px><code><b>start_line</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=SourceLocation.end_line><div style=padding-left:16px;text-indent:-16px><code><b>end_line</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=SourceLocation.start_column><div style=padding-left:16px;text-indent:-16px><code><b>start_column</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=SourceLocation.end_column><div style=padding-left:16px;text-indent:-16px><code><b>end_column</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=SourceLocation.leading_comments><div style=padding-left:16px;text-indent:-16px><code><b>leading_comments</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Doc comments found at the source location. <a href=#SourceLocation.leading_comments.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=SourceLocation.trailing_comments><div style=padding-left:16px;text-indent:-16px><code><b>trailing_comments</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::vector&lt; std::string ></code></td><td style=border-left-width:0 id=SourceLocation.leading_detached_comments><div style=padding-left:16px;text-indent:-16px><code><b>leading_detached_comments</b></code></div></td></tr></table><hr><h3 id=SourceLocation.leading_comments.details><code>std::string SourceLocation::leading_comments</code></h3><div style=margin-left:16px><p>Doc comments found at the source location.</p><p>See the comments in SourceCodeInfo.Location (descriptor.proto) for details.</p></div><h2 id=DebugStringOptions>struct DebugStringOptions</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Options when generating machine-parsable output from a descriptor with DebugString().</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=DebugStringOptions.include_comments><div style=padding-left:16px;text-indent:-16px><code><b>include_comments</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>include original user comments as recorded in <a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> entries. <a href=#DebugStringOptions.include_comments.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=DebugStringOptions.elide_group_body><div style=padding-left:16px;text-indent:-16px><code><b>elide_group_body</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If true, elide the braced body in the debug string.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=DebugStringOptions.elide_oneof_body><div style=padding-left:16px;text-indent:-16px><code><b>elide_oneof_body</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=DebugStringOptions.DebugStringOptions><div style=padding-left:16px;text-indent:-16px><code><b>DebugStringOptions</b>()</code></div></td></tr></table><hr><h3 id=DebugStringOptions.include_comments.details><code>bool DebugStringOptions::include_comments</code></h3><div style=margin-left:16px><p>include original user comments as recorded in <a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> entries.</p><p>N.B. that this must be |false| by default: several other pieces of code (for example, the C++ code generation for fields in the proto compiler) rely on DebugString() output being unobstructed by user comments.</p></div><h2 id=Descriptor>class Descriptor</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Describes a type of protocol message, or a particular group within a message.</p><p>To obtain the <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> for a given message object, call <a href=google.protobuf.message#Message.GetDescriptor>Message::GetDescriptor()</a>. Generated message classes also have a static method called descriptor() which returns the type's descriptor. Use <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> to construct your own descriptors.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=Descriptor.WellKnownType><div style=padding-left:16px;text-indent:-16px><code><b>WellKnownType</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#Descriptor.WellKnownType.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Descriptor.Proto><div style=padding-left:16px;text-indent:-16px><code>DescriptorProto <b>Proto</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=Descriptor.name><div style=padding-left:16px;text-indent:-16px><code><b>name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The name of the message type, not including its scope.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=Descriptor.full_name><div style=padding-left:16px;text-indent:-16px><code><b>full_name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The fully-qualified name of the message type, scope delimited by periods. <a href=#Descriptor.full_name.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Descriptor.index><div style=padding-left:16px;text-indent:-16px><code><b>index</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Index of this descriptor within the file or containing type's message type array.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.file><div style=padding-left:16px;text-indent:-16px><code><b>file</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The .proto file in which this message type was defined. Never nullptr.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.containing_type><div style=padding-left:16px;text-indent:-16px><code><b>containing_type</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If this <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> describes a nested type, this returns the type in which it is nested. <a href=#Descriptor.containing_type.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const MessageOptions &</code></td><td style=border-left-width:0 id=Descriptor.options><div style=padding-left:16px;text-indent:-16px><code><b>options</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get options for this message type. <a href=#Descriptor.options.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Descriptor.CopyTo><div style=padding-left:16px;text-indent:-16px><code><b>CopyTo</b>(DescriptorProto * proto) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write the contents of this <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> into the given DescriptorProto. <a href=#Descriptor.CopyTo.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=Descriptor.DebugString><div style=padding-left:16px;text-indent:-16px><code><b>DebugString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write the contents of this descriptor in a human-readable form. <a href=#Descriptor.DebugString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=Descriptor.DebugStringWithOptions><div style=padding-left:16px;text-indent:-16px><code><b>DebugStringWithOptions</b>(const <a href=google.protobuf.descriptor#DebugStringOptions>DebugStringOptions</a> & options) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Similar to <a href=google.protobuf.descriptor#Descriptor.DebugString>DebugString()</a>, but additionally takes options (e.g., include original user comments in output).</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Descriptor.is_placeholder><div style=padding-left:16px;text-indent:-16px><code><b>is_placeholder</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if this is a placeholder for an unknown type. <a href=#Descriptor.is_placeholder.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.descriptor#Descriptor.WellKnownType>WellKnownType</a></code></td><td style=border-left-width:0 id=Descriptor.well_known_type><div style=padding-left:16px;text-indent:-16px><code><b>well_known_type</b>() const</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Field stuff</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Descriptor.field_count><div style=padding-left:16px;text-indent:-16px><code><b>field_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of fields in this message type.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.field><div style=padding-left:16px;text-indent:-16px><code><b>field</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets a field by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.field_count>field_count()</a>. <a href=#Descriptor.field.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.FindFieldByNumber><div style=padding-left:16px;text-indent:-16px><code><b>FindFieldByNumber</b>(int number) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Looks up a field by declared tag number. <a href=#Descriptor.FindFieldByNumber.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.FindFieldByName><div style=padding-left:16px;text-indent:-16px><code><b>FindFieldByName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Looks up a field by name. Returns nullptr if no such field exists.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.FindFieldByLowercaseName><div style=padding-left:16px;text-indent:-16px><code><b>FindFieldByLowercaseName</b>(ConstStringParam lowercase_name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Looks up a field by lowercased name (as returned by lowercase_name()). <a href=#Descriptor.FindFieldByLowercaseName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.FindFieldByCamelcaseName><div style=padding-left:16px;text-indent:-16px><code><b>FindFieldByCamelcaseName</b>(ConstStringParam camelcase_name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Looks up a field by camel-case name (as returned by camelcase_name()). <a href=#Descriptor.FindFieldByCamelcaseName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Descriptor.oneof_decl_count><div style=padding-left:16px;text-indent:-16px><code><b>oneof_decl_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of oneofs in this message type.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Descriptor.real_oneof_decl_count><div style=padding-left:16px;text-indent:-16px><code><b>real_oneof_decl_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of oneofs in this message type, excluding synthetic oneofs. <a href=#Descriptor.real_oneof_decl_count.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#OneofDescriptor>OneofDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.oneof_decl><div style=padding-left:16px;text-indent:-16px><code><b>oneof_decl</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get a oneof by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.oneof_decl_count>oneof_decl_count()</a>. <a href=#Descriptor.oneof_decl.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#OneofDescriptor>OneofDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.FindOneofByName><div style=padding-left:16px;text-indent:-16px><code><b>FindOneofByName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Looks up a oneof by name. Returns nullptr if no such oneof exists.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Nested type stuff</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Descriptor.nested_type_count><div style=padding-left:16px;text-indent:-16px><code><b>nested_type_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of nested types in this message type.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.nested_type><div style=padding-left:16px;text-indent:-16px><code><b>nested_type</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets a nested type by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.nested_type_count>nested_type_count()</a>. <a href=#Descriptor.nested_type.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.FindNestedTypeByName><div style=padding-left:16px;text-indent:-16px><code><b>FindNestedTypeByName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Looks up a nested type by name. <a href=#Descriptor.FindNestedTypeByName.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Enum stuff</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Descriptor.enum_type_count><div style=padding-left:16px;text-indent:-16px><code><b>enum_type_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of enum types in this message type.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.enum_type><div style=padding-left:16px;text-indent:-16px><code><b>enum_type</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets an enum type by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.enum_type_count>enum_type_count()</a>. <a href=#Descriptor.enum_type.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.FindEnumTypeByName><div style=padding-left:16px;text-indent:-16px><code><b>FindEnumTypeByName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Looks up an enum type by name. <a href=#Descriptor.FindEnumTypeByName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.FindEnumValueByName><div style=padding-left:16px;text-indent:-16px><code><b>FindEnumValueByName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Looks up an enum value by name, among all enum types in this message. <a href=#Descriptor.FindEnumValueByName.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Extensions</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Descriptor.extension_range_count><div style=padding-left:16px;text-indent:-16px><code><b>extension_range_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of extension ranges in this message type.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor.ExtensionRange>ExtensionRange</a> *</code></td><td style=border-left-width:0 id=Descriptor.extension_range><div style=padding-left:16px;text-indent:-16px><code><b>extension_range</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets an extension range by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.extension_range_count>extension_range_count()</a>. <a href=#Descriptor.extension_range.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Descriptor.IsExtensionNumber><div style=padding-left:16px;text-indent:-16px><code><b>IsExtensionNumber</b>(int number) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if the number is in one of the extension ranges.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor.ExtensionRange>ExtensionRange</a> *</code></td><td style=border-left-width:0 id=Descriptor.FindExtensionRangeContainingNumber><div style=padding-left:16px;text-indent:-16px><code><b>FindExtensionRangeContainingNumber</b>(int number) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns nullptr if no extension range contains the given number.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Descriptor.extension_count><div style=padding-left:16px;text-indent:-16px><code><b>extension_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of extensions defined nested within this message type's scope. <a href=#Descriptor.extension_count.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.extension><div style=padding-left:16px;text-indent:-16px><code><b>extension</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get an extension by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.extension_count>extension_count()</a>. <a href=#Descriptor.extension.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.FindExtensionByName><div style=padding-left:16px;text-indent:-16px><code><b>FindExtensionByName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Looks up a named extension (which extends some <i>other</i> message type) defined within this message type's scope.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.FindExtensionByLowercaseName><div style=padding-left:16px;text-indent:-16px><code><b>FindExtensionByLowercaseName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Similar to <a href=google.protobuf.descriptor#Descriptor.FindFieldByLowercaseName>FindFieldByLowercaseName()</a>, but finds extensions defined within this message type's scope.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.FindExtensionByCamelcaseName><div style=padding-left:16px;text-indent:-16px><code><b>FindExtensionByCamelcaseName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Similar to <a href=google.protobuf.descriptor#Descriptor.FindFieldByCamelcaseName>FindFieldByCamelcaseName()</a>, but finds extensions defined within this message type's scope.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Reserved fields</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Descriptor.reserved_range_count><div style=padding-left:16px;text-indent:-16px><code><b>reserved_range_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of reserved ranges in this message type.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor.ReservedRange>ReservedRange</a> *</code></td><td style=border-left-width:0 id=Descriptor.reserved_range><div style=padding-left:16px;text-indent:-16px><code><b>reserved_range</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets an reserved range by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.reserved_range_count>reserved_range_count()</a>. <a href=#Descriptor.reserved_range.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Descriptor.IsReservedNumber><div style=padding-left:16px;text-indent:-16px><code><b>IsReservedNumber</b>(int number) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if the number is in one of the reserved ranges.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor.ReservedRange>ReservedRange</a> *</code></td><td style=border-left-width:0 id=Descriptor.FindReservedRangeContainingNumber><div style=padding-left:16px;text-indent:-16px><code><b>FindReservedRangeContainingNumber</b>(int number) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns nullptr if no reserved range contains the given number.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Descriptor.reserved_name_count><div style=padding-left:16px;text-indent:-16px><code><b>reserved_name_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of reserved field names in this message type.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=Descriptor.reserved_name><div style=padding-left:16px;text-indent:-16px><code><b>reserved_name</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets a reserved name by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.reserved_name_count>reserved_name_count()</a>. <a href=#Descriptor.reserved_name.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Descriptor.IsReservedName><div style=padding-left:16px;text-indent:-16px><code><b>IsReservedName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if the field name is reserved.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Source Location</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Descriptor.GetSourceLocation><div style=padding-left:16px;text-indent:-16px><code><b>GetSourceLocation</b>(<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Updates |*out_location| to the source location of the complete extent of this message declaration. <a href=#Descriptor.GetSourceLocation.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Maps</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.map_key><div style=padding-left:16px;text-indent:-16px><code><b>map_key</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> for the "key" field. <a href=#Descriptor.map_key.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=Descriptor.map_value><div style=padding-left:16px;text-indent:-16px><code><b>map_value</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> for the "value" field. <a href=#Descriptor.map_value.details>more...</a></div></td></tr></table><hr><h3 id=Descriptor.WellKnownType.details><code>enum Descriptor::WellKnownType {<br>&nbsp;&nbsp;WELLKNOWNTYPE_UNSPECIFIED,<br>&nbsp;&nbsp;WELLKNOWNTYPE_DOUBLEVALUE,<br>&nbsp;&nbsp;WELLKNOWNTYPE_FLOATVALUE,<br>&nbsp;&nbsp;WELLKNOWNTYPE_INT64VALUE,<br>&nbsp;&nbsp;WELLKNOWNTYPE_UINT64VALUE,<br>&nbsp;&nbsp;WELLKNOWNTYPE_INT32VALUE,<br>&nbsp;&nbsp;WELLKNOWNTYPE_UINT32VALUE,<br>&nbsp;&nbsp;WELLKNOWNTYPE_STRINGVALUE,<br>&nbsp;&nbsp;WELLKNOWNTYPE_BYTESVALUE,<br>&nbsp;&nbsp;WELLKNOWNTYPE_BOOLVALUE,<br>&nbsp;&nbsp;WELLKNOWNTYPE_ANY,<br>&nbsp;&nbsp;WELLKNOWNTYPE_FIELDMASK,<br>&nbsp;&nbsp;WELLKNOWNTYPE_DURATION,<br>&nbsp;&nbsp;WELLKNOWNTYPE_TIMESTAMP,<br>&nbsp;&nbsp;WELLKNOWNTYPE_VALUE,<br>&nbsp;&nbsp;WELLKNOWNTYPE_LISTVALUE,<br>&nbsp;&nbsp;WELLKNOWNTYPE_STRUCT,<br>&nbsp;&nbsp;__WELLKNOWNTYPE__DO_NOT_USE__ADD_DEFAULT_INSTEAD__<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>WELLKNOWNTYPE_UNSPECIFIED</td><td>Not a well-known type.</td></tr><tr><td>WELLKNOWNTYPE_DOUBLEVALUE</td><td><p>Wrapper types.</p><p>google.protobuf.DoubleValue</p></td></tr><tr><td>WELLKNOWNTYPE_FLOATVALUE</td><td>google.protobuf.FloatValue</td></tr><tr><td>WELLKNOWNTYPE_INT64VALUE</td><td>google.protobuf.Int64Value</td></tr><tr><td>WELLKNOWNTYPE_UINT64VALUE</td><td>google.protobuf.UInt64Value</td></tr><tr><td>WELLKNOWNTYPE_INT32VALUE</td><td>google.protobuf.Int32Value</td></tr><tr><td>WELLKNOWNTYPE_UINT32VALUE</td><td>google.protobuf.UInt32Value</td></tr><tr><td>WELLKNOWNTYPE_STRINGVALUE</td><td>google.protobuf.StringValue</td></tr><tr><td>WELLKNOWNTYPE_BYTESVALUE</td><td>google.protobuf.BytesValue</td></tr><tr><td>WELLKNOWNTYPE_BOOLVALUE</td><td>google.protobuf.BoolValue</td></tr><tr><td>WELLKNOWNTYPE_ANY</td><td><p>Other well known types.</p><p>google.protobuf.Any</p></td></tr><tr><td>WELLKNOWNTYPE_FIELDMASK</td><td>google.protobuf.FieldMask</td></tr><tr><td>WELLKNOWNTYPE_DURATION</td><td>google.protobuf.Duration</td></tr><tr><td>WELLKNOWNTYPE_TIMESTAMP</td><td>google.protobuf.Timestamp</td></tr><tr><td>WELLKNOWNTYPE_VALUE</td><td>google.protobuf.Value</td></tr><tr><td>WELLKNOWNTYPE_LISTVALUE</td><td>google.protobuf.ListValue</td></tr><tr><td>WELLKNOWNTYPE_STRUCT</td><td>google.protobuf.Struct</td></tr><tr><td>__WELLKNOWNTYPE__DO_NOT_USE__ADD_DEFAULT_INSTEAD__</td><td><p>New well-known types may be added in the future.</p><p>Please make sure any switch() statements have a 'default' case.</p></td></tr></table></div><hr><h3 id=Descriptor.full_name.details><code>const std::string &<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::full_name() const</code></h3><div style=margin-left:16px><p>The fully-qualified name of the message type, scope delimited by periods.</p><p>For example, message type "Foo" which is declared in package "bar" has full name "bar.Foo". If a type "Baz" is nested within Foo, Baz's full_name is "bar.Foo.Baz". To get only the part that comes after the last '.', use <a href=google.protobuf.descriptor#Descriptor.name>name()</a>.</p></div><hr><h3 id=Descriptor.containing_type.details><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::containing_type() const</code></h3><div style=margin-left:16px><p>If this <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> describes a nested type, this returns the type in which it is nested.</p><p>Otherwise, returns nullptr.</p></div><hr><h3 id=Descriptor.options.details><code>const MessageOptions &<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::options() const</code></h3><div style=margin-left:16px><p>Get options for this message type.</p><p>These are specified in the .proto file by placing lines like "option foo = 1234;" in the message definition. Allowed options are defined by MessageOptions in descriptor.proto, and any available extensions of that message.</p></div><hr><h3 id=Descriptor.CopyTo.details><code>void Descriptor::CopyTo(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DescriptorProto * proto) const</code></h3><div style=margin-left:16px><p>Write the contents of this <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> into the given DescriptorProto.</p><p>The target DescriptorProto must be clear before calling this; if it isn't, the result may be garbage.</p></div><hr><h3 id=Descriptor.DebugString.details><code>std::string Descriptor::DebugString() const</code></h3><div style=margin-left:16px><p>Write the contents of this descriptor in a human-readable form.</p><p>Output will be suitable for re-parsing.</p></div><hr><h3 id=Descriptor.is_placeholder.details><code>bool Descriptor::is_placeholder() const</code></h3><div style=margin-left:16px><p>Returns true if this is a placeholder for an unknown type.</p><p>This will only be the case if this descriptor comes from a <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> with AllowUnknownDependencies() set.</p></div><hr><h3 id=Descriptor.field.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::field(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets a field by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.field_count>field_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=Descriptor.FindFieldByNumber.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::FindFieldByNumber(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int number) const</code></h3><div style=margin-left:16px><p>Looks up a field by declared tag number.</p><p>Returns nullptr if no such field exists.</p></div><hr><h3 id=Descriptor.FindFieldByLowercaseName.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::FindFieldByLowercaseName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam lowercase_name) const</code></h3><div style=margin-left:16px><p>Looks up a field by lowercased name (as returned by lowercase_name()).</p><p>This lookup may be ambiguous if multiple field names differ only by case, in which case the field returned is chosen arbitrarily from the matches.</p></div><hr><h3 id=Descriptor.FindFieldByCamelcaseName.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::FindFieldByCamelcaseName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam camelcase_name) const</code></h3><div style=margin-left:16px><p>Looks up a field by camel-case name (as returned by camelcase_name()).</p><p>This lookup may be ambiguous if multiple field names differ in a way that leads them to have identical camel-case names, in which case the field returned is chosen arbitrarily from the matches.</p></div><hr><h3 id=Descriptor.real_oneof_decl_count.details><code>int Descriptor::real_oneof_decl_count() const</code></h3><div style=margin-left:16px><p>The number of oneofs in this message type, excluding synthetic oneofs.</p><p>Real oneofs always come first, so iterating up to real_oneof_decl_cout() will yield all real oneofs.</p></div><hr><h3 id=Descriptor.oneof_decl.details><code>const <a href=google.protobuf.descriptor#OneofDescriptor>OneofDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::oneof_decl(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Get a oneof by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.oneof_decl_count>oneof_decl_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=Descriptor.nested_type.details><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::nested_type(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets a nested type by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.nested_type_count>nested_type_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=Descriptor.FindNestedTypeByName.details><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::FindNestedTypeByName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam name) const</code></h3><div style=margin-left:16px><p>Looks up a nested type by name.</p><p>Returns nullptr if no such nested type exists.</p></div><hr><h3 id=Descriptor.enum_type.details><code>const <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::enum_type(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets an enum type by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.enum_type_count>enum_type_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=Descriptor.FindEnumTypeByName.details><code>const <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::FindEnumTypeByName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam name) const</code></h3><div style=margin-left:16px><p>Looks up an enum type by name.</p><p>Returns nullptr if no such enum type exists.</p></div><hr><h3 id=Descriptor.FindEnumValueByName.details><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::FindEnumValueByName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam name) const</code></h3><div style=margin-left:16px><p>Looks up an enum value by name, among all enum types in this message.</p><p>Returns nullptr if no such value exists.</p></div><hr><h3 id=Descriptor.extension_range.details><code>const <a href=google.protobuf.descriptor#Descriptor.ExtensionRange>ExtensionRange</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::extension_range(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets an extension range by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.extension_range_count>extension_range_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=Descriptor.extension_count.details><code>int Descriptor::extension_count() const</code></h3><div style=margin-left:16px><p>The number of extensions defined nested within this message type's scope.</p><p>See doc: <a href="/programming-guides/proto#nested-extensions'></a></p>
<p>Note that the extensions may be extending <i>other</i> messages.</p>
<p>For example: message M1 { </p>
<pre>extensions 1 to max;</pre>
<p> }</p>
<p>message M2 { </p>
<pre>extend M1 {
  optional int32 foo = 1;
}</pre>
<p> }</p>
<p>In this case, <a href='google.protobuf.descriptor#DescriptorPool.generated_pool'>DescriptorPool::generated_pool()</a> </p>
<pre>->FindMessageTypeByName(" m2") -&gt;extension(0)</pre><p>will return "foo", even though "foo" is an extension of M1. To find all known extensions of a given message, instead use <a href=google.protobuf.descriptor#DescriptorPool.FindAllExtensions>DescriptorPool::FindAllExtensions</a>.</p></div><hr><h3 id=Descriptor.extension.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::extension(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Get an extension by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.extension_count>extension_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=Descriptor.reserved_range.details><code>const <a href=google.protobuf.descriptor#Descriptor.ReservedRange>ReservedRange</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::reserved_range(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets an reserved range by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.reserved_range_count>reserved_range_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=Descriptor.reserved_name.details><code>const std::string &<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::reserved_name(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets a reserved name by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#Descriptor.reserved_name_count>reserved_name_count()</a>.</p><p>Can't use PROTOBUF_DEFINE_ARRAY_ACCESSOR because reserved_names_ is actually an array of pointers rather than the usual array of objects.</p></div><hr><h3 id=Descriptor.GetSourceLocation.details><code>bool Descriptor::GetSourceLocation(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></h3><div style=margin-left:16px><p>Updates |*out_location| to the source location of the complete extent of this message declaration.</p><p>Returns false and leaves |*out_location| unchanged iff location information was not available.</p></div><hr><h3 id=Descriptor.map_key.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::map_key() const</code></h3><div style=margin-left:16px><p>Returns the <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> for the "key" field.</p><p>If this isn't a map entry field, returns nullptr.</p></div><hr><h3 id=Descriptor.map_value.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Descriptor::map_value() const</code></h3><div style=margin-left:16px><p>Returns the <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> for the "value" field.</p><p>If this isn't a map entry field, returns nullptr.</p></div><h2 id=Descriptor.ExtensionRange>struct Descriptor::ExtensionRange</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>A range of field numbers which are designated for third-party extensions.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Descriptor.ExtensionRange.Proto><div style=padding-left:16px;text-indent:-16px><code>DescriptorProto_ExtensionRange <b>Proto</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Descriptor.ExtensionRange.OptionsType><div style=padding-left:16px;text-indent:-16px><code>ExtensionRangeOptions <b>OptionsType</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Descriptor.ExtensionRange.start><div style=padding-left:16px;text-indent:-16px><code><b>start</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>inclusive</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Descriptor.ExtensionRange.end><div style=padding-left:16px;text-indent:-16px><code><b>end</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>exclusive</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const ExtensionRangeOptions *</code></td><td style=border-left-width:0 id=Descriptor.ExtensionRange.options_><div style=padding-left:16px;text-indent:-16px><code><b>options_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Descriptor.ExtensionRange.CopyTo><div style=padding-left:16px;text-indent:-16px><code><b>CopyTo</b>(DescriptorProto_ExtensionRange * proto) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.CopyTo>Descriptor::CopyTo()</a>.</div></td></tr></table><h2 id=Descriptor.ReservedRange>struct Descriptor::ReservedRange</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>A range of reserved field numbers.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Descriptor.ReservedRange.start><div style=padding-left:16px;text-indent:-16px><code><b>start</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>inclusive</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Descriptor.ReservedRange.end><div style=padding-left:16px;text-indent:-16px><code><b>end</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>exclusive</div></td></tr></table><h2 id=FieldDescriptor>class FieldDescriptor</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Describes a single field of a message.</p><p>To get the descriptor for a given field, first get the <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> for the message in which it is defined, then call <a href=google.protobuf.descriptor#Descriptor.FindFieldByName>Descriptor::FindFieldByName()</a>. To get a <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> for an extension, do one of the following:</p><ul><li>Get the <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> or <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> for its containing scope, then call <a href=google.protobuf.descriptor#Descriptor.FindExtensionByName>Descriptor::FindExtensionByName()</a> or <a href=google.protobuf.descriptor#FileDescriptor.FindExtensionByName>FileDescriptor::FindExtensionByName()</a>.</li><li>Given a <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a>, call <a href=google.protobuf.descriptor#DescriptorPool.FindExtensionByNumber>DescriptorPool::FindExtensionByNumber()</a> or <a href=google.protobuf.descriptor#DescriptorPool.FindExtensionByPrintableName>DescriptorPool::FindExtensionByPrintableName()</a>. Use <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> to construct your own descriptors.</li></ul><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=FieldDescriptor.Type><div style=padding-left:16px;text-indent:-16px><code><b>Type</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Identifies a field type. <a href=#FieldDescriptor.Type.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=FieldDescriptor.CppType><div style=padding-left:16px;text-indent:-16px><code><b>CppType</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Specifies the C++ data type used to represent the field. <a href=#FieldDescriptor.CppType.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=FieldDescriptor.Label><div style=padding-left:16px;text-indent:-16px><code><b>Label</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Identifies whether the field is optional, required, or repeated. <a href=#FieldDescriptor.Label.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=FieldDescriptor.Proto><div style=padding-left:16px;text-indent:-16px><code>FieldDescriptorProto <b>Proto</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const int</code></td><td style=border-left-width:0 id=FieldDescriptor.kMaxNumber><div style=padding-left:16px;text-indent:-16px><code><b>kMaxNumber</b> = = (1 &lt;&lt; 29) - 1</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Valid field numbers are positive integers up to kMaxNumber.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const int</code></td><td style=border-left-width:0 id=FieldDescriptor.kFirstReservedNumber><div style=padding-left:16px;text-indent:-16px><code><b>kFirstReservedNumber</b> = = 19000</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>First field number reserved for the protocol buffer library implementation. <a href=#FieldDescriptor.kFirstReservedNumber.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const int</code></td><td style=border-left-width:0 id=FieldDescriptor.kLastReservedNumber><div style=padding-left:16px;text-indent:-16px><code><b>kLastReservedNumber</b> = = 19999</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Last field number reserved for the protocol buffer library implementation. <a href=#FieldDescriptor.kLastReservedNumber.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int32</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_int32_><div style=padding-left:16px;text-indent:-16px><code><b>default_value_int32_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int64</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_int64_><div style=padding-left:16px;text-indent:-16px><code><b>default_value_int64_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint32</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_uint32_><div style=padding-left:16px;text-indent:-16px><code><b>default_value_uint32_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint64</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_uint64_><div style=padding-left:16px;text-indent:-16px><code><b>default_value_uint64_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>float</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_float_><div style=padding-left:16px;text-indent:-16px><code><b>default_value_float_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>double</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_double_><div style=padding-left:16px;text-indent:-16px><code><b>default_value_double_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_bool_><div style=padding-left:16px;text-indent:-16px><code><b>default_value_bool_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_enum_><div style=padding-left:16px;text-indent:-16px><code><b>default_value_enum_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string *</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_string_><div style=padding-left:16px;text-indent:-16px><code><b>default_value_string_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::atomic&lt; const <a href=google.protobuf.message#Message>Message</a> * ></code></td><td style=border-left-width:0 id=FieldDescriptor.default_generated_instance_><div style=padding-left:16px;text-indent:-16px><code><b>default_generated_instance_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=FieldDescriptor.name><div style=padding-left:16px;text-indent:-16px><code><b>name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Name of this field within the message.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=FieldDescriptor.full_name><div style=padding-left:16px;text-indent:-16px><code><b>full_name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Fully-qualified name of the field.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=FieldDescriptor.json_name><div style=padding-left:16px;text-indent:-16px><code><b>json_name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>JSON name of this field.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=FieldDescriptor.file><div style=padding-left:16px;text-indent:-16px><code><b>file</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>File in which this field was defined.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldDescriptor.is_extension><div style=padding-left:16px;text-indent:-16px><code><b>is_extension</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Is this an extension field?</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=FieldDescriptor.number><div style=padding-left:16px;text-indent:-16px><code><b>number</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Declared tag number.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=FieldDescriptor.lowercase_name><div style=padding-left:16px;text-indent:-16px><code><b>lowercase_name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Same as <a href=google.protobuf.descriptor#FieldDescriptor.name>name()</a> except converted to lower-case. <a href=#FieldDescriptor.lowercase_name.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=FieldDescriptor.camelcase_name><div style=padding-left:16px;text-indent:-16px><code><b>camelcase_name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Same as <a href=google.protobuf.descriptor#FieldDescriptor.name>name()</a> except converted to camel-case. <a href=#FieldDescriptor.camelcase_name.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.descriptor#FieldDescriptor.Type>Type</a></code></td><td style=border-left-width:0 id=FieldDescriptor.type><div style=padding-left:16px;text-indent:-16px><code><b>type</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Declared type of this field.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const char *</code></td><td style=border-left-width:0 id=FieldDescriptor.type_name><div style=padding-left:16px;text-indent:-16px><code><b>type_name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Name of the declared type.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.descriptor#FieldDescriptor.CppType>CppType</a></code></td><td style=border-left-width:0 id=FieldDescriptor.cpp_type><div style=padding-left:16px;text-indent:-16px><code><b>cpp_type</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>C++ type of this field.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const char *</code></td><td style=border-left-width:0 id=FieldDescriptor.cpp_type_name><div style=padding-left:16px;text-indent:-16px><code><b>cpp_type_name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Name of the C++ type.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.descriptor#FieldDescriptor.Label>Label</a></code></td><td style=border-left-width:0 id=FieldDescriptor.label><div style=padding-left:16px;text-indent:-16px><code><b>label</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>optional/required/repeated</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldDescriptor.is_required><div style=padding-left:16px;text-indent:-16px><code><b>is_required</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>shorthand for <a href=google.protobuf.descriptor#FieldDescriptor.label>label()</a> == LABEL_REQUIRED</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldDescriptor.is_optional><div style=padding-left:16px;text-indent:-16px><code><b>is_optional</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>shorthand for <a href=google.protobuf.descriptor#FieldDescriptor.label>label()</a> == LABEL_OPTIONAL</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldDescriptor.is_repeated><div style=padding-left:16px;text-indent:-16px><code><b>is_repeated</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>shorthand for <a href=google.protobuf.descriptor#FieldDescriptor.label>label()</a> == LABEL_REPEATED</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldDescriptor.is_packable><div style=padding-left:16px;text-indent:-16px><code><b>is_packable</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>shorthand for <a href=google.protobuf.descriptor#FieldDescriptor.is_repeated>is_repeated()</a> && IsTypePackable(type())</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldDescriptor.is_packed><div style=padding-left:16px;text-indent:-16px><code><b>is_packed</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>shorthand for <a href=google.protobuf.descriptor#FieldDescriptor.is_packable>is_packable()</a> && <a href=google.protobuf.descriptor#FieldDescriptor.options>options()</a>.packed()</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldDescriptor.is_map><div style=padding-left:16px;text-indent:-16px><code><b>is_map</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>shorthand for <a href=google.protobuf.descriptor#FieldDescriptor.type>type()</a> == TYPE_MESSAGE && <a href=google.protobuf.descriptor#FieldDescriptor.message_type>message_type()</a>-><a href=google.protobuf.descriptor#FieldDescriptor.options>options()</a>.map_entry()</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldDescriptor.has_optional_keyword><div style=padding-left:16px;text-indent:-16px><code><b>has_optional_keyword</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if this field was syntactically written with "optional" in the .proto file. <a href=#FieldDescriptor.has_optional_keyword.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldDescriptor.has_presence><div style=padding-left:16px;text-indent:-16px><code><b>has_presence</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if this field tracks presence, ie. <a href=#FieldDescriptor.has_presence.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=FieldDescriptor.index><div style=padding-left:16px;text-indent:-16px><code><b>index</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Index of this field within the message's field array, or the file or extension scope's extensions array.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldDescriptor.has_default_value><div style=padding-left:16px;text-indent:-16px><code><b>has_default_value</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Does this field have an explicitly-declared default value?</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldDescriptor.has_json_name><div style=padding-left:16px;text-indent:-16px><code><b>has_json_name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Whether the user has specified the json_name field option in the .proto file.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int32</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_int32><div style=padding-left:16px;text-indent:-16px><code><b>default_value_int32</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_INT32. <a href=#FieldDescriptor.default_value_int32.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int64</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_int64><div style=padding-left:16px;text-indent:-16px><code><b>default_value_int64</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_INT64. <a href=#FieldDescriptor.default_value_int64.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint32</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_uint32><div style=padding-left:16px;text-indent:-16px><code><b>default_value_uint32</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_UINT32. <a href=#FieldDescriptor.default_value_uint32.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint64</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_uint64><div style=padding-left:16px;text-indent:-16px><code><b>default_value_uint64</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_UINT64. <a href=#FieldDescriptor.default_value_uint64.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>float</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_float><div style=padding-left:16px;text-indent:-16px><code><b>default_value_float</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_FLOAT. <a href=#FieldDescriptor.default_value_float.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>double</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_double><div style=padding-left:16px;text-indent:-16px><code><b>default_value_double</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_DOUBLE. <a href=#FieldDescriptor.default_value_double.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_bool><div style=padding-left:16px;text-indent:-16px><code><b>default_value_bool</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_BOOL. <a href=#FieldDescriptor.default_value_bool.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_enum><div style=padding-left:16px;text-indent:-16px><code><b>default_value_enum</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_ENUM. <a href=#FieldDescriptor.default_value_enum.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=FieldDescriptor.default_value_string><div style=padding-left:16px;text-indent:-16px><code><b>default_value_string</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_STRING. <a href=#FieldDescriptor.default_value_string.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=FieldDescriptor.containing_type><div style=padding-left:16px;text-indent:-16px><code><b>containing_type</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> for the message of which this is a field. <a href=#FieldDescriptor.containing_type.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#OneofDescriptor>OneofDescriptor</a> *</code></td><td style=border-left-width:0 id=FieldDescriptor.containing_oneof><div style=padding-left:16px;text-indent:-16px><code><b>containing_oneof</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If the field is a member of a oneof, this is the one, otherwise this is nullptr.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#OneofDescriptor>OneofDescriptor</a> *</code></td><td style=border-left-width:0 id=FieldDescriptor.real_containing_oneof><div style=padding-left:16px;text-indent:-16px><code><b>real_containing_oneof</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If the field is a member of a non-synthetic oneof, returns the descriptor for the oneof, otherwise returns nullptr.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=FieldDescriptor.index_in_oneof><div style=padding-left:16px;text-indent:-16px><code><b>index_in_oneof</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If the field is a member of a oneof, returns the index in that oneof.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=FieldDescriptor.extension_scope><div style=padding-left:16px;text-indent:-16px><code><b>extension_scope</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>An extension may be declared within the scope of another message. <a href=#FieldDescriptor.extension_scope.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=FieldDescriptor.message_type><div style=padding-left:16px;text-indent:-16px><code><b>message_type</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If type is TYPE_MESSAGE or TYPE_GROUP, returns a descriptor for the message or the group type. <a href=#FieldDescriptor.message_type.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> *</code></td><td style=border-left-width:0 id=FieldDescriptor.enum_type><div style=padding-left:16px;text-indent:-16px><code><b>enum_type</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If type is TYPE_ENUM, returns a descriptor for the enum. <a href=#FieldDescriptor.enum_type.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const FieldOptions &</code></td><td style=border-left-width:0 id=FieldDescriptor.options><div style=padding-left:16px;text-indent:-16px><code><b>options</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the FieldOptions for this field. <a href=#FieldDescriptor.options.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=FieldDescriptor.CopyTo><div style=padding-left:16px;text-indent:-16px><code><b>CopyTo</b>(FieldDescriptorProto * proto) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.CopyTo>Descriptor::CopyTo()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=FieldDescriptor.DebugString><div style=padding-left:16px;text-indent:-16px><code><b>DebugString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.DebugString>Descriptor::DebugString()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=FieldDescriptor.DebugStringWithOptions><div style=padding-left:16px;text-indent:-16px><code><b>DebugStringWithOptions</b>(const <a href=google.protobuf.descriptor#DebugStringOptions>DebugStringOptions</a> & options) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.DebugStringWithOptions>Descriptor::DebugStringWithOptions()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=FieldDescriptor.PrintableNameForExtension><div style=padding-left:16px;text-indent:-16px><code><b>PrintableNameForExtension</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns <a href=google.protobuf.descriptor#FieldDescriptor.full_name>full_name()</a> except if the field is a MessageSet extension, in which case it returns the <a href=google.protobuf.descriptor#FieldDescriptor.full_name>full_name()</a> of the containing message type for backwards compatibility with proto1. <a href=#FieldDescriptor.PrintableNameForExtension.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static <a href=google.protobuf.descriptor#FieldDescriptor.CppType>CppType</a></code></td><td style=border-left-width:0 id=FieldDescriptor.TypeToCppType><div style=padding-left:16px;text-indent:-16px><code><b>TypeToCppType</b>(<a href=google.protobuf.descriptor#FieldDescriptor.Type>Type</a> type)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Helper method to get the CppType for a particular Type.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static const char *</code></td><td style=border-left-width:0 id=FieldDescriptor.TypeName><div style=padding-left:16px;text-indent:-16px><code><b>TypeName</b>(<a href=google.protobuf.descriptor#FieldDescriptor.Type>Type</a> type)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Helper method to get the name of a Type.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static const char *</code></td><td style=border-left-width:0 id=FieldDescriptor.CppTypeName><div style=padding-left:16px;text-indent:-16px><code><b>CppTypeName</b>(<a href=google.protobuf.descriptor#FieldDescriptor.CppType>CppType</a> cpp_type)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Helper method to get the name of a CppType.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=FieldDescriptor.IsTypePackable><div style=padding-left:16px;text-indent:-16px><code><b>IsTypePackable</b>(<a href=google.protobuf.descriptor#FieldDescriptor.Type>Type</a> field_type)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Return true iff [[]packed = true] is valid for fields of this type.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Source Location</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldDescriptor.GetSourceLocation><div style=padding-left:16px;text-indent:-16px><code><b>GetSourceLocation</b>(<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Updates |*out_location| to the source location of the complete extent of this field declaration. <a href=#FieldDescriptor.GetSourceLocation.details>more...</a></div></td></tr></table><hr><h3 id=FieldDescriptor.Type.details><code>enum FieldDescriptor::Type {<br>&nbsp;&nbsp;TYPE_DOUBLE = = 1,<br>&nbsp;&nbsp;TYPE_FLOAT = = 2,<br>&nbsp;&nbsp;TYPE_INT64 = = 3,<br>&nbsp;&nbsp;TYPE_UINT64 = = 4,<br>&nbsp;&nbsp;TYPE_INT32 = = 5,<br>&nbsp;&nbsp;TYPE_FIXED64 = = 6,<br>&nbsp;&nbsp;TYPE_FIXED32 = = 7,<br>&nbsp;&nbsp;TYPE_BOOL = = 8,<br>&nbsp;&nbsp;TYPE_STRING = = 9,<br>&nbsp;&nbsp;TYPE_GROUP = = 10,<br>&nbsp;&nbsp;TYPE_MESSAGE = = 11,<br>&nbsp;&nbsp;TYPE_BYTES = = 12,<br>&nbsp;&nbsp;TYPE_UINT32 = = 13,<br>&nbsp;&nbsp;TYPE_ENUM = = 14,<br>&nbsp;&nbsp;TYPE_SFIXED32 = = 15,<br>&nbsp;&nbsp;TYPE_SFIXED64 = = 16,<br>&nbsp;&nbsp;TYPE_SINT32 = = 17,<br>&nbsp;&nbsp;TYPE_SINT64 = = 18,<br>&nbsp;&nbsp;MAX_TYPE = = 18<br>}</code></h3><div style=margin-left:16px><p>Identifies a field type.</p><p>0 is reserved for errors. The order is weird for historical reasons. Types 12 and up are new in proto2.</p><table><tr><td>TYPE_DOUBLE</td><td>double, exactly eight bytes on the wire.</td></tr><tr><td>TYPE_FLOAT</td><td>float, exactly four bytes on the wire.</td></tr><tr><td>TYPE_INT64</td><td><p>int64, varint on the wire.</p><p>Negative numbers take 10 bytes. Use TYPE_SINT64 if negative values are likely.</p></td></tr><tr><td>TYPE_UINT64</td><td>uint64, varint on the wire.</td></tr><tr><td>TYPE_INT32</td><td><p>int32, varint on the wire.</p><p>Negative numbers take 10 bytes. Use TYPE_SINT32 if negative values are likely.</p></td></tr><tr><td>TYPE_FIXED64</td><td>uint64, exactly eight bytes on the wire.</td></tr><tr><td>TYPE_FIXED32</td><td>uint32, exactly four bytes on the wire.</td></tr><tr><td>TYPE_BOOL</td><td>bool, varint on the wire.</td></tr><tr><td>TYPE_STRING</td><td>UTF-8 text.</td></tr><tr><td>TYPE_GROUP</td><td>Tag-delimited message. Deprecated.</td></tr><tr><td>TYPE_MESSAGE</td><td>Length-delimited message.</td></tr><tr><td>TYPE_BYTES</td><td>Arbitrary byte array.</td></tr><tr><td>TYPE_UINT32</td><td>uint32, varint on the wire</td></tr><tr><td>TYPE_ENUM</td><td>Enum, varint on the wire.</td></tr><tr><td>TYPE_SFIXED32</td><td>int32, exactly four bytes on the wire</td></tr><tr><td>TYPE_SFIXED64</td><td>int64, exactly eight bytes on the wire</td></tr><tr><td>TYPE_SINT32</td><td>int32, ZigZag-encoded varint on the wire</td></tr><tr><td>TYPE_SINT64</td><td>int64, ZigZag-encoded varint on the wire</td></tr><tr><td>MAX_TYPE</td><td>Constant useful for defining lookup tables indexed by Type.</td></tr></table></div><hr><h3 id=FieldDescriptor.CppType.details><code>enum FieldDescriptor::CppType {<br>&nbsp;&nbsp;CPPTYPE_INT32 = = 1,<br>&nbsp;&nbsp;CPPTYPE_INT64 = = 2,<br>&nbsp;&nbsp;CPPTYPE_UINT32 = = 3,<br>&nbsp;&nbsp;CPPTYPE_UINT64 = = 4,<br>&nbsp;&nbsp;CPPTYPE_DOUBLE = = 5,<br>&nbsp;&nbsp;CPPTYPE_FLOAT = = 6,<br>&nbsp;&nbsp;CPPTYPE_BOOL = = 7,<br>&nbsp;&nbsp;CPPTYPE_ENUM = = 8,<br>&nbsp;&nbsp;CPPTYPE_STRING = = 9,<br>&nbsp;&nbsp;CPPTYPE_MESSAGE = = 10,<br>&nbsp;&nbsp;MAX_CPPTYPE = = 10<br>}</code></h3><div style=margin-left:16px><p>Specifies the C++ data type used to represent the field.</p><p>There is a fixed mapping from Type to CppType where each Type maps to exactly one CppType. 0 is reserved for errors.</p><table><tr><td>CPPTYPE_INT32</td><td>TYPE_INT32, TYPE_SINT32, TYPE_SFIXED32.</td></tr><tr><td>CPPTYPE_INT64</td><td>TYPE_INT64, TYPE_SINT64, TYPE_SFIXED64.</td></tr><tr><td>CPPTYPE_UINT32</td><td>TYPE_UINT32, TYPE_FIXED32.</td></tr><tr><td>CPPTYPE_UINT64</td><td>TYPE_UINT64, TYPE_FIXED64.</td></tr><tr><td>CPPTYPE_DOUBLE</td><td>TYPE_DOUBLE.</td></tr><tr><td>CPPTYPE_FLOAT</td><td>TYPE_FLOAT.</td></tr><tr><td>CPPTYPE_BOOL</td><td>TYPE_BOOL.</td></tr><tr><td>CPPTYPE_ENUM</td><td>TYPE_ENUM.</td></tr><tr><td>CPPTYPE_STRING</td><td>TYPE_STRING, TYPE_BYTES.</td></tr><tr><td>CPPTYPE_MESSAGE</td><td>TYPE_MESSAGE, TYPE_GROUP.</td></tr><tr><td>MAX_CPPTYPE</td><td>Constant useful for defining lookup tables indexed by CppType.</td></tr></table></div><hr><h3 id=FieldDescriptor.Label.details><code>enum FieldDescriptor::Label {<br>&nbsp;&nbsp;LABEL_OPTIONAL = = 1,<br>&nbsp;&nbsp;LABEL_REQUIRED = = 2,<br>&nbsp;&nbsp;LABEL_REPEATED = = 3,<br>&nbsp;&nbsp;MAX_LABEL = = 3<br>}</code></h3><div style=margin-left:16px><p>Identifies whether the field is optional, required, or repeated.</p><p>0 is reserved for errors.</p><table><tr><td>LABEL_OPTIONAL</td><td>optional</td></tr><tr><td>LABEL_REQUIRED</td><td>required</td></tr><tr><td>LABEL_REPEATED</td><td>repeated</td></tr><tr><td>MAX_LABEL</td><td>Constant useful for defining lookup tables indexed by Label.</td></tr></table></div><hr><h3 id=FieldDescriptor.kFirstReservedNumber.details><code>const int FieldDescriptor::kFirstReservedNumber = = 19000</code></h3><div style=margin-left:16px><p>First field number reserved for the protocol buffer library implementation.</p><p>Users may not declare fields that use reserved numbers.</p></div><hr><h3 id=FieldDescriptor.kLastReservedNumber.details><code>const int FieldDescriptor::kLastReservedNumber = = 19999</code></h3><div style=margin-left:16px><p>Last field number reserved for the protocol buffer library implementation.</p><p>Users may not declare fields that use reserved numbers.</p></div><hr><h3 id=FieldDescriptor.lowercase_name.details><code>const std::string &<br>&nbsp;&nbsp;&nbsp;&nbsp;FieldDescriptor::lowercase_name() const</code></h3><div style=margin-left:16px><p>Same as <a href=google.protobuf.descriptor#FieldDescriptor.name>name()</a> except converted to lower-case.</p><p>This (and especially the FindFieldByLowercaseName() method) can be useful when parsing formats which prefer to use lowercase naming style. (Although, technically field names should be lowercased anyway according to the protobuf style guide, so this only makes a difference when dealing with old .proto files which do not follow the guide.)</p></div><hr><h3 id=FieldDescriptor.camelcase_name.details><code>const std::string &<br>&nbsp;&nbsp;&nbsp;&nbsp;FieldDescriptor::camelcase_name() const</code></h3><div style=margin-left:16px><p>Same as <a href=google.protobuf.descriptor#FieldDescriptor.name>name()</a> except converted to camel-case.</p><p>In this conversion, any time an underscore appears in the name, it is removed and the next letter is capitalized. Furthermore, the first letter of the name is lower-cased. Examples:</p><pre>FooBar -&gt; fooBar
foo_bar -&gt; fooBar
fooBar -&gt; fooBar</pre><p>This (and especially the FindFieldByCamelcaseName() method) can be useful when parsing formats which prefer to use camel-case naming style.</p></div><hr><h3 id=FieldDescriptor.has_optional_keyword.details><code>bool FieldDescriptor::has_optional_keyword() const</code></h3><div style=margin-left:16px><p>Returns true if this field was syntactically written with "optional" in the .proto file.</p><p>Excludes singular proto3 fields that do not have a label.</p></div><hr><h3 id=FieldDescriptor.has_presence.details><code>bool FieldDescriptor::has_presence() const</code></h3><div style=margin-left:16px><p>Returns true if this field tracks presence, ie.</p><p>does the field distinguish between "unset" and "present with default value." This includes required, optional, and oneof fields. It excludes maps, repeated fields, and singular proto3 fields without "optional".</p><p>For fields where <a href=google.protobuf.descriptor#FieldDescriptor.has_presence>has_presence()</a> == true, the return value of <a href=google.protobuf.message#Reflection.HasField>Reflection::HasField()</a> is semantically meaningful.</p></div><hr><h3 id=FieldDescriptor.default_value_int32.details><code>int32 FieldDescriptor::default_value_int32() const</code></h3><div style=margin-left:16px><p>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_INT32.</p><p>If no explicit default was defined, the default is 0.</p></div><hr><h3 id=FieldDescriptor.default_value_int64.details><code>int64 FieldDescriptor::default_value_int64() const</code></h3><div style=margin-left:16px><p>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_INT64.</p><p>If no explicit default was defined, the default is 0.</p></div><hr><h3 id=FieldDescriptor.default_value_uint32.details><code>uint32 FieldDescriptor::default_value_uint32() const</code></h3><div style=margin-left:16px><p>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_UINT32.</p><p>If no explicit default was defined, the default is 0.</p></div><hr><h3 id=FieldDescriptor.default_value_uint64.details><code>uint64 FieldDescriptor::default_value_uint64() const</code></h3><div style=margin-left:16px><p>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_UINT64.</p><p>If no explicit default was defined, the default is 0.</p></div><hr><h3 id=FieldDescriptor.default_value_float.details><code>float FieldDescriptor::default_value_float() const</code></h3><div style=margin-left:16px><p>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_FLOAT.</p><p>If no explicit default was defined, the default is 0.0.</p></div><hr><h3 id=FieldDescriptor.default_value_double.details><code>double FieldDescriptor::default_value_double() const</code></h3><div style=margin-left:16px><p>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_DOUBLE.</p><p>If no explicit default was defined, the default is 0.0.</p></div><hr><h3 id=FieldDescriptor.default_value_bool.details><code>bool FieldDescriptor::default_value_bool() const</code></h3><div style=margin-left:16px><p>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_BOOL.</p><p>If no explicit default was defined, the default is false.</p></div><hr><h3 id=FieldDescriptor.default_value_enum.details><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FieldDescriptor::default_value_enum() const</code></h3><div style=margin-left:16px><p>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_ENUM.</p><p>If no explicit default was defined, the default is the first value defined in the enum type (all enum types are required to have at least one value). This never returns nullptr.</p></div><hr><h3 id=FieldDescriptor.default_value_string.details><code>const std::string &<br>&nbsp;&nbsp;&nbsp;&nbsp;FieldDescriptor::default_value_string() const</code></h3><div style=margin-left:16px><p>Get the field default value if <a href=google.protobuf.descriptor#FieldDescriptor.cpp_type>cpp_type()</a> == CPPTYPE_STRING.</p><p>If no explicit default was defined, the default is the empty string.</p></div><hr><h3 id=FieldDescriptor.containing_type.details><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FieldDescriptor::containing_type() const</code></h3><div style=margin-left:16px><p>The <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> for the message of which this is a field.</p><p>For extensions, this is the extended type. Never nullptr.</p></div><hr><h3 id=FieldDescriptor.extension_scope.details><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FieldDescriptor::extension_scope() const</code></h3><div style=margin-left:16px><p>An extension may be declared within the scope of another message.</p><p>If this field is an extension (<a href=google.protobuf.descriptor#FieldDescriptor.is_extension>is_extension()</a> is true), then <a href=google.protobuf.descriptor#FieldDescriptor.extension_scope>extension_scope()</a> returns that message, or nullptr if the extension was declared at global scope. If this is not an extension, <a href=google.protobuf.descriptor#FieldDescriptor.extension_scope>extension_scope()</a> is undefined (may assert-fail).</p></div><hr><h3 id=FieldDescriptor.message_type.details><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FieldDescriptor::message_type() const</code></h3><div style=margin-left:16px><p>If type is TYPE_MESSAGE or TYPE_GROUP, returns a descriptor for the message or the group type.</p><p>Otherwise, returns null.</p></div><hr><h3 id=FieldDescriptor.enum_type.details><code>const <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FieldDescriptor::enum_type() const</code></h3><div style=margin-left:16px><p>If type is TYPE_ENUM, returns a descriptor for the enum.</p><p>Otherwise, returns null.</p></div><hr><h3 id=FieldDescriptor.options.details><code>const FieldOptions &<br>&nbsp;&nbsp;&nbsp;&nbsp;FieldDescriptor::options() const</code></h3><div style=margin-left:16px><p>Get the FieldOptions for this field.</p><p>This includes things listed in square brackets after the field definition. E.g., the field:</p><pre>optional string text = 1 [[]ctype=CORD];</pre><p>has the "ctype" option set. Allowed options are defined by FieldOptions in descriptor.proto, and any available extensions of that message.</p></div><hr><h3 id=FieldDescriptor.PrintableNameForExtension.details><code>const std::string &<br>&nbsp;&nbsp;&nbsp;&nbsp;FieldDescriptor::PrintableNameForExtension() const</code></h3><div style=margin-left:16px><p>Returns <a href=google.protobuf.descriptor#FieldDescriptor.full_name>full_name()</a> except if the field is a MessageSet extension, in which case it returns the <a href=google.protobuf.descriptor#FieldDescriptor.full_name>full_name()</a> of the containing message type for backwards compatibility with proto1.</p><p>A MessageSet extension is defined as an optional message extension whose containing type has the message_set_wire_format option set. This should be true of extensions of google.protobuf.bridge.MessageSet; by convention, such extensions are named "message_set_extension".</p><p>The opposite operation (looking up an extension's <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> given its printable name) can be accomplished with</p><pre>message-&gt;file()-&gt;pool()-&gt;FindExtensionByPrintableName(message, name)</pre><p>where the extension extends "message".</p></div><hr><h3 id=FieldDescriptor.GetSourceLocation.details><code>bool FieldDescriptor::GetSourceLocation(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></h3><div style=margin-left:16px><p>Updates |*out_location| to the source location of the complete extent of this field declaration.</p><p>Returns false and leaves |*out_location| unchanged iff location information was not available.</p></div><h2 id=OneofDescriptor>class OneofDescriptor</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Describes a oneof defined in a message type.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=OneofDescriptor.Proto><div style=padding-left:16px;text-indent:-16px><code>OneofDescriptorProto <b>Proto</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=OneofDescriptor.name><div style=padding-left:16px;text-indent:-16px><code><b>name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Name of this oneof.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=OneofDescriptor.full_name><div style=padding-left:16px;text-indent:-16px><code><b>full_name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Fully-qualified name of the oneof.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=OneofDescriptor.index><div style=padding-left:16px;text-indent:-16px><code><b>index</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Index of this oneof within the message's oneof array.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=OneofDescriptor.is_synthetic><div style=padding-left:16px;text-indent:-16px><code><b>is_synthetic</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns whether this oneof was inserted by the compiler to wrap a proto3 optional field. <a href=#OneofDescriptor.is_synthetic.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=OneofDescriptor.file><div style=padding-left:16px;text-indent:-16px><code><b>file</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The .proto file in which this oneof was defined. Never nullptr.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=OneofDescriptor.containing_type><div style=padding-left:16px;text-indent:-16px><code><b>containing_type</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> for the message containing this oneof.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=OneofDescriptor.field_count><div style=padding-left:16px;text-indent:-16px><code><b>field_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of (non-extension) fields which are members of this oneof.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=OneofDescriptor.field><div style=padding-left:16px;text-indent:-16px><code><b>field</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get a member of this oneof, in the order in which they were declared in the .proto file. <a href=#OneofDescriptor.field.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const OneofOptions &</code></td><td style=border-left-width:0 id=OneofDescriptor.options><div style=padding-left:16px;text-indent:-16px><code><b>options</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=OneofDescriptor.CopyTo><div style=padding-left:16px;text-indent:-16px><code><b>CopyTo</b>(OneofDescriptorProto * proto) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.CopyTo>Descriptor::CopyTo()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=OneofDescriptor.DebugString><div style=padding-left:16px;text-indent:-16px><code><b>DebugString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.DebugString>Descriptor::DebugString()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=OneofDescriptor.DebugStringWithOptions><div style=padding-left:16px;text-indent:-16px><code><b>DebugStringWithOptions</b>(const <a href=google.protobuf.descriptor#DebugStringOptions>DebugStringOptions</a> & options) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.DebugStringWithOptions>Descriptor::DebugStringWithOptions()</a>.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Source Location</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=OneofDescriptor.GetSourceLocation><div style=padding-left:16px;text-indent:-16px><code><b>GetSourceLocation</b>(<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Updates |*out_location| to the source location of the complete extent of this oneof declaration. <a href=#OneofDescriptor.GetSourceLocation.details>more...</a></div></td></tr></table><hr><h3 id=OneofDescriptor.is_synthetic.details><code>bool OneofDescriptor::is_synthetic() const</code></h3><div style=margin-left:16px><p>Returns whether this oneof was inserted by the compiler to wrap a proto3 optional field.</p><p>If this returns true, code generators should <i>not</i> emit it.</p></div><hr><h3 id=OneofDescriptor.field.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;OneofDescriptor::field(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Get a member of this oneof, in the order in which they were declared in the .proto file.</p><p>Can't use PROTOBUF_DEFINE_ARRAY_ACCESSOR because fields_ is actually an array of pointers rather than the usual array of objects.</p><p>Does not include extensions.</p></div><hr><h3 id=OneofDescriptor.GetSourceLocation.details><code>bool OneofDescriptor::GetSourceLocation(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></h3><div style=margin-left:16px><p>Updates |*out_location| to the source location of the complete extent of this oneof declaration.</p><p>Returns false and leaves |*out_location| unchanged iff location information was not available.</p></div><h2 id=EnumDescriptor>class EnumDescriptor</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Describes an enum type defined in a .proto file.</p><p>To get the <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> for a generated enum type, call TypeName_descriptor(). Use <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> to construct your own descriptors.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=EnumDescriptor.Proto><div style=padding-left:16px;text-indent:-16px><code>EnumDescriptorProto <b>Proto</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=EnumDescriptor.name><div style=padding-left:16px;text-indent:-16px><code><b>name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The name of this enum type in the containing scope.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=EnumDescriptor.full_name><div style=padding-left:16px;text-indent:-16px><code><b>full_name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The fully-qualified name of the enum type, scope delimited by periods.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=EnumDescriptor.index><div style=padding-left:16px;text-indent:-16px><code><b>index</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Index of this enum within the file or containing message's enum array.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=EnumDescriptor.file><div style=padding-left:16px;text-indent:-16px><code><b>file</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The .proto file in which this enum type was defined. Never nullptr.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=EnumDescriptor.value_count><div style=padding-left:16px;text-indent:-16px><code><b>value_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of values for this <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a>. <a href=#EnumDescriptor.value_count.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *</code></td><td style=border-left-width:0 id=EnumDescriptor.value><div style=padding-left:16px;text-indent:-16px><code><b>value</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets a value by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#EnumDescriptor.value_count>value_count()</a>. <a href=#EnumDescriptor.value.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *</code></td><td style=border-left-width:0 id=EnumDescriptor.FindValueByName><div style=padding-left:16px;text-indent:-16px><code><b>FindValueByName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Looks up a value by name. Returns nullptr if no such value exists.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *</code></td><td style=border-left-width:0 id=EnumDescriptor.FindValueByNumber><div style=padding-left:16px;text-indent:-16px><code><b>FindValueByNumber</b>(int number) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Looks up a value by number. <a href=#EnumDescriptor.FindValueByNumber.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=EnumDescriptor.containing_type><div style=padding-left:16px;text-indent:-16px><code><b>containing_type</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If this enum type is nested in a message type, this is that message type. <a href=#EnumDescriptor.containing_type.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const EnumOptions &</code></td><td style=border-left-width:0 id=EnumDescriptor.options><div style=padding-left:16px;text-indent:-16px><code><b>options</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get options for this enum type. <a href=#EnumDescriptor.options.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=EnumDescriptor.CopyTo><div style=padding-left:16px;text-indent:-16px><code><b>CopyTo</b>(EnumDescriptorProto * proto) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.CopyTo>Descriptor::CopyTo()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=EnumDescriptor.DebugString><div style=padding-left:16px;text-indent:-16px><code><b>DebugString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.DebugString>Descriptor::DebugString()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=EnumDescriptor.DebugStringWithOptions><div style=padding-left:16px;text-indent:-16px><code><b>DebugStringWithOptions</b>(const <a href=google.protobuf.descriptor#DebugStringOptions>DebugStringOptions</a> & options) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.DebugStringWithOptions>Descriptor::DebugStringWithOptions()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=EnumDescriptor.is_placeholder><div style=padding-left:16px;text-indent:-16px><code><b>is_placeholder</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if this is a placeholder for an unknown enum. <a href=#EnumDescriptor.is_placeholder.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Reserved fields</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=EnumDescriptor.reserved_range_count><div style=padding-left:16px;text-indent:-16px><code><b>reserved_range_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of reserved ranges in this message type.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumDescriptor.ReservedRange>EnumDescriptor::ReservedRange</a> *</code></td><td style=border-left-width:0 id=EnumDescriptor.reserved_range><div style=padding-left:16px;text-indent:-16px><code><b>reserved_range</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets an reserved range by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#EnumDescriptor.reserved_range_count>reserved_range_count()</a>. <a href=#EnumDescriptor.reserved_range.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=EnumDescriptor.IsReservedNumber><div style=padding-left:16px;text-indent:-16px><code><b>IsReservedNumber</b>(int number) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if the number is in one of the reserved ranges.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumDescriptor.ReservedRange>EnumDescriptor::ReservedRange</a> *</code></td><td style=border-left-width:0 id=EnumDescriptor.FindReservedRangeContainingNumber><div style=padding-left:16px;text-indent:-16px><code><b>FindReservedRangeContainingNumber</b>(int number) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns nullptr if no reserved range contains the given number.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=EnumDescriptor.reserved_name_count><div style=padding-left:16px;text-indent:-16px><code><b>reserved_name_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of reserved field names in this message type.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=EnumDescriptor.reserved_name><div style=padding-left:16px;text-indent:-16px><code><b>reserved_name</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets a reserved name by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#EnumDescriptor.reserved_name_count>reserved_name_count()</a>. <a href=#EnumDescriptor.reserved_name.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=EnumDescriptor.IsReservedName><div style=padding-left:16px;text-indent:-16px><code><b>IsReservedName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if the field name is reserved.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Source Location</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=EnumDescriptor.GetSourceLocation><div style=padding-left:16px;text-indent:-16px><code><b>GetSourceLocation</b>(<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Updates |*out_location| to the source location of the complete extent of this enum declaration. <a href=#EnumDescriptor.GetSourceLocation.details>more...</a></div></td></tr></table><hr><h3 id=EnumDescriptor.value_count.details><code>int EnumDescriptor::value_count() const</code></h3><div style=margin-left:16px><p>The number of values for this <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a>.</p><p>Guaranteed to be greater than zero.</p></div><hr><h3 id=EnumDescriptor.value.details><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;EnumDescriptor::value(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets a value by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#EnumDescriptor.value_count>value_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=EnumDescriptor.FindValueByNumber.details><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;EnumDescriptor::FindValueByNumber(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int number) const</code></h3><div style=margin-left:16px><p>Looks up a value by number.</p><p>Returns nullptr if no such value exists. If multiple values have this number, the first one defined is returned.</p></div><hr><h3 id=EnumDescriptor.containing_type.details><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;EnumDescriptor::containing_type() const</code></h3><div style=margin-left:16px><p>If this enum type is nested in a message type, this is that message type.</p><p>Otherwise, nullptr.</p></div><hr><h3 id=EnumDescriptor.options.details><code>const EnumOptions &<br>&nbsp;&nbsp;&nbsp;&nbsp;EnumDescriptor::options() const</code></h3><div style=margin-left:16px><p>Get options for this enum type.</p><p>These are specified in the .proto file by placing lines like "option foo = 1234;" in the enum definition. Allowed options are defined by EnumOptions in descriptor.proto, and any available extensions of that message.</p></div><hr><h3 id=EnumDescriptor.is_placeholder.details><code>bool EnumDescriptor::is_placeholder() const</code></h3><div style=margin-left:16px><p>Returns true if this is a placeholder for an unknown enum.</p><p>This will only be the case if this descriptor comes from a <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> with AllowUnknownDependencies() set.</p></div><hr><h3 id=EnumDescriptor.reserved_range.details><code>const <a href=google.protobuf.descriptor#EnumDescriptor.ReservedRange>EnumDescriptor::ReservedRange</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;EnumDescriptor::reserved_range(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets an reserved range by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#EnumDescriptor.reserved_range_count>reserved_range_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=EnumDescriptor.reserved_name.details><code>const std::string &<br>&nbsp;&nbsp;&nbsp;&nbsp;EnumDescriptor::reserved_name(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets a reserved name by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#EnumDescriptor.reserved_name_count>reserved_name_count()</a>.</p><p>Can't use PROTOBUF_DEFINE_ARRAY_ACCESSOR because reserved_names_ is actually an array of pointers rather than the usual array of objects.</p></div><hr><h3 id=EnumDescriptor.GetSourceLocation.details><code>bool EnumDescriptor::GetSourceLocation(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></h3><div style=margin-left:16px><p>Updates |*out_location| to the source location of the complete extent of this enum declaration.</p><p>Returns false and leaves |*out_location| unchanged iff location information was not available.</p></div><h2 id=EnumDescriptor.ReservedRange>struct EnumDescriptor::ReservedRange</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>A range of reserved field numbers.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=EnumDescriptor.ReservedRange.start><div style=padding-left:16px;text-indent:-16px><code><b>start</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>inclusive</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=EnumDescriptor.ReservedRange.end><div style=padding-left:16px;text-indent:-16px><code><b>end</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>inclusive</div></td></tr></table><h2 id=EnumValueDescriptor>class EnumValueDescriptor</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Describes an individual enum constant of a particular type.</p><p>To get the <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> for a given enum value, first get the <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> for its type, then use <a href=google.protobuf.descriptor#EnumDescriptor.FindValueByName>EnumDescriptor::FindValueByName()</a> or <a href=google.protobuf.descriptor#EnumDescriptor.FindValueByNumber>EnumDescriptor::FindValueByNumber()</a>. Use <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> to construct your own descriptors.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=EnumValueDescriptor.Proto><div style=padding-left:16px;text-indent:-16px><code>EnumValueDescriptorProto <b>Proto</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=EnumValueDescriptor.name><div style=padding-left:16px;text-indent:-16px><code><b>name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Name of this enum constant.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=EnumValueDescriptor.index><div style=padding-left:16px;text-indent:-16px><code><b>index</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Index within the enums's <a href=google.protobuf.descriptor#Descriptor>Descriptor</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=EnumValueDescriptor.number><div style=padding-left:16px;text-indent:-16px><code><b>number</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Numeric value of this enum constant.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=EnumValueDescriptor.full_name><div style=padding-left:16px;text-indent:-16px><code><b>full_name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The full_name of an enum value is a sibling symbol of the enum type. <a href=#EnumValueDescriptor.full_name.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=EnumValueDescriptor.file><div style=padding-left:16px;text-indent:-16px><code><b>file</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The .proto file in which this value was defined. Never nullptr.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> *</code></td><td style=border-left-width:0 id=EnumValueDescriptor.type><div style=padding-left:16px;text-indent:-16px><code><b>type</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The type of this value. Never nullptr.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const EnumValueOptions &</code></td><td style=border-left-width:0 id=EnumValueDescriptor.options><div style=padding-left:16px;text-indent:-16px><code><b>options</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get options for this enum value. <a href=#EnumValueDescriptor.options.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=EnumValueDescriptor.CopyTo><div style=padding-left:16px;text-indent:-16px><code><b>CopyTo</b>(EnumValueDescriptorProto * proto) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.CopyTo>Descriptor::CopyTo()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=EnumValueDescriptor.DebugString><div style=padding-left:16px;text-indent:-16px><code><b>DebugString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.DebugString>Descriptor::DebugString()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=EnumValueDescriptor.DebugStringWithOptions><div style=padding-left:16px;text-indent:-16px><code><b>DebugStringWithOptions</b>(const <a href=google.protobuf.descriptor#DebugStringOptions>DebugStringOptions</a> & options) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.DebugStringWithOptions>Descriptor::DebugStringWithOptions()</a>.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Source Location</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=EnumValueDescriptor.GetSourceLocation><div style=padding-left:16px;text-indent:-16px><code><b>GetSourceLocation</b>(<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Updates |*out_location| to the source location of the complete extent of this enum value declaration. <a href=#EnumValueDescriptor.GetSourceLocation.details>more...</a></div></td></tr></table><hr><h3 id=EnumValueDescriptor.full_name.details><code>const std::string &<br>&nbsp;&nbsp;&nbsp;&nbsp;EnumValueDescriptor::full_name() const</code></h3><div style=margin-left:16px><p>The full_name of an enum value is a sibling symbol of the enum type.</p><p>e.g. the full name of FieldDescriptorProto::TYPE_INT32 is actually "google.protobuf.FieldDescriptorProto.TYPE_INT32", NOT "google.protobuf.FieldDescriptorProto.Type.TYPE_INT32". This is to conform with C++ scoping rules for enums.</p></div><hr><h3 id=EnumValueDescriptor.options.details><code>const EnumValueOptions &<br>&nbsp;&nbsp;&nbsp;&nbsp;EnumValueDescriptor::options() const</code></h3><div style=margin-left:16px><p>Get options for this enum value.</p><p>These are specified in the .proto file by adding text like "[[]foo = 1234]" after an enum value definition. Allowed options are defined by EnumValueOptions in descriptor.proto, and any available extensions of that message.</p></div><hr><h3 id=EnumValueDescriptor.GetSourceLocation.details><code>bool EnumValueDescriptor::GetSourceLocation(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></h3><div style=margin-left:16px><p>Updates |*out_location| to the source location of the complete extent of this enum value declaration.</p><p>Returns false and leaves |*out_location| unchanged iff location information was not available.</p></div><h2 id=ServiceDescriptor>class ServiceDescriptor</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Describes an RPC service.</p><p>Use <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> to construct your own descriptors.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=ServiceDescriptor.Proto><div style=padding-left:16px;text-indent:-16px><code>ServiceDescriptorProto <b>Proto</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=ServiceDescriptor.name><div style=padding-left:16px;text-indent:-16px><code><b>name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The name of the service, not including its containing scope.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=ServiceDescriptor.full_name><div style=padding-left:16px;text-indent:-16px><code><b>full_name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The fully-qualified name of the service, scope delimited by periods.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=ServiceDescriptor.index><div style=padding-left:16px;text-indent:-16px><code><b>index</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Index of this service within the file's services array.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=ServiceDescriptor.file><div style=padding-left:16px;text-indent:-16px><code><b>file</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The .proto file in which this service was defined. Never nullptr.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const ServiceOptions &</code></td><td style=border-left-width:0 id=ServiceDescriptor.options><div style=padding-left:16px;text-indent:-16px><code><b>options</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get options for this service type. <a href=#ServiceDescriptor.options.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=ServiceDescriptor.method_count><div style=padding-left:16px;text-indent:-16px><code><b>method_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of methods this service defines.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> *</code></td><td style=border-left-width:0 id=ServiceDescriptor.method><div style=padding-left:16px;text-indent:-16px><code><b>method</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets a <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#ServiceDescriptor.method_count>method_count()</a>. <a href=#ServiceDescriptor.method.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> *</code></td><td style=border-left-width:0 id=ServiceDescriptor.FindMethodByName><div style=padding-left:16px;text-indent:-16px><code><b>FindMethodByName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Look up a <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> by name.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=ServiceDescriptor.CopyTo><div style=padding-left:16px;text-indent:-16px><code><b>CopyTo</b>(ServiceDescriptorProto * proto) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.CopyTo>Descriptor::CopyTo()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=ServiceDescriptor.DebugString><div style=padding-left:16px;text-indent:-16px><code><b>DebugString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.DebugString>Descriptor::DebugString()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=ServiceDescriptor.DebugStringWithOptions><div style=padding-left:16px;text-indent:-16px><code><b>DebugStringWithOptions</b>(const <a href=google.protobuf.descriptor#DebugStringOptions>DebugStringOptions</a> & options) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.DebugStringWithOptions>Descriptor::DebugStringWithOptions()</a>.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Source Location</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=ServiceDescriptor.GetSourceLocation><div style=padding-left:16px;text-indent:-16px><code><b>GetSourceLocation</b>(<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Updates |*out_location| to the source location of the complete extent of this service declaration. <a href=#ServiceDescriptor.GetSourceLocation.details>more...</a></div></td></tr></table><hr><h3 id=ServiceDescriptor.options.details><code>const ServiceOptions &<br>&nbsp;&nbsp;&nbsp;&nbsp;ServiceDescriptor::options() const</code></h3><div style=margin-left:16px><p>Get options for this service type.</p><p>These are specified in the .proto file by placing lines like "option foo = 1234;" in the service definition. Allowed options are defined by ServiceOptions in descriptor.proto, and any available extensions of that message.</p></div><hr><h3 id=ServiceDescriptor.method.details><code>const <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;ServiceDescriptor::method(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets a <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#ServiceDescriptor.method_count>method_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=ServiceDescriptor.GetSourceLocation.details><code>bool ServiceDescriptor::GetSourceLocation(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></h3><div style=margin-left:16px><p>Updates |*out_location| to the source location of the complete extent of this service declaration.</p><p>Returns false and leaves |*out_location| unchanged iff location information was not available.</p></div><h2 id=MethodDescriptor>class MethodDescriptor</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Describes an individual service method.</p><p>To obtain a <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> given a service, first get its <a href=google.protobuf.descriptor#ServiceDescriptor>ServiceDescriptor</a>, then call <a href=google.protobuf.descriptor#ServiceDescriptor.FindMethodByName>ServiceDescriptor::FindMethodByName()</a>. Use <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> to construct your own descriptors.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=MethodDescriptor.Proto><div style=padding-left:16px;text-indent:-16px><code>MethodDescriptorProto <b>Proto</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=MethodDescriptor.name><div style=padding-left:16px;text-indent:-16px><code><b>name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Name of this method, not including containing scope.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=MethodDescriptor.full_name><div style=padding-left:16px;text-indent:-16px><code><b>full_name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The fully-qualified name of the method, scope delimited by periods.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=MethodDescriptor.index><div style=padding-left:16px;text-indent:-16px><code><b>index</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Index within the service's <a href=google.protobuf.descriptor#Descriptor>Descriptor</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=MethodDescriptor.file><div style=padding-left:16px;text-indent:-16px><code><b>file</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The .proto file in which this method was defined. Never nullptr.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#ServiceDescriptor>ServiceDescriptor</a> *</code></td><td style=border-left-width:0 id=MethodDescriptor.service><div style=padding-left:16px;text-indent:-16px><code><b>service</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets the service to which this method belongs. Never nullptr.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=MethodDescriptor.input_type><div style=padding-left:16px;text-indent:-16px><code><b>input_type</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets the type of protocol message which this method accepts as input.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=MethodDescriptor.output_type><div style=padding-left:16px;text-indent:-16px><code><b>output_type</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets the type of protocol message which this message produces as output.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MethodDescriptor.client_streaming><div style=padding-left:16px;text-indent:-16px><code><b>client_streaming</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets whether the client streams multiple requests.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MethodDescriptor.server_streaming><div style=padding-left:16px;text-indent:-16px><code><b>server_streaming</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets whether the server streams multiple responses.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const MethodOptions &</code></td><td style=border-left-width:0 id=MethodDescriptor.options><div style=padding-left:16px;text-indent:-16px><code><b>options</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get options for this method. <a href=#MethodDescriptor.options.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MethodDescriptor.CopyTo><div style=padding-left:16px;text-indent:-16px><code><b>CopyTo</b>(MethodDescriptorProto * proto) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.CopyTo>Descriptor::CopyTo()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=MethodDescriptor.DebugString><div style=padding-left:16px;text-indent:-16px><code><b>DebugString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.DebugString>Descriptor::DebugString()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=MethodDescriptor.DebugStringWithOptions><div style=padding-left:16px;text-indent:-16px><code><b>DebugStringWithOptions</b>(const <a href=google.protobuf.descriptor#DebugStringOptions>DebugStringOptions</a> & options) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.DebugStringWithOptions>Descriptor::DebugStringWithOptions()</a>.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Source Location</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MethodDescriptor.GetSourceLocation><div style=padding-left:16px;text-indent:-16px><code><b>GetSourceLocation</b>(<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Updates |*out_location| to the source location of the complete extent of this method declaration. <a href=#MethodDescriptor.GetSourceLocation.details>more...</a></div></td></tr></table><hr><h3 id=MethodDescriptor.options.details><code>const MethodOptions &<br>&nbsp;&nbsp;&nbsp;&nbsp;MethodDescriptor::options() const</code></h3><div style=margin-left:16px><p>Get options for this method.</p><p>These are specified in the .proto file by placing lines like "option foo = 1234;" in curly-braces after a method declaration. Allowed options are defined by MethodOptions in descriptor.proto, and any available extensions of that message.</p></div><hr><h3 id=MethodDescriptor.GetSourceLocation.details><code>bool MethodDescriptor::GetSourceLocation(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></h3><div style=margin-left:16px><p>Updates |*out_location| to the source location of the complete extent of this method declaration.</p><p>Returns false and leaves |*out_location| unchanged iff location information was not available.</p></div><h2 id=FileDescriptor>class FileDescriptor</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Describes a whole .proto file.</p><p>To get the <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> for a compiled-in file, get the descriptor for something defined in that file and call descriptor->file(). Use <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> to construct your own descriptors.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=FileDescriptor.Syntax><div style=padding-left:16px;text-indent:-16px><code><b>Syntax</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Syntax of this file. <a href=#FileDescriptor.Syntax.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=FileDescriptor.Proto><div style=padding-left:16px;text-indent:-16px><code>FileDescriptorProto <b>Proto</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=FileDescriptor.name><div style=padding-left:16px;text-indent:-16px><code><b>name</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The filename, relative to the source tree. <a href=#FileDescriptor.name.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=FileDescriptor.package><div style=padding-left:16px;text-indent:-16px><code><b>package</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The package, e.g. "google.protobuf.compiler".</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.pool><div style=padding-left:16px;text-indent:-16px><code><b>pool</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> in which this <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> and all its contents were allocated. <a href=#FileDescriptor.pool.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=FileDescriptor.dependency_count><div style=padding-left:16px;text-indent:-16px><code><b>dependency_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of files imported by this one.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.dependency><div style=padding-left:16px;text-indent:-16px><code><b>dependency</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets an imported file by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#FileDescriptor.dependency_count>dependency_count()</a>. <a href=#FileDescriptor.dependency.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=FileDescriptor.public_dependency_count><div style=padding-left:16px;text-indent:-16px><code><b>public_dependency_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of files public imported by this one. <a href=#FileDescriptor.public_dependency_count.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.public_dependency><div style=padding-left:16px;text-indent:-16px><code><b>public_dependency</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets a public imported file by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#FileDescriptor.public_dependency_count>public_dependency_count()</a>. <a href=#FileDescriptor.public_dependency.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=FileDescriptor.weak_dependency_count><div style=padding-left:16px;text-indent:-16px><code><b>weak_dependency_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of files that are imported for weak fields. <a href=#FileDescriptor.weak_dependency_count.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.weak_dependency><div style=padding-left:16px;text-indent:-16px><code><b>weak_dependency</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets a weak imported file by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#FileDescriptor.weak_dependency_count>weak_dependency_count()</a>. <a href=#FileDescriptor.weak_dependency.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=FileDescriptor.message_type_count><div style=padding-left:16px;text-indent:-16px><code><b>message_type_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Number of top-level message types defined in this file. <a href=#FileDescriptor.message_type_count.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.message_type><div style=padding-left:16px;text-indent:-16px><code><b>message_type</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets a top-level message type, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#FileDescriptor.message_type_count>message_type_count()</a>. <a href=#FileDescriptor.message_type.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=FileDescriptor.enum_type_count><div style=padding-left:16px;text-indent:-16px><code><b>enum_type_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Number of top-level enum types defined in this file. <a href=#FileDescriptor.enum_type_count.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.enum_type><div style=padding-left:16px;text-indent:-16px><code><b>enum_type</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets a top-level enum type, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#FileDescriptor.enum_type_count>enum_type_count()</a>. <a href=#FileDescriptor.enum_type.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=FileDescriptor.service_count><div style=padding-left:16px;text-indent:-16px><code><b>service_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Number of services defined in this file.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#ServiceDescriptor>ServiceDescriptor</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.service><div style=padding-left:16px;text-indent:-16px><code><b>service</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets a service, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#FileDescriptor.service_count>service_count()</a>. <a href=#FileDescriptor.service.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=FileDescriptor.extension_count><div style=padding-left:16px;text-indent:-16px><code><b>extension_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Number of extensions defined at file scope. <a href=#FileDescriptor.extension_count.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.extension><div style=padding-left:16px;text-indent:-16px><code><b>extension</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets an extension's descriptor, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#FileDescriptor.extension_count>extension_count()</a>. <a href=#FileDescriptor.extension.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const FileOptions &</code></td><td style=border-left-width:0 id=FileDescriptor.options><div style=padding-left:16px;text-indent:-16px><code><b>options</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get options for this file. <a href=#FileDescriptor.options.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.descriptor#FileDescriptor.Syntax>Syntax</a></code></td><td style=border-left-width:0 id=FileDescriptor.syntax><div style=padding-left:16px;text-indent:-16px><code><b>syntax</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.FindMessageTypeByName><div style=padding-left:16px;text-indent:-16px><code><b>FindMessageTypeByName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find a top-level message type by name (not full_name). <a href=#FileDescriptor.FindMessageTypeByName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.FindEnumTypeByName><div style=padding-left:16px;text-indent:-16px><code><b>FindEnumTypeByName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find a top-level enum type by name. Returns nullptr if not found.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.FindEnumValueByName><div style=padding-left:16px;text-indent:-16px><code><b>FindEnumValueByName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find an enum value defined in any top-level enum by name. <a href=#FileDescriptor.FindEnumValueByName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#ServiceDescriptor>ServiceDescriptor</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.FindServiceByName><div style=padding-left:16px;text-indent:-16px><code><b>FindServiceByName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find a service definition by name. Returns nullptr if not found.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.FindExtensionByName><div style=padding-left:16px;text-indent:-16px><code><b>FindExtensionByName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find a top-level extension definition by name. <a href=#FileDescriptor.FindExtensionByName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.FindExtensionByLowercaseName><div style=padding-left:16px;text-indent:-16px><code><b>FindExtensionByLowercaseName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Similar to <a href=google.protobuf.descriptor#FileDescriptor.FindExtensionByName>FindExtensionByName()</a>, but searches by lowercased-name. <a href=#FileDescriptor.FindExtensionByLowercaseName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=FileDescriptor.FindExtensionByCamelcaseName><div style=padding-left:16px;text-indent:-16px><code><b>FindExtensionByCamelcaseName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Similar to <a href=google.protobuf.descriptor#FileDescriptor.FindExtensionByName>FindExtensionByName()</a>, but searches by camelcased-name. <a href=#FileDescriptor.FindExtensionByCamelcaseName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=FileDescriptor.CopyTo><div style=padding-left:16px;text-indent:-16px><code><b>CopyTo</b>(FileDescriptorProto * proto) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.CopyTo>Descriptor::CopyTo()</a>. <a href=#FileDescriptor.CopyTo.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=FileDescriptor.CopySourceCodeInfoTo><div style=padding-left:16px;text-indent:-16px><code><b>CopySourceCodeInfoTo</b>(FileDescriptorProto * proto) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write the source code information of this <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> into the given FileDescriptorProto. <a href=#FileDescriptor.CopySourceCodeInfoTo.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=FileDescriptor.CopyJsonNameTo><div style=padding-left:16px;text-indent:-16px><code><b>CopyJsonNameTo</b>(FileDescriptorProto * proto) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Fill the json_name field of FieldDescriptorProto for all fields. <a href=#FileDescriptor.CopyJsonNameTo.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=FileDescriptor.DebugString><div style=padding-left:16px;text-indent:-16px><code><b>DebugString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.DebugString>Descriptor::DebugString()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=FileDescriptor.DebugStringWithOptions><div style=padding-left:16px;text-indent:-16px><code><b>DebugStringWithOptions</b>(const <a href=google.protobuf.descriptor#DebugStringOptions>DebugStringOptions</a> & options) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.descriptor#Descriptor.DebugStringWithOptions>Descriptor::DebugStringWithOptions()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FileDescriptor.is_placeholder><div style=padding-left:16px;text-indent:-16px><code><b>is_placeholder</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if this is a placeholder for an unknown file. <a href=#FileDescriptor.is_placeholder.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FileDescriptor.GetSourceLocation><div style=padding-left:16px;text-indent:-16px><code><b>GetSourceLocation</b>(<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Updates |*out_location| to the source location of the complete extent of this file declaration (namely, the empty path).</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FileDescriptor.GetSourceLocation><div style=padding-left:16px;text-indent:-16px><code><b>GetSourceLocation</b>(const std::vector&lt; int > & path, <a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Updates |*out_location| to the source location of the complete extent of the declaration or declaration-part denoted by |path|. <a href=#FileDescriptor.GetSourceLocation.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static const char *</code></td><td style=border-left-width:0 id=FileDescriptor.SyntaxName><div style=padding-left:16px;text-indent:-16px><code><b>SyntaxName</b>(<a href=google.protobuf.descriptor#FileDescriptor.Syntax>Syntax</a> syntax)</code></div></td></tr></table><hr><h3 id=FileDescriptor.Syntax.details><code>enum FileDescriptor::Syntax {<br>&nbsp;&nbsp;SYNTAX_UNKNOWN = = 0,<br>&nbsp;&nbsp;SYNTAX_PROTO2 = = 2,<br>&nbsp;&nbsp;SYNTAX_PROTO3 = = 3<br>}</code></h3><div style=margin-left:16px><p>Syntax of this file.</p><table><tr><td>SYNTAX_UNKNOWN</td><td></td></tr><tr><td>SYNTAX_PROTO2</td><td></td></tr><tr><td>SYNTAX_PROTO3</td><td></td></tr></table></div><hr><h3 id=FileDescriptor.name.details><code>const std::string &<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::name() const</code></h3><div style=margin-left:16px><p>The filename, relative to the source tree.</p><p>e.g. "foo/bar/baz.proto"</p></div><hr><h3 id=FileDescriptor.pool.details><code>const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::pool() const</code></h3><div style=margin-left:16px><p>The <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> in which this <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> and all its contents were allocated.</p><p>Never nullptr.</p></div><hr><h3 id=FileDescriptor.dependency.details><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::dependency(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets an imported file by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#FileDescriptor.dependency_count>dependency_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=FileDescriptor.public_dependency_count.details><code>int FileDescriptor::public_dependency_count() const</code></h3><div style=margin-left:16px><p>The number of files public imported by this one.</p><p>The public dependency list is a subset of the dependency list.</p></div><hr><h3 id=FileDescriptor.public_dependency.details><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::public_dependency(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets a public imported file by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#FileDescriptor.public_dependency_count>public_dependency_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=FileDescriptor.weak_dependency_count.details><code>int FileDescriptor::weak_dependency_count() const</code></h3><div style=margin-left:16px><p>The number of files that are imported for weak fields.</p><p>The weak dependency list is a subset of the dependency list.</p></div><hr><h3 id=FileDescriptor.weak_dependency.details><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::weak_dependency(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets a weak imported file by index, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#FileDescriptor.weak_dependency_count>weak_dependency_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=FileDescriptor.message_type_count.details><code>int FileDescriptor::message_type_count() const</code></h3><div style=margin-left:16px><p>Number of top-level message types defined in this file.</p><p>(This does not include nested types.)</p></div><hr><h3 id=FileDescriptor.message_type.details><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::message_type(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets a top-level message type, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#FileDescriptor.message_type_count>message_type_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=FileDescriptor.enum_type_count.details><code>int FileDescriptor::enum_type_count() const</code></h3><div style=margin-left:16px><p>Number of top-level enum types defined in this file.</p><p>(This does not include nested types.)</p></div><hr><h3 id=FileDescriptor.enum_type.details><code>const <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::enum_type(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets a top-level enum type, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#FileDescriptor.enum_type_count>enum_type_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=FileDescriptor.service.details><code>const <a href=google.protobuf.descriptor#ServiceDescriptor>ServiceDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::service(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets a service, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#FileDescriptor.service_count>service_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=FileDescriptor.extension_count.details><code>int FileDescriptor::extension_count() const</code></h3><div style=margin-left:16px><p>Number of extensions defined at file scope.</p><p>(This does not include extensions nested within message types.)</p></div><hr><h3 id=FileDescriptor.extension.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::extension(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Gets an extension's descriptor, where 0 &lt;= index &lt; <a href=google.protobuf.descriptor#FileDescriptor.extension_count>extension_count()</a>.</p><p>These are returned in the order they were defined in the .proto file.</p></div><hr><h3 id=FileDescriptor.options.details><code>const FileOptions &<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::options() const</code></h3><div style=margin-left:16px><p>Get options for this file.</p><p>These are specified in the .proto file by placing lines like "option foo = 1234;" at the top level, outside of any other definitions. Allowed options are defined by FileOptions in descriptor.proto, and any available extensions of that message.</p></div><hr><h3 id=FileDescriptor.FindMessageTypeByName.details><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::FindMessageTypeByName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam name) const</code></h3><div style=margin-left:16px><p>Find a top-level message type by name (not full_name).</p><p>Returns nullptr if not found.</p></div><hr><h3 id=FileDescriptor.FindEnumValueByName.details><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::FindEnumValueByName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam name) const</code></h3><div style=margin-left:16px><p>Find an enum value defined in any top-level enum by name.</p><p>Returns nullptr if not found.</p></div><hr><h3 id=FileDescriptor.FindExtensionByName.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::FindExtensionByName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam name) const</code></h3><div style=margin-left:16px><p>Find a top-level extension definition by name.</p><p>Returns nullptr if not found.</p></div><hr><h3 id=FileDescriptor.FindExtensionByLowercaseName.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::FindExtensionByLowercaseName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam name) const</code></h3><div style=margin-left:16px><p>Similar to <a href=google.protobuf.descriptor#FileDescriptor.FindExtensionByName>FindExtensionByName()</a>, but searches by lowercased-name.</p><p>See <a href=google.protobuf.descriptor#Descriptor.FindFieldByLowercaseName>Descriptor::FindFieldByLowercaseName()</a>.</p></div><hr><h3 id=FileDescriptor.FindExtensionByCamelcaseName.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptor::FindExtensionByCamelcaseName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam name) const</code></h3><div style=margin-left:16px><p>Similar to <a href=google.protobuf.descriptor#FileDescriptor.FindExtensionByName>FindExtensionByName()</a>, but searches by camelcased-name.</p><p>See <a href=google.protobuf.descriptor#Descriptor.FindFieldByCamelcaseName>Descriptor::FindFieldByCamelcaseName()</a>.</p></div><hr><h3 id=FileDescriptor.CopyTo.details><code>void FileDescriptor::CopyTo(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * proto) const</code></h3><div style=margin-left:16px><p>See <a href=google.protobuf.descriptor#Descriptor.CopyTo>Descriptor::CopyTo()</a>.</p><p>Notes:</p><ul><li>This method does NOT copy source code information since it is relatively large and rarely needed. See <a href=google.protobuf.descriptor#FileDescriptor.CopySourceCodeInfoTo>CopySourceCodeInfoTo()</a> below.</li></ul></div><hr><h3 id=FileDescriptor.CopySourceCodeInfoTo.details><code>void FileDescriptor::CopySourceCodeInfoTo(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * proto) const</code></h3><div style=margin-left:16px><p>Write the source code information of this <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> into the given FileDescriptorProto.</p><p>See <a href=google.protobuf.descriptor#FileDescriptor.CopyTo>CopyTo()</a> above.</p></div><hr><h3 id=FileDescriptor.CopyJsonNameTo.details><code>void FileDescriptor::CopyJsonNameTo(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * proto) const</code></h3><div style=margin-left:16px><p>Fill the json_name field of FieldDescriptorProto for all fields.</p><p>Can only be called after <a href=google.protobuf.descriptor#FileDescriptor.CopyTo>CopyTo()</a>.</p></div><hr><h3 id=FileDescriptor.is_placeholder.details><code>bool FileDescriptor::is_placeholder() const</code></h3><div style=margin-left:16px><p>Returns true if this is a placeholder for an unknown file.</p><p>This will only be the case if this descriptor comes from a <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> with AllowUnknownDependencies() set.</p></div><hr><h3 id=FileDescriptor.GetSourceLocation.details><code>bool FileDescriptor::GetSourceLocation(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; int > & path,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.descriptor#SourceLocation>SourceLocation</a> * out_location) const</code></h3><div style=margin-left:16px><p>Updates |*out_location| to the source location of the complete extent of the declaration or declaration-part denoted by |path|.</p><p>Returns false and leaves |*out_location| unchanged iff location information was not available. (See SourceCodeInfo for description of path encoding.)</p></div><h2 id=DescriptorPool>class DescriptorPool</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Used to construct descriptors.</p><p>Normally you won't want to build your own descriptors. <a href=google.protobuf.message#Message>Message</a> classes constructed by the protocol compiler will provide them for you. However, if you are implementing <a href=google.protobuf.message#Message>Message</a> on your own, or if you are writing a program which can operate on totally arbitrary types and needs to load them from some sort of database, you might need to.</p><p>Since Descriptors are composed of a whole lot of cross-linked bits of data that would be a pain to put together manually, the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> class is provided to make the process easier. It can take a FileDescriptorProto (defined in descriptor.proto), validate it, and convert it to a set of nicely cross-linked Descriptors.</p><p><a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> also helps with memory management. Descriptors are composed of many objects containing static data and pointers to each other. In all likelihood, when it comes time to delete this data, you'll want to delete it all at once. In fact, it is not uncommon to have a whole pool of descriptors all cross-linked with each other which you wish to delete all at once. This class represents such a pool, and handles the memory management for you.</p><p>You can also search for descriptors within a <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> by name, and extensions by number.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=DescriptorPool.DescriptorPool><div style=padding-left:16px;text-indent:-16px><code><b>DescriptorPool</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create a normal, empty <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=DescriptorPool.DescriptorPool><div style=padding-left:16px;text-indent:-16px><code><b>DescriptorPool</b>(<a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> * fallback_database, <a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector>ErrorCollector</a> * error_collector = nullptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=DescriptorPool.~DescriptorPool><div style=padding-left:16px;text-indent:-16px><code><b>~DescriptorPool</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.FindFileByName><div style=padding-left:16px;text-indent:-16px><code><b>FindFileByName</b>(ConstStringParam name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find a <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> in the pool by file name. <a href=#DescriptorPool.FindFileByName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.FindFileContainingSymbol><div style=padding-left:16px;text-indent:-16px><code><b>FindFileContainingSymbol</b>(ConstStringParam symbol_name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> in the pool which defines the given symbol. <a href=#DescriptorPool.FindFileContainingSymbol.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.generated_pool><div style=padding-left:16px;text-indent:-16px><code><b>generated_pool</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get a pointer to the generated pool. <a href=#DescriptorPool.generated_pool.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Looking up descriptors</h3><div style=font-style:italic;font-weight:400>These find descriptors by fully-qualified name. These will find both top-level descriptors and nested descriptors. They return nullptr if not found.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.FindMessageTypeByName><div style=padding-left:16px;text-indent:-16px><code><b>FindMessageTypeByName</b>(ConstStringParam name) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.FindFieldByName><div style=padding-left:16px;text-indent:-16px><code><b>FindFieldByName</b>(ConstStringParam name) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.FindExtensionByName><div style=padding-left:16px;text-indent:-16px><code><b>FindExtensionByName</b>(ConstStringParam name) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#OneofDescriptor>OneofDescriptor</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.FindOneofByName><div style=padding-left:16px;text-indent:-16px><code><b>FindOneofByName</b>(ConstStringParam name) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumDescriptor>EnumDescriptor</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.FindEnumTypeByName><div style=padding-left:16px;text-indent:-16px><code><b>FindEnumTypeByName</b>(ConstStringParam name) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.FindEnumValueByName><div style=padding-left:16px;text-indent:-16px><code><b>FindEnumValueByName</b>(ConstStringParam name) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#ServiceDescriptor>ServiceDescriptor</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.FindServiceByName><div style=padding-left:16px;text-indent:-16px><code><b>FindServiceByName</b>(ConstStringParam name) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.FindMethodByName><div style=padding-left:16px;text-indent:-16px><code><b>FindMethodByName</b>(ConstStringParam name) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.FindExtensionByNumber><div style=padding-left:16px;text-indent:-16px><code><b>FindExtensionByNumber</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * extendee, int number) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Finds an extension of the given type by number. <a href=#DescriptorPool.FindExtensionByNumber.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.FindExtensionByPrintableName><div style=padding-left:16px;text-indent:-16px><code><b>FindExtensionByPrintableName</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * extendee, ConstStringParam printable_name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Finds an extension of the given type by its printable name. <a href=#DescriptorPool.FindExtensionByPrintableName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=DescriptorPool.FindAllExtensions><div style=padding-left:16px;text-indent:-16px><code><b>FindAllExtensions</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * extendee, std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > * out) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Finds extensions of extendee. <a href=#DescriptorPool.FindAllExtensions.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Building descriptors</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.BuildFile><div style=padding-left:16px;text-indent:-16px><code><b>BuildFile</b>(const FileDescriptorProto & proto)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Convert the FileDescriptorProto to real descriptors and place them in this <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a>. <a href=#DescriptorPool.BuildFile.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.BuildFileCollectingErrors><div style=padding-left:16px;text-indent:-16px><code><b>BuildFileCollectingErrors</b>(const FileDescriptorProto & proto, <a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector>ErrorCollector</a> * error_collector)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Same as <a href=google.protobuf.descriptor#DescriptorPool.BuildFile>BuildFile()</a> except errors are sent to the given <a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector>ErrorCollector</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=DescriptorPool.AllowUnknownDependencies><div style=padding-left:16px;text-indent:-16px><code><b>AllowUnknownDependencies</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>By default, it is an error if a FileDescriptorProto contains references to types or other files that are not found in the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> (or its backing <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a>, if any). <a href=#DescriptorPool.AllowUnknownDependencies.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=DescriptorPool.EnforceWeakDependencies><div style=padding-left:16px;text-indent:-16px><code><b>EnforceWeakDependencies</b>(bool enforce)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>By default, weak imports are allowed to be missing, in which case we will use a placeholder for the dependency and convert the field to be an Empty message field. <a href=#DescriptorPool.EnforceWeakDependencies.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Internal stuff</h3><div style=font-style:italic;font-weight:400><p>These methods MUST NOT be called from outside the proto2 library.</p><p>These methods may contain hidden pitfalls and may be removed in a future library version.</p></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=DescriptorPool.DescriptorPool><div style=padding-left:16px;text-indent:-16px><code><b>DescriptorPool</b>(const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> * underlay)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create a <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> which is overlaid on top of some other pool. <a href=#DescriptorPool.DescriptorPool.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=DescriptorPool.DisallowEnforceUtf8><div style=padding-left:16px;text-indent:-16px><code><b>DisallowEnforceUtf8</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Disallow [[]enforce_utf8 = false] in .proto files.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=DescriptorPool.InternalDontEnforceDependencies><div style=padding-left:16px;text-indent:-16px><code><b>InternalDontEnforceDependencies</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For internal use only: Changes the behavior of <a href=google.protobuf.descriptor#DescriptorPool.BuildFile>BuildFile()</a> such that it allows the file to make reference to message types declared in other files which it did not officially declare as dependencies.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=DescriptorPool.InternalSetLazilyBuildDependencies><div style=padding-left:16px;text-indent:-16px><code><b>InternalSetLazilyBuildDependencies</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For internal use only: Enables lazy building of dependencies of a file. <a href=#DescriptorPool.InternalSetLazilyBuildDependencies.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=DescriptorPool.internal_set_underlay><div style=padding-left:16px;text-indent:-16px><code><b>internal_set_underlay</b>(const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> * underlay)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For internal use only.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=DescriptorPool.InternalIsFileLoaded><div style=padding-left:16px;text-indent:-16px><code><b>InternalIsFileLoaded</b>(ConstStringParam filename) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For internal (unit test) use only: Returns true if a <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> has been constructed for the given file, false otherwise. <a href=#DescriptorPool.InternalIsFileLoaded.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=DescriptorPool.AddUnusedImportTrackFile><div style=padding-left:16px;text-indent:-16px><code><b>AddUnusedImportTrackFile</b>(ConstStringParam file_name, bool is_error = false)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Add a file to unused_import_track_files_. <a href=#DescriptorPool.AddUnusedImportTrackFile.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=DescriptorPool.ClearUnusedImportTrackFiles><div style=padding-left:16px;text-indent:-16px><code><b>ClearUnusedImportTrackFiles</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=DescriptorPool.InternalAddGeneratedFile><div style=padding-left:16px;text-indent:-16px><code><b>InternalAddGeneratedFile</b>(const void * encoded_file_descriptor, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Called by generated classes at init time to add their descriptors to generated_pool. <a href=#DescriptorPool.InternalAddGeneratedFile.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.internal_generated_pool><div style=padding-left:16px;text-indent:-16px><code><b>internal_generated_pool</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For internal use only: Gets a non-const pointer to the generated pool. <a href=#DescriptorPool.internal_generated_pool.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> *</code></td><td style=border-left-width:0 id=DescriptorPool.internal_generated_database><div style=padding-left:16px;text-indent:-16px><code><b>internal_generated_database</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For internal use only: Gets a non-const pointer to the generated descriptor database. <a href=#DescriptorPool.internal_generated_database.details>more...</a></div></td></tr></table><hr><h3 id=DescriptorPool.FindFileByName.details><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;DescriptorPool::FindFileByName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam name) const</code></h3><div style=margin-left:16px><p>Find a <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> in the pool by file name.</p><p>Returns nullptr if not found.</p></div><hr><h3 id=DescriptorPool.FindFileContainingSymbol.details><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;DescriptorPool::FindFileContainingSymbol(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam symbol_name) const</code></h3><div style=margin-left:16px><p>Find the <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> in the pool which defines the given symbol.</p><p>If any of the Find*ByName() methods below would succeed, then this is equivalent to calling that method and calling the result's file() method. Otherwise this returns nullptr.</p></div><hr><h3 id=DescriptorPool.generated_pool.details><code>static const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;DescriptorPool::generated_pool()</code></h3><div style=margin-left:16px><p>Get a pointer to the generated pool.</p><p>Generated protocol message classes which are compiled into the binary will allocate their descriptors in this pool. Do not add your own descriptors to this pool.</p></div><hr><h3 id=DescriptorPool.FindExtensionByNumber.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;DescriptorPool::FindExtensionByNumber(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * extendee,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int number) const</code></h3><div style=margin-left:16px><p>Finds an extension of the given type by number.</p><p>The extendee must be a member of this <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> or one of its underlays.</p></div><hr><h3 id=DescriptorPool.FindExtensionByPrintableName.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;DescriptorPool::FindExtensionByPrintableName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * extendee,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam printable_name) const</code></h3><div style=margin-left:16px><p>Finds an extension of the given type by its printable name.</p><p>See comments above PrintableNameForExtension() for the definition of "printable name". The extendee must be a member of this <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> or one of its underlays. Returns nullptr if there is no known message extension with the given printable name.</p></div><hr><h3 id=DescriptorPool.FindAllExtensions.details><code>void DescriptorPool::FindAllExtensions(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * extendee,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > * out) const</code></h3><div style=margin-left:16px><p>Finds extensions of extendee.</p><p>The extensions will be appended to out in an undefined order. Only extensions defined directly in this <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> or one of its underlays are guaranteed to be found: extensions defined in the fallback database might not be found depending on the database implementation.</p></div><hr><h3 id=DescriptorPool.BuildFile.details><code>const <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;DescriptorPool::BuildFile(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const FileDescriptorProto & proto)</code></h3><div style=margin-left:16px><p>Convert the FileDescriptorProto to real descriptors and place them in this <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a>.</p><p>All dependencies of the file must already be in the pool. Returns the resulting <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a>, or nullptr if there were problems with the input (e.g. the message was invalid, or dependencies were missing). Details about the errors are written to GOOGLE_LOG(ERROR).</p></div><hr><h3 id=DescriptorPool.AllowUnknownDependencies.details><code>void DescriptorPool::AllowUnknownDependencies()</code></h3><div style=margin-left:16px><p>By default, it is an error if a FileDescriptorProto contains references to types or other files that are not found in the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> (or its backing <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a>, if any).</p><p>If you call <a href=google.protobuf.descriptor#DescriptorPool.AllowUnknownDependencies>AllowUnknownDependencies()</a>, however, then unknown types and files will be replaced by placeholder descriptors (which can be identified by the is_placeholder() method). This can allow you to perform some useful operations with a .proto file even if you do not have access to other .proto files on which it depends. However, some heuristics must be used to fill in the gaps in information, and these can lead to descriptors which are inaccurate. For example, the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> may be forced to guess whether an unknown type is a message or an enum, as well as what package it resides in. Furthermore, placeholder types will not be discoverable via FindMessageTypeByName() and similar methods, which could confuse some descriptor-based algorithms. Generally, the results of this option should be handled with extreme care.</p></div><hr><h3 id=DescriptorPool.EnforceWeakDependencies.details><code>void DescriptorPool::EnforceWeakDependencies(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool enforce)</code></h3><div style=margin-left:16px><p>By default, weak imports are allowed to be missing, in which case we will use a placeholder for the dependency and convert the field to be an Empty message field.</p><p>If you call EnforceWeakDependencies(true), however, the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> will report a import not found error.</p></div><hr><h3 id=DescriptorPool.DescriptorPool.details><code>explicit DescriptorPool::DescriptorPool(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> * underlay)</code></h3><div style=margin-left:16px><p>Create a <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> which is overlaid on top of some other pool.</p><p>If you search for a descriptor in the overlay and it is not found, the underlay will be searched as a backup. If the underlay has its own underlay, that will be searched next, and so on. This also means that files built in the overlay will be cross-linked with the underlay's descriptors if necessary. The underlay remains property of the caller; it must remain valid for the lifetime of the newly-constructed pool.</p><p>Example: Say you want to parse a .proto file at runtime in order to use its type with a DynamicMessage. Say this .proto file has dependencies, but you know that all the dependencies will be things that are already compiled into the binary. For ease of use, you'd like to load the types right out of <a href=google.protobuf.descriptor#DescriptorPool.generated_pool>generated_pool()</a> rather than have to parse redundant copies of all these .protos and runtime. But, you don't want to add the parsed types directly into <a href=google.protobuf.descriptor#DescriptorPool.generated_pool>generated_pool()</a>: this is not allowed, and would be bad design anyway. So, instead, you could use <a href=google.protobuf.descriptor#DescriptorPool.generated_pool>generated_pool()</a> as an underlay for a new <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> in which you add only the new file.</p><p>WARNING: Use of underlays can lead to many subtle gotchas. Instead, try to formulate what you want to do in terms of DescriptorDatabases.</p></div><hr><h3 id=DescriptorPool.InternalSetLazilyBuildDependencies.details><code>void DescriptorPool::InternalSetLazilyBuildDependencies()</code></h3><div style=margin-left:16px><p>For internal use only: Enables lazy building of dependencies of a file.</p><p>Delay the building of dependencies of a file descriptor until absolutely necessary, like when message_type() is called on a field that is defined in that dependency's file. This will cause functional issues if a proto or one of its dependencies has errors. Should only be enabled for the generated_pool_ (because no descriptor build errors are guaranteed by the compilation generation process), testing, or if a lack of descriptor build errors can be guaranteed for a pool.</p></div><hr><h3 id=DescriptorPool.InternalIsFileLoaded.details><code>bool DescriptorPool::InternalIsFileLoaded(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam filename) const</code></h3><div style=margin-left:16px><p>For internal (unit test) use only: Returns true if a <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> has been constructed for the given file, false otherwise.</p><p>Useful for testing lazy descriptor initialization behavior.</p></div><hr><h3 id=DescriptorPool.AddUnusedImportTrackFile.details><code>void DescriptorPool::AddUnusedImportTrackFile(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam file_name,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool is_error = false)</code></h3><div style=margin-left:16px><p>Add a file to unused_import_track_files_.</p><p>DescriptorBuilder will log warnings or errors for those files if there is any unused import.</p></div><hr><h3 id=DescriptorPool.InternalAddGeneratedFile.details><code>static void DescriptorPool::InternalAddGeneratedFile(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void * encoded_file_descriptor,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size)</code></h3><div style=margin-left:16px><p>Called by generated classes at init time to add their descriptors to generated_pool.</p><p>Do NOT call this in your own code! filename must be a permanent string (e.g. a string literal).</p></div><hr><h3 id=DescriptorPool.internal_generated_pool.details><code>static <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> * DescriptorPool::internal_generated_pool()</code></h3><div style=margin-left:16px><p>For internal use only: Gets a non-const pointer to the generated pool.</p><p>This is called at static-initialization time only, so thread-safety is not a concern. If both an underlay and a fallback database are present, the underlay takes precedence.</p></div><hr><h3 id=DescriptorPool.internal_generated_database.details><code>static <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;DescriptorPool::internal_generated_database()</code></h3><div style=margin-left:16px><p>For internal use only: Gets a non-const pointer to the generated descriptor database.</p><p>Only used for testing.</p></div><h2 id=DescriptorPool.ErrorCollector>class DescriptorPool::ErrorCollector</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>When converting a FileDescriptorProto to a <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a>, various errors might be detected in the input.</p><p>The caller may handle these programmatically by implementing an <a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector>ErrorCollector</a>.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=DescriptorPool.ErrorCollector.ErrorLocation><div style=padding-left:16px;text-indent:-16px><code><b>ErrorLocation</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>These constants specify what exact part of the construct is broken. <a href=#DescriptorPool.ErrorCollector.ErrorLocation.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=DescriptorPool.ErrorCollector.ErrorCollector><div style=padding-left:16px;text-indent:-16px><code><b>ErrorCollector</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=DescriptorPool.ErrorCollector.~ErrorCollector><div style=padding-left:16px;text-indent:-16px><code><b>~ErrorCollector</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=DescriptorPool.ErrorCollector.AddError><div style=padding-left:16px;text-indent:-16px><code><b>AddError</b>(const std::string & filename, const std::string & element_name, const <a href=google.protobuf.message#Message>Message</a> * descriptor, <a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector.ErrorLocation>ErrorLocation</a> location, const std::string & message) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reports an error in the FileDescriptorProto. <a href=#DescriptorPool.ErrorCollector.AddError.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=DescriptorPool.ErrorCollector.AddWarning><div style=padding-left:16px;text-indent:-16px><code><b>AddWarning</b>(const std::string & , const std::string & , const <a href=google.protobuf.message#Message>Message</a> * , <a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector.ErrorLocation>ErrorLocation</a> , const std::string & )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reports a warning in the FileDescriptorProto. <a href=#DescriptorPool.ErrorCollector.AddWarning.details>more...</a></div></td></tr></table><hr><h3 id=DescriptorPool.ErrorCollector.ErrorLocation.details><code>enum ErrorCollector::ErrorLocation {<br>&nbsp;&nbsp;NAME,<br>&nbsp;&nbsp;NUMBER,<br>&nbsp;&nbsp;TYPE,<br>&nbsp;&nbsp;EXTENDEE,<br>&nbsp;&nbsp;DEFAULT_VALUE,<br>&nbsp;&nbsp;INPUT_TYPE,<br>&nbsp;&nbsp;OUTPUT_TYPE,<br>&nbsp;&nbsp;OPTION_NAME,<br>&nbsp;&nbsp;OPTION_VALUE,<br>&nbsp;&nbsp;IMPORT,<br>&nbsp;&nbsp;OTHER<br>}</code></h3><div style=margin-left:16px><p>These constants specify what exact part of the construct is broken.</p><p>This is useful e.g. for mapping the error back to an exact location in a .proto file.</p><table><tr><td>NAME</td><td>the symbol name, or the package name for files</td></tr><tr><td>NUMBER</td><td>field or extension range number</td></tr><tr><td>TYPE</td><td>field type</td></tr><tr><td>EXTENDEE</td><td>field extendee</td></tr><tr><td>DEFAULT_VALUE</td><td>field default value</td></tr><tr><td>INPUT_TYPE</td><td>method input type</td></tr><tr><td>OUTPUT_TYPE</td><td>method output type</td></tr><tr><td>OPTION_NAME</td><td>name in assignment</td></tr><tr><td>OPTION_VALUE</td><td>value in option assignment</td></tr><tr><td>IMPORT</td><td>import error</td></tr><tr><td>OTHER</td><td>some other problem</td></tr></table></div><hr><h3 id=DescriptorPool.ErrorCollector.AddError.details><code>virtual void ErrorCollector::AddError(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & filename,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & element_name,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> * descriptor,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector.ErrorLocation>ErrorLocation</a> location,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & message) = 0</code></h3><div style=margin-left:16px><p>Reports an error in the FileDescriptorProto.</p><p>Use this function if the problem occurred should interrupt building the FileDescriptorProto.</p></div><hr><h3 id=DescriptorPool.ErrorCollector.AddWarning.details><code>virtual void ErrorCollector::AddWarning(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> * ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.descriptor#DescriptorPool.ErrorCollector.ErrorLocation>ErrorLocation</a> ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & )</code></h3><div style=margin-left:16px><p>Reports a warning in the FileDescriptorProto.</p><p>Use this function if the problem occurred should NOT interrupt building the FileDescriptorProto.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-f72cee7c5910777dfbdcea00b19ecdc1>1.4.21 -</h1><html devsite><head><title>descriptor.pb.h</title></head><body><h1>descriptor.pb.h</h1><p><code>#include &lt;google/protobuf/descriptor.pb.h><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Protocol buffer representations of descriptors.</p><p>This file defines a set of protocol message classes which represent the same information represented by the classes defined in <a href=google.protobuf.descriptor>descriptor.h</a>. You can convert a <a href=#FileDescriptorProto>FileDescriptorProto</a> to a <a href=google.protobuf.descriptor#FileDescriptor>FileDescriptor</a> using the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> class. Thus, the classes in this file allow protocol type definitions to be communicated efficiently between processes.</p><p>The protocol compiler currently doesn't support auto-generated documentation, hence this page contains no descriptions. This file was generated by the protocol compiler from <code>descriptor.proto</code>, whose contents are as follows:</p><pre>// Protocol Buffers - Google's data interchange format
// Copyright 2008 Google Inc.  All rights reserved.
// https://developers.google.com/protocol-buffers/
//
// Redistribution and use in source and binary forms, with or without
// modification, are permitted provided that the following conditions are
// met:
//
//     * Redistributions of source code must retain the above copyright
// notice, this list of conditions and the following disclaimer.
//     * Redistributions in binary form must reproduce the above
// copyright notice, this list of conditions and the following disclaimer
// in the documentation and/or other materials provided with the
// distribution.
//     * Neither the name of Google Inc. nor the names of its
// contributors may be used to endorse or promote products derived from
// this software without specific prior written permission.
//
// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
// "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
<p>// Author: <a href=mailto:kenton@google.com>kenton@google.com</a> (Kenton Varda)
//  Based on original Protocol Buffers design by
//  Sanjay Ghemawat, Jeff Dean, and others.
//
// The messages in this file describe the definitions found in .proto files.
// A valid .proto file can be translated directly to a FileDescriptorProto
// without any other information (e.g. without reading its imports).</p>
<p>syntax = &ldquo;proto2&rdquo;;</p>
<p>package google.protobuf;</p>
<p>option go_package = &ldquo;google.golang.org/protobuf/types/descriptorpb&rdquo;;
option java_package = &ldquo;com.google.protobuf&rdquo;;
option java_outer_classname = &ldquo;DescriptorProtos&rdquo;;
option csharp_namespace = &ldquo;Google.Protobuf.Reflection&rdquo;;
option objc_class_prefix = &ldquo;GPB&rdquo;;
option cc_enable_arenas = true;</p>
<p>// descriptor.proto must be optimized for speed because reflection-based
// algorithms don&rsquo;t work during bootstrapping.
option optimize_for = SPEED;</p>
<p>// The protocol compiler can output a FileDescriptorSet containing the .proto
// files it parses.
message FileDescriptorSet {
repeated FileDescriptorProto file = 1;
}</p>
<p>// Describes a complete .proto file.
message FileDescriptorProto {
optional string name = 1;     // file name, relative to root of source tree
optional string package = 2;  // e.g. &ldquo;foo&rdquo;, &ldquo;foo.bar&rdquo;, etc.</p>
<p>// Names of files imported by this file.
repeated string dependency = 3;
// Indexes of the public imported files in the dependency list above.
repeated int32 public_dependency = 10;
// Indexes of the weak imported files in the dependency list.
// For Google-internal migration only. Do not use.
repeated int32 weak_dependency = 11;</p>
<p>// All top-level definitions in this file.
repeated DescriptorProto message_type = 4;
repeated EnumDescriptorProto enum_type = 5;
repeated ServiceDescriptorProto service = 6;
repeated FieldDescriptorProto extension = 7;</p>
<p>optional FileOptions options = 8;</p>
<p>// This field contains optional information about the original source code.
// You may safely remove this entire field without harming runtime
// functionality of the descriptors &ndash; the information is needed only by
// development tools.
optional SourceCodeInfo source_code_info = 9;</p>
<p>// The syntax of the proto file.
// The supported values are &ldquo;proto2&rdquo; and &ldquo;proto3&rdquo;.
optional string syntax = 12;
}</p>
<p>// Describes a message type.
message DescriptorProto {
optional string name = 1;</p>
<p>repeated FieldDescriptorProto field = 2;
repeated FieldDescriptorProto extension = 6;</p>
<p>repeated DescriptorProto nested_type = 3;
repeated EnumDescriptorProto enum_type = 4;</p>
<p>message ExtensionRange {
optional int32 start = 1;  // Inclusive.
optional int32 end = 2;    // Exclusive.</p>
<pre><code>optional ExtensionRangeOptions options = 3;
</code></pre><p>}
repeated ExtensionRange extension_range = 5;</p><p>repeated OneofDescriptorProto oneof_decl = 8;</p><p>optional MessageOptions options = 7;</p><p>// Range of reserved tag numbers. Reserved tag numbers may not be used by
// fields or extension ranges in the same message. Reserved ranges may
// not overlap.
message ReservedRange {
optional int32 start = 1; // Inclusive.
optional int32 end = 2; // Exclusive.
}
repeated ReservedRange reserved_range = 9;
// Reserved field names, which may not be used by fields in the same message.
// A given name may only be reserved once.
repeated string reserved_name = 10;
}</p><p>message ExtensionRangeOptions {
// The parser stores options it doesn&rsquo;t recognize here. See above.
repeated UninterpretedOption uninterpreted_option = 999;</p><p>// Clients can define custom options in extensions of this message. See above.
extensions 1000 to max;
}</p><p>// Describes a field within a message.
message FieldDescriptorProto {
enum Type {
// 0 is reserved for errors.
// Order is weird for historical reasons.
TYPE_DOUBLE = 1;
TYPE_FLOAT = 2;
// Not ZigZag encoded. Negative numbers take 10 bytes. Use TYPE_SINT64 if
// negative values are likely.
TYPE_INT64 = 3;
TYPE_UINT64 = 4;
// Not ZigZag encoded. Negative numbers take 10 bytes. Use TYPE_SINT32 if
// negative values are likely.
TYPE_INT32 = 5;
TYPE_FIXED64 = 6;
TYPE_FIXED32 = 7;
TYPE_BOOL = 8;
TYPE_STRING = 9;
// Tag-delimited aggregate.
// Group type is deprecated and not supported in proto3. However, Proto3
// implementations should still be able to parse the group wire format and
// treat group fields as unknown fields.
TYPE_GROUP = 10;
TYPE_MESSAGE = 11; // Length-delimited aggregate.</p><pre><code>// New in version 2.
TYPE_BYTES = 12;
TYPE_UINT32 = 13;
TYPE_ENUM = 14;
TYPE_SFIXED32 = 15;
TYPE_SFIXED64 = 16;
TYPE_SINT32 = 17;  // Uses ZigZag encoding.
TYPE_SINT64 = 18;  // Uses ZigZag encoding.
</code></pre><p>}</p><p>enum Label {
// 0 is reserved for errors
LABEL_OPTIONAL = 1;
LABEL_REQUIRED = 2;
LABEL_REPEATED = 3;
}</p><p>optional string name = 1;
optional int32 number = 3;
optional Label label = 4;</p><p>// If type_name is set, this need not be set. If both this and type_name
// are set, this must be one of TYPE_ENUM, TYPE_MESSAGE or TYPE_GROUP.
optional Type type = 5;</p><p>// For message and enum types, this is the name of the type. If the name
// starts with a &lsquo;.&rsquo;, it is fully-qualified. Otherwise, C++-like scoping
// rules are used to find the type (i.e. first the nested types within this
// message are searched, then within the parent, on up to the root
// namespace).
optional string type_name = 6;</p><p>// For extensions, this is the name of the type being extended. It is
// resolved in the same manner as type_name.
optional string extendee = 2;</p><p>// For numeric types, contains the original text representation of the value.
// For booleans, &ldquo;true&rdquo; or &ldquo;false&rdquo;.
// For strings, contains the default text contents (not escaped in any way).
// For bytes, contains the C escaped value. All bytes >= 128 are escaped.
optional string default_value = 7;</p><p>// If set, gives the index of a oneof in the containing type&rsquo;s oneof_decl
// list. This field is a member of that oneof.
optional int32 oneof_index = 9;</p><p>// JSON name of this field. The value is set by protocol compiler. If the
// user has set a &ldquo;json_name&rdquo; option on this field, that option&rsquo;s value
// will be used. Otherwise, it&rsquo;s deduced from the field&rsquo;s name by converting
// it to camelCase.
optional string json_name = 10;</p><p>optional FieldOptions options = 8;</p><p>// If true, this is a proto3 &ldquo;optional&rdquo;. When a proto3 field is optional, it
// tracks presence regardless of field type.
//
// When proto3_optional is true, this field must be belong to a oneof to
// signal to old proto3 clients that presence is tracked for this field. This
// oneof is known as a &ldquo;synthetic&rdquo; oneof, and this field must be its sole
// member (each proto3 optional field gets its own synthetic oneof). Synthetic
// oneofs exist in the descriptor only, and do not generate any API. Synthetic
// oneofs must be ordered after all &ldquo;real&rdquo; oneofs.
//
// For message fields, proto3_optional doesn&rsquo;t create any semantic change,
// since non-repeated message fields always track presence. However it still
// indicates the semantic detail of whether the user wrote &ldquo;optional&rdquo; or not.
// This can be useful for round-tripping the .proto file. For consistency we
// give message fields a synthetic oneof also, even though it is not required
// to track presence. This is especially important because the parser can&rsquo;t
// tell if a field is a message or an enum, so it must always create a
// synthetic oneof.
//
// Proto2 optional fields do not set this flag, because they already indicate
// optional with <code>LABEL_OPTIONAL</code>.
optional bool proto3_optional = 17;
}</p><p>// Describes a oneof.
message OneofDescriptorProto {
optional string name = 1;
optional OneofOptions options = 2;
}</p><p>// Describes an enum type.
message EnumDescriptorProto {
optional string name = 1;</p><p>repeated EnumValueDescriptorProto value = 2;</p><p>optional EnumOptions options = 3;</p><p>// Range of reserved numeric values. Reserved values may not be used by
// entries in the same enum. Reserved ranges may not overlap.
//
// Note that this is distinct from DescriptorProto.ReservedRange in that it
// is inclusive such that it can appropriately represent the entire int32
// domain.
message EnumReservedRange {
optional int32 start = 1; // Inclusive.
optional int32 end = 2; // Inclusive.
}</p><p>// Range of reserved numeric values. Reserved numeric values may not be used
// by enum values in the same enum declaration. Reserved ranges may not
// overlap.
repeated EnumReservedRange reserved_range = 4;</p><p>// Reserved enum value names, which may not be reused. A given name may only
// be reserved once.
repeated string reserved_name = 5;
}</p><p>// Describes a value within an enum.
message EnumValueDescriptorProto {
optional string name = 1;
optional int32 number = 2;</p><p>optional EnumValueOptions options = 3;
}</p><p>// Describes a service.
message ServiceDescriptorProto {
optional string name = 1;
repeated MethodDescriptorProto method = 2;</p><p>optional ServiceOptions options = 3;
}</p><p>// Describes a method of a service.
message MethodDescriptorProto {
optional string name = 1;</p><p>// Input and output type names. These are resolved in the same way as
// FieldDescriptorProto.type_name, but must refer to a message type.
optional string input_type = 2;
optional string output_type = 3;</p><p>optional MethodOptions options = 4;</p><p>// Identifies if client streams multiple client messages
optional bool client_streaming = 5 [[]default = false];
// Identifies if server streams multiple server messages
optional bool server_streaming = 6 [[]default = false];
}</p><p>// ===================================================================
// Options</p><p>// Each of the definitions above may have &ldquo;options&rdquo; attached. These are
// just annotations which may cause code to be generated slightly differently
// or may contain hints for code that manipulates protocol messages.
//
// Clients may define custom options as extensions of the *Options messages.
// These extensions may not yet be known at parsing time, so the parser cannot
// store the values in them. Instead it stores them in a field in the *Options
// message called uninterpreted_option. This field must have the same name
// across all *Options messages. We then use this field to populate the
// extensions when we build a descriptor, at which point all protos have been
// parsed and so all extensions are known.
//
// Extension numbers for custom options may be chosen as follows:
// * For options which will only be used within a single application or
// organization, or for experimental options, use field numbers 50000
// through 99999. It is up to you to ensure that you do not use the
// same number for multiple options.
// * For options which will be published and used publicly by multiple
// independent entities, e-mail <a href=mailto:protobuf-global-extension-registry@google.com>protobuf-global-extension-registry@google.com</a>
// to reserve extension numbers. Simply provide your project name (e.g.
// Objective-C plugin) and your project website (if available) &ndash; there&rsquo;s no
// need to explain how you intend to use them. Usually you only need one
// extension number. You can declare multiple options with only one extension
// number by putting them in a sub-message. See the Custom Options section of
// the docs for examples:
// /programming-guides/proto#options
// If this turns out to be popular, a web service will be set up
// to automatically assign option numbers.</p><p>message FileOptions {</p><p>// Sets the Java package where classes generated from this .proto will be
// placed. By default, the proto package is used, but this is often
// inappropriate because proto packages do not normally start with backwards
// domain names.
optional string java_package = 1;</p><p>// Controls the name of the wrapper Java class generated for the .proto file.
// That class will always contain the .proto file&rsquo;s getDescriptor() method as
// well as any top-level extensions defined in the .proto file.
// If java_multiple_files is disabled, then all the other classes from the
// .proto file will be nested inside the single wrapper outer class.
optional string java_outer_classname = 8;</p><p>// If enabled, then the Java code generator will generate a separate .java
// file for each top-level message, enum, and service defined in the .proto
// file. Thus, these types will <em>not</em> be nested inside the wrapper class
// named by java_outer_classname. However, the wrapper class will still be
// generated to contain the file&rsquo;s getDescriptor() method as well as any
// top-level extensions defined in the file.
optional bool java_multiple_files = 10 [[]default = false];</p><p>// This option does nothing.
optional bool java_generate_equals_and_hash = 20 [[]deprecated=true];</p><p>// If set true, then the Java2 code generator will generate code that
// throws an exception whenever an attempt is made to assign a non-UTF-8
// byte sequence to a string field.
// Message reflection will do the same.
// However, an extension field still accepts non-UTF-8 byte sequences.
// This option has no effect on when used with the lite runtime.
optional bool java_string_check_utf8 = 27 [[]default = false];</p><p>// Generated classes can be optimized for speed or code size.
enum OptimizeMode {
SPEED = 1; // Generate complete code for parsing, serialization,
// etc.
CODE_SIZE = 2; // Use ReflectionOps to implement these methods.
LITE_RUNTIME = 3; // Generate code using MessageLite and the lite runtime.
}
optional OptimizeMode optimize_for = 9 [[]default = SPEED];</p><p>// Sets the Go package where structs generated from this .proto will be
// placed. If omitted, the Go package will be derived from the following:
// - The basename of the package import path, if provided.
// - Otherwise, the package statement in the .proto file, if present.
// - Otherwise, the basename of the .proto file, without extension.
optional string go_package = 11;</p><p>// Should generic services be generated in each language? &ldquo;Generic&rdquo; services
// are not specific to any particular RPC system. They are generated by the
// main code generators in each language (without additional plugins).
// Generic services were the only kind of service generation supported by
// early versions of google.protobuf.
//
// Generic services are now considered deprecated in favor of using plugins
// that generate code specific to your particular RPC system. Therefore,
// these default to false. Old code which depends on generic services should
// explicitly set them to true.
optional bool cc_generic_services = 16 [[]default = false];
optional bool java_generic_services = 17 [[]default = false];
optional bool py_generic_services = 18 [[]default = false];
optional bool php_generic_services = 42 [[]default = false];</p><p>// Is this file deprecated?
// Depending on the target platform, this can emit Deprecated annotations
// for everything in the file, or it will be completely ignored; in the very
// least, this is a formalization for deprecating files.
optional bool deprecated = 23 [[]default = false];</p><p>// Enables the use of arenas for the proto messages in this file. This applies
// only to generated classes for C++.
optional bool cc_enable_arenas = 31 [[]default = true];</p><p>// Sets the objective c class prefix which is prepended to all objective c
// generated classes from this .proto. There is no default.
optional string objc_class_prefix = 36;</p><p>// Namespace for generated classes; defaults to the package.
optional string csharp_namespace = 37;</p><p>// By default Swift generators will take the proto package and CamelCase it
// replacing &lsquo;.&rsquo; with underscore and use that to prefix the types/symbols
// defined. When this options is provided, they will use this value instead
// to prefix the types/symbols defined.
optional string swift_prefix = 39;</p><p>// Sets the php class prefix which is prepended to all php generated classes
// from this .proto. Default is empty.
optional string php_class_prefix = 40;</p><p>// Use this option to change the namespace of php generated classes. Default
// is empty. When this option is empty, the package name will be used for
// determining the namespace.
optional string php_namespace = 41;</p><p>// Use this option to change the namespace of php generated metadata classes.
// Default is empty. When this option is empty, the proto file name will be
// used for determining the namespace.
optional string php_metadata_namespace = 44;</p><p>// Use this option to change the package of ruby generated classes. Default
// is empty. When this option is not set, the package name will be used for
// determining the ruby package.
optional string ruby_package = 45;</p><p>// The parser stores options it doesn&rsquo;t recognize here.
// See the documentation for the &ldquo;Options&rdquo; section above.
repeated UninterpretedOption uninterpreted_option = 999;</p><p>// Clients can define custom options in extensions of this message.
// See the documentation for the &ldquo;Options&rdquo; section above.
extensions 1000 to max;</p><p>reserved 38;
}</p><p>message MessageOptions {
// Set true to use the old proto1 MessageSet wire format for extensions.
// This is provided for backwards-compatibility with the MessageSet wire
// format. You should not use this for any other reason: It&rsquo;s less
// efficient, has fewer features, and is more complicated.
//
// The message must be defined exactly as follows:
// message Foo {
// option message_set_wire_format = true;
// extensions 4 to max;
// }
// Note that the message cannot have any defined fields; MessageSets only
// have extensions.
//
// All extensions of your type must be singular messages; e.g. they cannot
// be int32s, enums, or repeated messages.
//
// Because this is an option, the above two restrictions are not enforced by
// the protocol compiler.
optional bool message_set_wire_format = 1 [[]default = false];</p><p>// Disables the generation of the standard &ldquo;descriptor()&rdquo; accessor, which can
// conflict with a field of the same name. This is meant to make migration
// from proto1 easier; new code should avoid fields named &ldquo;descriptor&rdquo;.
optional bool no_standard_descriptor_accessor = 2 [[]default = false];</p><p>// Is this message deprecated?
// Depending on the target platform, this can emit Deprecated annotations
// for the message, or it will be completely ignored; in the very least,
// this is a formalization for deprecating messages.
optional bool deprecated = 3 [[]default = false];</p><p>reserved 4, 5, 6;</p><p>// Whether the message is an automatically generated map entry type for the
// maps field.
//
// For maps fields:
// map&lt;KeyType, ValueType> map_field = 1;
// The parsed descriptor looks like:
// message MapFieldEntry {
// option map_entry = true;
// optional KeyType key = 1;
// optional ValueType value = 2;
// }
// repeated MapFieldEntry map_field = 1;
//
// Implementations may choose not to generate the map_entry=true message, but
// use a native map in the target language to hold the keys and values.
// The reflection APIs in such implementations still need to work as
// if the field is a repeated message field.
//
// NOTE: Do not set the option in .proto files. Always use the maps syntax
// instead. The option should only be implicitly set by the proto compiler
// parser.
optional bool map_entry = 7;</p><p>reserved 8; // javalite_serializable
reserved 9; // javanano_as_lite</p><p>// The parser stores options it doesn&rsquo;t recognize here. See above.
repeated UninterpretedOption uninterpreted_option = 999;</p><p>// Clients can define custom options in extensions of this message. See above.
extensions 1000 to max;
}</p><p>message FieldOptions {
// The ctype option instructs the C++ code generator to use a different
// representation of the field than it normally would. See the specific
// options below. This option is not yet implemented in the open source
// release &ndash; sorry, we&rsquo;ll try to include it in a future version!
optional CType ctype = 1 [[]default = STRING];
enum CType {
// Default mode.
STRING = 0;</p><pre><code>CORD = 1;

STRING_PIECE = 2;
</code></pre><p>}
// The packed option can be enabled for repeated primitive fields to enable
// a more efficient representation on the wire. Rather than repeatedly
// writing the tag and type for each element, the entire array is encoded as
// a single length-delimited blob. In proto3, only explicit setting it to
// false will avoid using packed encoding.
optional bool packed = 2;</p><p>// The jstype option determines the JavaScript type used for values of the
// field. The option is permitted only for 64 bit integral and fixed types
// (int64, uint64, sint64, fixed64, sfixed64). A field with jstype JS_STRING
// is represented as JavaScript string, which avoids loss of precision that
// can happen when a large value is converted to a floating point JavaScript.
// Specifying JS_NUMBER for the jstype causes the generated JavaScript code to
// use the JavaScript &ldquo;number&rdquo; type. The behavior of the default option
// JS_NORMAL is implementation dependent.
//
// This option is an enum to permit additional types to be added, e.g.
// goog.math.Integer.
optional JSType jstype = 6 [[]default = JS_NORMAL];
enum JSType {
// Use the default type.
JS_NORMAL = 0;</p><pre><code>// Use JavaScript strings.
JS_STRING = 1;

// Use JavaScript numbers.
JS_NUMBER = 2;
</code></pre><p>}</p><p>// Should this field be parsed lazily? Lazy applies only to message-type
// fields. It means that when the outer message is initially parsed, the
// inner message&rsquo;s contents will not be parsed but instead stored in encoded
// form. The inner message will actually be parsed when it is first accessed.
//
// This is only a hint. Implementations are free to choose whether to use
// eager or lazy parsing regardless of the value of this option. However,
// setting this option true suggests that the protocol author believes that
// using lazy parsing on this field is worth the additional bookkeeping
// overhead typically needed to implement it.
//
// This option does not affect the public interface of any generated code;
// all method signatures remain the same. Furthermore, thread-safety of the
// interface is not affected by this option; const methods remain safe to
// call from multiple threads concurrently, while non-const methods continue
// to require exclusive access.
//
//
// Note that implementations may choose not to check required fields within
// a lazy sub-message. That is, calling IsInitialized() on the outer message
// may return true even if the inner message has missing required fields.
// This is necessary because otherwise the inner message would have to be
// parsed in order to perform the check, defeating the purpose of lazy
// parsing. An implementation which chooses not to check required fields
// must be consistent about it. That is, for any particular sub-message, the
// implementation must either <em>always</em> check its required fields, or <em>never</em>
// check its required fields, regardless of whether or not the message has
// been parsed.
optional bool lazy = 5 [[]default = false];</p><p>// Is this field deprecated?
// Depending on the target platform, this can emit Deprecated annotations
// for accessors, or it will be completely ignored; in the very least, this
// is a formalization for deprecating fields.
optional bool deprecated = 3 [[]default = false];</p><p>// For Google-internal migration only. Do not use.
optional bool weak = 10 [[]default = false];</p><p>// The parser stores options it doesn&rsquo;t recognize here. See above.
repeated UninterpretedOption uninterpreted_option = 999;</p><p>// Clients can define custom options in extensions of this message. See above.
extensions 1000 to max;</p><p>reserved 4; // removed jtype
}</p><p>message OneofOptions {
// The parser stores options it doesn&rsquo;t recognize here. See above.
repeated UninterpretedOption uninterpreted_option = 999;</p><p>// Clients can define custom options in extensions of this message. See above.
extensions 1000 to max;
}</p><p>message EnumOptions {</p><p>// Set this option to true to allow mapping different tag names to the same
// value.
optional bool allow_alias = 2;</p><p>// Is this enum deprecated?
// Depending on the target platform, this can emit Deprecated annotations
// for the enum, or it will be completely ignored; in the very least, this
// is a formalization for deprecating enums.
optional bool deprecated = 3 [[]default = false];</p><p>reserved 5; // javanano_as_lite</p><p>// The parser stores options it doesn&rsquo;t recognize here. See above.
repeated UninterpretedOption uninterpreted_option = 999;</p><p>// Clients can define custom options in extensions of this message. See above.
extensions 1000 to max;
}</p><p>message EnumValueOptions {
// Is this enum value deprecated?
// Depending on the target platform, this can emit Deprecated annotations
// for the enum value, or it will be completely ignored; in the very least,
// this is a formalization for deprecating enum values.
optional bool deprecated = 1 [[]default = false];</p><p>// The parser stores options it doesn&rsquo;t recognize here. See above.
repeated UninterpretedOption uninterpreted_option = 999;</p><p>// Clients can define custom options in extensions of this message. See above.
extensions 1000 to max;
}</p><p>message ServiceOptions {</p><p>// Note: Field numbers 1 through 32 are reserved for Google&rsquo;s internal RPC
// framework. We apologize for hoarding these numbers to ourselves, but
// we were already using them long before we decided to release Protocol
// Buffers.</p><p>// Is this service deprecated?
// Depending on the target platform, this can emit Deprecated annotations
// for the service, or it will be completely ignored; in the very least,
// this is a formalization for deprecating services.
optional bool deprecated = 33 [[]default = false];</p><p>// The parser stores options it doesn&rsquo;t recognize here. See above.
repeated UninterpretedOption uninterpreted_option = 999;</p><p>// Clients can define custom options in extensions of this message. See above.
extensions 1000 to max;
}</p><p>message MethodOptions {</p><p>// Note: Field numbers 1 through 32 are reserved for Google&rsquo;s internal RPC
// framework. We apologize for hoarding these numbers to ourselves, but
// we were already using them long before we decided to release Protocol
// Buffers.</p><p>// Is this method deprecated?
// Depending on the target platform, this can emit Deprecated annotations
// for the method, or it will be completely ignored; in the very least,
// this is a formalization for deprecating methods.
optional bool deprecated = 33 [[]default = false];</p><p>// Is this method side-effect-free (or safe in HTTP parlance), or idempotent,
// or neither? HTTP based RPC implementation may choose GET verb for safe
// methods, and PUT verb for idempotent methods instead of the default POST.
enum IdempotencyLevel {
IDEMPOTENCY_UNKNOWN = 0;
NO_SIDE_EFFECTS = 1; // implies idempotent
IDEMPOTENT = 2; // idempotent, but may have side effects
}
optional IdempotencyLevel idempotency_level = 34
[[]default = IDEMPOTENCY_UNKNOWN];</p><p>// The parser stores options it doesn&rsquo;t recognize here. See above.
repeated UninterpretedOption uninterpreted_option = 999;</p><p>// Clients can define custom options in extensions of this message. See above.
extensions 1000 to max;
}</p><p>// A message representing a option the parser does not recognize. This only
// appears in options protos created by the compiler::Parser class.
// DescriptorPool resolves these when building Descriptor objects. Therefore,
// options protos in descriptor objects (e.g. returned by Descriptor::options(),
// or produced by Descriptor::CopyTo()) will never have UninterpretedOptions
// in them.
message UninterpretedOption {
// The name of the uninterpreted option. Each string represents a segment in
// a dot-separated name. is_extension is true iff a segment represents an
// extension (denoted with parentheses in options specs in .proto files).
// E.g.,{ [[]&ldquo;foo&rdquo;, false], [[]&ldquo;bar.baz&rdquo;, true], [[]&ldquo;qux&rdquo;, false] } represents
// &ldquo;foo.(bar.baz).qux&rdquo;.
message NamePart {
required string name_part = 1;
required bool is_extension = 2;
}
repeated NamePart name = 2;</p><p>// The value of the uninterpreted option, in whatever type the tokenizer
// identified it as during parsing. Exactly one of these should be set.
optional string identifier_value = 3;
optional uint64 positive_int_value = 4;
optional int64 negative_int_value = 5;
optional double double_value = 6;
optional bytes string_value = 7;
optional string aggregate_value = 8;
}</p><p>// ===================================================================
// Optional source code info</p><p>// Encapsulates information about the original source file from which a
// FileDescriptorProto was generated.
message SourceCodeInfo {
// A Location identifies a piece of source code in a .proto file which
// corresponds to a particular definition. This information is intended
// to be useful to IDEs, code indexers, documentation generators, and similar
// tools.
//
// For example, say we have a file like:
// message Foo {
// optional string foo = 1;
// }
// Let&rsquo;s look at just the field definition:
// optional string foo = 1;
// ^ ^^ ^^ ^ ^^^
// a bc de f ghi
// We have the following locations:
// span path represents
// [[]a,i) [[] 4, 0, 2, 0 ] The whole field definition.
// [[]a,b) [[] 4, 0, 2, 0, 4 ] The label (optional).
// [[]c,d) [[] 4, 0, 2, 0, 5 ] The type (string).
// [[]e,f) [[] 4, 0, 2, 0, 1 ] The name (foo).
// [[]g,h) [[] 4, 0, 2, 0, 3 ] The number (1).
//
// Notes:
// - A location may refer to a repeated field itself (i.e. not to any
// particular index within it). This is used whenever a set of elements are
// logically enclosed in a single code segment. For example, an entire
// extend block (possibly containing multiple extension definitions) will
// have an outer location whose path refers to the &ldquo;extensions&rdquo; repeated
// field without an index.
// - Multiple locations may have the same path. This happens when a single
// logical declaration is spread out across multiple places. The most
// obvious example is the &ldquo;extend&rdquo; block again &ndash; there may be multiple
// extend blocks in the same scope, each of which will have the same path.
// - A location&rsquo;s span is not always a subset of its parent&rsquo;s span. For
// example, the &ldquo;extendee&rdquo; of an extension declaration appears at the
// beginning of the &ldquo;extend&rdquo; block and is shared by all extensions within
// the block.
// - Just because a location&rsquo;s span is a subset of some other location&rsquo;s span
// does not mean that it is a descendant. For example, a &ldquo;group&rdquo; defines
// both a type and a field in a single declaration. Thus, the locations
// corresponding to the type and field and their components will overlap.
// - Code which tries to interpret locations should probably be designed to
// ignore those that it doesn&rsquo;t understand, as more types of locations could
// be recorded in the future.
repeated Location location = 1;
message Location {
// Identifies which part of the FileDescriptorProto was defined at this
// location.
//
// Each element is a field number or an index. They form a path from
// the root FileDescriptorProto to the place where the definition. For
// example, this path:
// [[] 4, 3, 2, 7, 1 ]
// refers to:
// file.message_type(3) // 4, 3
// .field(7) // 2, 7
// .name() // 1
// This is because FileDescriptorProto.message_type has field number 4:
// repeated DescriptorProto message_type = 4;
// and DescriptorProto.field has field number 2:
// repeated FieldDescriptorProto field = 2;
// and FieldDescriptorProto.name has field number 1:
// optional string name = 1;
//
// Thus, the above path gives the location of a field name. If we removed
// the last element:
// [[] 4, 3, 2, 7 ]
// this path refers to the whole field declaration (from the beginning
// of the label to the terminating semicolon).
repeated int32 path = 1 [[]packed = true];</p><pre><code>// Always has exactly three or four elements: start line, start column,
// end line (optional, otherwise assumed same as start line), end column.
// These are packed into a single field for efficiency.  Note that line
// and column numbers are zero-based -- typically you will want to add
// 1 to each before displaying to a user.
repeated int32 span = 2 [[]packed = true];

// If this SourceCodeInfo represents a complete declaration, these are any
// comments appearing before and after the declaration which appear to be
// attached to the declaration.
//
// A series of line comments appearing on consecutive lines, with no other
// tokens appearing on those lines, will be treated as a single comment.
//
// leading_detached_comments will keep paragraphs of comments that appear
// before (but not connected to) the current element. Each paragraph,
// separated by empty lines, will be one comment element in the repeated
// field.
//
// Only the comment content is provided; comment markers (e.g. //) are
// stripped out.  For block comments, leading whitespace and an asterisk
// will be stripped from the beginning of each line other than the first.
// Newlines are included in the output.
//
// Examples:
//
//   optional int32 foo = 1;  // Comment attached to foo.
//   // Comment attached to bar.
//   optional int32 bar = 2;
//
//   optional string baz = 3;
//   // Comment attached to baz.
//   // Another line attached to baz.
//
//   // Comment attached to qux.
//   //
//   // Another line attached to qux.
//   optional double qux = 4;
//
//   // Detached comment for corge. This is not leading or trailing comments
//   // to qux or corge because there are blank lines separating it from
//   // both.
//
//   // Detached comment for corge paragraph 2.
//
//   optional string corge = 5;
//   /* Block comment attached
//    * to corge.  Leading asterisks
//    * will be removed. */
//   /* Block comment attached to
//    * grault. */
//   optional int32 grault = 6;
//
//   // ignored detached comments.
optional string leading_comments = 3;
optional string trailing_comments = 4;
repeated string leading_detached_comments = 6;
</code></pre><p>}
}</p><p>// Describes the relationship between generated code and its original source
// file. A GeneratedCodeInfo message is associated with only one generated
// source file, but may contain references to different source .proto files.
message GeneratedCodeInfo {
// An Annotation connects some span of text in generated code to an element
// of its generating .proto file.
repeated Annotation annotation = 1;
message Annotation {
// Identifies the element in the original source .proto file. This field
// is formatted the same as SourceCodeInfo.Location.path.
repeated int32 path = 1 [[]packed = true];</p><pre><code>// Identifies the filesystem path to the original source .proto.
optional string source_file = 2;

// Identifies the starting offset in bytes in the generated code
// that relates to the identified object.
optional int32 begin = 3;

// Identifies the ending offset in bytes in the generated code that
// relates to the identified offset. The end offset should be one past
// the last relevant byte (so the length of the text = end - begin).
optional int32 end = 4;
</code></pre><p>}
}</pre><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Type&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Type</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#FieldDescriptorProto_Type.details>more&mldr;</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Label&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Label</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#FieldDescriptorProto_Label.details>more&mldr;</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FileOptions_OptimizeMode&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FileOptions_OptimizeMode</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#FileOptions_OptimizeMode.details>more&mldr;</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_CType&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_CType</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#FieldOptions_CType.details>more&mldr;</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_JSType&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_JSType</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#FieldOptions_JSType.details>more&mldr;</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;MethodOptions_IdempotencyLevel&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>MethodOptions_IdempotencyLevel</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#MethodOptions_IdempotencyLevel.details>more&mldr;</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const ::protobuf::internal::DescriptorTable</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;descriptor_table_google_2fprotobuf_2fdescriptor_2eproto&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>descriptor_table_google_2fprotobuf_2fdescriptor_2eproto</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>DescriptorProtoDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>DescriptorProto_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>DescriptorProto_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>DescriptorProto_ExtensionRangeDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>DescriptorProto_ExtensionRange_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>DescriptorProto_ExtensionRange_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>DescriptorProto_ReservedRangeDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>DescriptorProto_ReservedRange_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>DescriptorProto_ReservedRange_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>EnumDescriptorProtoDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>EnumDescriptorProto_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>EnumDescriptorProto_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>EnumDescriptorProto_EnumReservedRangeDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>EnumDescriptorProto_EnumReservedRange_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>EnumDescriptorProto_EnumReservedRange_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>EnumOptionsDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>EnumOptions_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>EnumOptions_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>EnumValueDescriptorProtoDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>EnumValueDescriptorProto_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>EnumValueDescriptorProto_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>EnumValueOptionsDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>EnumValueOptions_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>EnumValueOptions_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>ExtensionRangeOptionsDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>ExtensionRangeOptions_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>ExtensionRangeOptions_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>FieldDescriptorProtoDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>FieldDescriptorProto_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>FieldDescriptorProto_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>FieldOptionsDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>FieldOptions_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>FieldOptions_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>FileDescriptorProtoDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>FileDescriptorProto_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>FileDescriptorProto_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>FileDescriptorSetDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>FileDescriptorSet_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>FileDescriptorSet_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>FileOptionsDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>FileOptions_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>FileOptions_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>GeneratedCodeInfoDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>GeneratedCodeInfo_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>GeneratedCodeInfo_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>GeneratedCodeInfo_AnnotationDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>GeneratedCodeInfo_Annotation_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>GeneratedCodeInfo_Annotation_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>MessageOptionsDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>MessageOptions_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>MessageOptions_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>MethodDescriptorProtoDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>MethodDescriptorProto_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>MethodDescriptorProto_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>MethodOptionsDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>MethodOptions_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>MethodOptions_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>OneofDescriptorProtoDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>OneofDescriptorProto_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>OneofDescriptorProto_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>OneofOptionsDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>OneofOptions_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>OneofOptions_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>ServiceDescriptorProtoDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>ServiceDescriptorProto_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>ServiceDescriptorProto_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>ServiceOptionsDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>ServiceOptions_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>ServiceOptions_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>SourceCodeInfoDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>SourceCodeInfo_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>SourceCodeInfo_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>SourceCodeInfo_LocationDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>SourceCodeInfo_Location_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>SourceCodeInfo_Location_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>UninterpretedOptionDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>UninterpretedOption_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>UninterpretedOption_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>UninterpretedOption_NamePartDefaultTypeInternal</code></td>&lt;td style=&ldquo;border-left-width: 0px"id="<em>UninterpretedOption_NamePart_default_instance</em>"><div style=padding-left:16px;text-indent:-16px><code><b><em>UninterpretedOption_NamePart_default_instance</em></b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr FieldDescriptorProto_Type</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Type_Type_MIN&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Type_Type_MIN</b> = = FieldDescriptorProto_Type_TYPE_DOUBLE</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr FieldDescriptorProto_Type</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Type_Type_MAX&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Type_Type_MAX</b> = = FieldDescriptorProto_Type_TYPE_SINT64</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr int</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Type_Type_ARRAYSIZE&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Type_Type_ARRAYSIZE</b> = = FieldDescriptorProto_Type_Type_MAX + 1</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr FieldDescriptorProto_Label</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Label_Label_MIN&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Label_Label_MIN</b> = = FieldDescriptorProto_Label_LABEL_OPTIONAL</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr FieldDescriptorProto_Label</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Label_Label_MAX&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Label_Label_MAX</b> = = FieldDescriptorProto_Label_LABEL_REPEATED</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr int</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Label_Label_ARRAYSIZE&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Label_Label_ARRAYSIZE</b> = = FieldDescriptorProto_Label_Label_MAX + 1</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr FileOptions_OptimizeMode</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FileOptions_OptimizeMode_OptimizeMode_MIN&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FileOptions_OptimizeMode_OptimizeMode_MIN</b> = = FileOptions_OptimizeMode_SPEED</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr FileOptions_OptimizeMode</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FileOptions_OptimizeMode_OptimizeMode_MAX&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FileOptions_OptimizeMode_OptimizeMode_MAX</b> = = FileOptions_OptimizeMode_LITE_RUNTIME</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr int</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FileOptions_OptimizeMode_OptimizeMode_ARRAYSIZE&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FileOptions_OptimizeMode_OptimizeMode_ARRAYSIZE</b> = = FileOptions_OptimizeMode_OptimizeMode_MAX + 1</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr FieldOptions_CType</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_CType_CType_MIN&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_CType_CType_MIN</b> = = FieldOptions_CType_STRING</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr FieldOptions_CType</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_CType_CType_MAX&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_CType_CType_MAX</b> = = FieldOptions_CType_STRING_PIECE</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr int</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_CType_CType_ARRAYSIZE&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_CType_CType_ARRAYSIZE</b> = = FieldOptions_CType_CType_MAX + 1</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr FieldOptions_JSType</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_JSType_JSType_MIN&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_JSType_JSType_MIN</b> = = FieldOptions_JSType_JS_NORMAL</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr FieldOptions_JSType</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_JSType_JSType_MAX&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_JSType_JSType_MAX</b> = = FieldOptions_JSType_JS_NUMBER</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr int</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_JSType_JSType_ARRAYSIZE&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_JSType_JSType_ARRAYSIZE</b> = = FieldOptions_JSType_JSType_MAX + 1</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr MethodOptions_IdempotencyLevel</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;MethodOptions_IdempotencyLevel_IdempotencyLevel_MIN&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>MethodOptions_IdempotencyLevel_IdempotencyLevel_MIN</b> = = MethodOptions_IdempotencyLevel_IDEMPOTENCY_UNKNOWN</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr MethodOptions_IdempotencyLevel</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;MethodOptions_IdempotencyLevel_IdempotencyLevel_MAX&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>MethodOptions_IdempotencyLevel_IdempotencyLevel_MAX</b> = = MethodOptions_IdempotencyLevel_IDEMPOTENT</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr int</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;MethodOptions_IdempotencyLevel_IdempotencyLevel_ARRAYSIZE&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>MethodOptions_IdempotencyLevel_IdempotencyLevel_ARRAYSIZE</b> = = MethodOptions_IdempotencyLevel_IdempotencyLevel_MAX + 1</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_NAMESPACE_CLOSE PROTOBUF_NAMESPACE_OPEN protobuf::DescriptorProto *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::DescriptorProto >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::DescriptorProto ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::DescriptorProto_ExtensionRange *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::DescriptorProto_ExtensionRange >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::DescriptorProto_ExtensionRange ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::DescriptorProto_ReservedRange *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::DescriptorProto_ReservedRange >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::DescriptorProto_ReservedRange ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::EnumDescriptorProto *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::EnumDescriptorProto >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::EnumDescriptorProto ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::EnumDescriptorProto_EnumReservedRange *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::EnumDescriptorProto_EnumReservedRange >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::EnumDescriptorProto_EnumReservedRange ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::EnumOptions *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::EnumOptions >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::EnumOptions ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::EnumValueDescriptorProto *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::EnumValueDescriptorProto >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::EnumValueDescriptorProto ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::EnumValueOptions *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::EnumValueOptions >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::EnumValueOptions ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::ExtensionRangeOptions *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::ExtensionRangeOptions >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::ExtensionRangeOptions ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::FieldDescriptorProto *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::FieldDescriptorProto >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::FieldDescriptorProto ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::FieldOptions *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::FieldOptions >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::FieldOptions ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::FileDescriptorProto *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::FileDescriptorProto >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::FileDescriptorProto ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::FileDescriptorSet *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::FileDescriptorSet >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::FileDescriptorSet ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::FileOptions *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::FileOptions >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::FileOptions ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::GeneratedCodeInfo *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::GeneratedCodeInfo >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::GeneratedCodeInfo ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::GeneratedCodeInfo_Annotation *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::GeneratedCodeInfo_Annotation >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::GeneratedCodeInfo_Annotation ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::MessageOptions *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::MessageOptions >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::MessageOptions ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::MethodDescriptorProto *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::MethodDescriptorProto >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::MethodDescriptorProto ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::MethodOptions *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::MethodOptions >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::MethodOptions ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::OneofDescriptorProto *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::OneofDescriptorProto >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::OneofDescriptorProto ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::OneofOptions *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::OneofOptions >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::OneofOptions ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::ServiceDescriptorProto *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::ServiceDescriptorProto >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::ServiceDescriptorProto ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::ServiceOptions *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::ServiceOptions >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::ServiceOptions ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::SourceCodeInfo *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::SourceCodeInfo >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::SourceCodeInfo ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::SourceCodeInfo_Location *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::SourceCodeInfo_Location >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::SourceCodeInfo_Location ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::UninterpretedOption *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::UninterpretedOption >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::UninterpretedOption ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protobuf::UninterpretedOption_NamePart *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;Arena::CreateMaybeMessage&lt; protobuf::UninterpretedOption_NamePart >"><div style=padding-left:16px;text-indent:-16px><code><b>Arena::CreateMaybeMessage&lt; protobuf::UninterpretedOption_NamePart ></b>(Arena * )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Type_IsValid&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Type_IsValid</b>(int value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const ::protobuf::EnumDescriptor *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Type_descriptor&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Type_descriptor</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template const std::string &</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Type_Name&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Type_Name</b>(T enum_t_value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Type_Parse&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Type_Parse</b>(::protobuf::ConstStringParam name, FieldDescriptorProto_Type * value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Label_IsValid&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Label_IsValid</b>(int value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const ::protobuf::EnumDescriptor *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Label_descriptor&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Label_descriptor</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template const std::string &</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Label_Name&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Label_Name</b>(T enum_t_value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldDescriptorProto_Label_Parse&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldDescriptorProto_Label_Parse</b>(::protobuf::ConstStringParam name, FieldDescriptorProto_Label * value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FileOptions_OptimizeMode_IsValid&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FileOptions_OptimizeMode_IsValid</b>(int value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const ::protobuf::EnumDescriptor *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FileOptions_OptimizeMode_descriptor&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FileOptions_OptimizeMode_descriptor</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template const std::string &</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FileOptions_OptimizeMode_Name&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FileOptions_OptimizeMode_Name</b>(T enum_t_value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FileOptions_OptimizeMode_Parse&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FileOptions_OptimizeMode_Parse</b>(::protobuf::ConstStringParam name, FileOptions_OptimizeMode * value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_CType_IsValid&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_CType_IsValid</b>(int value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const ::protobuf::EnumDescriptor *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_CType_descriptor&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_CType_descriptor</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template const std::string &</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_CType_Name&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_CType_Name</b>(T enum_t_value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_CType_Parse&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_CType_Parse</b>(::protobuf::ConstStringParam name, FieldOptions_CType * value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_JSType_IsValid&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_JSType_IsValid</b>(int value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const ::protobuf::EnumDescriptor *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_JSType_descriptor&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_JSType_descriptor</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template const std::string &</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_JSType_Name&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_JSType_Name</b>(T enum_t_value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;FieldOptions_JSType_Parse&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>FieldOptions_JSType_Parse</b>(::protobuf::ConstStringParam name, FieldOptions_JSType * value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;MethodOptions_IdempotencyLevel_IsValid&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>MethodOptions_IdempotencyLevel_IsValid</b>(int value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const ::protobuf::EnumDescriptor *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;MethodOptions_IdempotencyLevel_descriptor&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>MethodOptions_IdempotencyLevel_descriptor</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template const std::string &</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;MethodOptions_IdempotencyLevel_Name&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>MethodOptions_IdempotencyLevel_Name</b>(T enum_t_value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;MethodOptions_IdempotencyLevel_Parse&rdquo;><div style=padding-left:16px;text-indent:-16px><code><b>MethodOptions_IdempotencyLevel_Parse</b>(::protobuf::ConstStringParam name, MethodOptions_IdempotencyLevel * value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const EnumDescriptor *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;GetEnumDescriptor&lt; protobuf::FieldDescriptorProto_Type >"><div style=padding-left:16px;text-indent:-16px><code><b>GetEnumDescriptor&lt; protobuf::FieldDescriptorProto_Type ></b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const EnumDescriptor *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;GetEnumDescriptor&lt; protobuf::FieldDescriptorProto_Label >"><div style=padding-left:16px;text-indent:-16px><code><b>GetEnumDescriptor&lt; protobuf::FieldDescriptorProto_Label ></b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const EnumDescriptor *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;GetEnumDescriptor&lt; protobuf::FileOptions_OptimizeMode >"><div style=padding-left:16px;text-indent:-16px><code><b>GetEnumDescriptor&lt; protobuf::FileOptions_OptimizeMode ></b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const EnumDescriptor *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;GetEnumDescriptor&lt; protobuf::FieldOptions_CType >"><div style=padding-left:16px;text-indent:-16px><code><b>GetEnumDescriptor&lt; protobuf::FieldOptions_CType ></b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const EnumDescriptor *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;GetEnumDescriptor&lt; protobuf::FieldOptions_JSType >"><div style=padding-left:16px;text-indent:-16px><code><b>GetEnumDescriptor&lt; protobuf::FieldOptions_JSType ></b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const EnumDescriptor *</code></td>&lt;td style=&ldquo;border-left-width: 0px"id=&ldquo;GetEnumDescriptor&lt; protobuf::MethodOptions_IdempotencyLevel >"><div style=padding-left:16px;text-indent:-16px><code><b>GetEnumDescriptor&lt; protobuf::MethodOptions_IdempotencyLevel ></b>()</code></div></td></tr></table><hr><h3 id=FieldDescriptorProto_Type.details><code>enum protobuf::FieldDescriptorProto_Type {<br>  FieldDescriptorProto_Type_TYPE_DOUBLE = = 1,<br>  FieldDescriptorProto_Type_TYPE_FLOAT = = 2,<br>  FieldDescriptorProto_Type_TYPE_INT64 = = 3,<br>  FieldDescriptorProto_Type_TYPE_UINT64 = = 4,<br>  FieldDescriptorProto_Type_TYPE_INT32 = = 5,<br>  FieldDescriptorProto_Type_TYPE_FIXED64 = = 6,<br>  FieldDescriptorProto_Type_TYPE_FIXED32 = = 7,<br>  FieldDescriptorProto_Type_TYPE_BOOL = = 8,<br>  FieldDescriptorProto_Type_TYPE_STRING = = 9,<br>  FieldDescriptorProto_Type_TYPE_GROUP = = 10,<br>  FieldDescriptorProto_Type_TYPE_MESSAGE = = 11,<br>  FieldDescriptorProto_Type_TYPE_BYTES = = 12,<br>  FieldDescriptorProto_Type_TYPE_UINT32 = = 13,<br>  FieldDescriptorProto_Type_TYPE_ENUM = = 14,<br>  FieldDescriptorProto_Type_TYPE_SFIXED32 = = 15,<br>  FieldDescriptorProto_Type_TYPE_SFIXED64 = = 16,<br>  FieldDescriptorProto_Type_TYPE_SINT32 = = 17,<br>  FieldDescriptorProto_Type_TYPE_SINT64 = = 18<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>FieldDescriptorProto_Type_TYPE_DOUBLE</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_FLOAT</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_INT64</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_UINT64</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_INT32</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_FIXED64</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_FIXED32</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_BOOL</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_STRING</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_GROUP</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_MESSAGE</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_BYTES</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_UINT32</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_ENUM</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_SFIXED32</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_SFIXED64</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_SINT32</td><td></td></tr><tr><td>FieldDescriptorProto_Type_TYPE_SINT64</td><td></td></tr></table></div><hr><h3 id=FieldDescriptorProto_Label.details><code>enum protobuf::FieldDescriptorProto_Label {<br>  FieldDescriptorProto_Label_LABEL_OPTIONAL = = 1,<br>  FieldDescriptorProto_Label_LABEL_REQUIRED = = 2,<br>  FieldDescriptorProto_Label_LABEL_REPEATED = = 3<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>FieldDescriptorProto_Label_LABEL_OPTIONAL</td><td></td></tr><tr><td>FieldDescriptorProto_Label_LABEL_REQUIRED</td><td></td></tr><tr><td>FieldDescriptorProto_Label_LABEL_REPEATED</td><td></td></tr></table></div><hr><h3 id=FileOptions_OptimizeMode.details><code>enum protobuf::FileOptions_OptimizeMode {<br>  FileOptions_OptimizeMode_SPEED = = 1,<br>  FileOptions_OptimizeMode_CODE_SIZE = = 2,<br>  FileOptions_OptimizeMode_LITE_RUNTIME = = 3<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>FileOptions_OptimizeMode_SPEED</td><td></td></tr><tr><td>FileOptions_OptimizeMode_CODE_SIZE</td><td></td></tr><tr><td>FileOptions_OptimizeMode_LITE_RUNTIME</td><td></td></tr></table></div><hr><h3 id=FieldOptions_CType.details><code>enum protobuf::FieldOptions_CType {<br>  FieldOptions_CType_STRING = = 0,<br>  FieldOptions_CType_CORD = = 1,<br>  FieldOptions_CType_STRING_PIECE = = 2<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>FieldOptions_CType_STRING</td><td></td></tr><tr><td>FieldOptions_CType_CORD</td><td></td></tr><tr><td>FieldOptions_CType_STRING_PIECE</td><td></td></tr></table></div><hr><h3 id=FieldOptions_JSType.details><code>enum protobuf::FieldOptions_JSType {<br>  FieldOptions_JSType_JS_NORMAL = = 0,<br>  FieldOptions_JSType_JS_STRING = = 1,<br>  FieldOptions_JSType_JS_NUMBER = = 2<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>FieldOptions_JSType_JS_NORMAL</td><td></td></tr><tr><td>FieldOptions_JSType_JS_STRING</td><td></td></tr><tr><td>FieldOptions_JSType_JS_NUMBER</td><td></td></tr></table></div><hr><h3 id=MethodOptions_IdempotencyLevel.details><code>enum protobuf::MethodOptions_IdempotencyLevel {<br>  MethodOptions_IdempotencyLevel_IDEMPOTENCY_UNKNOWN = = 0,<br>  MethodOptions_IdempotencyLevel_NO_SIDE_EFFECTS = = 1,<br>  MethodOptions_IdempotencyLevel_IDEMPOTENT = = 2<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>MethodOptions_IdempotencyLevel_IDEMPOTENCY_UNKNOWN</td><td></td></tr><tr><td>MethodOptions_IdempotencyLevel_NO_SIDE_EFFECTS</td><td></td></tr><tr><td>MethodOptions_IdempotencyLevel_IDEMPOTENT</td><td></td></tr></table></div></body></html></p></div><div class=td-content style=page-break-before:always><h1 id=pg-388e3d29524ba3818b5626624ceea189>1.4.22 -</h1><html devsite><head><title>descriptor_database.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>descriptor_database.h</h1><p><code>#include &lt;google/protobuf/descriptor_database.h><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Interface for manipulating databases of descriptors.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#DescriptorDatabase>DescriptorDatabase</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Abstract interface for a database of descriptors.</div></td></tr><tr><td><div><code><a href=#SimpleDescriptorDatabase>SimpleDescriptorDatabase</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> into which you can insert files manually.</div></td></tr><tr><td><div><code><a href=#EncodedDescriptorDatabase>EncodedDescriptorDatabase</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Very similar to <a href=google.protobuf.descriptor_database#SimpleDescriptorDatabase>SimpleDescriptorDatabase</a>, but stores all the descriptors as raw bytes and generally tries to use as little memory as possible.</div></td></tr><tr><td><div><code><a href=#DescriptorPoolDatabase>DescriptorPoolDatabase</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> that fetches files from a given pool.</div></td></tr><tr><td><div><code><a href=#MergedDescriptorDatabase>MergedDescriptorDatabase</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> that wraps two or more others.</div></td></tr></table><h2 id=DescriptorDatabase>class DescriptorDatabase</h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor_database.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Abstract interface for a database of descriptors.</p><p>This is useful if you want to create a <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> which loads descriptors on-demand from some sort of large database. If the database is large, it may be inefficient to enumerate every .proto file inside it calling <a href=google.protobuf.descriptor#DescriptorPool.BuildFile>DescriptorPool::BuildFile()</a> for each one. Instead, a <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> can be created which wraps a <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> and only builds particular descriptors when they are needed.</p><p>Known subclasses:</p><ul><li><code><a href=google.protobuf.descriptor_database#DescriptorPoolDatabase>DescriptorPoolDatabase</a></code></li><li><code><a href=google.protobuf.descriptor_database#EncodedDescriptorDatabase>EncodedDescriptorDatabase</a></code></li><li><code><a href=google.protobuf.descriptor_database#MergedDescriptorDatabase>MergedDescriptorDatabase</a></code></li><li><code><a href=google.protobuf.descriptor_database#SimpleDescriptorDatabase>SimpleDescriptorDatabase</a></code></li><li><code><a href=google.protobuf.compiler.importer#SourceTreeDescriptorDatabase>SourceTreeDescriptorDatabase</a></code></li></ul><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=DescriptorDatabase.DescriptorDatabase><div style=padding-left:16px;text-indent:-16px><code><b>DescriptorDatabase</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=DescriptorDatabase.~DescriptorDatabase><div style=padding-left:16px;text-indent:-16px><code><b>~DescriptorDatabase</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=DescriptorDatabase.FindFileByName><div style=padding-left:16px;text-indent:-16px><code><b>FindFileByName</b>(const std::string & filename, FileDescriptorProto * output) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find a file by file name. <a href=#DescriptorDatabase.FindFileByName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=DescriptorDatabase.FindFileContainingSymbol><div style=padding-left:16px;text-indent:-16px><code><b>FindFileContainingSymbol</b>(const std::string & symbol_name, FileDescriptorProto * output) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the file that declares the given fully-qualified symbol name. <a href=#DescriptorDatabase.FindFileContainingSymbol.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=DescriptorDatabase.FindFileContainingExtension><div style=padding-left:16px;text-indent:-16px><code><b>FindFileContainingExtension</b>(const std::string & containing_type, int field_number, FileDescriptorProto * output) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the file which defines an extension extending the given message type with the given field number. <a href=#DescriptorDatabase.FindFileContainingExtension.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=DescriptorDatabase.FindAllExtensionNumbers><div style=padding-left:16px;text-indent:-16px><code><b>FindAllExtensionNumbers</b>(const std::string & , std::vector&lt; int > * )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Finds the tag numbers used by all known extensions of extendee_type, and appends them to output in an undefined order. <a href=#DescriptorDatabase.FindAllExtensionNumbers.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=DescriptorDatabase.FindAllFileNames><div style=padding-left:16px;text-indent:-16px><code><b>FindAllFileNames</b>(std::vector&lt; std::string > * )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Finds the file names and appends them to the output in an undefined order. <a href=#DescriptorDatabase.FindAllFileNames.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=DescriptorDatabase.FindAllPackageNames><div style=padding-left:16px;text-indent:-16px><code><b>FindAllPackageNames</b>(std::vector&lt; std::string > * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Finds the package names and appends them to the output in an undefined order. <a href=#DescriptorDatabase.FindAllPackageNames.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=DescriptorDatabase.FindAllMessageNames><div style=padding-left:16px;text-indent:-16px><code><b>FindAllMessageNames</b>(std::vector&lt; std::string > * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Finds the message names and appends them to the output in an undefined order. <a href=#DescriptorDatabase.FindAllMessageNames.details>more...</a></div></td></tr></table><hr><h3 id=DescriptorDatabase.FindFileByName.details><code>virtual bool DescriptorDatabase::FindFileByName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & filename,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output) = 0</code></h3><div style=margin-left:16px><p>Find a file by file name.</p><p>Fills in in *output and returns true if found. Otherwise, returns false, leaving the contents of *output undefined.</p></div><hr><h3 id=DescriptorDatabase.FindFileContainingSymbol.details><code>virtual bool DescriptorDatabase::FindFileContainingSymbol(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & symbol_name,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output) = 0</code></h3><div style=margin-left:16px><p>Find the file that declares the given fully-qualified symbol name.</p><p>If found, fills in *output and returns true, otherwise returns false and leaves *output undefined.</p></div><hr><h3 id=DescriptorDatabase.FindFileContainingExtension.details><code>virtual bool DescriptorDatabase::FindFileContainingExtension(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & containing_type,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int field_number,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output) = 0</code></h3><div style=margin-left:16px><p>Find the file which defines an extension extending the given message type with the given field number.</p><p>If found, fills in *output and returns true, otherwise returns false and leaves *output undefined. containing_type must be a fully-qualified type name.</p></div><hr><h3 id=DescriptorDatabase.FindAllExtensionNumbers.details><code>virtual bool DescriptorDatabase::FindAllExtensionNumbers(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; int > * )</code></h3><div style=margin-left:16px><p>Finds the tag numbers used by all known extensions of extendee_type, and appends them to output in an undefined order.</p><p>This method is best-effort: it's not guaranteed that the database will find all extensions, and it's not guaranteed that FindFileContainingExtension will return true on all of the found numbers. Returns true if the search was successful, otherwise returns false and leaves output unchanged.</p><p>This method has a default implementation that always returns false.</p></div><hr><h3 id=DescriptorDatabase.FindAllFileNames.details><code>virtual bool DescriptorDatabase::FindAllFileNames(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; std::string > * )</code></h3><div style=margin-left:16px><p>Finds the file names and appends them to the output in an undefined order.</p><p>This method is best-effort: it's not guaranteed that the database will find all files. Returns true if the database supports searching all file names, otherwise returns false and leaves output unchanged.</p><p>This method has a default implementation that always returns false.</p></div><hr><h3 id=DescriptorDatabase.FindAllPackageNames.details><code>bool DescriptorDatabase::FindAllPackageNames(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; std::string > * output)</code></h3><div style=margin-left:16px><p>Finds the package names and appends them to the output in an undefined order.</p><p>This method is best-effort: it's not guaranteed that the database will find all packages. Returns true if the database supports searching all package names, otherwise returns false and leaves output unchanged.</p></div><hr><h3 id=DescriptorDatabase.FindAllMessageNames.details><code>bool DescriptorDatabase::FindAllMessageNames(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; std::string > * output)</code></h3><div style=margin-left:16px><p>Finds the message names and appends them to the output in an undefined order.</p><p>This method is best-effort: it's not guaranteed that the database will find all messages. Returns true if the database supports searching all message names, otherwise returns false and leaves output unchanged.</p></div><h2 id=SimpleDescriptorDatabase>class SimpleDescriptorDatabase: public <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a></h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor_database.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>A <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> into which you can insert files manually.</p><p><a href=google.protobuf.descriptor_database#SimpleDescriptorDatabase.FindFileContainingSymbol>FindFileContainingSymbol()</a> is fully-implemented. When you add a file, its symbols will be indexed for this purpose. Note that the implementation may return false positives, but only if it isn't possible for the symbol to be defined in any other file. In particular, if a file defines a symbol "Foo", then searching for "Foo.[[]anything]" will match that file. This way, the database does not need to aggressively index all children of a symbol.</p><p><a href=google.protobuf.descriptor_database#SimpleDescriptorDatabase.FindFileContainingExtension>FindFileContainingExtension()</a> is mostly-implemented. It works if and only if the original FieldDescriptorProto defining the extension has a fully-qualified type name in its "extendee" field (i.e. starts with a '.'). If the extendee is a relative name, <a href=google.protobuf.descriptor_database#SimpleDescriptorDatabase>SimpleDescriptorDatabase</a> will not attempt to resolve the type, so it will not know what type the extension is extending. Therefore, calling <a href=google.protobuf.descriptor_database#SimpleDescriptorDatabase.FindFileContainingExtension>FindFileContainingExtension()</a> with the extension's containing type will never actually find that extension. Note that this is an unlikely problem, as all FileDescriptorProtos created by the protocol compiler (as well as ones created by calling <a href=google.protobuf.descriptor#FileDescriptor.CopyTo>FileDescriptor::CopyTo()</a>) will always use fully-qualified names for all types. You only need to worry if you are constructing FileDescriptorProtos yourself, or are calling <a href=google.protobuf.compiler.parser#Parser>compiler::Parser</a> directly.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=SimpleDescriptorDatabase.SimpleDescriptorDatabase><div style=padding-left:16px;text-indent:-16px><code><b>SimpleDescriptorDatabase</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=SimpleDescriptorDatabase.~SimpleDescriptorDatabase><div style=padding-left:16px;text-indent:-16px><code><b>~SimpleDescriptorDatabase</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=SimpleDescriptorDatabase.Add><div style=padding-left:16px;text-indent:-16px><code><b>Add</b>(const FileDescriptorProto & file)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Adds the FileDescriptorProto to the database, making a copy. <a href=#SimpleDescriptorDatabase.Add.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=SimpleDescriptorDatabase.AddAndOwn><div style=padding-left:16px;text-indent:-16px><code><b>AddAndOwn</b>(const FileDescriptorProto * file)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Adds the FileDescriptorProto to the database and takes ownership of it.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=SimpleDescriptorDatabase.FindFileByName><div style=padding-left:16px;text-indent:-16px><code><b>FindFileByName</b>(const std::string & filename, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find a file by file name. <a href=#SimpleDescriptorDatabase.FindFileByName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=SimpleDescriptorDatabase.FindFileContainingSymbol><div style=padding-left:16px;text-indent:-16px><code><b>FindFileContainingSymbol</b>(const std::string & symbol_name, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the file that declares the given fully-qualified symbol name. <a href=#SimpleDescriptorDatabase.FindFileContainingSymbol.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=SimpleDescriptorDatabase.FindFileContainingExtension><div style=padding-left:16px;text-indent:-16px><code><b>FindFileContainingExtension</b>(const std::string & containing_type, int field_number, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the file which defines an extension extending the given message type with the given field number. <a href=#SimpleDescriptorDatabase.FindFileContainingExtension.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=SimpleDescriptorDatabase.FindAllExtensionNumbers><div style=padding-left:16px;text-indent:-16px><code><b>FindAllExtensionNumbers</b>(const std::string & , std::vector&lt; int > * )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Finds the tag numbers used by all known extensions of extendee_type, and appends them to output in an undefined order. <a href=#SimpleDescriptorDatabase.FindAllExtensionNumbers.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=SimpleDescriptorDatabase.FindAllFileNames><div style=padding-left:16px;text-indent:-16px><code><b>FindAllFileNames</b>(std::vector&lt; std::string > * )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Finds the file names and appends them to the output in an undefined order. <a href=#SimpleDescriptorDatabase.FindAllFileNames.details>more...</a></div></td></tr></table><hr><h3 id=SimpleDescriptorDatabase.Add.details><code>bool SimpleDescriptorDatabase::Add(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const FileDescriptorProto & file)</code></h3><div style=margin-left:16px><p>Adds the FileDescriptorProto to the database, making a copy.</p><p>The object can be deleted after <a href=google.protobuf.descriptor_database#SimpleDescriptorDatabase.Add>Add()</a> returns. Returns false if the file conflicted with a file already in the database, in which case an error will have been written to GOOGLE_LOG(ERROR).</p></div><hr><h3 id=SimpleDescriptorDatabase.FindFileByName.details><code>virtual bool SimpleDescriptorDatabase::FindFileByName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & filename,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find a file by file name.</p><p>Fills in in *output and returns true if found. Otherwise, returns false, leaving the contents of *output undefined.</p></div><hr><h3 id=SimpleDescriptorDatabase.FindFileContainingSymbol.details><code>virtual bool SimpleDescriptorDatabase::FindFileContainingSymbol(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & symbol_name,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find the file that declares the given fully-qualified symbol name.</p><p>If found, fills in *output and returns true, otherwise returns false and leaves *output undefined.</p></div><hr><h3 id=SimpleDescriptorDatabase.FindFileContainingExtension.details><code>virtual bool SimpleDescriptorDatabase::FindFileContainingExtension(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & containing_type,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int field_number,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find the file which defines an extension extending the given message type with the given field number.</p><p>If found, fills in *output and returns true, otherwise returns false and leaves *output undefined. containing_type must be a fully-qualified type name.</p></div><hr><h3 id=SimpleDescriptorDatabase.FindAllExtensionNumbers.details><code>virtual bool SimpleDescriptorDatabase::FindAllExtensionNumbers(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; int > * )</code></h3><div style=margin-left:16px><p>Finds the tag numbers used by all known extensions of extendee_type, and appends them to output in an undefined order.</p><p>This method is best-effort: it's not guaranteed that the database will find all extensions, and it's not guaranteed that FindFileContainingExtension will return true on all of the found numbers. Returns true if the search was successful, otherwise returns false and leaves output unchanged.</p><p>This method has a default implementation that always returns false.</p></div><hr><h3 id=SimpleDescriptorDatabase.FindAllFileNames.details><code>virtual bool SimpleDescriptorDatabase::FindAllFileNames(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; std::string > * )</code></h3><div style=margin-left:16px><p>Finds the file names and appends them to the output in an undefined order.</p><p>This method is best-effort: it's not guaranteed that the database will find all files. Returns true if the database supports searching all file names, otherwise returns false and leaves output unchanged.</p><p>This method has a default implementation that always returns false.</p></div><h2 id=EncodedDescriptorDatabase>class EncodedDescriptorDatabase: public <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a></h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor_database.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Very similar to <a href=google.protobuf.descriptor_database#SimpleDescriptorDatabase>SimpleDescriptorDatabase</a>, but stores all the descriptors as raw bytes and generally tries to use as little memory as possible.</p><p>The same caveats regarding <a href=google.protobuf.descriptor_database#EncodedDescriptorDatabase.FindFileContainingExtension>FindFileContainingExtension()</a> apply as with <a href=google.protobuf.descriptor_database#SimpleDescriptorDatabase>SimpleDescriptorDatabase</a>.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=EncodedDescriptorDatabase.EncodedDescriptorDatabase><div style=padding-left:16px;text-indent:-16px><code><b>EncodedDescriptorDatabase</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=EncodedDescriptorDatabase.~EncodedDescriptorDatabase><div style=padding-left:16px;text-indent:-16px><code><b>~EncodedDescriptorDatabase</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=EncodedDescriptorDatabase.Add><div style=padding-left:16px;text-indent:-16px><code><b>Add</b>(const void * encoded_file_descriptor, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Adds the FileDescriptorProto to the database. <a href=#EncodedDescriptorDatabase.Add.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=EncodedDescriptorDatabase.AddCopy><div style=padding-left:16px;text-indent:-16px><code><b>AddCopy</b>(const void * encoded_file_descriptor, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.descriptor_database#EncodedDescriptorDatabase.Add>Add()</a>, but makes a copy of the data, so that the caller does not need to keep it around.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=EncodedDescriptorDatabase.FindNameOfFileContainingSymbol><div style=padding-left:16px;text-indent:-16px><code><b>FindNameOfFileContainingSymbol</b>(const std::string & symbol_name, std::string * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like FindFileContainingSymbol but returns only the name of the file.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=EncodedDescriptorDatabase.FindFileByName><div style=padding-left:16px;text-indent:-16px><code><b>FindFileByName</b>(const std::string & filename, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find a file by file name. <a href=#EncodedDescriptorDatabase.FindFileByName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=EncodedDescriptorDatabase.FindFileContainingSymbol><div style=padding-left:16px;text-indent:-16px><code><b>FindFileContainingSymbol</b>(const std::string & symbol_name, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the file that declares the given fully-qualified symbol name. <a href=#EncodedDescriptorDatabase.FindFileContainingSymbol.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=EncodedDescriptorDatabase.FindFileContainingExtension><div style=padding-left:16px;text-indent:-16px><code><b>FindFileContainingExtension</b>(const std::string & containing_type, int field_number, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the file which defines an extension extending the given message type with the given field number. <a href=#EncodedDescriptorDatabase.FindFileContainingExtension.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=EncodedDescriptorDatabase.FindAllExtensionNumbers><div style=padding-left:16px;text-indent:-16px><code><b>FindAllExtensionNumbers</b>(const std::string & , std::vector&lt; int > * )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Finds the tag numbers used by all known extensions of extendee_type, and appends them to output in an undefined order. <a href=#EncodedDescriptorDatabase.FindAllExtensionNumbers.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=EncodedDescriptorDatabase.FindAllFileNames><div style=padding-left:16px;text-indent:-16px><code><b>FindAllFileNames</b>(std::vector&lt; std::string > * )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Finds the file names and appends them to the output in an undefined order. <a href=#EncodedDescriptorDatabase.FindAllFileNames.details>more...</a></div></td></tr></table><hr><h3 id=EncodedDescriptorDatabase.Add.details><code>bool EncodedDescriptorDatabase::Add(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void * encoded_file_descriptor,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size)</code></h3><div style=margin-left:16px><p>Adds the FileDescriptorProto to the database.</p><p>The descriptor is provided in encoded form. The database does not make a copy of the bytes, nor does it take ownership; it's up to the caller to make sure the bytes remain valid for the life of the database. Returns false and logs an error if the bytes are not a valid FileDescriptorProto or if the file conflicted with a file already in the database.</p></div><hr><h3 id=EncodedDescriptorDatabase.FindFileByName.details><code>virtual bool EncodedDescriptorDatabase::FindFileByName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & filename,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find a file by file name.</p><p>Fills in in *output and returns true if found. Otherwise, returns false, leaving the contents of *output undefined.</p></div><hr><h3 id=EncodedDescriptorDatabase.FindFileContainingSymbol.details><code>virtual bool EncodedDescriptorDatabase::FindFileContainingSymbol(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & symbol_name,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find the file that declares the given fully-qualified symbol name.</p><p>If found, fills in *output and returns true, otherwise returns false and leaves *output undefined.</p></div><hr><h3 id=EncodedDescriptorDatabase.FindFileContainingExtension.details><code>virtual bool EncodedDescriptorDatabase::FindFileContainingExtension(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & containing_type,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int field_number,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find the file which defines an extension extending the given message type with the given field number.</p><p>If found, fills in *output and returns true, otherwise returns false and leaves *output undefined. containing_type must be a fully-qualified type name.</p></div><hr><h3 id=EncodedDescriptorDatabase.FindAllExtensionNumbers.details><code>virtual bool EncodedDescriptorDatabase::FindAllExtensionNumbers(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; int > * )</code></h3><div style=margin-left:16px><p>Finds the tag numbers used by all known extensions of extendee_type, and appends them to output in an undefined order.</p><p>This method is best-effort: it's not guaranteed that the database will find all extensions, and it's not guaranteed that FindFileContainingExtension will return true on all of the found numbers. Returns true if the search was successful, otherwise returns false and leaves output unchanged.</p><p>This method has a default implementation that always returns false.</p></div><hr><h3 id=EncodedDescriptorDatabase.FindAllFileNames.details><code>virtual bool EncodedDescriptorDatabase::FindAllFileNames(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; std::string > * )</code></h3><div style=margin-left:16px><p>Finds the file names and appends them to the output in an undefined order.</p><p>This method is best-effort: it's not guaranteed that the database will find all files. Returns true if the database supports searching all file names, otherwise returns false and leaves output unchanged.</p><p>This method has a default implementation that always returns false.</p></div><h2 id=DescriptorPoolDatabase>class DescriptorPoolDatabase: public <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a></h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor_database.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>A <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> that fetches files from a given pool.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=DescriptorPoolDatabase.DescriptorPoolDatabase><div style=padding-left:16px;text-indent:-16px><code><b>DescriptorPoolDatabase</b>(const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> & pool)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=DescriptorPoolDatabase.~DescriptorPoolDatabase><div style=padding-left:16px;text-indent:-16px><code><b>~DescriptorPoolDatabase</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=DescriptorPoolDatabase.FindFileByName><div style=padding-left:16px;text-indent:-16px><code><b>FindFileByName</b>(const std::string & filename, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find a file by file name. <a href=#DescriptorPoolDatabase.FindFileByName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=DescriptorPoolDatabase.FindFileContainingSymbol><div style=padding-left:16px;text-indent:-16px><code><b>FindFileContainingSymbol</b>(const std::string & symbol_name, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the file that declares the given fully-qualified symbol name. <a href=#DescriptorPoolDatabase.FindFileContainingSymbol.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=DescriptorPoolDatabase.FindFileContainingExtension><div style=padding-left:16px;text-indent:-16px><code><b>FindFileContainingExtension</b>(const std::string & containing_type, int field_number, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the file which defines an extension extending the given message type with the given field number. <a href=#DescriptorPoolDatabase.FindFileContainingExtension.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=DescriptorPoolDatabase.FindAllExtensionNumbers><div style=padding-left:16px;text-indent:-16px><code><b>FindAllExtensionNumbers</b>(const std::string & , std::vector&lt; int > * )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Finds the tag numbers used by all known extensions of extendee_type, and appends them to output in an undefined order. <a href=#DescriptorPoolDatabase.FindAllExtensionNumbers.details>more...</a></div></td></tr></table><hr><h3 id=DescriptorPoolDatabase.FindFileByName.details><code>virtual bool DescriptorPoolDatabase::FindFileByName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & filename,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find a file by file name.</p><p>Fills in in *output and returns true if found. Otherwise, returns false, leaving the contents of *output undefined.</p></div><hr><h3 id=DescriptorPoolDatabase.FindFileContainingSymbol.details><code>virtual bool DescriptorPoolDatabase::FindFileContainingSymbol(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & symbol_name,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find the file that declares the given fully-qualified symbol name.</p><p>If found, fills in *output and returns true, otherwise returns false and leaves *output undefined.</p></div><hr><h3 id=DescriptorPoolDatabase.FindFileContainingExtension.details><code>virtual bool DescriptorPoolDatabase::FindFileContainingExtension(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & containing_type,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int field_number,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find the file which defines an extension extending the given message type with the given field number.</p><p>If found, fills in *output and returns true, otherwise returns false and leaves *output undefined. containing_type must be a fully-qualified type name.</p></div><hr><h3 id=DescriptorPoolDatabase.FindAllExtensionNumbers.details><code>virtual bool DescriptorPoolDatabase::FindAllExtensionNumbers(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; int > * )</code></h3><div style=margin-left:16px><p>Finds the tag numbers used by all known extensions of extendee_type, and appends them to output in an undefined order.</p><p>This method is best-effort: it's not guaranteed that the database will find all extensions, and it's not guaranteed that FindFileContainingExtension will return true on all of the found numbers. Returns true if the search was successful, otherwise returns false and leaves output unchanged.</p><p>This method has a default implementation that always returns false.</p></div><h2 id=MergedDescriptorDatabase>class MergedDescriptorDatabase: public <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a></h2><p><code>#include &lt;<a href=#>google/protobuf/descriptor_database.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>A <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> that wraps two or more others.</p><p>It first searches the first database and, if that fails, tries the second, and so on.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=MergedDescriptorDatabase.MergedDescriptorDatabase><div style=padding-left:16px;text-indent:-16px><code><b>MergedDescriptorDatabase</b>(<a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> * source1, <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> * source2)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Merge just two databases. The sources remain property of the caller.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=MergedDescriptorDatabase.MergedDescriptorDatabase><div style=padding-left:16px;text-indent:-16px><code><b>MergedDescriptorDatabase</b>(const std::vector&lt; <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> * > & sources)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Merge more than two databases. <a href=#MergedDescriptorDatabase.MergedDescriptorDatabase.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=MergedDescriptorDatabase.~MergedDescriptorDatabase><div style=padding-left:16px;text-indent:-16px><code><b>~MergedDescriptorDatabase</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=MergedDescriptorDatabase.FindFileByName><div style=padding-left:16px;text-indent:-16px><code><b>FindFileByName</b>(const std::string & filename, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find a file by file name. <a href=#MergedDescriptorDatabase.FindFileByName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=MergedDescriptorDatabase.FindFileContainingSymbol><div style=padding-left:16px;text-indent:-16px><code><b>FindFileContainingSymbol</b>(const std::string & symbol_name, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the file that declares the given fully-qualified symbol name. <a href=#MergedDescriptorDatabase.FindFileContainingSymbol.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=MergedDescriptorDatabase.FindFileContainingExtension><div style=padding-left:16px;text-indent:-16px><code><b>FindFileContainingExtension</b>(const std::string & containing_type, int field_number, FileDescriptorProto * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the file which defines an extension extending the given message type with the given field number. <a href=#MergedDescriptorDatabase.FindFileContainingExtension.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=MergedDescriptorDatabase.FindAllExtensionNumbers><div style=padding-left:16px;text-indent:-16px><code><b>FindAllExtensionNumbers</b>(const std::string & extendee_type, std::vector&lt; int > * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Merges the results of calling all databases. <a href=#MergedDescriptorDatabase.FindAllExtensionNumbers.details>more...</a></div></td></tr></table><hr><h3 id=MergedDescriptorDatabase.MergedDescriptorDatabase.details><code>explicit MergedDescriptorDatabase::MergedDescriptorDatabase(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; <a href=google.protobuf.descriptor_database#DescriptorDatabase>DescriptorDatabase</a> * > & sources)</code></h3><div style=margin-left:16px><p>Merge more than two databases.</p><p>The sources remain property of the caller. The vector may be deleted after the constructor returns but the DescriptorDatabases need to stick around.</p></div><hr><h3 id=MergedDescriptorDatabase.FindFileByName.details><code>virtual bool MergedDescriptorDatabase::FindFileByName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & filename,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find a file by file name.</p><p>Fills in in *output and returns true if found. Otherwise, returns false, leaving the contents of *output undefined.</p></div><hr><h3 id=MergedDescriptorDatabase.FindFileContainingSymbol.details><code>virtual bool MergedDescriptorDatabase::FindFileContainingSymbol(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & symbol_name,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find the file that declares the given fully-qualified symbol name.</p><p>If found, fills in *output and returns true, otherwise returns false and leaves *output undefined.</p></div><hr><h3 id=MergedDescriptorDatabase.FindFileContainingExtension.details><code>virtual bool MergedDescriptorDatabase::FindFileContainingExtension(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & containing_type,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int field_number,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDescriptorProto * output)</code></h3><div style=margin-left:16px><p>Find the file which defines an extension extending the given message type with the given field number.</p><p>If found, fills in *output and returns true, otherwise returns false and leaves *output undefined. containing_type must be a fully-qualified type name.</p></div><hr><h3 id=MergedDescriptorDatabase.FindAllExtensionNumbers.details><code>virtual bool MergedDescriptorDatabase::FindAllExtensionNumbers(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & extendee_type,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; int > * output)</code></h3><div style=margin-left:16px><p>Merges the results of calling all databases.</p><p>Returns true iff any of the databases returned true.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-17d20805519a35f3c76a00b63a065fe1>1.4.23 -</h1><html devsite><head><title>dynamic_message.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>dynamic_message.h</h1><p><code>#include &lt;google/protobuf/dynamic_message.h><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Defines an implementation of <a href=google.protobuf.message#Message>Message</a> which can emulate types which are not known at compile-time.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#DynamicMessageFactory>DynamicMessageFactory</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Constructs implementations of <a href=google.protobuf.message#Message>Message</a> which can emulate types which are not known at compile-time.</div></td></tr><tr><td><div><code><a href=#DynamicMapSorter>DynamicMapSorter</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Helper for computing a sorted list of map entries via reflection.</div></td></tr></table><h2 id=DynamicMessageFactory>class DynamicMessageFactory: public <a href=google.protobuf.message#MessageFactory>MessageFactory</a></h2><p><code>#include &lt;<a href=#>google/protobuf/dynamic_message.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Constructs implementations of <a href=google.protobuf.message#Message>Message</a> which can emulate types which are not known at compile-time.</p><p>Sometimes you want to be able to manipulate protocol types that you don't know about at compile time. It would be nice to be able to construct a <a href=google.protobuf.message#Message>Message</a> object which implements the message type given by any arbitrary <a href=google.protobuf.descriptor#Descriptor>Descriptor</a>. DynamicMessage provides this.</p><p>As it turns out, a DynamicMessage needs to construct extra information about its type in order to operate. Most of this information can be shared between all DynamicMessages of the same type. But, caching this information in some sort of global map would be a bad idea, since the cached information for a particular descriptor could outlive the descriptor itself. To avoid this problem, <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> encapsulates this "cache". All DynamicMessages of the same type created from the same factory will share the same support data. Any Descriptors used with a particular factory must outlive the factory.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=DynamicMessageFactory.DynamicMessageFactory><div style=padding-left:16px;text-indent:-16px><code><b>DynamicMessageFactory</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Construct a <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> that will search for extensions in the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> in which the extendee is defined.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=DynamicMessageFactory.DynamicMessageFactory><div style=padding-left:16px;text-indent:-16px><code><b>DynamicMessageFactory</b>(const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> * pool)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Construct a <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> that will search for extensions in the given <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a>. <a href=#DynamicMessageFactory.DynamicMessageFactory.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=DynamicMessageFactory.~DynamicMessageFactory><div style=padding-left:16px;text-indent:-16px><code><b>~DynamicMessageFactory</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=DynamicMessageFactory.SetDelegateToGeneratedFactory><div style=padding-left:16px;text-indent:-16px><code><b>SetDelegateToGeneratedFactory</b>(bool enable)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Call this to tell the <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> that if it is given a <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> d for which: <a href=#DynamicMessageFactory.SetDelegateToGeneratedFactory.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.message#MessageFactory>MessageFactory</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual const <a href=google.protobuf.message#Message>Message</a> *</code></td><td style=border-left-width:0 id=DynamicMessageFactory.GetPrototype><div style=padding-left:16px;text-indent:-16px><code><b>GetPrototype</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * type)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Given a <a href=google.protobuf.descriptor#Descriptor>Descriptor</a>, constructs the default (prototype) <a href=google.protobuf.message#Message>Message</a> of that type. <a href=#DynamicMessageFactory.GetPrototype.details>more...</a></div></td></tr></table><hr><h3 id=DynamicMessageFactory.DynamicMessageFactory.details><code>DynamicMessageFactory::DynamicMessageFactory(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> * pool)</code></h3><div style=margin-left:16px><p>Construct a <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> that will search for extensions in the given <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a>.</p><p>DEPRECATED: Use CodedInputStream::SetExtensionRegistry() to tell the parser to look for extensions in an alternate pool. However, note that this is almost never what you want to do. Almost all users should use the zero-arg constructor.</p></div><hr><h3 id=DynamicMessageFactory.SetDelegateToGeneratedFactory.details><code>void DynamicMessageFactory::SetDelegateToGeneratedFactory(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool enable)</code></h3><div style=margin-left:16px><p>Call this to tell the <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> that if it is given a <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> d for which:</p><pre>d-&gt;file()-&gt;pool() == DescriptorPool::generated_pool(),</pre><p>then it should delegate to <a href=google.protobuf.message#MessageFactory.generated_factory>MessageFactory::generated_factory()</a> instead of constructing a dynamic implementation of the message. In theory there is no down side to doing this, so it may become the default in the future.</p></div><hr><h3 id=DynamicMessageFactory.GetPrototype.details><code>virtual const <a href=google.protobuf.message#Message>Message</a> * DynamicMessageFactory::GetPrototype(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * type)</code></h3><div style=margin-left:16px><p>Given a <a href=google.protobuf.descriptor#Descriptor>Descriptor</a>, constructs the default (prototype) <a href=google.protobuf.message#Message>Message</a> of that type.</p><p>You can then call that message's New() method to construct a mutable message of that type.</p><p>Calling this method twice with the same <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> returns the same object. The returned object remains property of the factory and will be destroyed when the factory is destroyed. Also, any objects created by calling the prototype's New() method share some data with the prototype, so these must be destroyed before the <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> is destroyed.</p><p>The given descriptor must outlive the returned message, and hence must outlive the <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a>.</p><p>The method is thread-safe.</p></div><h2 id=DynamicMapSorter>class DynamicMapSorter</h2><p><code>#include &lt;<a href=#>google/protobuf/dynamic_message.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Helper for computing a sorted list of map entries via reflection.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>static std::vector&lt; const <a href=google.protobuf.message#Message>Message</a> * ></code></td><td style=border-left-width:0 id=DynamicMapSorter.Sort><div style=padding-left:16px;text-indent:-16px><code><b>Sort</b>(const <a href=google.protobuf.message#Message>Message</a> & message, int map_size, const <a href=google.protobuf.message#Reflection>Reflection</a> * reflection, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div></td></tr></table></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-c31444273d872af195cbf97497e3e412>1.4.24 -</h1><html devsite><head><title>coded_stream.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>coded_stream.h</h1><p><code>#include &lt;google/protobuf/io/coded_stream.h><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>This file contains the <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> and <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a> classes, which wrap a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> or <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a>, respectively, and allow you to read or write individual pieces of data in various formats.</p><p>In particular, these implement the varint encoding for integers, a simple variable-length encoding in which smaller numbers take fewer bytes.</p><p>Typically these classes will only be used internally by the protocol buffer library in order to encode and decode protocol buffers. Clients of the library only need to know about this class if they wish to write custom message parsing or serialization procedures.</p><p><a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a> example:</p><pre>// Write some data to "myfile".  First we write a 4-byte "magic number"
// to identify the file type, then write a length-delimited string.  The
// string is composed of a varint giving the length followed by the raw
// bytes.
int fd = open("myfile", O_CREAT | O_WRONLY);
ZeroCopyOutputStream* raw_output = new FileOutputStream(fd);
CodedOutputStream* coded_output = new CodedOutputStream(raw_output);
<p>int magic_number = 1234;
char text[[]] = &ldquo;Hello world!&rdquo;;
coded_output-&gt;WriteLittleEndian32(magic_number);
coded_output-&gt;WriteVarint32(strlen(text));
coded_output-&gt;WriteRaw(text, strlen(text));</p>
<p>delete coded_output;
delete raw_output;
close(fd);</pre></p><p><a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> example:</p><pre>// Read a file created by the above code.
int fd = open("myfile", O_RDONLY);
ZeroCopyInputStream* raw_input = new FileInputStream(fd);
CodedInputStream* coded_input = new CodedInputStream(raw_input);
<p>coded_input-&gt;ReadLittleEndian32(&amp;magic_number);
if (magic_number != 1234) {
cerr &lt;&lt; &ldquo;File not in expected format.&rdquo; &lt;&lt; endl;
return;
}</p>
<p>uint32 size;
coded_input-&gt;ReadVarint32(&amp;size);</p>
<p>char* text = new char[[]size + 1];
coded_input-&gt;ReadRaw(buffer, size);
text[[]size] = &lsquo;\0&rsquo;;</p>
<p>delete coded_input;
delete raw_input;
close(fd);</p>
<p>cout &lt;&lt; &ldquo;Text is: &quot; &lt;&lt; text &lt;&lt; endl;
delete [[]] text;</pre></p><p>For those who are interested, varint encoding is defined as follows:</p><p>The encoding operates on unsigned integers of up to 64 bits in length. Each byte of the encoded value has the format:</p><ul><li>bits 0-6: Seven bits of the number being encoded.</li><li>bit 7: Zero if this is the last byte in the encoding (in which case all remaining bits of the number are zero) or 1 if more bytes follow. The first byte contains the least-significant 7 bits of the number, the second byte (if present) contains the next-least-significant 7 bits, and so on. So, the binary number 1011000101011 would be encoded in two bytes as "10101011 00101100".</li></ul><p>In theory, varint could be used to encode integers of any length. However, for practicality we set a limit at 64 bits. The maximum encoded length of a number is thus 10 bytes.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#CodedInputStream>CodedInputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Class which reads and decodes binary data which is composed of varint- encoded integers and fixed-width pieces.</div></td></tr><tr><td><div><code><a href=#EpsCopyOutputStream>EpsCopyOutputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.io.coded_stream#EpsCopyOutputStream>EpsCopyOutputStream</a> wraps a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> and exposes a new stream, which has the property you can write kSlopBytes (16 bytes) from the current position without bounds checks.</div></td></tr><tr><td><div><code><a href=#CodedOutputStream>CodedOutputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Class which encodes and writes binary data which is composed of varint- encoded integers and fixed-width pieces.</div></td></tr><tr><td><div><code><a href=#CodedOutputStream.StaticVarintSize32>CodedOutputStream::StaticVarintSize32</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Compile-time equivalent of <a href=google.protobuf.io.coded_stream#CodedOutputStream.VarintSize32>VarintSize32()</a>.</div></td></tr></table><h2 id=CodedInputStream>class CodedInputStream</h2><p><code>#include &lt;<a href=#>google/protobuf/io/coded_stream.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>Class which reads and decodes binary data which is composed of varint- encoded integers and fixed-width pieces.</p><p>Wraps a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a>. Most users will not need to deal with <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a>.</p><p>Most methods of <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> that return a bool return false if an underlying I/O error occurs or if the data is malformed. Once such a failure occurs, the <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> is broken and is no longer useful. After a failure, callers also should assume writes to "out" args may have occurred, though nothing useful can be determined from those writes.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=CodedInputStream.CodedInputStream><div style=padding-left:16px;text-indent:-16px><code><b>CodedInputStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> * input)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create a <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> that reads from the given <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=CodedInputStream.CodedInputStream><div style=padding-left:16px;text-indent:-16px><code><b>CodedInputStream</b>(const uint8 * buffer, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create a <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> that reads from the given flat array. <a href=#CodedInputStream.CodedInputStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=CodedInputStream.~CodedInputStream><div style=padding-left:16px;text-indent:-16px><code><b>~CodedInputStream</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Destroy the <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> and position the underlying <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> at the first unread byte. <a href=#CodedInputStream.~CodedInputStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.IsFlat><div style=padding-left:16px;text-indent:-16px><code><b>IsFlat</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Return true if this <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> reads from a flat array instead of a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips a number of bytes. <a href=#CodedInputStream.Skip.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.GetDirectBufferPointer><div style=padding-left:16px;text-indent:-16px><code><b>GetDirectBufferPointer</b>(const void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sets *data to point directly at the unread part of the <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a>'s underlying buffer, and *size to the size of that buffer, but does not advance the stream's current position. <a href=#CodedInputStream.GetDirectBufferPointer.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedInputStream.GetDirectBufferPointerInline><div style=padding-left:16px;text-indent:-16px><code><b>GetDirectBufferPointerInline</b>(const void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like GetDirectBufferPointer, but this method is inlined, and does not attempt to Refresh() if the buffer is currently empty.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.ReadRaw><div style=padding-left:16px;text-indent:-16px><code><b>ReadRaw</b>(void * buffer, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Read raw bytes, copying them into the given buffer.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.ReadString><div style=padding-left:16px;text-indent:-16px><code><b>ReadString</b>(std::string * buffer, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like ReadRaw, but reads into a string.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.ReadLittleEndian32><div style=padding-left:16px;text-indent:-16px><code><b>ReadLittleEndian32</b>(uint32 * value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Read a 32-bit little-endian integer.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.ReadLittleEndian64><div style=padding-left:16px;text-indent:-16px><code><b>ReadLittleEndian64</b>(uint64 * value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Read a 64-bit little-endian integer.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.ReadVarint32><div style=padding-left:16px;text-indent:-16px><code><b>ReadVarint32</b>(uint32 * value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Read an unsigned integer with Varint encoding, truncating to 32 bits. <a href=#CodedInputStream.ReadVarint32.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.ReadVarint64><div style=padding-left:16px;text-indent:-16px><code><b>ReadVarint64</b>(uint64 * value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Read an unsigned integer with Varint encoding.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.ReadVarintSizeAsInt><div style=padding-left:16px;text-indent:-16px><code><b>ReadVarintSizeAsInt</b>(int * value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reads a varint off the wire into an "int". <a href=#CodedInputStream.ReadVarintSizeAsInt.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint32</code></td><td style=border-left-width:0 id=CodedInputStream.ReadTag><div style=padding-left:16px;text-indent:-16px><code><b>ReadTag</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Read a tag. <a href=#CodedInputStream.ReadTag.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint32</code></td><td style=border-left-width:0 id=CodedInputStream.ReadTagNoLastTag><div style=padding-left:16px;text-indent:-16px><code><b>ReadTagNoLastTag</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::pair&lt; uint32, bool ></code></td><td style=border-left-width:0 id=CodedInputStream.ReadTagWithCutoff><div style=padding-left:16px;text-indent:-16px><code><b>ReadTagWithCutoff</b>(uint32 cutoff)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This usually a faster alternative to <a href=google.protobuf.io.coded_stream#CodedInputStream.ReadTag>ReadTag()</a> when cutoff is a manifest constant. <a href=#CodedInputStream.ReadTagWithCutoff.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::pair&lt; uint32, bool ></code></td><td style=border-left-width:0 id=CodedInputStream.ReadTagWithCutoffNoLastTag><div style=padding-left:16px;text-indent:-16px><code><b>ReadTagWithCutoffNoLastTag</b>(uint32 cutoff)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.ExpectTag><div style=padding-left:16px;text-indent:-16px><code><b>ExpectTag</b>(uint32 expected)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Usually returns true if calling <a href=google.protobuf.io.coded_stream#CodedInputStream.ReadVarint32>ReadVarint32()</a> now would produce the given value. <a href=#CodedInputStream.ExpectTag.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.ExpectAtEnd><div style=padding-left:16px;text-indent:-16px><code><b>ExpectAtEnd</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Usually returns true if no more bytes can be read. <a href=#CodedInputStream.ExpectAtEnd.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.LastTagWas><div style=padding-left:16px;text-indent:-16px><code><b>LastTagWas</b>(uint32 expected)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If the last call to <a href=google.protobuf.io.coded_stream#CodedInputStream.ReadTag>ReadTag()</a> or <a href=google.protobuf.io.coded_stream#CodedInputStream.ReadTagWithCutoff>ReadTagWithCutoff()</a> returned the given value, returns true. <a href=#CodedInputStream.LastTagWas.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedInputStream.SetLastTag><div style=padding-left:16px;text-indent:-16px><code><b>SetLastTag</b>(uint32 tag)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.ConsumedEntireMessage><div style=padding-left:16px;text-indent:-16px><code><b>ConsumedEntireMessage</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>When parsing message (but NOT a group), this method must be called immediately after MergeFromCodedStream() returns (if it returns true) to further verify that the message ended in a legitimate way. <a href=#CodedInputStream.ConsumedEntireMessage.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedInputStream.SetConsumed><div style=padding-left:16px;text-indent:-16px><code><b>SetConsumed</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static const uint8 *</code></td><td style=border-left-width:0 id=CodedInputStream.ReadLittleEndian32FromArray><div style=padding-left:16px;text-indent:-16px><code><b>ReadLittleEndian32FromArray</b>(const uint8 * buffer, uint32 * value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>These methods read from an externally provided buffer. <a href=#CodedInputStream.ReadLittleEndian32FromArray.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static const uint8 *</code></td><td style=border-left-width:0 id=CodedInputStream.ReadLittleEndian64FromArray><div style=padding-left:16px;text-indent:-16px><code><b>ReadLittleEndian64FromArray</b>(const uint8 * buffer, uint64 * value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Read a 64-bit little-endian integer. <a href=#CodedInputStream.ReadLittleEndian64FromArray.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static const uint8 *</code></td><td style=border-left-width:0 id=CodedInputStream.ExpectTagFromArray><div style=padding-left:16px;text-indent:-16px><code><b>ExpectTagFromArray</b>(const uint8 * buffer, uint32 expected)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like above, except this reads from the specified buffer. <a href=#CodedInputStream.ExpectTagFromArray.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Limits</h3><div style=font-style:italic;font-weight:400>Limits are used when parsing length-delimited embedded messages. After the message's length is read, <a href=google.protobuf.io.coded_stream#CodedInputStream.PushLimit>PushLimit()</a> is used to prevent the <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> from reading beyond that length. Once the embedded message has been parsed, <a href=google.protobuf.io.coded_stream#CodedInputStream.PopLimit>PopLimit()</a> is called to undo the limit.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=CodedInputStream.Limit><div style=padding-left:16px;text-indent:-16px><code>int <b>Limit</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Opaque type used with <a href=google.protobuf.io.coded_stream#CodedInputStream.PushLimit>PushLimit()</a> and <a href=google.protobuf.io.coded_stream#CodedInputStream.PopLimit>PopLimit()</a>. <a href=#CodedInputStream.Limit.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.io.coded_stream#CodedInputStream.Limit>Limit</a></code></td><td style=border-left-width:0 id=CodedInputStream.PushLimit><div style=padding-left:16px;text-indent:-16px><code><b>PushLimit</b>(int byte_limit)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Places a limit on the number of bytes that the stream may read, starting from the current position. <a href=#CodedInputStream.PushLimit.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedInputStream.PopLimit><div style=padding-left:16px;text-indent:-16px><code><b>PopLimit</b>(<a href=google.protobuf.io.coded_stream#CodedInputStream.Limit>Limit</a> limit)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Pops the last limit pushed by <a href=google.protobuf.io.coded_stream#CodedInputStream.PushLimit>PushLimit()</a>. <a href=#CodedInputStream.PopLimit.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=CodedInputStream.BytesUntilLimit><div style=padding-left:16px;text-indent:-16px><code><b>BytesUntilLimit</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the number of bytes left until the nearest limit on the stack is hit, or -1 if no limits are in place.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=CodedInputStream.CurrentPosition><div style=padding-left:16px;text-indent:-16px><code><b>CurrentPosition</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns current position relative to the beginning of the input stream.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Total Bytes Limit</h3><div style=font-style:italic;font-weight:400>To prevent malicious users from sending excessively large messages and causing memory exhaustion, <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> imposes a hard limit on the total number of bytes it will read.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=CodedInputStream.int><div style=padding-left:16px;text-indent:-16px><code><b>int</b> = {
<a href=google.protobuf.io.coded_stream#CodedInputStream.SetTotalBytesLimit>SetTotalBytesLimit</a>(total_bytes_limit)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedInputStream.SetTotalBytesLimit><div style=padding-left:16px;text-indent:-16px><code><b>SetTotalBytesLimit</b>(int total_bytes_limit)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sets the maximum number of bytes that this <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> will read before refusing to continue. <a href=#CodedInputStream.SetTotalBytesLimit.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=CodedInputStream.PROTOBUF_DEPRECATED_MSG><div style=padding-left:16px;text-indent:-16px><code><b>PROTOBUF_DEPRECATED_MSG</b>("Please use the single parameter version of <a href=google.protobuf.io.coded_stream#CodedInputStream.SetTotalBytesLimit>SetTotalBytesLimit</a>(). The " "second parameter is ignored." )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=CodedInputStream.BytesUntilTotalBytesLimit><div style=padding-left:16px;text-indent:-16px><code><b>BytesUntilTotalBytesLimit</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The Total Bytes Limit minus the Current Position, or -1 if the total bytes limit is INT_MAX.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Recursion Limit</h3><div style=font-style:italic;font-weight:400><p>To prevent corrupt or malicious messages from causing stack overflows, we must keep track of the depth of recursion when parsing embedded messages and groups.</p><p><a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> keeps track of this because it is the only object that is passed down the stack during parsing.</p></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedInputStream.SetRecursionLimit><div style=padding-left:16px;text-indent:-16px><code><b>SetRecursionLimit</b>(int limit)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sets the maximum recursion depth. The default is 100.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=CodedInputStream.RecursionBudget><div style=padding-left:16px;text-indent:-16px><code><b>RecursionBudget</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.IncrementRecursionDepth><div style=padding-left:16px;text-indent:-16px><code><b>IncrementRecursionDepth</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Increments the current recursion depth. <a href=#CodedInputStream.IncrementRecursionDepth.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedInputStream.DecrementRecursionDepth><div style=padding-left:16px;text-indent:-16px><code><b>DecrementRecursionDepth</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Decrements the recursion depth if possible.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedInputStream.UnsafeDecrementRecursionDepth><div style=padding-left:16px;text-indent:-16px><code><b>UnsafeDecrementRecursionDepth</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Decrements the recursion depth blindly. <a href=#CodedInputStream.UnsafeDecrementRecursionDepth.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::pair&lt; <a href=google.protobuf.io.coded_stream#CodedInputStream.Limit>CodedInputStream::Limit</a>, int ></code></td><td style=border-left-width:0 id=CodedInputStream.IncrementRecursionDepthAndPushLimit><div style=padding-left:16px;text-indent:-16px><code><b>IncrementRecursionDepthAndPushLimit</b>(int byte_limit)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Shorthand for make_pair(PushLimit(byte_limit), &ndash;recursion_budget_). <a href=#CodedInputStream.IncrementRecursionDepthAndPushLimit.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.io.coded_stream#CodedInputStream.Limit>Limit</a></code></td><td style=border-left-width:0 id=CodedInputStream.ReadLengthAndPushLimit><div style=padding-left:16px;text-indent:-16px><code><b>ReadLengthAndPushLimit</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Shorthand for PushLimit(ReadVarint32(&length) ? length : 0).</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.DecrementRecursionDepthAndPopLimit><div style=padding-left:16px;text-indent:-16px><code><b>DecrementRecursionDepthAndPopLimit</b>(<a href=google.protobuf.io.coded_stream#CodedInputStream.Limit>Limit</a> limit)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Helper that is equivalent to: { bool result = <a href=google.protobuf.io.coded_stream#CodedInputStream.ConsumedEntireMessage>ConsumedEntireMessage()</a>; PopLimit(limit); <a href=google.protobuf.io.coded_stream#CodedInputStream.UnsafeDecrementRecursionDepth>UnsafeDecrementRecursionDepth()</a>; return result; } Using this can reduce code size and complexity in some cases. <a href=#CodedInputStream.DecrementRecursionDepthAndPopLimit.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedInputStream.CheckEntireMessageConsumedAndPopLimit><div style=padding-left:16px;text-indent:-16px><code><b>CheckEntireMessageConsumedAndPopLimit</b>(<a href=google.protobuf.io.coded_stream#CodedInputStream.Limit>Limit</a> limit)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Helper that is equivalent to: { bool result = <a href=google.protobuf.io.coded_stream#CodedInputStream.ConsumedEntireMessage>ConsumedEntireMessage()</a>; PopLimit(limit); return result; } Using this can reduce code size and complexity in some cases.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static int</code></td><td style=border-left-width:0 id=CodedInputStream.GetDefaultRecursionLimit><div style=padding-left:16px;text-indent:-16px><code><b>GetDefaultRecursionLimit</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Extension Registry</h3><div style=font-style:italic;font-weight:400><p>ADVANCED USAGE: 99.9% of people can ignore this section.</p><p>By default, when parsing extensions, the parser looks for extension definitions in the pool which owns the outer message's <a href=google.protobuf.descriptor#Descriptor>Descriptor</a>. However, you may call <a href=google.protobuf.io.coded_stream#CodedInputStream.SetExtensionRegistry>SetExtensionRegistry()</a> to provide an alternative pool instead. This makes it possible, for example, to parse a message using a generated class, but represent some extensions using DynamicMessage.</p></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedInputStream.SetExtensionRegistry><div style=padding-left:16px;text-indent:-16px><code><b>SetExtensionRegistry</b>(const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> * pool, <a href=google.protobuf.message#MessageFactory>MessageFactory</a> * factory)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Set the pool used to look up extensions. <a href=#CodedInputStream.SetExtensionRegistry.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> *</code></td><td style=border-left-width:0 id=CodedInputStream.GetExtensionPool><div style=padding-left:16px;text-indent:-16px><code><b>GetExtensionPool</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> set via <a href=google.protobuf.io.coded_stream#CodedInputStream.SetExtensionRegistry>SetExtensionRegistry()</a>, or NULL if no pool has been provided.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.message#MessageFactory>MessageFactory</a> *</code></td><td style=border-left-width:0 id=CodedInputStream.GetExtensionFactory><div style=padding-left:16px;text-indent:-16px><code><b>GetExtensionFactory</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the <a href=google.protobuf.message#MessageFactory>MessageFactory</a> set via <a href=google.protobuf.io.coded_stream#CodedInputStream.SetExtensionRegistry>SetExtensionRegistry()</a>, or NULL if no factory has been provided.</div></td></tr></table><hr><h3 id=CodedInputStream.CodedInputStream.details><code>explicit CodedInputStream::CodedInputStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const uint8 * buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size)</code></h3><div style=margin-left:16px><p>Create a <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> that reads from the given flat array.</p><p>This is faster than using an <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream>ArrayInputStream</a>. PushLimit(size) is implied by this constructor.</p></div><hr><h3 id=CodedInputStream.~CodedInputStream.details><code>CodedInputStream::~CodedInputStream()</code></h3><div style=margin-left:16px><p>Destroy the <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> and position the underlying <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> at the first unread byte.</p><p>If an error occurred while reading (causing a method to return false), then the exact position of the input stream may be anywhere between the last value that was read successfully and the stream's byte limit.</p></div><hr><h3 id=CodedInputStream.Skip.details><code>bool CodedInputStream::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Skips a number of bytes.</p><p>Returns false if an underlying read error occurs.</p></div><hr><h3 id=CodedInputStream.GetDirectBufferPointer.details><code>bool CodedInputStream::GetDirectBufferPointer(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Sets *data to point directly at the unread part of the <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a>'s underlying buffer, and *size to the size of that buffer, but does not advance the stream's current position.</p><p>This will always either produce a non-empty buffer or return false. If the caller consumes any of this data, it should then call <a href=google.protobuf.io.coded_stream#CodedInputStream.Skip>Skip()</a> to skip over the consumed bytes. This may be useful for implementing external fast parsing routines for types of data not covered by the <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> interface.</p></div><hr><h3 id=CodedInputStream.ReadVarint32.details><code>bool CodedInputStream::ReadVarint32(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint32 * value)</code></h3><div style=margin-left:16px><p>Read an unsigned integer with Varint encoding, truncating to 32 bits.</p><p>Reading a 32-bit value is equivalent to reading a 64-bit one and casting it to uint32, but may be more efficient.</p></div><hr><h3 id=CodedInputStream.ReadVarintSizeAsInt.details><code>bool CodedInputStream::ReadVarintSizeAsInt(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * value)</code></h3><div style=margin-left:16px><p>Reads a varint off the wire into an "int".</p><p>This should be used for reading sizes off the wire (sizes of strings, submessages, bytes fields, etc).</p><p>The value from the wire is interpreted as unsigned. If its value exceeds the representable value of an integer on this platform, instead of truncating we return false. Truncating (as performed by <a href=google.protobuf.io.coded_stream#CodedInputStream.ReadVarint32>ReadVarint32()</a> above) is an acceptable approach for fields representing an integer, but when we are parsing a size from the wire, truncating the value would result in us misparsing the payload.</p></div><hr><h3 id=CodedInputStream.ReadTag.details><code>uint32 CodedInputStream::ReadTag()</code></h3><div style=margin-left:16px><p>Read a tag.</p><p>This calls <a href=google.protobuf.io.coded_stream#CodedInputStream.ReadVarint32>ReadVarint32()</a> and returns the result, or returns zero (which is not a valid tag) if <a href=google.protobuf.io.coded_stream#CodedInputStream.ReadVarint32>ReadVarint32()</a> fails. Also, ReadTag (but not ReadTagNoLastTag) updates the last tag value, which can be checked with <a href=google.protobuf.io.coded_stream#CodedInputStream.LastTagWas>LastTagWas()</a>.</p><p>Always inline because this is only called in one place per parse loop but it is called for every iteration of said loop, so it should be fast. GCC doesn't want to inline this by default.</p></div><hr><h3 id=CodedInputStream.ReadTagWithCutoff.details><code>std::pair&lt; uint32, bool ><br>&nbsp;&nbsp;&nbsp;&nbsp;CodedInputStream::ReadTagWithCutoff(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint32 cutoff)</code></h3><div style=margin-left:16px><p>This usually a faster alternative to <a href=google.protobuf.io.coded_stream#CodedInputStream.ReadTag>ReadTag()</a> when cutoff is a manifest constant.</p><p>It does particularly well for cutoff >= 127. The first part of the return value is the tag that was read, though it can also be 0 in the cases where <a href=google.protobuf.io.coded_stream#CodedInputStream.ReadTag>ReadTag()</a> would return 0. If the second part is true then the tag is known to be in [[]0, cutoff]. If not, the tag either is above cutoff or is 0. (There's intentional wiggle room when tag is 0, because that can arise in several ways, and for best performance we want to avoid an extra "is tag == 0?" check here.)</p></div><hr><h3 id=CodedInputStream.ExpectTag.details><code>bool CodedInputStream::ExpectTag(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint32 expected)</code></h3><div style=margin-left:16px><p>Usually returns true if calling <a href=google.protobuf.io.coded_stream#CodedInputStream.ReadVarint32>ReadVarint32()</a> now would produce the given value.</p><p>Will always return false if <a href=google.protobuf.io.coded_stream#CodedInputStream.ReadVarint32>ReadVarint32()</a> would not return the given value. If <a href=google.protobuf.io.coded_stream#CodedInputStream.ExpectTag>ExpectTag()</a> returns true, it also advances past the varint. For best performance, use a compile-time constant as the parameter. Always inline because this collapses to a small number of instructions when given a constant parameter, but GCC doesn't want to inline by default.</p></div><hr><h3 id=CodedInputStream.ExpectAtEnd.details><code>bool CodedInputStream::ExpectAtEnd()</code></h3><div style=margin-left:16px><p>Usually returns true if no more bytes can be read.</p><p>Always returns false if more bytes can be read. If <a href=google.protobuf.io.coded_stream#CodedInputStream.ExpectAtEnd>ExpectAtEnd()</a> returns true, a subsequent call to <a href=google.protobuf.io.coded_stream#CodedInputStream.LastTagWas>LastTagWas()</a> will act as if <a href=google.protobuf.io.coded_stream#CodedInputStream.ReadTag>ReadTag()</a> had been called and returned zero, and <a href=google.protobuf.io.coded_stream#CodedInputStream.ConsumedEntireMessage>ConsumedEntireMessage()</a> will return true.</p></div><hr><h3 id=CodedInputStream.LastTagWas.details><code>bool CodedInputStream::LastTagWas(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint32 expected)</code></h3><div style=margin-left:16px><p>If the last call to <a href=google.protobuf.io.coded_stream#CodedInputStream.ReadTag>ReadTag()</a> or <a href=google.protobuf.io.coded_stream#CodedInputStream.ReadTagWithCutoff>ReadTagWithCutoff()</a> returned the given value, returns true.</p><p>Otherwise, returns false. ReadTagNoLastTag/ReadTagWithCutoffNoLastTag do not preserve the last returned value.</p><p>This is needed because parsers for some types of embedded messages (with field type TYPE_GROUP) don't actually know that they've reached the end of a message until they see an ENDGROUP tag, which was actually part of the enclosing message. The enclosing message would like to check that tag to make sure it had the right number, so it calls <a href=google.protobuf.io.coded_stream#CodedInputStream.LastTagWas>LastTagWas()</a> on return from the embedded parser to check.</p></div><hr><h3 id=CodedInputStream.ConsumedEntireMessage.details><code>bool CodedInputStream::ConsumedEntireMessage()</code></h3><div style=margin-left:16px><p>When parsing message (but NOT a group), this method must be called immediately after MergeFromCodedStream() returns (if it returns true) to further verify that the message ended in a legitimate way.</p><p>For example, this verifies that parsing did not end on an end-group tag. It also checks for some cases where, due to optimizations, MergeFromCodedStream() can incorrectly return true.</p></div><hr><h3 id=CodedInputStream.ReadLittleEndian32FromArray.details><code>static const uint8 * CodedInputStream::ReadLittleEndian32FromArray(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const uint8 * buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint32 * value)</code></h3><div style=margin-left:16px><p>These methods read from an externally provided buffer.</p><p>static</p><p>The caller is responsible for ensuring that the buffer has sufficient space. Read a 32-bit little-endian integer.</p></div><hr><h3 id=CodedInputStream.ReadLittleEndian64FromArray.details><code>static const uint8 * CodedInputStream::ReadLittleEndian64FromArray(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const uint8 * buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint64 * value)</code></h3><div style=margin-left:16px><p>Read a 64-bit little-endian integer.</p><p>static</p></div><hr><h3 id=CodedInputStream.ExpectTagFromArray.details><code>static const uint8 * CodedInputStream::ExpectTagFromArray(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const uint8 * buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint32 expected)</code></h3><div style=margin-left:16px><p>Like above, except this reads from the specified buffer.</p><p>The caller is responsible for ensuring that the buffer is large enough to read a varint of the expected size. For best performance, use a compile-time constant as the expected tag parameter.</p><p>Returns a pointer beyond the expected tag if it was found, or NULL if it was not.</p></div><hr><h3 id=CodedInputStream.Limit.details><code>typedef CodedInputStream::Limit</code></h3><div style=margin-left:16px><p>Opaque type used with <a href=google.protobuf.io.coded_stream#CodedInputStream.PushLimit>PushLimit()</a> and <a href=google.protobuf.io.coded_stream#CodedInputStream.PopLimit>PopLimit()</a>.</p><p>Do not modify values of this type yourself. The only reason that this isn't a struct with private internals is for efficiency.</p></div><hr><h3 id=CodedInputStream.PushLimit.details><code><a href=google.protobuf.io.coded_stream#CodedInputStream.Limit>Limit</a> CodedInputStream::PushLimit(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int byte_limit)</code></h3><div style=margin-left:16px><p>Places a limit on the number of bytes that the stream may read, starting from the current position.</p><p>Once the stream hits this limit, it will act like the end of the input has been reached until <a href=google.protobuf.io.coded_stream#CodedInputStream.PopLimit>PopLimit()</a> is called.</p><p>As the names imply, the stream conceptually has a stack of limits. The shortest limit on the stack is always enforced, even if it is not the top limit.</p><p>The value returned by <a href=google.protobuf.io.coded_stream#CodedInputStream.PushLimit>PushLimit()</a> is opaque to the caller, and must be passed unchanged to the corresponding call to <a href=google.protobuf.io.coded_stream#CodedInputStream.PopLimit>PopLimit()</a>.</p></div><hr><h3 id=CodedInputStream.PopLimit.details><code>void CodedInputStream::PopLimit(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.coded_stream#CodedInputStream.Limit>Limit</a> limit)</code></h3><div style=margin-left:16px><p>Pops the last limit pushed by <a href=google.protobuf.io.coded_stream#CodedInputStream.PushLimit>PushLimit()</a>.</p><p>The input must be the value returned by that call to <a href=google.protobuf.io.coded_stream#CodedInputStream.PushLimit>PushLimit()</a>.</p></div><hr><h3 id=CodedInputStream.SetTotalBytesLimit.details><code>void CodedInputStream::SetTotalBytesLimit(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int total_bytes_limit)</code></h3><div style=margin-left:16px><p>Sets the maximum number of bytes that this <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> will read before refusing to continue.</p><p>To prevent servers from allocating enormous amounts of memory to hold parsed messages, the maximum message length should be limited to the shortest length that will not harm usability. The default limit is INT_MAX (~2GB) and apps should set shorter limits if possible. An error will always be printed to stderr if the limit is reached.</p><p>Note: setting a limit less than the current read position is interpreted as a limit on the current position.</p><p>This is unrelated to <a href=google.protobuf.io.coded_stream#CodedInputStream.PushLimit>PushLimit()</a>/PopLimit().</p></div><hr><h3 id=CodedInputStream.IncrementRecursionDepth.details><code>bool CodedInputStream::IncrementRecursionDepth()</code></h3><div style=margin-left:16px><p>Increments the current recursion depth.</p><p>Returns true if the depth is under the limit, false if it has gone over.</p></div><hr><h3 id=CodedInputStream.UnsafeDecrementRecursionDepth.details><code>void CodedInputStream::UnsafeDecrementRecursionDepth()</code></h3><div style=margin-left:16px><p>Decrements the recursion depth blindly.</p><p>This is faster than <a href=google.protobuf.io.coded_stream#CodedInputStream.DecrementRecursionDepth>DecrementRecursionDepth()</a>. It should be used only if all previous increments to recursion depth were successful.</p></div><hr><h3 id=CodedInputStream.IncrementRecursionDepthAndPushLimit.details><code>std::pair&lt; <a href=google.protobuf.io.coded_stream#CodedInputStream.Limit>CodedInputStream::Limit</a>, int ><br>&nbsp;&nbsp;&nbsp;&nbsp;CodedInputStream::IncrementRecursionDepthAndPushLimit(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int byte_limit)</code></h3><div style=margin-left:16px><p>Shorthand for make_pair(PushLimit(byte_limit), &ndash;recursion_budget_).</p><p>Using this can reduce code size and complexity in some cases. The caller is expected to check that the second part of the result is non-negative (to bail out if the depth of recursion is too high) and, if all is well, to later pass the first part of the result to <a href=google.protobuf.io.coded_stream#CodedInputStream.PopLimit>PopLimit()</a> or similar.</p></div><hr><h3 id=CodedInputStream.DecrementRecursionDepthAndPopLimit.details><code>bool CodedInputStream::DecrementRecursionDepthAndPopLimit(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.coded_stream#CodedInputStream.Limit>Limit</a> limit)</code></h3><div style=margin-left:16px><p>Helper that is equivalent to: { bool result = <a href=google.protobuf.io.coded_stream#CodedInputStream.ConsumedEntireMessage>ConsumedEntireMessage()</a>; PopLimit(limit); <a href=google.protobuf.io.coded_stream#CodedInputStream.UnsafeDecrementRecursionDepth>UnsafeDecrementRecursionDepth()</a>; return result; } Using this can reduce code size and complexity in some cases.</p><p>Do not use unless the current recursion depth is greater than zero.</p></div><hr><h3 id=CodedInputStream.SetExtensionRegistry.details><code>void CodedInputStream::SetExtensionRegistry(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> * pool,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#MessageFactory>MessageFactory</a> * factory)</code></h3><div style=margin-left:16px><p>Set the pool used to look up extensions.</p><p>Most users do not need to call this as the correct pool will be chosen automatically.</p><p>WARNING: It is very easy to misuse this. Carefully read the requirements below. Do not use this unless you are sure you need it. Almost no one does.</p><p>Let's say you are parsing a message into message object m, and you want to take advantage of <a href=google.protobuf.io.coded_stream#CodedInputStream.SetExtensionRegistry>SetExtensionRegistry()</a>. You must follow these requirements:</p><p>The given <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> must contain m->GetDescriptor(). It is not sufficient for it to simply contain a descriptor that has the same name and content &ndash; it must be the <i>exact object</i>. In other words:</p><pre>assert(pool-&gt;FindMessageTypeByName(m-&gt;GetDescriptor()-&gt;full_name()) ==
       m-&gt;GetDescriptor());</pre><p>There are two ways to satisfy this requirement: 1) Use m->GetDescriptor()->pool() as the pool. This is generally useless</p><pre>because this is the pool that would be used anyway if you didn't call
SetExtensionRegistry() at all.</pre><p>2) Use a <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> which has m->GetDescriptor()->pool() as an</p><pre>"underlay".  Read the documentation for DescriptorPool for more
information about underlays.</pre><p>You must also provide a <a href=google.protobuf.message#MessageFactory>MessageFactory</a>. This factory will be used to construct <a href=google.protobuf.message#Message>Message</a> objects representing extensions. The factory's GetPrototype() MUST return non-NULL for any <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> which can be found through the provided pool.</p><p>If the provided factory might return instances of protocol-compiler- generated (i.e. compiled-in) types, or if the outer message object m is a generated type, then the given factory MUST have this property: If GetPrototype() is given a <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> which resides in <a href=google.protobuf.descriptor#DescriptorPool.generated_pool>DescriptorPool::generated_pool()</a>, the factory MUST return the same prototype which <a href=google.protobuf.message#MessageFactory.generated_factory>MessageFactory::generated_factory()</a> would return. That is, given a descriptor for a generated type, the factory must return an instance of the generated class (NOT DynamicMessage). However, when given a descriptor for a type that is NOT in generated_pool, the factory is free to return any implementation.</p><p>The reason for this requirement is that generated sub-objects may be accessed via the standard (non-reflection) extension accessor methods, and these methods will down-cast the object to the generated class type. If the object is not actually of that type, the results would be undefined. On the other hand, if an extension is not compiled in, then there is no way the code could end up accessing it via the standard accessors &ndash; the only way to access the extension is via reflection. When using reflection, DynamicMessage and generated messages are indistinguishable, so it's fine if these objects are represented using DynamicMessage.</p><p>Using <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> on which you have called SetDelegateToGeneratedFactory(true) should be sufficient to satisfy the above requirement.</p><p>If either pool or factory is NULL, both must be NULL.</p><p>Note that this feature is ignored when parsing "lite" messages as they do not have descriptors.</p></div><h2 id=EpsCopyOutputStream>class EpsCopyOutputStream</h2><p><code>#include &lt;<a href=#>google/protobuf/io/coded_stream.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p><a href=google.protobuf.io.coded_stream#EpsCopyOutputStream>EpsCopyOutputStream</a> wraps a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> and exposes a new stream, which has the property you can write kSlopBytes (16 bytes) from the current position without bounds checks.</p><p>The cursor into the stream is managed by the user of the class and is an explicit parameter in the methods. Careful use of this class, ie. keep ptr a local variable, eliminates the need to for the compiler to sync the ptr value between register and memory.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.@33><div style=padding-left:16px;text-indent:-16px><code><b>@33</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#EpsCopyOutputStream.@33.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=EpsCopyOutputStream.EpsCopyOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>EpsCopyOutputStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> * stream, bool deterministic, uint8 ** pp)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Initialize from a stream.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=EpsCopyOutputStream.EpsCopyOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>EpsCopyOutputStream</b>(void * data, int size, bool deterministic)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Only for array serialization. <a href=#EpsCopyOutputStream.EpsCopyOutputStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=EpsCopyOutputStream.EpsCopyOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>EpsCopyOutputStream</b>(void * data, int size, <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> * stream, bool deterministic, uint8 ** pp)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Initialize from stream but with the first buffer already given (eager).</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.Trim><div style=padding-left:16px;text-indent:-16px><code><b>Trim</b>(uint8 * ptr)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Flush everything that's written into the underlying <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> and trims the underlying stream to the location of ptr.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_MUST_USE_RESULT uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.EnsureSpace><div style=padding-left:16px;text-indent:-16px><code><b>EnsureSpace</b>(uint8 * ptr)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>After this it's guaranteed you can safely write kSlopBytes to ptr. <a href=#EpsCopyOutputStream.EnsureSpace.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.WriteRaw><div style=padding-left:16px;text-indent:-16px><code><b>WriteRaw</b>(const void * data, int size, uint8 * ptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.WriteRawMaybeAliased><div style=padding-left:16px;text-indent:-16px><code><b>WriteRawMaybeAliased</b>(const void * data, int size, uint8 * ptr)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Writes the buffer specified by data, size to the stream. <a href=#EpsCopyOutputStream.WriteRawMaybeAliased.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.WriteStringMaybeAliased><div style=padding-left:16px;text-indent:-16px><code><b>WriteStringMaybeAliased</b>(uint32 num, const std::string & s, uint8 * ptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.WriteBytesMaybeAliased><div style=padding-left:16px;text-indent:-16px><code><b>WriteBytesMaybeAliased</b>(uint32 num, const std::string & s, uint8 * ptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.WriteString><div style=padding-left:16px;text-indent:-16px><code><b>WriteString</b>(uint32 num, const T & s, uint8 * ptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.WriteBytes><div style=padding-left:16px;text-indent:-16px><code><b>WriteBytes</b>(uint32 num, const T & s, uint8 * ptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.WriteInt32Packed><div style=padding-left:16px;text-indent:-16px><code><b>WriteInt32Packed</b>(int num, const T & r, int size, uint8 * ptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.WriteUInt32Packed><div style=padding-left:16px;text-indent:-16px><code><b>WriteUInt32Packed</b>(int num, const T & r, int size, uint8 * ptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.WriteSInt32Packed><div style=padding-left:16px;text-indent:-16px><code><b>WriteSInt32Packed</b>(int num, const T & r, int size, uint8 * ptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.WriteInt64Packed><div style=padding-left:16px;text-indent:-16px><code><b>WriteInt64Packed</b>(int num, const T & r, int size, uint8 * ptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.WriteUInt64Packed><div style=padding-left:16px;text-indent:-16px><code><b>WriteUInt64Packed</b>(int num, const T & r, int size, uint8 * ptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.WriteSInt64Packed><div style=padding-left:16px;text-indent:-16px><code><b>WriteSInt64Packed</b>(int num, const T & r, int size, uint8 * ptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.WriteEnumPacked><div style=padding-left:16px;text-indent:-16px><code><b>WriteEnumPacked</b>(int num, const T & r, int size, uint8 * ptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.WriteFixedPacked><div style=padding-left:16px;text-indent:-16px><code><b>WriteFixedPacked</b>(int num, const T & r, uint8 * ptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.HadError><div style=padding-left:16px;text-indent:-16px><code><b>HadError</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if there was an underlying I/O error since this object was created.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.EnableAliasing><div style=padding-left:16px;text-indent:-16px><code><b>EnableAliasing</b>(bool enabled)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Instructs the <a href=google.protobuf.io.coded_stream#EpsCopyOutputStream>EpsCopyOutputStream</a> to allow the underlying <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> to hold pointers to the original structure instead of copying, if it supports it (i.e. <a href=#EpsCopyOutputStream.EnableAliasing.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.SetSerializationDeterministic><div style=padding-left:16px;text-indent:-16px><code><b>SetSerializationDeterministic</b>(bool value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See documentation on <a href=google.protobuf.io.coded_stream#CodedOutputStream.SetSerializationDeterministic>CodedOutputStream::SetSerializationDeterministic</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.IsSerializationDeterministic><div style=padding-left:16px;text-indent:-16px><code><b>IsSerializationDeterministic</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See documentation on <a href=google.protobuf.io.coded_stream#CodedOutputStream.IsSerializationDeterministic>CodedOutputStream::IsSerializationDeterministic</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int64</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>(uint8 * ptr) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The number of bytes written to the stream at position ptr, relative to the stream's overall position.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint8 *</code></td><td style=border-left-width:0 id=EpsCopyOutputStream.SetInitialBuffer><div style=padding-left:16px;text-indent:-16px><code><b>SetInitialBuffer</b>(void * data, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>These methods are for <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a>. <a href=#EpsCopyOutputStream.SetInitialBuffer.details>more...</a></div></td></tr></table><hr><h3 id=EpsCopyOutputStream.@33.details><code>enum EpsCopyOutputStream::@33 {<br>&nbsp;&nbsp;kSlopBytes = = 16<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>kSlopBytes</td><td></td></tr></table></div><hr><h3 id=EpsCopyOutputStream.EpsCopyOutputStream.details><code>EpsCopyOutputStream::EpsCopyOutputStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void * data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool deterministic)</code></h3><div style=margin-left:16px><p>Only for array serialization.</p><p>No overflow protection, end_ will be the pointed to the end of the array. When using this the total size is already known, so no need to maintain the slop region.</p></div><hr><h3 id=EpsCopyOutputStream.EnsureSpace.details><code>PROTOBUF_MUST_USE_RESULT uint8 *<br>&nbsp;&nbsp;&nbsp;&nbsp;EpsCopyOutputStream::EnsureSpace(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8 * ptr)</code></h3><div style=margin-left:16px><p>After this it's guaranteed you can safely write kSlopBytes to ptr.</p><p>This will never fail! The underlying stream can produce an error. Use HadError to check for errors.</p></div><hr><h3 id=EpsCopyOutputStream.WriteRawMaybeAliased.details><code>uint8 * EpsCopyOutputStream::WriteRawMaybeAliased(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void * data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8 * ptr)</code></h3><div style=margin-left:16px><p>Writes the buffer specified by data, size to the stream.</p><p>Possibly by aliasing the buffer (ie. not copying the data). The caller is responsible to make sure the buffer is alive for the duration of the <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a>.</p></div><hr><h3 id=EpsCopyOutputStream.EnableAliasing.details><code>void EpsCopyOutputStream::EnableAliasing(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool enabled)</code></h3><div style=margin-left:16px><p>Instructs the <a href=google.protobuf.io.coded_stream#EpsCopyOutputStream>EpsCopyOutputStream</a> to allow the underlying <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> to hold pointers to the original structure instead of copying, if it supports it (i.e.</p><p>output->AllowsAliasing() is true). If the underlying stream does not support aliasing, then enabling it has no affect. For now, this only affects the behavior of <a href=google.protobuf.io.coded_stream#EpsCopyOutputStream.WriteRawMaybeAliased>WriteRawMaybeAliased()</a>.</p><p>NOTE: It is caller's responsibility to ensure that the chunk of memory remains live until all of the data has been consumed from the stream.</p></div><hr><h3 id=EpsCopyOutputStream.SetInitialBuffer.details><code>uint8 * EpsCopyOutputStream::SetInitialBuffer(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void * data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size)</code></h3><div style=margin-left:16px><p>These methods are for <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a>.</p><p>Ideally they should be private but to match current behavior of <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a> as close as possible we allow it some functionality.</p></div><h2 id=CodedOutputStream>class CodedOutputStream</h2><p><code>#include &lt;<a href=#>google/protobuf/io/coded_stream.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>Class which encodes and writes binary data which is composed of varint- encoded integers and fixed-width pieces.</p><p>Wraps a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a>. Most users will not need to deal with <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a>.</p><p>Most methods of <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a> which return a bool return false if an underlying I/O error occurs. Once such a failure occurs, the <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a> is broken and is no longer useful. The Write* methods do not return the stream status, but will invalidate the stream if an error occurs. The client can probe <a href=google.protobuf.io.coded_stream#CodedOutputStream.HadError>HadError()</a> to determine the status.</p><p>Note that every method of <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a> which writes some data has a corresponding static "ToArray" version. These versions write directly to the provided buffer, returning a pointer past the last written byte. They require that the buffer has sufficient capacity for the encoded data. This allows an optimization where we check if an output stream has enough space for an entire message before we start writing and, if there is, we call only the ToArray methods to avoid doing bound checks for each individual value. i.e., in the example above:</p><pre>CodedOutputStream* coded_output = new CodedOutputStream(raw_output);
int magic_number = 1234;
char text[[]] = "Hello world!";
<p>int coded_size = sizeof(magic_number) +
CodedOutputStream::VarintSize32(strlen(text)) +
strlen(text);</p>
<p>uint8* buffer =
coded_output-&gt;GetDirectBufferForNBytesAndAdvance(coded_size);
if (buffer != nullptr) {
// The output stream has enough space in the buffer: write directly to
// the array.
buffer = CodedOutputStream::WriteLittleEndian32ToArray(magic_number,
buffer);
buffer = CodedOutputStream::WriteVarint32ToArray(strlen(text), buffer);
buffer = CodedOutputStream::WriteRawToArray(text, strlen(text), buffer);
} else {
// Make bound-checked writes, which will ask the underlying stream for
// more space as needed.
coded_output-&gt;WriteLittleEndian32(magic_number);
coded_output-&gt;WriteVarint32(strlen(text));
coded_output-&gt;WriteRaw(text, strlen(text));
}</p>
<p>delete coded_output;</pre></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=CodedOutputStream.CodedOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>CodedOutputStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> * stream)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create an <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a> that writes to the given <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=CodedOutputStream.CodedOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>CodedOutputStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> * stream, bool do_eager_refresh)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=CodedOutputStream.~CodedOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>~CodedOutputStream</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Destroy the <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a> and position the underlying <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> immediately after the last byte written.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedOutputStream.HadError><div style=padding-left:16px;text-indent:-16px><code><b>HadError</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if there was an underlying I/O error since this object was created. <a href=#CodedOutputStream.HadError.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedOutputStream.Trim><div style=padding-left:16px;text-indent:-16px><code><b>Trim</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Trims any unused space in the underlying buffer so that its size matches the number of bytes written by this stream. <a href=#CodedOutputStream.Trim.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedOutputStream.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips a number of bytes, leaving the bytes unmodified in the underlying buffer. <a href=#CodedOutputStream.Skip.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedOutputStream.GetDirectBufferPointer><div style=padding-left:16px;text-indent:-16px><code><b>GetDirectBufferPointer</b>(void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sets *data to point directly at the unwritten part of the <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a>'s underlying buffer, and *size to the size of that buffer, but does not advance the stream's current position. <a href=#CodedOutputStream.GetDirectBufferPointer.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint8 *</code></td><td style=border-left-width:0 id=CodedOutputStream.GetDirectBufferForNBytesAndAdvance><div style=padding-left:16px;text-indent:-16px><code><b>GetDirectBufferForNBytesAndAdvance</b>(int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If there are at least "size" bytes available in the current buffer, returns a pointer directly into the buffer and advances over these bytes. <a href=#CodedOutputStream.GetDirectBufferForNBytesAndAdvance.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteRaw><div style=padding-left:16px;text-indent:-16px><code><b>WriteRaw</b>(const void * buffer, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write raw bytes, copying them from the given buffer.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteRawMaybeAliased><div style=padding-left:16px;text-indent:-16px><code><b>WriteRawMaybeAliased</b>(const void * data, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteRaw>WriteRaw()</a> but will try to write aliased data if aliasing is turned on.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteString><div style=padding-left:16px;text-indent:-16px><code><b>WriteString</b>(const std::string & str)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Equivalent to WriteRaw(str.data(), str.size()).</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteLittleEndian32><div style=padding-left:16px;text-indent:-16px><code><b>WriteLittleEndian32</b>(uint32 value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write a 32-bit little-endian integer.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteLittleEndian64><div style=padding-left:16px;text-indent:-16px><code><b>WriteLittleEndian64</b>(uint64 value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write a 64-bit little-endian integer.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteVarint32><div style=padding-left:16px;text-indent:-16px><code><b>WriteVarint32</b>(uint32 value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write an unsigned integer with Varint encoding. <a href=#CodedOutputStream.WriteVarint32.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteVarint64><div style=padding-left:16px;text-indent:-16px><code><b>WriteVarint64</b>(uint64 value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write an unsigned integer with Varint encoding.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteVarint32SignExtended><div style=padding-left:16px;text-indent:-16px><code><b>WriteVarint32SignExtended</b>(int32 value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Equivalent to <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteVarint32>WriteVarint32()</a> except when the value is negative, in which case it must be sign-extended to a full 10 bytes.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteTag><div style=padding-left:16px;text-indent:-16px><code><b>WriteTag</b>(uint32 value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This is identical to <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteVarint32>WriteVarint32()</a>, but optimized for writing tags. <a href=#CodedOutputStream.WriteTag.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=CodedOutputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes written since this object was created.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedOutputStream.EnableAliasing><div style=padding-left:16px;text-indent:-16px><code><b>EnableAliasing</b>(bool enabled)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Instructs the <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a> to allow the underlying <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> to hold pointers to the original structure instead of copying, if it supports it (i.e. <a href=#CodedOutputStream.EnableAliasing.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedOutputStream.SetSerializationDeterministic><div style=padding-left:16px;text-indent:-16px><code><b>SetSerializationDeterministic</b>(bool value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Indicate to the serializer whether the user wants derministic serialization. <a href=#CodedOutputStream.SetSerializationDeterministic.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CodedOutputStream.IsSerializationDeterministic><div style=padding-left:16px;text-indent:-16px><code><b>IsSerializationDeterministic</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Return whether the user wants deterministic serialization. See above.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=CodedOutputStream.Serialize><div style=padding-left:16px;text-indent:-16px><code><b>Serialize</b>(const Func & func)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint8 *</code></td><td style=border-left-width:0 id=CodedOutputStream.Cur><div style=padding-left:16px;text-indent:-16px><code><b>Cur</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CodedOutputStream.SetCur><div style=padding-left:16px;text-indent:-16px><code><b>SetCur</b>(uint8 * ptr)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.io.coded_stream#EpsCopyOutputStream>EpsCopyOutputStream</a> *</code></td><td style=border-left-width:0 id=CodedOutputStream.EpsCopy><div style=padding-left:16px;text-indent:-16px><code><b>EpsCopy</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static uint8 *</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteRawToArray><div style=padding-left:16px;text-indent:-16px><code><b>WriteRawToArray</b>(const void * buffer, int size, uint8 * target)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteRaw>WriteRaw()</a> but writing directly to the target array. <a href=#CodedOutputStream.WriteRawToArray.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static uint8 *</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteStringToArray><div style=padding-left:16px;text-indent:-16px><code><b>WriteStringToArray</b>(const std::string & str, uint8 * target)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteString>WriteString()</a> but writing directly to the target array.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static uint8 *</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteStringWithSizeToArray><div style=padding-left:16px;text-indent:-16px><code><b>WriteStringWithSizeToArray</b>(const std::string & str, uint8 * target)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write the varint-encoded size of str followed by str.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static uint8 *</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteLittleEndian32ToArray><div style=padding-left:16px;text-indent:-16px><code><b>WriteLittleEndian32ToArray</b>(uint32 value, uint8 * target)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteLittleEndian32>WriteLittleEndian32()</a> but writing directly to the target array.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static uint8 *</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteLittleEndian64ToArray><div style=padding-left:16px;text-indent:-16px><code><b>WriteLittleEndian64ToArray</b>(uint64 value, uint8 * target)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteLittleEndian64>WriteLittleEndian64()</a> but writing directly to the target array.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static uint8 *</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteVarint32ToArray><div style=padding-left:16px;text-indent:-16px><code><b>WriteVarint32ToArray</b>(uint32 value, uint8 * target)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteVarint32>WriteVarint32()</a> but writing directly to the target array.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static uint8 *</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteVarint32ToArrayOutOfLine><div style=padding-left:16px;text-indent:-16px><code><b>WriteVarint32ToArrayOutOfLine</b>(uint32 value, uint8 * target)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteVarint32>WriteVarint32()</a> but writing directly to the target array, and with the less common-case paths being out of line rather than inlined.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static uint8 *</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteVarint64ToArray><div style=padding-left:16px;text-indent:-16px><code><b>WriteVarint64ToArray</b>(uint64 value, uint8 * target)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteVarint64>WriteVarint64()</a> but writing directly to the target array.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static uint8 *</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteVarint32SignExtendedToArray><div style=padding-left:16px;text-indent:-16px><code><b>WriteVarint32SignExtendedToArray</b>(int32 value, uint8 * target)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteVarint32SignExtended>WriteVarint32SignExtended()</a> but writing directly to the target array.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static uint8 *</code></td><td style=border-left-width:0 id=CodedOutputStream.WriteTagToArray><div style=padding-left:16px;text-indent:-16px><code><b>WriteTagToArray</b>(uint32 value, uint8 * target)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteTag>WriteTag()</a> but writing directly to the target array.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static size_t</code></td><td style=border-left-width:0 id=CodedOutputStream.VarintSize32><div style=padding-left:16px;text-indent:-16px><code><b>VarintSize32</b>(uint32 value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the number of bytes needed to encode the given value as a varint.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static size_t</code></td><td style=border-left-width:0 id=CodedOutputStream.VarintSize64><div style=padding-left:16px;text-indent:-16px><code><b>VarintSize64</b>(uint64 value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the number of bytes needed to encode the given value as a varint.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static size_t</code></td><td style=border-left-width:0 id=CodedOutputStream.VarintSize32SignExtended><div style=padding-left:16px;text-indent:-16px><code><b>VarintSize32SignExtended</b>(int32 value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If negative, 10 bytes. Otherwise, same as <a href=google.protobuf.io.coded_stream#CodedOutputStream.VarintSize32>VarintSize32()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=CodedOutputStream.IsDefaultSerializationDeterministic><div style=padding-left:16px;text-indent:-16px><code><b>IsDefaultSerializationDeterministic</b>()</code></div></td></tr></table><hr><h3 id=CodedOutputStream.HadError.details><code>bool CodedOutputStream::HadError()</code></h3><div style=margin-left:16px><p>Returns true if there was an underlying I/O error since this object was created.</p><p>On should call Trim before this function in order to catch all errors.</p></div><hr><h3 id=CodedOutputStream.Trim.details><code>void CodedOutputStream::Trim()</code></h3><div style=margin-left:16px><p>Trims any unused space in the underlying buffer so that its size matches the number of bytes written by this stream.</p><p>The underlying buffer will automatically be trimmed when this stream is destroyed; this call is only necessary if the underlying buffer is accessed <i>before</i> the stream is destroyed.</p></div><hr><h3 id=CodedOutputStream.Skip.details><code>bool CodedOutputStream::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Skips a number of bytes, leaving the bytes unmodified in the underlying buffer.</p><p>Returns false if an underlying write error occurs. This is mainly useful with <a href=google.protobuf.io.coded_stream#CodedOutputStream.GetDirectBufferPointer>GetDirectBufferPointer()</a>. Note of caution, the skipped bytes may contain uninitialized data. The caller must make sure that the skipped bytes are properly initialized, otherwise you might leak bytes from your heap.</p></div><hr><h3 id=CodedOutputStream.GetDirectBufferPointer.details><code>bool CodedOutputStream::GetDirectBufferPointer(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Sets *data to point directly at the unwritten part of the <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a>'s underlying buffer, and *size to the size of that buffer, but does not advance the stream's current position.</p><p>This will always either produce a non-empty buffer or return false. If the caller writes any data to this buffer, it should then call <a href=google.protobuf.io.coded_stream#CodedOutputStream.Skip>Skip()</a> to skip over the consumed bytes. This may be useful for implementing external fast serialization routines for types of data not covered by the <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a> interface.</p></div><hr><h3 id=CodedOutputStream.GetDirectBufferForNBytesAndAdvance.details><code>uint8 * CodedOutputStream::GetDirectBufferForNBytesAndAdvance(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size)</code></h3><div style=margin-left:16px><p>If there are at least "size" bytes available in the current buffer, returns a pointer directly into the buffer and advances over these bytes.</p><p>The caller may then write directly into this buffer (e.g. using the *ToArray static methods) rather than go through <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a>. If there are not enough bytes available, returns NULL. The return pointer is invalidated as soon as any other non-const method of <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a> is called.</p></div><hr><h3 id=CodedOutputStream.WriteVarint32.details><code>void CodedOutputStream::WriteVarint32(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint32 value)</code></h3><div style=margin-left:16px><p>Write an unsigned integer with Varint encoding.</p><p>Writing a 32-bit value is equivalent to casting it to uint64 and writing it as a 64-bit value, but may be more efficient.</p></div><hr><h3 id=CodedOutputStream.WriteTag.details><code>void CodedOutputStream::WriteTag(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint32 value)</code></h3><div style=margin-left:16px><p>This is identical to <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteVarint32>WriteVarint32()</a>, but optimized for writing tags.</p><p>In particular, if the input is a compile-time constant, this method compiles down to a couple instructions. Always inline because otherwise the aforementioned optimization can't work, but GCC by default doesn't want to inline this.</p></div><hr><h3 id=CodedOutputStream.EnableAliasing.details><code>void CodedOutputStream::EnableAliasing(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool enabled)</code></h3><div style=margin-left:16px><p>Instructs the <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a> to allow the underlying <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> to hold pointers to the original structure instead of copying, if it supports it (i.e.</p><p>output->AllowsAliasing() is true). If the underlying stream does not support aliasing, then enabling it has no affect. For now, this only affects the behavior of <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteRawMaybeAliased>WriteRawMaybeAliased()</a>.</p><p>NOTE: It is caller's responsibility to ensure that the chunk of memory remains live until all of the data has been consumed from the stream.</p></div><hr><h3 id=CodedOutputStream.SetSerializationDeterministic.details><code>void CodedOutputStream::SetSerializationDeterministic(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool value)</code></h3><div style=margin-left:16px><p>Indicate to the serializer whether the user wants derministic serialization.</p><p>The default when this is not called comes from the global default, controlled by SetDefaultSerializationDeterministic.</p><p>What deterministic serialization means is entirely up to the driver of the serialization process (i.e. the caller of methods like WriteVarint32). In the case of serializing a proto buffer message using one of the methods of <a href=google.protobuf.message_lite#MessageLite>MessageLite</a>, this means that for a given binary equal messages will always be serialized to the same bytes. This implies:</p><pre>Repeated serialization of a message will return the same bytes.
<p>Different processes running the same binary (including on different
machines) will serialize equal messages to the same bytes.</pre></p><p>Note that this is <i>not</i> canonical across languages. It is also unstable across different builds with intervening message definition changes, due to unknown fields. Users who need canonical serialization (e.g. persistent storage in a canonical form, fingerprinting) should define their own canonicalization specification and implement the serializer using reflection APIs rather than relying on this API.</p></div><hr><h3 id=CodedOutputStream.WriteRawToArray.details><code>static uint8 * CodedOutputStream::WriteRawToArray(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void * buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8 * target)</code></h3><div style=margin-left:16px><p>Like <a href=google.protobuf.io.coded_stream#CodedOutputStream.WriteRaw>WriteRaw()</a> but writing directly to the target array.</p><p>This is <i>not</i> inlined, as the compiler often optimizes memcpy into inline copy loops. Since this gets called by every field with string or bytes type, inlining may lead to a significant amount of code bloat, with only a minor performance gain.</p></div><h2 id=CodedOutputStream.StaticVarintSize32>template struct CodedOutputStream::StaticVarintSize32</h2><p><code>#include &lt;<a href=#>google/protobuf/io/coded_stream.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a><br><br>template &lt;typename Value></code></p><p>Compile-time equivalent of <a href=google.protobuf.io.coded_stream#CodedOutputStream.VarintSize32>VarintSize32()</a>.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>const size_t</code></td><td style=border-left-width:0 id=CodedOutputStream.StaticVarintSize32.value><div style=padding-left:16px;text-indent:-16px><code><b>value</b> = = (Value &lt; (1 &lt;&lt; 7)) ? 1
: (Value &lt; (1 &lt;&lt; 14)) ? 2
: (Value &lt; (1 &lt;&lt; 21)) ? 3
: (Value &lt; (1 &lt;&lt; 28)) ? 4
: 5</code></div></td></tr></table></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-df8959eebc09aa3b372b8cdfe56897eb>1.4.25 -</h1><html devsite><head><title>gzip_stream.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>gzip_stream.h</h1><p><code>#include &lt;google/protobuf/io/gzip_stream.h><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>This file contains the definition for classes <a href=google.protobuf.io.gzip_stream#GzipInputStream>GzipInputStream</a> and <a href=google.protobuf.io.gzip_stream#GzipOutputStream>GzipOutputStream</a>.</p><p><a href=google.protobuf.io.gzip_stream#GzipInputStream>GzipInputStream</a> decompresses data from an underlying <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> and provides the decompressed data as a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a>.</p><p><a href=google.protobuf.io.gzip_stream#GzipOutputStream>GzipOutputStream</a> is an <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> that compresses data to an underlying <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a>.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#GzipInputStream>GzipInputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> that reads compressed data through zlib.</div></td></tr><tr><td><div><code><a href=#GzipOutputStream>GzipOutputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr><tr><td><div><code><a href=#GzipOutputStream.Options>GzipOutputStream::Options</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr></table><h2 id=GzipInputStream>class GzipInputStream: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/gzip_stream.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> that reads compressed data through zlib.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=GzipInputStream.Format><div style=padding-left:16px;text-indent:-16px><code><b>Format</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Format key for constructor. <a href=#GzipInputStream.Format.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=GzipInputStream.GzipInputStream><div style=padding-left:16px;text-indent:-16px><code><b>GzipInputStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> * sub_stream, <a href=google.protobuf.io.gzip_stream#GzipInputStream.Format>Format</a> format = <a href=google.protobuf.io.gzip_stream#GzipInputStream.Format>AUTO</a>, int buffer_size = -1)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>buffer_size and format may be -1 for default of 64kB and GZIP format</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=GzipInputStream.~GzipInputStream><div style=padding-left:16px;text-indent:-16px><code><b>~GzipInputStream</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const char *</code></td><td style=border-left-width:0 id=GzipInputStream.ZlibErrorMessage><div style=padding-left:16px;text-indent:-16px><code><b>ZlibErrorMessage</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Return last error message or NULL if no error.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=GzipInputStream.ZlibErrorCode><div style=padding-left:16px;text-indent:-16px><code><b>ZlibErrorCode</b>() const</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=GzipInputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(const void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a chunk of data from the stream. <a href=#GzipInputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=GzipInputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.gzip_stream#GzipInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.gzip_stream#GzipInputStream.Next>Next()</a>. <a href=#GzipInputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=GzipInputStream.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips a number of bytes. <a href=#GzipInputStream.Skip.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64</code></td><td style=border-left-width:0 id=GzipInputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes read since this object was created.</div></td></tr></table><hr><h3 id=GzipInputStream.Format.details><code>enum GzipInputStream::Format {<br>&nbsp;&nbsp;AUTO = = 0,<br>&nbsp;&nbsp;GZIP = = 1,<br>&nbsp;&nbsp;ZLIB = = 2<br>}</code></h3><div style=margin-left:16px><p>Format key for constructor.</p><table><tr><td>AUTO</td><td>zlib will autodetect gzip header or deflate stream</td></tr><tr><td>GZIP</td><td>GZIP streams have some extra header data for file attributes.</td></tr><tr><td>ZLIB</td><td>Simpler zlib stream format.</td></tr></table></div><hr><h3 id=GzipInputStream.Next.details><code>virtual bool GzipInputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a chunk of data from the stream.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, there is no more data to return or an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes read and "data" points to a pointer to a buffer containing these bytes.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=google.protobuf.io.gzip_stream#GzipInputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=GzipInputStream.BackUp.details><code>virtual void GzipInputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.gzip_stream#GzipInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.gzip_stream#GzipInputStream.Next>Next()</a>.</p><p>This is useful when writing procedures that are only supposed to read up to a certain point in the input, then return. If <a href=google.protobuf.io.gzip_stream#GzipInputStream.Next>Next()</a> returns a buffer that goes beyond what you wanted to read, you can use <a href=google.protobuf.io.gzip_stream#GzipInputStream.BackUp>BackUp()</a> to return to the point where you intended to finish.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=google.protobuf.io.gzip_stream#GzipInputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=google.protobuf.io.gzip_stream#GzipInputStream.Next>Next()</a>.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=google.protobuf.io.gzip_stream#GzipInputStream.Next>Next()</a> will be pushed back into the stream. Subsequent calls to <a href=google.protobuf.io.gzip_stream#GzipInputStream.Next>Next()</a> will return the same data again before producing new data.</li></ul></div><hr><h3 id=GzipInputStream.Skip.details><code>virtual bool GzipInputStream::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Skips a number of bytes.</p><p>Returns false if the end of the stream is reached or some input error occurred. In the end-of-stream case, the stream is advanced to the end of the stream (so <a href=google.protobuf.io.gzip_stream#GzipInputStream.ByteCount>ByteCount()</a> will return the total size of the stream).</p></div><h2 id=GzipOutputStream>class GzipOutputStream: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/gzip_stream.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=GzipOutputStream.Format><div style=padding-left:16px;text-indent:-16px><code><b>Format</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Format key for constructor. <a href=#GzipOutputStream.Format.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=GzipOutputStream.GzipOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>GzipOutputStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> * sub_stream)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create a <a href=google.protobuf.io.gzip_stream#GzipOutputStream>GzipOutputStream</a> with default options.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=GzipOutputStream.GzipOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>GzipOutputStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> * sub_stream, const <a href=google.protobuf.io.gzip_stream#GzipOutputStream.Options>Options</a> & options)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create a <a href=google.protobuf.io.gzip_stream#GzipOutputStream>GzipOutputStream</a> with the given options.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=GzipOutputStream.~GzipOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>~GzipOutputStream</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const char *</code></td><td style=border-left-width:0 id=GzipOutputStream.ZlibErrorMessage><div style=padding-left:16px;text-indent:-16px><code><b>ZlibErrorMessage</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Return last error message or NULL if no error.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=GzipOutputStream.ZlibErrorCode><div style=padding-left:16px;text-indent:-16px><code><b>ZlibErrorCode</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=GzipOutputStream.Flush><div style=padding-left:16px;text-indent:-16px><code><b>Flush</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Flushes data written so far to zipped data in the underlying stream. <a href=#GzipOutputStream.Flush.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=GzipOutputStream.Close><div style=padding-left:16px;text-indent:-16px><code><b>Close</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Writes out all data and closes the gzip stream. <a href=#GzipOutputStream.Close.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=GzipOutputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a buffer into which data can be written. <a href=#GzipOutputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=GzipOutputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the end of the last buffer returned by <a href=google.protobuf.io.gzip_stream#GzipOutputStream.Next>Next()</a> is not actually written. <a href=#GzipOutputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64</code></td><td style=border-left-width:0 id=GzipOutputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes written since this object was created.</div></td></tr></table><hr><h3 id=GzipOutputStream.Format.details><code>enum GzipOutputStream::Format {<br>&nbsp;&nbsp;GZIP = = 1,<br>&nbsp;&nbsp;ZLIB = = 2<br>}</code></h3><div style=margin-left:16px><p>Format key for constructor.</p><table><tr><td>GZIP</td><td>GZIP streams have some extra header data for file attributes.</td></tr><tr><td>ZLIB</td><td>Simpler zlib stream format.</td></tr></table></div><hr><h3 id=GzipOutputStream.Flush.details><code>bool GzipOutputStream::Flush()</code></h3><div style=margin-left:16px><p>Flushes data written so far to zipped data in the underlying stream.</p><p>It is the caller's responsibility to flush the underlying stream if necessary. Compression may be less efficient stopping and starting around flushes. Returns true if no error.</p><p>Please ensure that block size is > 6. Here is an excerpt from the zlib doc that explains why:</p><p>In the case of a Z_FULL_FLUSH or Z_SYNC_FLUSH, make sure that avail_out is greater than six to avoid repeated flush markers due to avail_out == 0 on return.</p></div><hr><h3 id=GzipOutputStream.Close.details><code>bool GzipOutputStream::Close()</code></h3><div style=margin-left:16px><p>Writes out all data and closes the gzip stream.</p><p>It is the caller's responsibility to close the underlying stream if necessary. Returns true if no error.</p></div><hr><h3 id=GzipOutputStream.Next.details><code>virtual bool GzipOutputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a buffer into which data can be written.</p><p>Any data written into this buffer will eventually (maybe instantly, maybe later on) be written to the output.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes in the buffer and "data" points to the buffer.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>Any data which the caller stores in this buffer will eventually be written to the output (unless <a href=google.protobuf.io.gzip_stream#GzipOutputStream.BackUp>BackUp()</a> is called).</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=google.protobuf.io.gzip_stream#GzipOutputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=GzipOutputStream.BackUp.details><code>virtual void GzipOutputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the end of the last buffer returned by <a href=google.protobuf.io.gzip_stream#GzipOutputStream.Next>Next()</a> is not actually written.</p><p>This is needed when you finish writing all the data you want to write, but the last buffer was bigger than you needed. You don't want to write a bunch of garbage after the end of your data, so you use <a href=google.protobuf.io.gzip_stream#GzipOutputStream.BackUp>BackUp()</a> to back up.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=google.protobuf.io.gzip_stream#GzipOutputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=google.protobuf.io.gzip_stream#GzipOutputStream.Next>Next()</a>.</li><li>The caller must not have written anything to the last "count" bytes of that buffer.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=google.protobuf.io.gzip_stream#GzipOutputStream.Next>Next()</a> will be ignored.</li></ul></div><h2 id=GzipOutputStream.Options>struct GzipOutputStream::Options</h2><p><code>#include &lt;<a href=#>google/protobuf/io/gzip_stream.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.io.gzip_stream#GzipOutputStream.Format>Format</a></code></td><td style=border-left-width:0 id=GzipOutputStream.Options.format><div style=padding-left:16px;text-indent:-16px><code><b>format</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Defaults to GZIP.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=GzipOutputStream.Options.buffer_size><div style=padding-left:16px;text-indent:-16px><code><b>buffer_size</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>What size buffer to use internally. Defaults to 64kB.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=GzipOutputStream.Options.compression_level><div style=padding-left:16px;text-indent:-16px><code><b>compression_level</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A number between 0 and 9, where 0 is no compression and 9 is best compression. <a href=#GzipOutputStream.Options.compression_level.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=GzipOutputStream.Options.compression_strategy><div style=padding-left:16px;text-indent:-16px><code><b>compression_strategy</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Defaults to Z_DEFAULT_STRATEGY. <a href=#GzipOutputStream.Options.compression_strategy.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=GzipOutputStream.Options.Options><div style=padding-left:16px;text-indent:-16px><code><b>Options</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Initializes with default values.</div></td></tr></table><hr><h3 id=GzipOutputStream.Options.compression_level.details><code>intOptions::compression_level</code></h3><div style=margin-left:16px><p>A number between 0 and 9, where 0 is no compression and 9 is best compression.</p><p>Defaults to Z_DEFAULT_COMPRESSION (see zlib.h).</p></div><hr><h3 id=GzipOutputStream.Options.compression_strategy.details><code>intOptions::compression_strategy</code></h3><div style=margin-left:16px><p>Defaults to Z_DEFAULT_STRATEGY.</p><p>Can also be set to Z_FILTERED, Z_HUFFMAN_ONLY, or Z_RLE. See the documentation for deflateInit2 in zlib.h for definitions of these constants.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-1673a0a790ae38b5e01016d358094e56>1.4.26 -</h1><html devsite><head><title>printer.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>printer.h</h1><p><code>#include &lt;google/protobuf/io/printer.h><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>Utility class for writing text to a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a>.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#AnnotationCollector>AnnotationCollector</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Records annotations about a <a href=google.protobuf.io.printer#Printer>Printer</a>'s output.</div></td></tr><tr><td><div><code><a href=#AnnotationProtoCollector>AnnotationProtoCollector</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Records annotations about a <a href=google.protobuf.io.printer#Printer>Printer</a>'s output to the given protocol buffer, assuming that the buffer has an ::Annotation message exposing path, source_file, begin and end fields.</div></td></tr><tr><td><div><code><a href=#Printer>Printer</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr></table><h2 id=AnnotationCollector>class AnnotationCollector</h2><p><code>#include &lt;<a href=#>google/protobuf/io/printer.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>Records annotations about a <a href=google.protobuf.io.printer#Printer>Printer</a>'s output.</p><p>Known subclasses:</p><ul><li><code><a href=google.protobuf.io.printer#AnnotationProtoCollector>AnnotationProtoCollector< AnnotationProto ></a></code></li></ul><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=AnnotationCollector.Annotation><div style=padding-left:16px;text-indent:-16px><code>std::pair&lt; std::pair&lt; size_t, size_t >, std::string > <b>Annotation</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Annotation is a offset range and a payload pair.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=AnnotationCollector.AddAnnotation><div style=padding-left:16px;text-indent:-16px><code><b>AddAnnotation</b>(size_t begin_offset, size_t end_offset, const std::string & file_path, const std::vector&lt; int > & path) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Records that the bytes in file_path beginning with begin_offset and ending before end_offset are associated with the SourceCodeInfo-style path.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=AnnotationCollector.AddAnnotationNew><div style=padding-left:16px;text-indent:-16px><code><b>AddAnnotationNew</b>(<a href=google.protobuf.io.printer#AnnotationCollector.Annotation>Annotation</a> & )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#AnnotationCollector.AddAnnotationNew.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=AnnotationCollector.~AnnotationCollector><div style=padding-left:16px;text-indent:-16px><code><b>~AnnotationCollector</b>()</code></div></td></tr></table><hr><h3 id=AnnotationCollector.AddAnnotationNew.details><code>virtual void AnnotationCollector::AddAnnotationNew(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.printer#AnnotationCollector.Annotation>Annotation</a> & )</code></h3><div style=margin-left:16px><p></p><p>Just a vector of range, payload pairs stored in a context should suffice.</p></div><h2 id=AnnotationProtoCollector>template class AnnotationProtoCollector: public <a href=google.protobuf.io.printer#AnnotationCollector>AnnotationCollector</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/printer.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a><br><br>template &lt;typename ></code></p><p>Records annotations about a <a href=google.protobuf.io.printer#Printer>Printer</a>'s output to the given protocol buffer, assuming that the buffer has an ::Annotation message exposing path, source_file, begin and end fields.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=AnnotationProtoCollector.AnnotationProtoCollector><div style=padding-left:16px;text-indent:-16px><code><b>AnnotationProtoCollector</b>(AnnotationProto * annotation_proto)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>annotation_proto is the protocol buffer to which new Annotations should be added. <a href=#AnnotationProtoCollector.AnnotationProtoCollector.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=AnnotationProtoCollector.AddAnnotation><div style=padding-left:16px;text-indent:-16px><code><b>AddAnnotation</b>(size_t begin_offset, size_t end_offset, const std::string & file_path, const std::vector&lt; int > & path)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Override for <a href=google.protobuf.io.printer#AnnotationCollector.AddAnnotation>AnnotationCollector::AddAnnotation</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=AnnotationProtoCollector.AddAnnotationNew><div style=padding-left:16px;text-indent:-16px><code><b>AddAnnotationNew</b>(<a href=google.protobuf.io.printer#AnnotationCollector.Annotation>Annotation</a> & a)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Override for <a href=google.protobuf.io.printer#AnnotationCollector.AddAnnotation>AnnotationCollector::AddAnnotation</a>.</div></td></tr></table><hr><h3 id=AnnotationProtoCollector.AnnotationProtoCollector.details><code>explicit AnnotationProtoCollector::AnnotationProtoCollector(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AnnotationProto * annotation_proto)</code></h3><div style=margin-left:16px><p>annotation_proto is the protocol buffer to which new Annotations should be added.</p><p>It is not owned by the <a href=google.protobuf.io.printer#AnnotationProtoCollector>AnnotationProtoCollector</a>.</p></div><h2 id=Printer>class Printer</h2><p><code>#include &lt;<a href=#>google/protobuf/io/printer.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Printer.Printer><div style=padding-left:16px;text-indent:-16px><code><b>Printer</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> * output, char variable_delimiter)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create a printer that writes text to the given output stream. <a href=#Printer.Printer.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Printer.Printer><div style=padding-left:16px;text-indent:-16px><code><b>Printer</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> * output, char variable_delimiter, <a href=google.protobuf.io.printer#AnnotationCollector>AnnotationCollector</a> * annotation_collector)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create a printer that writes text to the given output stream. <a href=#Printer.Printer.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Printer.~Printer><div style=padding-left:16px;text-indent:-16px><code><b>~Printer</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=Printer.Annotate><div style=padding-left:16px;text-indent:-16px><code><b>Annotate</b>(const char * varname, const SomeDescriptor * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Link a substitution variable emitted by the last call to Print to the object described by descriptor.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=Printer.Annotate><div style=padding-left:16px;text-indent:-16px><code><b>Annotate</b>(const char * begin_varname, const char * end_varname, const SomeDescriptor * descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Link the output range defined by the substitution variables as emitted by the last call to Print to the object described by descriptor. <a href=#Printer.Annotate.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Printer.Annotate><div style=padding-left:16px;text-indent:-16px><code><b>Annotate</b>(const char * varname, const std::string & file_name)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Link a substitution variable emitted by the last call to Print to the file with path file_name.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Printer.Annotate><div style=padding-left:16px;text-indent:-16px><code><b>Annotate</b>(const char * begin_varname, const char * end_varname, const std::string & file_name)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Link the output range defined by the substitution variables as emitted by the last call to Print to the file with path file_name. <a href=#Printer.Annotate.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Printer.Print><div style=padding-left:16px;text-indent:-16px><code><b>Print</b>(const std::map&lt; std::string, std::string > & variables, const char * text)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Print some text after applying variable substitutions. <a href=#Printer.Print.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=Printer.Print><div style=padding-left:16px;text-indent:-16px><code><b>Print</b>(const char * text, const Args &... args)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like the first <a href=google.protobuf.io.printer#Printer.Print>Print()</a>, except the substitutions are given as parameters.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Printer.Indent><div style=padding-left:16px;text-indent:-16px><code><b>Indent</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Indent text by two spaces. <a href=#Printer.Indent.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Printer.Outdent><div style=padding-left:16px;text-indent:-16px><code><b>Outdent</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reduces the current indent level by two spaces, or crashes if the indent level is zero.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Printer.PrintRaw><div style=padding-left:16px;text-indent:-16px><code><b>PrintRaw</b>(const std::string & data)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write a string to the output buffer. <a href=#Printer.PrintRaw.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Printer.PrintRaw><div style=padding-left:16px;text-indent:-16px><code><b>PrintRaw</b>(const char * data)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write a zero-delimited string to output buffer. <a href=#Printer.PrintRaw.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Printer.WriteRaw><div style=padding-left:16px;text-indent:-16px><code><b>WriteRaw</b>(const char * data, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write some bytes to the output buffer. <a href=#Printer.WriteRaw.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Printer.FormatInternal><div style=padding-left:16px;text-indent:-16px><code><b>FormatInternal</b>(const std::vector&lt; std::string > & args, const std::map&lt; std::string, std::string > & vars, const char * format)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>FormatInternal is a helper function not meant to use directly, use compiler::cpp::Formatter instead. <a href=#Printer.FormatInternal.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Printer.failed><div style=padding-left:16px;text-indent:-16px><code><b>failed</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>True if any write to the underlying stream failed. <a href=#Printer.failed.details>more...</a></div></td></tr></table><hr><h3 id=Printer.Printer.details><code>Printer::Printer(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> * output,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char variable_delimiter)</code></h3><div style=margin-left:16px><p>Create a printer that writes text to the given output stream.</p><p>Use the given character as the delimiter for variables.</p></div><hr><h3 id=Printer.Printer.details><code>Printer::Printer(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> * output,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char variable_delimiter,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.printer#AnnotationCollector>AnnotationCollector</a> * annotation_collector)</code></h3><div style=margin-left:16px><p>Create a printer that writes text to the given output stream.</p><p>Use the given character as the delimiter for variables. If annotation_collector is not null, <a href=google.protobuf.io.printer#Printer>Printer</a> will provide it with annotations about code written to the stream. annotation_collector is not owned by <a href=google.protobuf.io.printer#Printer>Printer</a>.</p></div><hr><h3 id=Printer.Annotate.details><code>template void Printer::Annotate(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const char * begin_varname,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const char * end_varname,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const SomeDescriptor * descriptor)</code></h3><div style=margin-left:16px><p>Link the output range defined by the substitution variables as emitted by the last call to Print to the object described by descriptor.</p><p>The range begins at begin_varname's value and ends after the last character of the value substituted for end_varname.</p></div><hr><h3 id=Printer.Annotate.details><code>void Printer::Annotate(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const char * begin_varname,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const char * end_varname,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & file_name)</code></h3><div style=margin-left:16px><p>Link the output range defined by the substitution variables as emitted by the last call to Print to the file with path file_name.</p><p>The range begins at begin_varname's value and ends after the last character of the value substituted for end_varname.</p></div><hr><h3 id=Printer.Print.details><code>void Printer::Print(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::map&lt; std::string, std::string > & variables,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const char * text)</code></h3><div style=margin-left:16px><p>Print some text after applying variable substitutions.</p><p>If a particular variable in the text is not defined, this will crash. Variables to be substituted are identified by their names surrounded by delimiter characters (as given to the constructor). The variable bindings are defined by the given map.</p></div><hr><h3 id=Printer.Indent.details><code>void Printer::Indent()</code></h3><div style=margin-left:16px><p>Indent text by two spaces.</p><p>After calling <a href=google.protobuf.io.printer#Printer.Indent>Indent()</a>, two spaces will be inserted at the beginning of each line of text. <a href=google.protobuf.io.printer#Printer.Indent>Indent()</a> may be called multiple times to produce deeper indents.</p></div><hr><h3 id=Printer.PrintRaw.details><code>void Printer::PrintRaw(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & data)</code></h3><div style=margin-left:16px><p>Write a string to the output buffer.</p><p>This method does not look for newlines to add indentation.</p></div><hr><h3 id=Printer.PrintRaw.details><code>void Printer::PrintRaw(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const char * data)</code></h3><div style=margin-left:16px><p>Write a zero-delimited string to output buffer.</p><p>This method does not look for newlines to add indentation.</p></div><hr><h3 id=Printer.WriteRaw.details><code>void Printer::WriteRaw(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const char * data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size)</code></h3><div style=margin-left:16px><p>Write some bytes to the output buffer.</p><p>This method does not look for newlines to add indentation.</p></div><hr><h3 id=Printer.FormatInternal.details><code>void Printer::FormatInternal(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; std::string > & args,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::map&lt; std::string, std::string > & vars,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const char * format)</code></h3><div style=margin-left:16px><p>FormatInternal is a helper function not meant to use directly, use compiler::cpp::Formatter instead.</p><p>This function is meant to support formatting text using named variables (eq. "$foo$) from a lookup map (vars)
and variables directly supplied by arguments (eq "$1$" meaning first argument which is the zero index element of args).</p></div><hr><h3 id=Printer.failed.details><code>bool Printer::failed() const</code></h3><div style=margin-left:16px><p>True if any write to the underlying stream failed.</p><p>(We don't just crash in this case because this is an I/O failure, not a programming error.)</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-c4dc741c7e3dd121fd7aebe62a502e25>1.4.27 -</h1><html devsite><head><title>tokenizer.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>tokenizer.h</h1><p><code>#include &lt;google/protobuf/io/tokenizer.h><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>Class for parsing tokenized text from a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a>.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#ErrorCollector>ErrorCollector</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Abstract interface for an object which collects the errors that occur during parsing.</div></td></tr><tr><td><div><code><a href=#Tokenizer>Tokenizer</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This class converts a stream of raw text into a stream of tokens for the protocol definition parser to parse.</div></td></tr><tr><td><div><code><a href=#Tokenizer.Token>Tokenizer::Token</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Structure representing a token read from the token stream.</div></td></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=ColumnNumber><div style=padding-left:16px;text-indent:-16px><code>int <b>ColumnNumber</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>By "column number", the proto compiler refers to a count of the number of bytes before a given byte, except that a tab character advances to the next multiple of 8 bytes. <a href=#ColumnNumber.details>more...</a></div></td></tr></table><hr><h3 id=ColumnNumber.details><code>typedef io::ColumnNumber</code></h3><div style=margin-left:16px><p>By "column number", the proto compiler refers to a count of the number of bytes before a given byte, except that a tab character advances to the next multiple of 8 bytes.</p><p>Note in particular that column numbers are zero-based, while many user interfaces use one-based column numbers.</p></div><h2 id=ErrorCollector>class ErrorCollector</h2><p><code>#include &lt;<a href=#>google/protobuf/io/tokenizer.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>Abstract interface for an object which collects the errors that occur during parsing.</p><p>A typical implementation might simply print the errors to stdout.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ErrorCollector.ErrorCollector><div style=padding-left:16px;text-indent:-16px><code><b>ErrorCollector</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=ErrorCollector.~ErrorCollector><div style=padding-left:16px;text-indent:-16px><code><b>~ErrorCollector</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=ErrorCollector.AddError><div style=padding-left:16px;text-indent:-16px><code><b>AddError</b>(int line, <a href=google.protobuf.io.tokenizer#ColumnNumber>ColumnNumber</a> column, const std::string & message) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Indicates that there was an error in the input at the given line and column numbers. <a href=#ErrorCollector.AddError.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=ErrorCollector.AddWarning><div style=padding-left:16px;text-indent:-16px><code><b>AddWarning</b>(int , <a href=google.protobuf.io.tokenizer#ColumnNumber>ColumnNumber</a> , const std::string & )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Indicates that there was a warning in the input at the given line and column numbers. <a href=#ErrorCollector.AddWarning.details>more...</a></div></td></tr></table><hr><h3 id=ErrorCollector.AddError.details><code>virtual void ErrorCollector::AddError(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int line,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.tokenizer#ColumnNumber>ColumnNumber</a> column,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & message) = 0</code></h3><div style=margin-left:16px><p>Indicates that there was an error in the input at the given line and column numbers.</p><p>The numbers are zero-based, so you may want to add 1 to each before printing them.</p></div><hr><h3 id=ErrorCollector.AddWarning.details><code>virtual void ErrorCollector::AddWarning(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.tokenizer#ColumnNumber>ColumnNumber</a> ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & )</code></h3><div style=margin-left:16px><p>Indicates that there was a warning in the input at the given line and column numbers.</p><p>The numbers are zero-based, so you may want to add 1 to each before printing them.</p></div><h2 id=Tokenizer>class Tokenizer</h2><p><code>#include &lt;<a href=#>google/protobuf/io/tokenizer.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>This class converts a stream of raw text into a stream of tokens for the protocol definition parser to parse.</p><p>The tokens recognized are similar to those that make up the C language; see the TokenType enum for precise descriptions. Whitespace and comments are skipped. By default, C- and C++-style comments are recognized, but other styles can be used by calling <a href=google.protobuf.io.tokenizer#Tokenizer.set_comment_style>set_comment_style()</a>.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=Tokenizer.TokenType><div style=padding-left:16px;text-indent:-16px><code><b>TokenType</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#Tokenizer.TokenType.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Tokenizer.Tokenizer><div style=padding-left:16px;text-indent:-16px><code><b>Tokenizer</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> * input, <a href=google.protobuf.io.tokenizer#ErrorCollector>ErrorCollector</a> * error_collector)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Construct a <a href=google.protobuf.io.tokenizer#Tokenizer>Tokenizer</a> that reads and tokenizes text from the given input stream and writes errors to the given error_collector. <a href=#Tokenizer.Tokenizer.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Tokenizer.~Tokenizer><div style=padding-left:16px;text-indent:-16px><code><b>~Tokenizer</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.io.tokenizer#Tokenizer.Token>Token</a> &</code></td><td style=border-left-width:0 id=Tokenizer.current><div style=padding-left:16px;text-indent:-16px><code><b>current</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the current token. <a href=#Tokenizer.current.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.io.tokenizer#Tokenizer.Token>Token</a> &</code></td><td style=border-left-width:0 id=Tokenizer.previous><div style=padding-left:16px;text-indent:-16px><code><b>previous</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Return the previous token &ndash; i.e. <a href=#Tokenizer.previous.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Tokenizer.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Advance to the next token. <a href=#Tokenizer.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Tokenizer.NextWithComments><div style=padding-left:16px;text-indent:-16px><code><b>NextWithComments</b>(std::string * prev_trailing_comments, std::vector&lt; std::string > * detached_comments, std::string * next_leading_comments)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.io.tokenizer#Tokenizer.Next>Next()</a>, but also collects comments which appear between the previous and next tokens. <a href=#Tokenizer.NextWithComments.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Options</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=Tokenizer.CommentStyle><div style=padding-left:16px;text-indent:-16px><code><b>CommentStyle</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Valid values for <a href=google.protobuf.io.tokenizer#Tokenizer.set_comment_style>set_comment_style()</a>. <a href=#Tokenizer.CommentStyle.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Tokenizer.set_allow_f_after_float><div style=padding-left:16px;text-indent:-16px><code><b>set_allow_f_after_float</b>(bool value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Set true to allow floats to be suffixed with the letter 'f'. <a href=#Tokenizer.set_allow_f_after_float.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Tokenizer.set_comment_style><div style=padding-left:16px;text-indent:-16px><code><b>set_comment_style</b>(<a href=google.protobuf.io.tokenizer#Tokenizer.CommentStyle>CommentStyle</a> style)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sets the comment style.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Tokenizer.set_require_space_after_number><div style=padding-left:16px;text-indent:-16px><code><b>set_require_space_after_number</b>(bool require)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Whether to require whitespace between a number and a field name. <a href=#Tokenizer.set_require_space_after_number.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Tokenizer.set_allow_multiline_strings><div style=padding-left:16px;text-indent:-16px><code><b>set_allow_multiline_strings</b>(bool allow)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Whether to allow string literals to span multiple lines. <a href=#Tokenizer.set_allow_multiline_strings.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=Tokenizer.IsIdentifier><div style=padding-left:16px;text-indent:-16px><code><b>IsIdentifier</b>(const std::string & text)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>External helper: validate an identifier.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Parse helpers</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>static double</code></td><td style=border-left-width:0 id=Tokenizer.ParseFloat><div style=padding-left:16px;text-indent:-16px><code><b>ParseFloat</b>(const std::string & text)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Parses a TYPE_FLOAT token. <a href=#Tokenizer.ParseFloat.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=Tokenizer.ParseString><div style=padding-left:16px;text-indent:-16px><code><b>ParseString</b>(const std::string & text, std::string * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Parses a TYPE_STRING token. <a href=#Tokenizer.ParseString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=Tokenizer.ParseStringAppend><div style=padding-left:16px;text-indent:-16px><code><b>ParseStringAppend</b>(const std::string & text, std::string * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Identical to ParseString, but appends to output.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=Tokenizer.ParseInteger><div style=padding-left:16px;text-indent:-16px><code><b>ParseInteger</b>(const std::string & text, uint64 max_value, uint64 * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Parses a TYPE_INTEGER token. <a href=#Tokenizer.ParseInteger.details>more...</a></div></td></tr></table><hr><h3 id=Tokenizer.TokenType.details><code>enum Tokenizer::TokenType {<br>&nbsp;&nbsp;TYPE_START,<br>&nbsp;&nbsp;TYPE_END,<br>&nbsp;&nbsp;TYPE_IDENTIFIER,<br>&nbsp;&nbsp;TYPE_INTEGER,<br>&nbsp;&nbsp;TYPE_FLOAT,<br>&nbsp;&nbsp;TYPE_STRING,<br>&nbsp;&nbsp;TYPE_SYMBOL<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>TYPE_START</td><td><a href=google.protobuf.io.tokenizer#Tokenizer.Next>Next()</a> has not yet been called.</td></tr><tr><td>TYPE_END</td><td>End of input reached. "text" is empty.</td></tr><tr><td>TYPE_IDENTIFIER</td><td><p>A sequence of letters, digits, and underscores, not starting with a digit.</p><p>It is an error for a number to be followed by an identifier with no space in between.</p></td></tr><tr><td>TYPE_INTEGER</td><td><p>A sequence of digits representing an integer.</p><p>Normally the digits are decimal, but a prefix of "0x" indicates a hex number and a leading zero indicates octal, just like with C numeric literals. A leading negative sign is NOT included in the token; it's up to the parser to interpret the unary minus operator on its own.</p></td></tr><tr><td>TYPE_FLOAT</td><td><p>A floating point literal, with a fractional part and/or an exponent.</p><p>Always in decimal. Again, never negative.</p></td></tr><tr><td>TYPE_STRING</td><td><p>A quoted sequence of escaped characters.</p><p>Either single or double quotes can be used, but they must match. A string literal cannot cross a line break.</p></td></tr><tr><td>TYPE_SYMBOL</td><td><p>Any other printable character, like '!' or '+'.</p><p>Symbols are always a single character, so "!+$%" is four tokens.</p></td></tr></table></div><hr><h3 id=Tokenizer.Tokenizer.details><code>Tokenizer::Tokenizer(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> * input,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.tokenizer#ErrorCollector>ErrorCollector</a> * error_collector)</code></h3><div style=margin-left:16px><p>Construct a <a href=google.protobuf.io.tokenizer#Tokenizer>Tokenizer</a> that reads and tokenizes text from the given input stream and writes errors to the given error_collector.</p><p>The caller keeps ownership of input and error_collector.</p></div><hr><h3 id=Tokenizer.current.details><code>const <a href=google.protobuf.io.tokenizer#Tokenizer.Token>Token</a> & Tokenizer::current()</code></h3><div style=margin-left:16px><p>Get the current token.</p><p>This is updated when <a href=google.protobuf.io.tokenizer#Tokenizer.Next>Next()</a> is called. Before the first call to <a href=google.protobuf.io.tokenizer#Tokenizer.Next>Next()</a>, <a href=google.protobuf.io.tokenizer#Tokenizer.current>current()</a> has type TYPE_START and no contents.</p></div><hr><h3 id=Tokenizer.previous.details><code>const <a href=google.protobuf.io.tokenizer#Tokenizer.Token>Token</a> & Tokenizer::previous()</code></h3><div style=margin-left:16px><p>Return the previous token &ndash; i.e.</p><p>what <a href=google.protobuf.io.tokenizer#Tokenizer.current>current()</a> returned before the previous call to <a href=google.protobuf.io.tokenizer#Tokenizer.Next>Next()</a>.</p></div><hr><h3 id=Tokenizer.Next.details><code>bool Tokenizer::Next()</code></h3><div style=margin-left:16px><p>Advance to the next token.</p><p>Returns false if the end of the input is reached.</p></div><hr><h3 id=Tokenizer.NextWithComments.details><code>bool Tokenizer::NextWithComments(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * prev_trailing_comments,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; std::string > * detached_comments,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * next_leading_comments)</code></h3><div style=margin-left:16px><p>Like <a href=google.protobuf.io.tokenizer#Tokenizer.Next>Next()</a>, but also collects comments which appear between the previous and next tokens.</p><p>Comments which appear to be attached to the previous token are stored in *prev_tailing_comments. Comments which appear to be attached to the next token are stored in *next_leading_comments. Comments appearing in between which do not appear to be attached to either will be added to detached_comments. Any of these parameters can be NULL to simply discard the comments.</p><p>A series of line comments appearing on consecutive lines, with no other tokens appearing on those lines, will be treated as a single comment.</p><p>Only the comment content is returned; comment markers (e.g. //) are stripped out. For block comments, leading whitespace and an asterisk will be stripped from the beginning of each line other than the first. Newlines are included in the output.</p><p>Examples:</p><pre>optional int32 foo = 1;  // Comment attached to foo.
// Comment attached to bar.
optional int32 bar = 2;
<p>optional string baz = 3;
// Comment attached to baz.
// Another line attached to baz.</p>
<p>// Comment attached to qux.
//
// Another line attached to qux.
optional double qux = 4;</p>
<p>// Detached comment.  This is not attached to qux or corge
// because there are blank lines separating it from both.</p>
<p>optional string corge = 5;
/* Block comment attached</p>
<ul>
<li>to corge.  Leading asterisks</li>
<li>will be removed. * /
/* Block comment attached to</li>
<li>grault. * /
optional int32 grault = 6;
<ul>
<li></pre></li></ul></li></ul></div><hr><h3 id=Tokenizer.CommentStyle.details><code>enum Tokenizer::CommentStyle {<br>&nbsp;&nbsp;CPP_COMMENT_STYLE,<br>&nbsp;&nbsp;SH_COMMENT_STYLE<br>}</code></h3><div style=margin-left:16px><p>Valid values for <a href=google.protobuf.io.tokenizer#Tokenizer.set_comment_style>set_comment_style()</a>.</p><table><tr><td>CPP_COMMENT_STYLE</td><td>Line comments begin with "//", block comments are delimited by "/*" and "* /".</td></tr><tr><td>SH_COMMENT_STYLE</td><td>Line comments begin with "#". No way to write block comments.</td></tr></table></div><hr><h3 id=Tokenizer.set_allow_f_after_float.details><code>void Tokenizer::set_allow_f_after_float(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool value)</code></h3><div style=margin-left:16px><p>Set true to allow floats to be suffixed with the letter 'f'.</p><p>Tokens which would otherwise be integers but which have the 'f' suffix will be forced to be interpreted as floats. For all other purposes, the 'f' is ignored.</p></div><hr><h3 id=Tokenizer.set_require_space_after_number.details><code>void Tokenizer::set_require_space_after_number(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool require)</code></h3><div style=margin-left:16px><p>Whether to require whitespace between a number and a field name.</p><p>Default is true. Do not use this; for Google-internal cleanup only.</p></div><hr><h3 id=Tokenizer.set_allow_multiline_strings.details><code>void Tokenizer::set_allow_multiline_strings(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool allow)</code></h3><div style=margin-left:16px><p>Whether to allow string literals to span multiple lines.</p><p>Default is false. Do not use this; for Google-internal cleanup only.</p></div><hr><h3 id=Tokenizer.ParseFloat.details><code>static double Tokenizer::ParseFloat(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & text)</code></h3><div style=margin-left:16px><p>Parses a TYPE_FLOAT token.</p><p>This never fails, so long as the text actually comes from a TYPE_FLOAT token parsed by <a href=google.protobuf.io.tokenizer#Tokenizer>Tokenizer</a>. If it doesn't, the result is undefined (possibly an assert failure).</p></div><hr><h3 id=Tokenizer.ParseString.details><code>static void Tokenizer::ParseString(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & text,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * output)</code></h3><div style=margin-left:16px><p>Parses a TYPE_STRING token.</p><p>This never fails, so long as the text actually comes from a TYPE_STRING token parsed by <a href=google.protobuf.io.tokenizer#Tokenizer>Tokenizer</a>. If it doesn't, the result is undefined (possibly an assert failure).</p></div><hr><h3 id=Tokenizer.ParseInteger.details><code>static bool Tokenizer::ParseInteger(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & text,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint64 max_value,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint64 * output)</code></h3><div style=margin-left:16px><p>Parses a TYPE_INTEGER token.</p><p>Returns false if the result would be greater than max_value. Otherwise, returns true and sets *output to the result. If the text is not from a <a href=google.protobuf.io.tokenizer#Tokenizer.Token>Token</a> of type TYPE_INTEGER originally parsed by a <a href=google.protobuf.io.tokenizer#Tokenizer>Tokenizer</a>, the result is undefined (possibly an assert failure).</p></div><h2 id=Tokenizer.Token>struct Tokenizer::Token</h2><p><code>#include &lt;<a href=#>google/protobuf/io/tokenizer.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>Structure representing a token read from the token stream.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.io.tokenizer#Tokenizer.TokenType>TokenType</a></code></td><td style=border-left-width:0 id=Tokenizer.Token.type><div style=padding-left:16px;text-indent:-16px><code><b>type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=Tokenizer.Token.text><div style=padding-left:16px;text-indent:-16px><code><b>text</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The exact text of the token as it appeared in the input. <a href=#Tokenizer.Token.text.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Tokenizer.Token.line><div style=padding-left:16px;text-indent:-16px><code><b>line</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>"line" and "column" specify the position of the first character of the token within the input stream. <a href=#Tokenizer.Token.line.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.io.tokenizer#ColumnNumber>ColumnNumber</a></code></td><td style=border-left-width:0 id=Tokenizer.Token.column><div style=padding-left:16px;text-indent:-16px><code><b>column</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.io.tokenizer#ColumnNumber>ColumnNumber</a></code></td><td style=border-left-width:0 id=Tokenizer.Token.end_column><div style=padding-left:16px;text-indent:-16px><code><b>end_column</b></code></div></td></tr></table><hr><h3 id=Tokenizer.Token.text.details><code>std::string Token::text</code></h3><div style=margin-left:16px><p>The exact text of the token as it appeared in the input.</p><p>e.g. tokens of TYPE_STRING will still be escaped and in quotes.</p></div><hr><h3 id=Tokenizer.Token.line.details><code>int Token::line</code></h3><div style=margin-left:16px><p>"line" and "column" specify the position of the first character of the token within the input stream.</p><p>They are zero-based.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-07478474a8bdea3d717f36eb985397de>1.4.28 -</h1><html devsite><head><title>zero_copy_stream.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>zero_copy_stream.h</h1><p><code>#include &lt;google/protobuf/io/zero_copy_stream.h><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>This file contains the <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> and <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> interfaces, which represent abstract I/O streams to and from which protocol buffers can be read and written.</p><p>For a few simple implementations of these interfaces, see <a href=google.protobuf.io.zero_copy_stream_impl>zero_copy_stream_impl.h</a>.</p><p>These interfaces are different from classic I/O streams in that they try to minimize the amount of data copying that needs to be done. To accomplish this, responsibility for allocating buffers is moved to the stream object, rather than being the responsibility of the caller. So, the stream can return a buffer which actually points directly into the final data structure where the bytes are to be stored, and the caller can interact directly with that buffer, eliminating an intermediate copy operation.</p><p>As an example, consider the common case in which you are reading bytes from an array that is already in memory (or perhaps an mmap()ed file). With classic I/O streams, you would do something like:</p><pre>char buffer[[]BUFFER_SIZE];
input-&gt;Read(buffer, BUFFER_SIZE);
DoSomething(buffer, BUFFER_SIZE);</pre><p>Then, the stream basically just calls memcpy() to copy the data from the array into your buffer. With a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a>, you would do this instead:</p><pre>const void* buffer;
int size;
input-&gt;Next(&amp;buffer, &amp;size);
DoSomething(buffer, size);</pre><p>Here, no copy is performed. The input stream returns a pointer directly into the backing array, and the caller ends up reading directly from it.</p><p>If you want to be able to read the old-fashion way, you can create a <a href=google.protobuf.io.coded_stream#CodedInputStream>CodedInputStream</a> or <a href=google.protobuf.io.coded_stream#CodedOutputStream>CodedOutputStream</a> wrapping these objects and use their ReadRaw()/WriteRaw() methods. These will, of course, add a copy step, but Coded*Stream will handle buffering so at least it will be reasonably efficient.</p><p><a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> example:</p><pre>// Read in a file and print its contents to stdout.
int fd = open("myfile", O_RDONLY);
ZeroCopyInputStream* input = new FileInputStream(fd);
<p>const void* buffer;
int size;
while (input-&gt;Next(&amp;buffer, &amp;size)) {
cout.write(buffer, size);
}</p>
<p>delete input;
close(fd);</pre></p><p><a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> example:</p><pre>// Copy the contents of "infile" to "outfile", using plain read() for
// "infile" but a ZeroCopyOutputStream for "outfile".
int infd = open("infile", O_RDONLY);
int outfd = open("outfile", O_WRONLY);
ZeroCopyOutputStream* output = new FileOutputStream(outfd);
<p>void* buffer;
int size;
while (output-&gt;Next(&amp;buffer, &amp;size)) {
int bytes = read(infd, buffer, size);
if (bytes &lt; size) {
// Reached EOF.
output-&gt;BackUp(size - bytes);
break;
}
}</p>
<p>delete output;
close(infd);
close(outfd);</pre></p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#ZeroCopyInputStream>ZeroCopyInputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Abstract interface similar to an input stream but designed to minimize copying.</div></td></tr><tr><td><div><code><a href=#ZeroCopyOutputStream>ZeroCopyOutputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Abstract interface similar to an output stream but designed to minimize copying.</div></td></tr></table><h2 id=ZeroCopyInputStream>class ZeroCopyInputStream</h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>Abstract interface similar to an input stream but designed to minimize copying.</p><p>Known subclasses:</p><ul><li><code><a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream>ArrayInputStream</a></code></li><li><code><a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream>ConcatenatingInputStream</a></code></li><li><code><a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor>CopyingInputStreamAdaptor</a></code></li><li><code><a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream>FileInputStream</a></code></li><li><code><a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream>IstreamInputStream</a></code></li><li><code><a href=google.protobuf.io.zero_copy_stream_impl_lite#LimitingInputStream>LimitingInputStream</a></code></li></ul><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ZeroCopyInputStream.ZeroCopyInputStream><div style=padding-left:16px;text-indent:-16px><code><b>ZeroCopyInputStream</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=ZeroCopyInputStream.~ZeroCopyInputStream><div style=padding-left:16px;text-indent:-16px><code><b>~ZeroCopyInputStream</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ZeroCopyInputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(const void ** data, int * size) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a chunk of data from the stream. <a href=#ZeroCopyInputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=ZeroCopyInputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream.Next>Next()</a>. <a href=#ZeroCopyInputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ZeroCopyInputStream.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips a number of bytes. <a href=#ZeroCopyInputStream.Skip.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=ZeroCopyInputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes read since this object was created.</div></td></tr></table><hr><h3 id=ZeroCopyInputStream.Next.details><code>virtual bool ZeroCopyInputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size) = 0</code></h3><div style=margin-left:16px><p>Obtains a chunk of data from the stream.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, there is no more data to return or an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes read and "data" points to a pointer to a buffer containing these bytes.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=ZeroCopyInputStream.BackUp.details><code>virtual void ZeroCopyInputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count) = 0</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream.Next>Next()</a>.</p><p>This is useful when writing procedures that are only supposed to read up to a certain point in the input, then return. If <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream.Next>Next()</a> returns a buffer that goes beyond what you wanted to read, you can use <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream.BackUp>BackUp()</a> to return to the point where you intended to finish.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream.Next>Next()</a>.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream.Next>Next()</a> will be pushed back into the stream. Subsequent calls to <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream.Next>Next()</a> will return the same data again before producing new data.</li></ul></div><hr><h3 id=ZeroCopyInputStream.Skip.details><code>virtual bool ZeroCopyInputStream::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count) = 0</code></h3><div style=margin-left:16px><p>Skips a number of bytes.</p><p>Returns false if the end of the stream is reached or some input error occurred. In the end-of-stream case, the stream is advanced to the end of the stream (so <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream.ByteCount>ByteCount()</a> will return the total size of the stream).</p></div><h2 id=ZeroCopyOutputStream>class ZeroCopyOutputStream</h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>Abstract interface similar to an output stream but designed to minimize copying.</p><p>Known subclasses:</p><ul><li><code><a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayOutputStream>ArrayOutputStream</a></code></li><li><code><a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor>CopyingOutputStreamAdaptor</a></code></li><li><code><a href=google.protobuf.io.zero_copy_stream_impl#OstreamOutputStream>OstreamOutputStream</a></code></li><li><code><a href=google.protobuf.io.zero_copy_stream_impl_lite#StringOutputStream>StringOutputStream</a></code></li></ul><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ZeroCopyOutputStream.ZeroCopyOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>ZeroCopyOutputStream</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=ZeroCopyOutputStream.~ZeroCopyOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>~ZeroCopyOutputStream</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ZeroCopyOutputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(void ** data, int * size) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a buffer into which data can be written. <a href=#ZeroCopyOutputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=ZeroCopyOutputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the end of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream.Next>Next()</a> is not actually written. <a href=#ZeroCopyOutputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=ZeroCopyOutputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes written since this object was created.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ZeroCopyOutputStream.WriteAliasedRaw><div style=padding-left:16px;text-indent:-16px><code><b>WriteAliasedRaw</b>(const void * data, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write a given chunk of data to the output. <a href=#ZeroCopyOutputStream.WriteAliasedRaw.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ZeroCopyOutputStream.AllowsAliasing><div style=padding-left:16px;text-indent:-16px><code><b>AllowsAliasing</b>() const</code></div></td></tr></table><hr><h3 id=ZeroCopyOutputStream.Next.details><code>virtual bool ZeroCopyOutputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size) = 0</code></h3><div style=margin-left:16px><p>Obtains a buffer into which data can be written.</p><p>Any data written into this buffer will eventually (maybe instantly, maybe later on) be written to the output.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes in the buffer and "data" points to the buffer.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>Any data which the caller stores in this buffer will eventually be written to the output (unless <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream.BackUp>BackUp()</a> is called).</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=ZeroCopyOutputStream.BackUp.details><code>virtual void ZeroCopyOutputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count) = 0</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the end of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream.Next>Next()</a> is not actually written.</p><p>This is needed when you finish writing all the data you want to write, but the last buffer was bigger than you needed. You don't want to write a bunch of garbage after the end of your data, so you use <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream.BackUp>BackUp()</a> to back up.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream.Next>Next()</a>.</li><li>The caller must not have written anything to the last "count" bytes of that buffer.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream.Next>Next()</a> will be ignored.</li></ul></div><hr><h3 id=ZeroCopyOutputStream.WriteAliasedRaw.details><code>virtual bool ZeroCopyOutputStream::WriteAliasedRaw(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void * data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size)</code></h3><div style=margin-left:16px><p>Write a given chunk of data to the output.</p><p>Some output streams may implement this in a way that avoids copying. Check AllowsAliasing() before calling <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream.WriteAliasedRaw>WriteAliasedRaw()</a>. It will GOOGLE_CHECK fail if <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream.WriteAliasedRaw>WriteAliasedRaw()</a> is called on a stream that does not allow aliasing.</p><p>NOTE: It is caller's responsibility to ensure that the chunk of memory remains live until all of the data has been consumed from the stream.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-fee356b461213417cf8c308300925222>1.4.29 -</h1><html devsite><head><title>zero_copy_stream_impl.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>zero_copy_stream_impl.h</h1><p><code>#include &lt;google/protobuf/io/zero_copy_stream_impl.h><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>This file contains common implementations of the interfaces defined in <a href=google.protobuf.io.zero_copy_stream>zero_copy_stream.h</a> which are only included in the full (non-lite) protobuf library.</p><p>These implementations include Unix file descriptors and C++ iostreams. See also: <a href=google.protobuf.io.zero_copy_stream_impl_lite>zero_copy_stream_impl_lite.h</a></p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#FileInputStream>FileInputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> which reads from a file descriptor.</div></td></tr><tr><td><div><code><a href=#FileOutputStream>FileOutputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> which writes to a file descriptor.</div></td></tr><tr><td><div><code><a href=#IstreamInputStream>IstreamInputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> which reads from a C++ istream.</div></td></tr><tr><td><div><code><a href=#OstreamOutputStream>OstreamOutputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> which writes to a C++ ostream.</div></td></tr><tr><td><div><code><a href=#ConcatenatingInputStream>ConcatenatingInputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> which reads from several other streams in sequence.</div></td></tr></table><h2 id=FileInputStream>class FileInputStream: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> which reads from a file descriptor.</p><p><a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream>FileInputStream</a> is preferred over using an ifstream with <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream>IstreamInputStream</a>. The latter will introduce an extra layer of buffering, harming performance. Also, it's conceivable that <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream>FileInputStream</a> could someday be enhanced to use zero-copy file descriptors on OSs which support them.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=FileInputStream.FileInputStream><div style=padding-left:16px;text-indent:-16px><code><b>FileInputStream</b>(int file_descriptor, int block_size = -1)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates a stream that reads from the given Unix file descriptor. <a href=#FileInputStream.FileInputStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FileInputStream.Close><div style=padding-left:16px;text-indent:-16px><code><b>Close</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Flushes any buffers and closes the underlying file. <a href=#FileInputStream.Close.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=FileInputStream.SetCloseOnDelete><div style=padding-left:16px;text-indent:-16px><code><b>SetCloseOnDelete</b>(bool value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>By default, the file descriptor is not closed when the stream is destroyed. <a href=#FileInputStream.SetCloseOnDelete.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=FileInputStream.GetErrno><div style=padding-left:16px;text-indent:-16px><code><b>GetErrno</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If an I/O error has occurred on this file descriptor, this is the errno from that error. <a href=#FileInputStream.GetErrno.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=FileInputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(const void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a chunk of data from the stream. <a href=#FileInputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=FileInputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream.Next>Next()</a>. <a href=#FileInputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=FileInputStream.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips a number of bytes. <a href=#FileInputStream.Skip.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=FileInputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes read since this object was created.</div></td></tr></table><hr><h3 id=FileInputStream.FileInputStream.details><code>explicit FileInputStream::FileInputStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int file_descriptor,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int block_size = -1)</code></h3><div style=margin-left:16px><p>Creates a stream that reads from the given Unix file descriptor.</p><p>If a block_size is given, it specifies the number of bytes that should be read and returned with each call to <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream.Next>Next()</a>. Otherwise, a reasonable default is used.</p></div><hr><h3 id=FileInputStream.Close.details><code>bool FileInputStream::Close()</code></h3><div style=margin-left:16px><p>Flushes any buffers and closes the underlying file.</p><p>Returns false if an error occurs during the process; use <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream.GetErrno>GetErrno()</a> to examine the error. Even if an error occurs, the file descriptor is closed when this returns.</p></div><hr><h3 id=FileInputStream.SetCloseOnDelete.details><code>void FileInputStream::SetCloseOnDelete(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool value)</code></h3><div style=margin-left:16px><p>By default, the file descriptor is not closed when the stream is destroyed.</p><p>Call SetCloseOnDelete(true) to change that. WARNING: This leaves no way for the caller to detect if close() fails. If detecting close() errors is important to you, you should arrange to close the descriptor yourself.</p></div><hr><h3 id=FileInputStream.GetErrno.details><code>int FileInputStream::GetErrno() const</code></h3><div style=margin-left:16px><p>If an I/O error has occurred on this file descriptor, this is the errno from that error.</p><p>Otherwise, this is zero. Once an error occurs, the stream is broken and all subsequent operations will fail.</p></div><hr><h3 id=FileInputStream.Next.details><code>virtual bool FileInputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a chunk of data from the stream.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, there is no more data to return or an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes read and "data" points to a pointer to a buffer containing these bytes.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=FileInputStream.BackUp.details><code>virtual void FileInputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream.Next>Next()</a>.</p><p>This is useful when writing procedures that are only supposed to read up to a certain point in the input, then return. If <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream.Next>Next()</a> returns a buffer that goes beyond what you wanted to read, you can use <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream.BackUp>BackUp()</a> to return to the point where you intended to finish.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream.Next>Next()</a>.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream.Next>Next()</a> will be pushed back into the stream. Subsequent calls to <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream.Next>Next()</a> will return the same data again before producing new data.</li></ul></div><hr><h3 id=FileInputStream.Skip.details><code>virtual bool FileInputStream::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Skips a number of bytes.</p><p>Returns false if the end of the stream is reached or some input error occurred. In the end-of-stream case, the stream is advanced to the end of the stream (so <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream.ByteCount>ByteCount()</a> will return the total size of the stream).</p></div><h2 id=FileOutputStream>class FileOutputStream: public <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor>CopyingOutputStreamAdaptor</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> which writes to a file descriptor.</p><p><a href=google.protobuf.io.zero_copy_stream_impl#FileOutputStream>FileOutputStream</a> is preferred over using an ofstream with <a href=google.protobuf.io.zero_copy_stream_impl#OstreamOutputStream>OstreamOutputStream</a>. The latter will introduce an extra layer of buffering, harming performance. Also, it's conceivable that <a href=google.protobuf.io.zero_copy_stream_impl#FileOutputStream>FileOutputStream</a> could someday be enhanced to use zero-copy file descriptors on OSs which support them.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=FileOutputStream.FileOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>FileOutputStream</b>(int file_descriptor, int block_size = -1)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates a stream that writes to the given Unix file descriptor. <a href=#FileOutputStream.FileOutputStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=FileOutputStream.~FileOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>~FileOutputStream</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FileOutputStream.Close><div style=padding-left:16px;text-indent:-16px><code><b>Close</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Flushes any buffers and closes the underlying file. <a href=#FileOutputStream.Close.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=FileOutputStream.SetCloseOnDelete><div style=padding-left:16px;text-indent:-16px><code><b>SetCloseOnDelete</b>(bool value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>By default, the file descriptor is not closed when the stream is destroyed. <a href=#FileOutputStream.SetCloseOnDelete.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=FileOutputStream.GetErrno><div style=padding-left:16px;text-indent:-16px><code><b>GetErrno</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If an I/O error has occurred on this file descriptor, this is the errno from that error. <a href=#FileOutputStream.GetErrno.details>more...</a></div></td></tr></table><hr><h3 id=FileOutputStream.FileOutputStream.details><code>explicit FileOutputStream::FileOutputStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int file_descriptor,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int block_size = -1)</code></h3><div style=margin-left:16px><p>Creates a stream that writes to the given Unix file descriptor.</p><p>If a block_size is given, it specifies the size of the buffers that should be returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor.Next>Next()</a>. Otherwise, a reasonable default is used.</p></div><hr><h3 id=FileOutputStream.Close.details><code>bool FileOutputStream::Close()</code></h3><div style=margin-left:16px><p>Flushes any buffers and closes the underlying file.</p><p>Returns false if an error occurs during the process; use <a href=google.protobuf.io.zero_copy_stream_impl#FileOutputStream.GetErrno>GetErrno()</a> to examine the error. Even if an error occurs, the file descriptor is closed when this returns.</p></div><hr><h3 id=FileOutputStream.SetCloseOnDelete.details><code>void FileOutputStream::SetCloseOnDelete(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool value)</code></h3><div style=margin-left:16px><p>By default, the file descriptor is not closed when the stream is destroyed.</p><p>Call SetCloseOnDelete(true) to change that. WARNING: This leaves no way for the caller to detect if close() fails. If detecting close() errors is important to you, you should arrange to close the descriptor yourself.</p></div><hr><h3 id=FileOutputStream.GetErrno.details><code>int FileOutputStream::GetErrno() const</code></h3><div style=margin-left:16px><p>If an I/O error has occurred on this file descriptor, this is the errno from that error.</p><p>Otherwise, this is zero. Once an error occurs, the stream is broken and all subsequent operations will fail.</p></div><h2 id=IstreamInputStream>class IstreamInputStream: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> which reads from a C++ istream.</p><p>Note that for reading files (or anything represented by a file descriptor), <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream>FileInputStream</a> is more efficient.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=IstreamInputStream.IstreamInputStream><div style=padding-left:16px;text-indent:-16px><code><b>IstreamInputStream</b>(std::istream * stream, int block_size = -1)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates a stream that reads from the given C++ istream. <a href=#IstreamInputStream.IstreamInputStream.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=IstreamInputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(const void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a chunk of data from the stream. <a href=#IstreamInputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=IstreamInputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream.Next>Next()</a>. <a href=#IstreamInputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=IstreamInputStream.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips a number of bytes. <a href=#IstreamInputStream.Skip.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=IstreamInputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes read since this object was created.</div></td></tr></table><hr><h3 id=IstreamInputStream.IstreamInputStream.details><code>explicit IstreamInputStream::IstreamInputStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::istream * stream,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int block_size = -1)</code></h3><div style=margin-left:16px><p>Creates a stream that reads from the given C++ istream.</p><p>If a block_size is given, it specifies the number of bytes that should be read and returned with each call to <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream.Next>Next()</a>. Otherwise, a reasonable default is used.</p></div><hr><h3 id=IstreamInputStream.Next.details><code>virtual bool IstreamInputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a chunk of data from the stream.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, there is no more data to return or an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes read and "data" points to a pointer to a buffer containing these bytes.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=IstreamInputStream.BackUp.details><code>virtual void IstreamInputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream.Next>Next()</a>.</p><p>This is useful when writing procedures that are only supposed to read up to a certain point in the input, then return. If <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream.Next>Next()</a> returns a buffer that goes beyond what you wanted to read, you can use <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream.BackUp>BackUp()</a> to return to the point where you intended to finish.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream.Next>Next()</a>.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream.Next>Next()</a> will be pushed back into the stream. Subsequent calls to <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream.Next>Next()</a> will return the same data again before producing new data.</li></ul></div><hr><h3 id=IstreamInputStream.Skip.details><code>virtual bool IstreamInputStream::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Skips a number of bytes.</p><p>Returns false if the end of the stream is reached or some input error occurred. In the end-of-stream case, the stream is advanced to the end of the stream (so <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream.ByteCount>ByteCount()</a> will return the total size of the stream).</p></div><h2 id=OstreamOutputStream>class OstreamOutputStream: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> which writes to a C++ ostream.</p><p>Note that for writing files (or anything represented by a file descriptor), <a href=google.protobuf.io.zero_copy_stream_impl#FileOutputStream>FileOutputStream</a> is more efficient.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=OstreamOutputStream.OstreamOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>OstreamOutputStream</b>(std::ostream * stream, int block_size = -1)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates a stream that writes to the given C++ ostream. <a href=#OstreamOutputStream.OstreamOutputStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=OstreamOutputStream.~OstreamOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>~OstreamOutputStream</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=OstreamOutputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a buffer into which data can be written. <a href=#OstreamOutputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=OstreamOutputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the end of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl#OstreamOutputStream.Next>Next()</a> is not actually written. <a href=#OstreamOutputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=OstreamOutputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes written since this object was created.</div></td></tr></table><hr><h3 id=OstreamOutputStream.OstreamOutputStream.details><code>explicit OstreamOutputStream::OstreamOutputStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::ostream * stream,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int block_size = -1)</code></h3><div style=margin-left:16px><p>Creates a stream that writes to the given C++ ostream.</p><p>If a block_size is given, it specifies the size of the buffers that should be returned by <a href=google.protobuf.io.zero_copy_stream_impl#OstreamOutputStream.Next>Next()</a>. Otherwise, a reasonable default is used.</p></div><hr><h3 id=OstreamOutputStream.Next.details><code>virtual bool OstreamOutputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a buffer into which data can be written.</p><p>Any data written into this buffer will eventually (maybe instantly, maybe later on) be written to the output.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes in the buffer and "data" points to the buffer.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>Any data which the caller stores in this buffer will eventually be written to the output (unless <a href=google.protobuf.io.zero_copy_stream_impl#OstreamOutputStream.BackUp>BackUp()</a> is called).</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=google.protobuf.io.zero_copy_stream_impl#OstreamOutputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=OstreamOutputStream.BackUp.details><code>virtual void OstreamOutputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the end of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl#OstreamOutputStream.Next>Next()</a> is not actually written.</p><p>This is needed when you finish writing all the data you want to write, but the last buffer was bigger than you needed. You don't want to write a bunch of garbage after the end of your data, so you use <a href=google.protobuf.io.zero_copy_stream_impl#OstreamOutputStream.BackUp>BackUp()</a> to back up.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=google.protobuf.io.zero_copy_stream_impl#OstreamOutputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl#OstreamOutputStream.Next>Next()</a>.</li><li>The caller must not have written anything to the last "count" bytes of that buffer.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl#OstreamOutputStream.Next>Next()</a> will be ignored.</li></ul></div><h2 id=ConcatenatingInputStream>class ConcatenatingInputStream: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> which reads from several other streams in sequence.</p><p><a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream>ConcatenatingInputStream</a> is unable to distinguish between end-of-stream and read errors in the underlying streams, so it assumes any errors mean end-of-stream. So, if the underlying streams fail for any other reason, <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream>ConcatenatingInputStream</a> may do odd things. It is suggested that you do not use <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream>ConcatenatingInputStream</a> on streams that might produce read errors other than end-of-stream.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ConcatenatingInputStream.ConcatenatingInputStream><div style=padding-left:16px;text-indent:-16px><code><b>ConcatenatingInputStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> *const streams, int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>All streams passed in as well as the array itself must remain valid until the <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream>ConcatenatingInputStream</a> is destroyed.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ConcatenatingInputStream.~ConcatenatingInputStream><div style=padding-left:16px;text-indent:-16px><code><b>~ConcatenatingInputStream</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ConcatenatingInputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(const void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a chunk of data from the stream. <a href=#ConcatenatingInputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=ConcatenatingInputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream.Next>Next()</a>. <a href=#ConcatenatingInputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ConcatenatingInputStream.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips a number of bytes. <a href=#ConcatenatingInputStream.Skip.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=ConcatenatingInputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes read since this object was created.</div></td></tr></table><hr><h3 id=ConcatenatingInputStream.Next.details><code>virtual bool ConcatenatingInputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a chunk of data from the stream.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, there is no more data to return or an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes read and "data" points to a pointer to a buffer containing these bytes.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=ConcatenatingInputStream.BackUp.details><code>virtual void ConcatenatingInputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream.Next>Next()</a>.</p><p>This is useful when writing procedures that are only supposed to read up to a certain point in the input, then return. If <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream.Next>Next()</a> returns a buffer that goes beyond what you wanted to read, you can use <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream.BackUp>BackUp()</a> to return to the point where you intended to finish.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream.Next>Next()</a>.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream.Next>Next()</a> will be pushed back into the stream. Subsequent calls to <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream.Next>Next()</a> will return the same data again before producing new data.</li></ul></div><hr><h3 id=ConcatenatingInputStream.Skip.details><code>virtual bool ConcatenatingInputStream::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Skips a number of bytes.</p><p>Returns false if the end of the stream is reached or some input error occurred. In the end-of-stream case, the stream is advanced to the end of the stream (so <a href=google.protobuf.io.zero_copy_stream_impl#ConcatenatingInputStream.ByteCount>ByteCount()</a> will return the total size of the stream).</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-9bab2c05b01d0270c43ee55083b17606>1.4.30 -</h1><html devsite><head><title>zero_copy_stream_impl_lite.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>zero_copy_stream_impl_lite.h</h1><p><code>#include &lt;google/protobuf/io/zero_copy_stream_impl_lite.h><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>This file contains common implementations of the interfaces defined in <a href=google.protobuf.io.zero_copy_stream>zero_copy_stream.h</a> which are included in the "lite" protobuf library.</p><p>These implementations cover I/O on raw arrays and strings, as well as adaptors which make it easy to implement streams based on traditional streams. Of course, many users will probably want to write their own implementations of these interfaces specific to the particular I/O abstractions they prefer to use, but these should cover the most common cases.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#ArrayInputStream>ArrayInputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> backed by an in-memory array of bytes.</div></td></tr><tr><td><div><code><a href=#ArrayOutputStream>ArrayOutputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> backed by an in-memory array of bytes.</div></td></tr><tr><td><div><code><a href=#StringOutputStream>StringOutputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> which appends bytes to a string.</div></td></tr><tr><td><div><code><a href=#CopyingInputStream>CopyingInputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A generic traditional input stream interface.</div></td></tr><tr><td><div><code><a href=#CopyingInputStreamAdaptor>CopyingInputStreamAdaptor</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> which reads from a <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStream>CopyingInputStream</a>.</div></td></tr><tr><td><div><code><a href=#CopyingOutputStream>CopyingOutputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A generic traditional output stream interface.</div></td></tr><tr><td><div><code><a href=#CopyingOutputStreamAdaptor>CopyingOutputStreamAdaptor</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> which writes to a <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStream>CopyingOutputStream</a>.</div></td></tr><tr><td><div><code><a href=#LimitingInputStream>LimitingInputStream</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> which wraps some other stream and limits it to a particular byte count.</div></td></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>char *</code></td><td style=border-left-width:0 id=mutable_string_data><div style=padding-left:16px;text-indent:-16px><code><b>mutable_string_data</b>(std::string * s)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Return a pointer to mutable characters underlying the given string. <a href=#mutable_string_data.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::pair&lt; char *, bool ></code></td><td style=border-left-width:0 id=as_string_data><div style=padding-left:16px;text-indent:-16px><code><b>as_string_data</b>(std::string * s)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>as_string_data(s) is equivalent to ({ char* p = mutable_string_data(s); make_pair(p, p != NULL); }) Sometimes it's faster: in some scenarios p cannot be NULL, and then the code can avoid that check.</div></td></tr></table><hr><h3 id=mutable_string_data.details><code>char * io::mutable_string_data(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * s)</code></h3><div style=margin-left:16px><p>Return a pointer to mutable characters underlying the given string.</p><p>The return value is valid until the next time the string is resized. We trust the caller to treat the return value as an array of length s->size().</p></div><h2 id=ArrayInputStream>class ArrayInputStream: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> backed by an in-memory array of bytes.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ArrayInputStream.ArrayInputStream><div style=padding-left:16px;text-indent:-16px><code><b>ArrayInputStream</b>(const void * data, int size, int block_size = -1)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create an InputStream that returns the bytes pointed to by "data". <a href=#ArrayInputStream.ArrayInputStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ArrayInputStream.~ArrayInputStream><div style=padding-left:16px;text-indent:-16px><code><b>~ArrayInputStream</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ArrayInputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(const void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a chunk of data from the stream. <a href=#ArrayInputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=ArrayInputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.Next>Next()</a>. <a href=#ArrayInputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ArrayInputStream.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips a number of bytes. <a href=#ArrayInputStream.Skip.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=ArrayInputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes read since this object was created.</div></td></tr></table><hr><h3 id=ArrayInputStream.ArrayInputStream.details><code>ArrayInputStream::ArrayInputStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void * data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int block_size = -1)</code></h3><div style=margin-left:16px><p>Create an InputStream that returns the bytes pointed to by "data".</p><p>"data" remains the property of the caller but must remain valid until the stream is destroyed. If a block_size is given, calls to <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.Next>Next()</a> will return data blocks no larger than the given size. Otherwise, the first call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.Next>Next()</a> returns the entire array. block_size is mainly useful for testing; in production you would probably never want to set it.</p></div><hr><h3 id=ArrayInputStream.Next.details><code>virtual bool ArrayInputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a chunk of data from the stream.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, there is no more data to return or an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes read and "data" points to a pointer to a buffer containing these bytes.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=ArrayInputStream.BackUp.details><code>virtual void ArrayInputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.Next>Next()</a>.</p><p>This is useful when writing procedures that are only supposed to read up to a certain point in the input, then return. If <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.Next>Next()</a> returns a buffer that goes beyond what you wanted to read, you can use <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.BackUp>BackUp()</a> to return to the point where you intended to finish.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.Next>Next()</a>.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.Next>Next()</a> will be pushed back into the stream. Subsequent calls to <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.Next>Next()</a> will return the same data again before producing new data.</li></ul></div><hr><h3 id=ArrayInputStream.Skip.details><code>virtual bool ArrayInputStream::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Skips a number of bytes.</p><p>Returns false if the end of the stream is reached or some input error occurred. In the end-of-stream case, the stream is advanced to the end of the stream (so <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.ByteCount>ByteCount()</a> will return the total size of the stream).</p></div><h2 id=ArrayOutputStream>class ArrayOutputStream: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> backed by an in-memory array of bytes.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ArrayOutputStream.ArrayOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>ArrayOutputStream</b>(void * data, int size, int block_size = -1)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create an OutputStream that writes to the bytes pointed to by "data". <a href=#ArrayOutputStream.ArrayOutputStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ArrayOutputStream.~ArrayOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>~ArrayOutputStream</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=ArrayOutputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a buffer into which data can be written. <a href=#ArrayOutputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=ArrayOutputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the end of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayOutputStream.Next>Next()</a> is not actually written. <a href=#ArrayOutputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=ArrayOutputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes written since this object was created.</div></td></tr></table><hr><h3 id=ArrayOutputStream.ArrayOutputStream.details><code>ArrayOutputStream::ArrayOutputStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void * data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int block_size = -1)</code></h3><div style=margin-left:16px><p>Create an OutputStream that writes to the bytes pointed to by "data".</p><p>"data" remains the property of the caller but must remain valid until the stream is destroyed. If a block_size is given, calls to <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayOutputStream.Next>Next()</a> will return data blocks no larger than the given size. Otherwise, the first call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayOutputStream.Next>Next()</a> returns the entire array. block_size is mainly useful for testing; in production you would probably never want to set it.</p></div><hr><h3 id=ArrayOutputStream.Next.details><code>virtual bool ArrayOutputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a buffer into which data can be written.</p><p>Any data written into this buffer will eventually (maybe instantly, maybe later on) be written to the output.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes in the buffer and "data" points to the buffer.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>Any data which the caller stores in this buffer will eventually be written to the output (unless <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayOutputStream.BackUp>BackUp()</a> is called).</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayOutputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=ArrayOutputStream.BackUp.details><code>virtual void ArrayOutputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the end of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayOutputStream.Next>Next()</a> is not actually written.</p><p>This is needed when you finish writing all the data you want to write, but the last buffer was bigger than you needed. You don't want to write a bunch of garbage after the end of your data, so you use <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayOutputStream.BackUp>BackUp()</a> to back up.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayOutputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayOutputStream.Next>Next()</a>.</li><li>The caller must not have written anything to the last "count" bytes of that buffer.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#ArrayOutputStream.Next>Next()</a> will be ignored.</li></ul></div><h2 id=StringOutputStream>class StringOutputStream: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> which appends bytes to a string.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=StringOutputStream.StringOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>StringOutputStream</b>(std::string * target)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create a <a href=google.protobuf.io.zero_copy_stream_impl_lite#StringOutputStream>StringOutputStream</a> which appends bytes to the given string. <a href=#StringOutputStream.StringOutputStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=StringOutputStream.~StringOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>~StringOutputStream</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=StringOutputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a buffer into which data can be written. <a href=#StringOutputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=StringOutputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the end of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#StringOutputStream.Next>Next()</a> is not actually written. <a href=#StringOutputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=StringOutputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes written since this object was created.</div></td></tr></table><hr><h3 id=StringOutputStream.StringOutputStream.details><code>explicit StringOutputStream::StringOutputStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * target)</code></h3><div style=margin-left:16px><p>Create a <a href=google.protobuf.io.zero_copy_stream_impl_lite#StringOutputStream>StringOutputStream</a> which appends bytes to the given string.</p><p>The string remains property of the caller, but it is mutated in arbitrary ways and MUST NOT be accessed in any way until you're done with the stream. Either be sure there's no further usage, or (safest) destroy the stream before using the contents.</p><p>Hint: If you call target->reserve(n) before creating the stream, the first call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#StringOutputStream.Next>Next()</a> will return at least n bytes of buffer space.</p></div><hr><h3 id=StringOutputStream.Next.details><code>virtual bool StringOutputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a buffer into which data can be written.</p><p>Any data written into this buffer will eventually (maybe instantly, maybe later on) be written to the output.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes in the buffer and "data" points to the buffer.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>Any data which the caller stores in this buffer will eventually be written to the output (unless <a href=google.protobuf.io.zero_copy_stream_impl_lite#StringOutputStream.BackUp>BackUp()</a> is called).</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=google.protobuf.io.zero_copy_stream_impl_lite#StringOutputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=StringOutputStream.BackUp.details><code>virtual void StringOutputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the end of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#StringOutputStream.Next>Next()</a> is not actually written.</p><p>This is needed when you finish writing all the data you want to write, but the last buffer was bigger than you needed. You don't want to write a bunch of garbage after the end of your data, so you use <a href=google.protobuf.io.zero_copy_stream_impl_lite#StringOutputStream.BackUp>BackUp()</a> to back up.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=google.protobuf.io.zero_copy_stream_impl_lite#StringOutputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#StringOutputStream.Next>Next()</a>.</li><li>The caller must not have written anything to the last "count" bytes of that buffer.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#StringOutputStream.Next>Next()</a> will be ignored.</li></ul></div><h2 id=CopyingInputStream>class CopyingInputStream</h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A generic traditional input stream interface.</p><p>Lots of traditional input streams (e.g. file descriptors, C stdio streams, and C++ iostreams) expose an interface where every read involves copying bytes into a buffer. If you want to take such an interface and make a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> based on it, simply implement <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStream>CopyingInputStream</a> and then use <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor>CopyingInputStreamAdaptor</a>.</p><p><a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStream>CopyingInputStream</a> implementations should avoid buffering if possible. <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor>CopyingInputStreamAdaptor</a> does its own buffering and will read data in large blocks.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=CopyingInputStream.~CopyingInputStream><div style=padding-left:16px;text-indent:-16px><code><b>~CopyingInputStream</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int</code></td><td style=border-left-width:0 id=CopyingInputStream.Read><div style=padding-left:16px;text-indent:-16px><code><b>Read</b>(void * buffer, int size) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reads up to "size" bytes into the given buffer. <a href=#CopyingInputStream.Read.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int</code></td><td style=border-left-width:0 id=CopyingInputStream.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips the next "count" bytes of input. <a href=#CopyingInputStream.Skip.details>more...</a></div></td></tr></table><hr><h3 id=CopyingInputStream.Read.details><code>virtual int CopyingInputStream::Read(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void * buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size) = 0</code></h3><div style=margin-left:16px><p>Reads up to "size" bytes into the given buffer.</p><p>Returns the number of bytes read. <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStream.Read>Read()</a> waits until at least one byte is available, or returns zero if no bytes will ever become available (EOF), or -1 if a permanent read error occurred.</p></div><hr><h3 id=CopyingInputStream.Skip.details><code>virtual int CopyingInputStream::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Skips the next "count" bytes of input.</p><p>Returns the number of bytes actually skipped. This will always be exactly equal to "count" unless EOF was reached or a permanent read error occurred.</p><p>The default implementation just repeatedly calls <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStream.Read>Read()</a> into a scratch buffer.</p></div><h2 id=CopyingInputStreamAdaptor>class CopyingInputStreamAdaptor: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> which reads from a <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStream>CopyingInputStream</a>.</p><p>This is useful for implementing ZeroCopyInputStreams that read from traditional streams. Note that this class is not really zero-copy.</p><p>If you want to read from file descriptors or C++ istreams, this is already implemented for you: use <a href=google.protobuf.io.zero_copy_stream_impl#FileInputStream>FileInputStream</a> or <a href=google.protobuf.io.zero_copy_stream_impl#IstreamInputStream>IstreamInputStream</a> respectively.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=CopyingInputStreamAdaptor.CopyingInputStreamAdaptor><div style=padding-left:16px;text-indent:-16px><code><b>CopyingInputStreamAdaptor</b>(<a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStream>CopyingInputStream</a> * copying_stream, int block_size = -1)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates a stream that reads from the given <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStream>CopyingInputStream</a>. <a href=#CopyingInputStreamAdaptor.CopyingInputStreamAdaptor.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=CopyingInputStreamAdaptor.~CopyingInputStreamAdaptor><div style=padding-left:16px;text-indent:-16px><code><b>~CopyingInputStreamAdaptor</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CopyingInputStreamAdaptor.SetOwnsCopyingStream><div style=padding-left:16px;text-indent:-16px><code><b>SetOwnsCopyingStream</b>(bool value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Call SetOwnsCopyingStream(true) to tell the <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor>CopyingInputStreamAdaptor</a> to delete the underlying <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStream>CopyingInputStream</a> when it is destroyed.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CopyingInputStreamAdaptor.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(const void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a chunk of data from the stream. <a href=#CopyingInputStreamAdaptor.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=CopyingInputStreamAdaptor.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor.Next>Next()</a>. <a href=#CopyingInputStreamAdaptor.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CopyingInputStreamAdaptor.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips a number of bytes. <a href=#CopyingInputStreamAdaptor.Skip.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=CopyingInputStreamAdaptor.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes read since this object was created.</div></td></tr></table><hr><h3 id=CopyingInputStreamAdaptor.CopyingInputStreamAdaptor.details><code>explicit CopyingInputStreamAdaptor::CopyingInputStreamAdaptor(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStream>CopyingInputStream</a> * copying_stream,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int block_size = -1)</code></h3><div style=margin-left:16px><p>Creates a stream that reads from the given <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStream>CopyingInputStream</a>.</p><p>If a block_size is given, it specifies the number of bytes that should be read and returned with each call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor.Next>Next()</a>. Otherwise, a reasonable default is used. The caller retains ownership of copying_stream unless SetOwnsCopyingStream(true) is called.</p></div><hr><h3 id=CopyingInputStreamAdaptor.Next.details><code>virtual bool CopyingInputStreamAdaptor::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a chunk of data from the stream.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, there is no more data to return or an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes read and "data" points to a pointer to a buffer containing these bytes.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=CopyingInputStreamAdaptor.BackUp.details><code>virtual void CopyingInputStreamAdaptor::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor.Next>Next()</a>.</p><p>This is useful when writing procedures that are only supposed to read up to a certain point in the input, then return. If <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor.Next>Next()</a> returns a buffer that goes beyond what you wanted to read, you can use <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor.BackUp>BackUp()</a> to return to the point where you intended to finish.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor.Next>Next()</a>.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor.Next>Next()</a> will be pushed back into the stream. Subsequent calls to <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor.Next>Next()</a> will return the same data again before producing new data.</li></ul></div><hr><h3 id=CopyingInputStreamAdaptor.Skip.details><code>virtual bool CopyingInputStreamAdaptor::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Skips a number of bytes.</p><p>Returns false if the end of the stream is reached or some input error occurred. In the end-of-stream case, the stream is advanced to the end of the stream (so <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingInputStreamAdaptor.ByteCount>ByteCount()</a> will return the total size of the stream).</p></div><h2 id=CopyingOutputStream>class CopyingOutputStream</h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A generic traditional output stream interface.</p><p>Lots of traditional output streams (e.g. file descriptors, C stdio streams, and C++ iostreams) expose an interface where every write involves copying bytes from a buffer. If you want to take such an interface and make a <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> based on it, simply implement <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStream>CopyingOutputStream</a> and then use <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor>CopyingOutputStreamAdaptor</a>.</p><p><a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStream>CopyingOutputStream</a> implementations should avoid buffering if possible. <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor>CopyingOutputStreamAdaptor</a> does its own buffering and will write data in large blocks.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=CopyingOutputStream.~CopyingOutputStream><div style=padding-left:16px;text-indent:-16px><code><b>~CopyingOutputStream</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CopyingOutputStream.Write><div style=padding-left:16px;text-indent:-16px><code><b>Write</b>(const void * buffer, int size) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Writes "size" bytes from the given buffer to the output. <a href=#CopyingOutputStream.Write.details>more...</a></div></td></tr></table><hr><h3 id=CopyingOutputStream.Write.details><code>virtual bool CopyingOutputStream::Write(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void * buffer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size) = 0</code></h3><div style=margin-left:16px><p>Writes "size" bytes from the given buffer to the output.</p><p>Returns true if successful, false on a write error.</p></div><h2 id=CopyingOutputStreamAdaptor>class CopyingOutputStreamAdaptor: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a> which writes to a <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStream>CopyingOutputStream</a>.</p><p>This is useful for implementing ZeroCopyOutputStreams that write to traditional streams. Note that this class is not really zero-copy.</p><p>If you want to write to file descriptors or C++ ostreams, this is already implemented for you: use <a href=google.protobuf.io.zero_copy_stream_impl#FileOutputStream>FileOutputStream</a> or <a href=google.protobuf.io.zero_copy_stream_impl#OstreamOutputStream>OstreamOutputStream</a> respectively.</p><p>Known subclasses:</p><ul><li><code><a href=google.protobuf.io.zero_copy_stream_impl#FileOutputStream>FileOutputStream</a></code></li></ul><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.CopyingOutputStreamAdaptor><div style=padding-left:16px;text-indent:-16px><code><b>CopyingOutputStreamAdaptor</b>(<a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStream>CopyingOutputStream</a> * copying_stream, int block_size = -1)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates a stream that writes to the given Unix file descriptor. <a href=#CopyingOutputStreamAdaptor.CopyingOutputStreamAdaptor.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.~CopyingOutputStreamAdaptor><div style=padding-left:16px;text-indent:-16px><code><b>~CopyingOutputStreamAdaptor</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.Flush><div style=padding-left:16px;text-indent:-16px><code><b>Flush</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Writes all pending data to the underlying stream. <a href=#CopyingOutputStreamAdaptor.Flush.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.SetOwnsCopyingStream><div style=padding-left:16px;text-indent:-16px><code><b>SetOwnsCopyingStream</b>(bool value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Call SetOwnsCopyingStream(true) to tell the <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor>CopyingOutputStreamAdaptor</a> to delete the underlying <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStream>CopyingOutputStream</a> when it is destroyed.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>ZeroCopyOutputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a buffer into which data can be written. <a href=#CopyingOutputStreamAdaptor.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the end of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor.Next>Next()</a> is not actually written. <a href=#CopyingOutputStreamAdaptor.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes written since this object was created.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.WriteAliasedRaw><div style=padding-left:16px;text-indent:-16px><code><b>WriteAliasedRaw</b>(const void * data, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write a given chunk of data to the output. <a href=#CopyingOutputStreamAdaptor.WriteAliasedRaw.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=CopyingOutputStreamAdaptor.AllowsAliasing><div style=padding-left:16px;text-indent:-16px><code><b>AllowsAliasing</b>() const</code></div></td></tr></table><hr><h3 id=CopyingOutputStreamAdaptor.CopyingOutputStreamAdaptor.details><code>explicit CopyingOutputStreamAdaptor::CopyingOutputStreamAdaptor(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStream>CopyingOutputStream</a> * copying_stream,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int block_size = -1)</code></h3><div style=margin-left:16px><p>Creates a stream that writes to the given Unix file descriptor.</p><p>If a block_size is given, it specifies the size of the buffers that should be returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor.Next>Next()</a>. Otherwise, a reasonable default is used.</p></div><hr><h3 id=CopyingOutputStreamAdaptor.Flush.details><code>bool CopyingOutputStreamAdaptor::Flush()</code></h3><div style=margin-left:16px><p>Writes all pending data to the underlying stream.</p><p>Returns false if a write error occurred on the underlying stream. (The underlying stream itself is not necessarily flushed.)</p></div><hr><h3 id=CopyingOutputStreamAdaptor.Next.details><code>virtual bool CopyingOutputStreamAdaptor::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a buffer into which data can be written.</p><p>Any data written into this buffer will eventually (maybe instantly, maybe later on) be written to the output.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes in the buffer and "data" points to the buffer.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>Any data which the caller stores in this buffer will eventually be written to the output (unless <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor.BackUp>BackUp()</a> is called).</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=CopyingOutputStreamAdaptor.BackUp.details><code>virtual void CopyingOutputStreamAdaptor::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the end of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor.Next>Next()</a> is not actually written.</p><p>This is needed when you finish writing all the data you want to write, but the last buffer was bigger than you needed. You don't want to write a bunch of garbage after the end of your data, so you use <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor.BackUp>BackUp()</a> to back up.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor.Next>Next()</a>.</li><li>The caller must not have written anything to the last "count" bytes of that buffer.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor.Next>Next()</a> will be ignored.</li></ul></div><hr><h3 id=CopyingOutputStreamAdaptor.WriteAliasedRaw.details><code>virtual bool CopyingOutputStreamAdaptor::WriteAliasedRaw(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void * data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size)</code></h3><div style=margin-left:16px><p>Write a given chunk of data to the output.</p><p>Some output streams may implement this in a way that avoids copying. Check AllowsAliasing() before calling <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor.WriteAliasedRaw>WriteAliasedRaw()</a>. It will GOOGLE_CHECK fail if <a href=google.protobuf.io.zero_copy_stream_impl_lite#CopyingOutputStreamAdaptor.WriteAliasedRaw>WriteAliasedRaw()</a> is called on a stream that does not allow aliasing.</p><p>NOTE: It is caller's responsibility to ensure that the chunk of memory remains live until all of the data has been consumed from the stream.</p></div><h2 id=LimitingInputStream>class LimitingInputStream: public <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h2><p><code>#include &lt;<a href=#>google/protobuf/io/zero_copy_stream_impl_lite.h</a>><br>namespace <a href=#google.protobuf.io>google::protobuf::io</a></code></p><p>A <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> which wraps some other stream and limits it to a particular byte count.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=LimitingInputStream.LimitingInputStream><div style=padding-left:16px;text-indent:-16px><code><b>LimitingInputStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a> * input, int64 limit)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=LimitingInputStream.~LimitingInputStream><div style=padding-left:16px;text-indent:-16px><code><b>~LimitingInputStream</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>implements <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>ZeroCopyInputStream</a></h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=LimitingInputStream.Next><div style=padding-left:16px;text-indent:-16px><code><b>Next</b>(const void ** data, int * size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Obtains a chunk of data from the stream. <a href=#LimitingInputStream.Next.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=LimitingInputStream.BackUp><div style=padding-left:16px;text-indent:-16px><code><b>BackUp</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#LimitingInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#LimitingInputStream.Next>Next()</a>. <a href=#LimitingInputStream.BackUp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=LimitingInputStream.Skip><div style=padding-left:16px;text-indent:-16px><code><b>Skip</b>(int count)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Skips a number of bytes. <a href=#LimitingInputStream.Skip.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int64_t</code></td><td style=border-left-width:0 id=LimitingInputStream.ByteCount><div style=padding-left:16px;text-indent:-16px><code><b>ByteCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total number of bytes read since this object was created.</div></td></tr></table><hr><h3 id=LimitingInputStream.Next.details><code>virtual bool LimitingInputStream::Next(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const void ** data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int * size)</code></h3><div style=margin-left:16px><p>Obtains a chunk of data from the stream.</p><p>Preconditions:</p><ul><li>"size" and "data" are not NULL.</li></ul><p>Postconditions:</p><ul><li>If the returned value is false, there is no more data to return or an error occurred. All errors are permanent.</li><li>Otherwise, "size" points to the actual number of bytes read and "data" points to a pointer to a buffer containing these bytes.</li><li>Ownership of this buffer remains with the stream, and the buffer remains valid only until some other method of the stream is called or the stream is destroyed.</li><li>It is legal for the returned buffer to have zero size, as long as repeatedly calling <a href=google.protobuf.io.zero_copy_stream_impl_lite#LimitingInputStream.Next>Next()</a> eventually yields a buffer with non-zero size.</li></ul></div><hr><h3 id=LimitingInputStream.BackUp.details><code>virtual void LimitingInputStream::BackUp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Backs up a number of bytes, so that the next call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#LimitingInputStream.Next>Next()</a> returns data again that was already returned by the last call to <a href=google.protobuf.io.zero_copy_stream_impl_lite#LimitingInputStream.Next>Next()</a>.</p><p>This is useful when writing procedures that are only supposed to read up to a certain point in the input, then return. If <a href=google.protobuf.io.zero_copy_stream_impl_lite#LimitingInputStream.Next>Next()</a> returns a buffer that goes beyond what you wanted to read, you can use <a href=google.protobuf.io.zero_copy_stream_impl_lite#LimitingInputStream.BackUp>BackUp()</a> to return to the point where you intended to finish.</p><p>Preconditions:</p><ul><li>The last method called must have been <a href=google.protobuf.io.zero_copy_stream_impl_lite#LimitingInputStream.Next>Next()</a>.</li><li>count must be less than or equal to the size of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#LimitingInputStream.Next>Next()</a>.</li></ul><p>Postconditions:</p><ul><li>The last "count" bytes of the last buffer returned by <a href=google.protobuf.io.zero_copy_stream_impl_lite#LimitingInputStream.Next>Next()</a> will be pushed back into the stream. Subsequent calls to <a href=google.protobuf.io.zero_copy_stream_impl_lite#LimitingInputStream.Next>Next()</a> will return the same data again before producing new data.</li></ul></div><hr><h3 id=LimitingInputStream.Skip.details><code>virtual bool LimitingInputStream::Skip(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int count)</code></h3><div style=margin-left:16px><p>Skips a number of bytes.</p><p>Returns false if the end of the stream is reached or some input error occurred. In the end-of-stream case, the stream is advanced to the end of the stream (so <a href=google.protobuf.io.zero_copy_stream_impl_lite#LimitingInputStream.ByteCount>ByteCount()</a> will return the total size of the stream).</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-2bac41c1c2eb7f36cbdfb1155e0fa788>1.4.31 -</h1><html devsite><head><title>map.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>map.h</h1><p><code>#include &lt;google/protobuf/map.h><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>This file defines the map container and its helpers to support protobuf maps.</p><p>The <a href=google.protobuf.map#Map>Map</a> and MapIterator types are provided by this header file. Please avoid using other types defined here, unless they are public types within <a href=google.protobuf.map#Map>Map</a> or MapIterator, such as Map::value_type.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#MapPair>MapPair</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This is the class for <a href=google.protobuf.map#Map>Map</a>'s internal value_type.</div></td></tr><tr><td><div><code><a href=#Map>Map</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.map#Map>Map</a> is an associative container type used to store protobuf map fields.</div></td></tr><tr><td><div><code><a href=#Map.const_iterator>Map::const_iterator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Iterators.</div></td></tr><tr><td><div><code><a href=#Map.iterator>Map::iterator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr></table><h2 id=MapPair>template struct MapPair</h2><p><code>#include &lt;<a href=#>google/protobuf/map.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a><br><br>template &lt;typename , typename ></code></p><p>This is the class for <a href=google.protobuf.map#Map>Map</a>'s internal value_type.</p><p>Instead of using std::pair as value_type, we use this class which provides us more control of its process of construction and destruction.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=MapPair.first_type><div style=padding-left:16px;text-indent:-16px><code>const Key <b>first_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=MapPair.second_type><div style=padding-left:16px;text-indent:-16px><code>T <b>second_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const Key</code></td><td style=border-left-width:0 id=MapPair.first><div style=padding-left:16px;text-indent:-16px><code><b>first</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>T</code></td><td style=border-left-width:0 id=MapPair.second><div style=padding-left:16px;text-indent:-16px><code><b>second</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=MapPair.MapPair><div style=padding-left:16px;text-indent:-16px><code><b>MapPair</b>(const Key & other_first, const T & other_second)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=MapPair.MapPair><div style=padding-left:16px;text-indent:-16px><code><b>MapPair</b>(const Key & other_first)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=MapPair.MapPair><div style=padding-left:16px;text-indent:-16px><code><b>MapPair</b>(Key && other_first)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=MapPair.MapPair><div style=padding-left:16px;text-indent:-16px><code><b>MapPair</b>(const <a href=google.protobuf.map#MapPair>MapPair</a> & other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=MapPair.~MapPair><div style=padding-left:16px;text-indent:-16px><code><b>~MapPair</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template</code></td><td style=border-left-width:0 id="MapPair.operator std::pair< T1, T2 >"><div style=padding-left:16px;text-indent:-16px><code><b>operator std::pair< T1, T2 ></b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Implicitly convertible to std::pair of compatible types.</div></td></tr></table><h2 id=Map>template class Map</h2><p><code>#include &lt;<a href=#>google/protobuf/map.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a><br><br>template &lt;typename , typename ></code></p><p><a href=google.protobuf.map#Map>Map</a> is an associative container type used to store protobuf map fields.</p><p>Each <a href=google.protobuf.map#Map>Map</a> instance may or may not use a different hash function, a different iteration order, and so on. E.g., please don't examine implementation details to decide if the following would work: Map&lt;int, int> m0, m1; m0[[]0] = m1[[]0] = m0[[]1] = m1[[]1] = 0; assert(m0.begin()->first == m1.begin()->first); // Bug!</p><p><a href=google.protobuf.map#Map>Map</a>'s interface is similar to std::unordered_map, except that <a href=google.protobuf.map#Map>Map</a> is not designed to play well with exceptions.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.key_type><div style=padding-left:16px;text-indent:-16px><code>Key <b>key_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.mapped_type><div style=padding-left:16px;text-indent:-16px><code>T <b>mapped_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.value_type><div style=padding-left:16px;text-indent:-16px><code><a href=google.protobuf.map#MapPair>MapPair</a>&lt; Key, T > <b>value_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.pointer><div style=padding-left:16px;text-indent:-16px><code><a href=google.protobuf.map#MapPair>value_type</a> * <b>pointer</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.const_pointer><div style=padding-left:16px;text-indent:-16px><code>const <a href=google.protobuf.map#MapPair>value_type</a> * <b>const_pointer</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.reference><div style=padding-left:16px;text-indent:-16px><code><a href=google.protobuf.map#MapPair>value_type</a> & <b>reference</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.const_reference><div style=padding-left:16px;text-indent:-16px><code>const <a href=google.protobuf.map#MapPair>value_type</a> & <b>const_reference</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.size_type><div style=padding-left:16px;text-indent:-16px><code>size_t <b>size_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.hasher><div style=padding-left:16px;text-indent:-16px><code>typename internal::TransparentSupport&lt; Key >::hash <b>hasher</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr</code></td><td style=border-left-width:0 id=Map.Map><div style=padding-left:16px;text-indent:-16px><code><b>Map</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=Map.Map><div style=padding-left:16px;text-indent:-16px><code><b>Map</b>(<a href=google.protobuf.arena#Arena>Arena</a> * arena)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Map.Map><div style=padding-left:16px;text-indent:-16px><code><b>Map</b>(const <a href=google.protobuf.map#Map>Map</a> & other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Map.Map><div style=padding-left:16px;text-indent:-16px><code><b>Map</b>(<a href=google.protobuf.map#Map>Map</a> && other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#Map>Map</a> &</code></td><td style=border-left-width:0 id="Map.operator="><div style=padding-left:16px;text-indent:-16px><code><b>operator=</b>(<a href=google.protobuf.map#Map>Map</a> && other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template</code></td><td style=border-left-width:0 id=Map.Map><div style=padding-left:16px;text-indent:-16px><code><b>Map</b>(const InputIt & first, const InputIt & last)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Map.~Map><div style=padding-left:16px;text-indent:-16px><code><b>~Map</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#Map.iterator>iterator</a></code></td><td style=border-left-width:0 id=Map.begin><div style=padding-left:16px;text-indent:-16px><code><b>begin</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#Map.iterator>iterator</a></code></td><td style=border-left-width:0 id=Map.end><div style=padding-left:16px;text-indent:-16px><code><b>end</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#Map.const_iterator>const_iterator</a></code></td><td style=border-left-width:0 id=Map.begin><div style=padding-left:16px;text-indent:-16px><code><b>begin</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#Map.const_iterator>const_iterator</a></code></td><td style=border-left-width:0 id=Map.end><div style=padding-left:16px;text-indent:-16px><code><b>end</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#Map.const_iterator>const_iterator</a></code></td><td style=border-left-width:0 id=Map.cbegin><div style=padding-left:16px;text-indent:-16px><code><b>cbegin</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#Map.const_iterator>const_iterator</a></code></td><td style=border-left-width:0 id=Map.cend><div style=padding-left:16px;text-indent:-16px><code><b>cend</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>size_type</code></td><td style=border-left-width:0 id=Map.size><div style=padding-left:16px;text-indent:-16px><code><b>size</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Capacity.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Map.empty><div style=padding-left:16px;text-indent:-16px><code><b>empty</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template T &</code></td><td style=border-left-width:0 id=Map.operator[]><div style=padding-left:16px;text-indent:-16px><code><b>operator[]</b>(const key_arg&lt; K > & key)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Element access.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template T &</code></td><td style=border-left-width:0 id=Map.operator[]><div style=padding-left:16px;text-indent:-16px><code><b>operator[]</b>(key_arg&lt; K > && key)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template const T &</code></td><td style=border-left-width:0 id=Map.at><div style=padding-left:16px;text-indent:-16px><code><b>at</b>(const key_arg&lt; K > & key) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template T &</code></td><td style=border-left-width:0 id=Map.at><div style=padding-left:16px;text-indent:-16px><code><b>at</b>(const key_arg&lt; K > & key)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template size_type</code></td><td style=border-left-width:0 id=Map.count><div style=padding-left:16px;text-indent:-16px><code><b>count</b>(const key_arg&lt; K > & key) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Lookup.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template <a href=google.protobuf.map#Map.const_iterator>const_iterator</a></code></td><td style=border-left-width:0 id=Map.find><div style=padding-left:16px;text-indent:-16px><code><b>find</b>(const key_arg&lt; K > & key) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template <a href=google.protobuf.map#Map.iterator>iterator</a></code></td><td style=border-left-width:0 id=Map.find><div style=padding-left:16px;text-indent:-16px><code><b>find</b>(const key_arg&lt; K > & key)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template bool</code></td><td style=border-left-width:0 id=Map.contains><div style=padding-left:16px;text-indent:-16px><code><b>contains</b>(const key_arg&lt; K > & key) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template std::pair&lt; <a href=google.protobuf.map#Map.const_iterator>const_iterator</a>, <a href=google.protobuf.map#Map.const_iterator>const_iterator</a> ></code></td><td style=border-left-width:0 id=Map.equal_range><div style=padding-left:16px;text-indent:-16px><code><b>equal_range</b>(const key_arg&lt; K > & key) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template std::pair&lt; <a href=google.protobuf.map#Map.iterator>iterator</a>, <a href=google.protobuf.map#Map.iterator>iterator</a> ></code></td><td style=border-left-width:0 id=Map.equal_range><div style=padding-left:16px;text-indent:-16px><code><b>equal_range</b>(const key_arg&lt; K > & key)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::pair&lt; <a href=google.protobuf.map#Map.iterator>iterator</a>, bool ></code></td><td style=border-left-width:0 id=Map.insert><div style=padding-left:16px;text-indent:-16px><code><b>insert</b>(const <a href=google.protobuf.map#MapPair>value_type</a> & value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>insert</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=Map.insert><div style=padding-left:16px;text-indent:-16px><code><b>insert</b>(InputIt first, InputIt last)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Map.insert><div style=padding-left:16px;text-indent:-16px><code><b>insert</b>(std::initializer_list&lt; <a href=google.protobuf.map#MapPair>value_type</a> > values)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template size_type</code></td><td style=border-left-width:0 id=Map.erase><div style=padding-left:16px;text-indent:-16px><code><b>erase</b>(const key_arg&lt; K > & key)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Erase and clear.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#Map.iterator>iterator</a></code></td><td style=border-left-width:0 id=Map.erase><div style=padding-left:16px;text-indent:-16px><code><b>erase</b>(<a href=google.protobuf.map#Map.iterator>iterator</a> pos)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Map.erase><div style=padding-left:16px;text-indent:-16px><code><b>erase</b>(<a href=google.protobuf.map#Map.iterator>iterator</a> first, <a href=google.protobuf.map#Map.iterator>iterator</a> last)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Map.clear><div style=padding-left:16px;text-indent:-16px><code><b>clear</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#Map>Map</a> &</code></td><td style=border-left-width:0 id="Map.operator="><div style=padding-left:16px;text-indent:-16px><code><b>operator=</b>(const <a href=google.protobuf.map#Map>Map</a> & other)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Assign.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Map.swap><div style=padding-left:16px;text-indent:-16px><code><b>swap</b>(<a href=google.protobuf.map#Map>Map</a> & other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Map.InternalSwap><div style=padding-left:16px;text-indent:-16px><code><b>InternalSwap</b>(<a href=google.protobuf.map#Map>Map</a> & other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>hasher</code></td><td style=border-left-width:0 id=Map.hash_function><div style=padding-left:16px;text-indent:-16px><code><b>hash_function</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Access to hasher. <a href=#Map.hash_function.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>size_t</code></td><td style=border-left-width:0 id=Map.SpaceUsedExcludingSelfLong><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsedExcludingSelfLong</b>() const</code></div></td></tr></table><hr><h3 id=Map.hash_function.details><code>hasher Map::hash_function() const</code></h3><div style=margin-left:16px><p>Access to hasher.</p><p>Currently this returns a copy, but it may be modified to return a const reference in the future.</p></div><h2 id=Map.const_iterator>class Map::const_iterator</h2><p><code>#include &lt;<a href=#>google/protobuf/map.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Iterators.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.const_iterator.iterator_category><div style=padding-left:16px;text-indent:-16px><code>std::forward_iterator_tag <b>iterator_category</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.const_iterator.value_type><div style=padding-left:16px;text-indent:-16px><code>typename <a href=google.protobuf.map#MapPair>Map::value_type</a> <b>value_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.const_iterator.difference_type><div style=padding-left:16px;text-indent:-16px><code>ptrdiff_t <b>difference_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.const_iterator.pointer><div style=padding-left:16px;text-indent:-16px><code>const value_type * <b>pointer</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.const_iterator.reference><div style=padding-left:16px;text-indent:-16px><code>const value_type & <b>reference</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Map.const_iterator.const_iterator><div style=padding-left:16px;text-indent:-16px><code><b>const_iterator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=Map.const_iterator.const_iterator><div style=padding-left:16px;text-indent:-16px><code><b>const_iterator</b>(const InnerIt & it)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#MapPair>const_reference</a></code></td><td style=border-left-width:0 id=Map.const_iterator.operator*><div style=padding-left:16px;text-indent:-16px><code><b>operator*</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#MapPair>const_pointer</a></code></td><td style=border-left-width:0 id="Map.const_iterator.operator->"><div style=padding-left:16px;text-indent:-16px><code><b>operator-></b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#Map.const_iterator>const_iterator</a> &</code></td><td style=border-left-width:0 id=Map.const_iterator.operator++><div style=padding-left:16px;text-indent:-16px><code><b>operator++</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#Map.const_iterator>const_iterator</a></code></td><td style=border-left-width:0 id=Map.const_iterator.operator++><div style=padding-left:16px;text-indent:-16px><code><b>operator++</b>(int )</code></div></td></tr></table><h2 id=Map.iterator>class Map::iterator</h2><p><code>#include &lt;<a href=#>google/protobuf/map.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.iterator.iterator_category><div style=padding-left:16px;text-indent:-16px><code>std::forward_iterator_tag <b>iterator_category</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.iterator.value_type><div style=padding-left:16px;text-indent:-16px><code>typename <a href=google.protobuf.map#MapPair>Map::value_type</a> <b>value_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.iterator.difference_type><div style=padding-left:16px;text-indent:-16px><code>ptrdiff_t <b>difference_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.iterator.pointer><div style=padding-left:16px;text-indent:-16px><code>value_type * <b>pointer</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=Map.iterator.reference><div style=padding-left:16px;text-indent:-16px><code>value_type & <b>reference</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Map.iterator.iterator><div style=padding-left:16px;text-indent:-16px><code><b>iterator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=Map.iterator.iterator><div style=padding-left:16px;text-indent:-16px><code><b>iterator</b>(const InnerIt & it)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>reference</code></td><td style=border-left-width:0 id=Map.iterator.operator*><div style=padding-left:16px;text-indent:-16px><code><b>operator*</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>pointer</code></td><td style=border-left-width:0 id="Map.iterator.operator->"><div style=padding-left:16px;text-indent:-16px><code><b>operator-></b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#Map.iterator>iterator</a> &</code></td><td style=border-left-width:0 id=Map.iterator.operator++><div style=padding-left:16px;text-indent:-16px><code><b>operator++</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.map#Map.iterator>iterator</a></code></td><td style=border-left-width:0 id=Map.iterator.operator++><div style=padding-left:16px;text-indent:-16px><code><b>operator++</b>(int )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id="Map.iterator.operator const_iterator"><div style=padding-left:16px;text-indent:-16px><code><b>operator const_iterator</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Allow implicit conversion to <a href=google.protobuf.map#Map.const_iterator>const_iterator</a>.</div></td></tr></table></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-603e70bd8b248862b76f5ad251795e84>1.4.32 -</h1><html devsite><head><title>message.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>message.h</h1><p><code>#include &lt;google/protobuf/message.h><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Defines <a href=google.protobuf.message#Message>Message</a>, the abstract interface implemented by non-lite protocol message objects.</p><p>Although it's possible to implement this interface manually, most users will use the protocol compiler to generate implementations.</p><p>Example usage:</p><p>Say you have a message defined as:</p><pre>message Foo {
  optional string text = 1;
  repeated int32 numbers = 2;
}</pre><p>Then, if you used the protocol compiler to generate a class from the above definition, you could use it like so:</p><pre>std::string data;  // Will store a serialized version of the message.
<p>{
// Create a message and serialize it.
Foo foo;
foo.set_text(&ldquo;Hello World!&rdquo;);
foo.add_numbers(1);
foo.add_numbers(5);
foo.add_numbers(42);</p>
<p>foo.SerializeToString(&amp;data);
}</p>
<p>{
// Parse the serialized message and check that it contains the
// correct data.
Foo foo;
foo.ParseFromString(data);</p>
<p>assert(foo.text() == &ldquo;Hello World!&rdquo;);
assert(foo.numbers_size() == 3);
assert(foo.numbers(0) == 1);
assert(foo.numbers(1) == 5);
assert(foo.numbers(2) == 42);
}</p>
<p>{
// Same as the last block, but do it dynamically via the Message
// reflection interface.
Message* foo = new Foo;
const Descriptor* descriptor = foo-&gt;GetDescriptor();</p>
<p>// Get the descriptors for the fields we&rsquo;re interested in and verify
// their types.
const FieldDescriptor* text_field = descriptor-&gt;FindFieldByName(&ldquo;text&rdquo;);
assert(text_field != nullptr);
assert(text_field-&gt;type() == FieldDescriptor::TYPE_STRING);
assert(text_field-&gt;label() == FieldDescriptor::LABEL_OPTIONAL);
const FieldDescriptor* numbers_field = descriptor-&gt;
FindFieldByName(&ldquo;numbers&rdquo;);
assert(numbers_field != nullptr);
assert(numbers_field-&gt;type() == FieldDescriptor::TYPE_INT32);
assert(numbers_field-&gt;label() == FieldDescriptor::LABEL_REPEATED);</p>
<p>// Parse the message.
foo-&gt;ParseFromString(data);</p>
<p>// Use the reflection interface to examine the contents.
const Reflection* reflection = foo-&gt;GetReflection();
assert(reflection-&gt;GetString(*foo, text_field) == &ldquo;Hello World!&rdquo;);
assert(reflection-&gt;FieldSize(*foo, numbers_field) == 3);
assert(reflection-&gt;GetRepeatedInt32(*foo, numbers_field, 0) == 1);
assert(reflection-&gt;GetRepeatedInt32(*foo, numbers_field, 1) == 5);
assert(reflection-&gt;GetRepeatedInt32(*foo, numbers_field, 2) == 42);</p>
<p>delete foo;
}</pre></p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#Metadata>Metadata</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A container to hold message metadata.</div></td></tr><tr><td><div><code><a href=#Message>Message</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Abstract interface for protocol messages.</div></td></tr><tr><td><div><code><a href=#Reflection>Reflection</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This interface contains methods that can be used to dynamically access and modify the fields of a protocol message.</div></td></tr><tr><td><div><code><a href=#MessageFactory>MessageFactory</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Abstract interface for a factory for message objects.</div></td></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>template const T *</code></td><td style=border-left-width:0 id=DynamicCastToGenerated><div style=padding-left:16px;text-indent:-16px><code><b>DynamicCastToGenerated</b>(const <a href=google.protobuf.message#Message>Message</a> * from)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Tries to downcast this message to a generated message type. <a href=#DynamicCastToGenerated.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template T *</code></td><td style=border-left-width:0 id=DynamicCastToGenerated><div style=padding-left:16px;text-indent:-16px><code><b>DynamicCastToGenerated</b>(<a href=google.protobuf.message#Message>Message</a> * from)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=LinkMessageReflection><div style=padding-left:16px;text-indent:-16px><code><b>LinkMessageReflection</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Call this function to ensure that this message's reflection is linked into the binary: <a href=#LinkMessageReflection.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>&lt; std::string > &</code></td><td style=border-left-width:0 id="Reflection::GetRepeatedPtrFieldInternal< std::string >"><div style=padding-left:16px;text-indent:-16px><code><b>Reflection::GetRepeatedPtrFieldInternal< std::string ></b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>&lt; std::string > *</code></td><td style=border-left-width:0 id="Reflection::MutableRepeatedPtrFieldInternal< std::string >"><div style=padding-left:16px;text-indent:-16px><code><b>Reflection::MutableRepeatedPtrFieldInternal< std::string ></b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div></td></tr></table><hr><h3 id=DynamicCastToGenerated.details><code>template const T * protobuf::DynamicCastToGenerated(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> * from)</code></h3><div style=margin-left:16px><p>Tries to downcast this message to a generated message type.</p><p>Returns nullptr if this class is not an instance of T. This works even if RTTI is disabled.</p><p>This also has the effect of creating a strong reference to T that will prevent the linker from stripping it out at link time. This can be important if you are using a <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> that delegates to the generated factory.</p></div><hr><h3 id=LinkMessageReflection.details><code>template void protobuf::LinkMessageReflection()</code></h3><div style=margin-left:16px><p>Call this function to ensure that this message's reflection is linked into the binary:</p><pre>google::protobuf::LinkMessageReflection&lt;FooMessage&gt;();</pre><p>This will ensure that the following lookup will succeed:</p><pre>DescriptorPool::generated_pool()-&gt;FindMessageTypeByName("FooMessage");</pre><p>As a side-effect, it will also guarantee that anything else from the same .proto file will also be available for lookup in the generated pool.</p><p>This function does not actually register the message, so it does not need to be called before the lookup. However it does need to occur in a function that cannot be stripped from the binary (ie. it must be reachable from main).</p><p>Best practice is to call this function as close as possible to where the reflection is actually needed. This function is very cheap to call, so you should not need to worry about its runtime overhead except in the tightest of loops (on x86-64 it compiles into two "mov" instructions).</p></div><h2 id=Metadata>struct Metadata</h2><p><code>#include &lt;<a href=#>google/protobuf/message.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>A container to hold message metadata.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=Metadata.descriptor><div style=padding-left:16px;text-indent:-16px><code><b>descriptor</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.message#Reflection>Reflection</a> *</code></td><td style=border-left-width:0 id=Metadata.reflection><div style=padding-left:16px;text-indent:-16px><code><b>reflection</b></code></div></td></tr></table><h2 id=Message>class Message: public <a href=google.protobuf.message_lite#MessageLite>MessageLite</a></h2><p><code>#include &lt;<a href=#>google/protobuf/message.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Abstract interface for protocol messages.</p><p>See also <a href=google.protobuf.message_lite#MessageLite>MessageLite</a>, which contains most every-day operations. <a href=google.protobuf.message#Message>Message</a> adds descriptors and reflection on top of that.</p><p>The methods of this class that are virtual but not pure-virtual have default implementations based on reflection. <a href=google.protobuf.message#Message>Message</a> classes which are optimized for speed will want to override these with faster implementations, but classes optimized for code size may be happy with keeping them. See the optimize_for option in descriptor.proto.</p><p>Users must not derive from this class. Only the protocol compiler and the internal library are allowed to create subclasses.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr</code></td><td style=border-left-width:0 id=Message.Message><div style=padding-left:16px;text-indent:-16px><code><b>Message</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected virtual <a href=google.protobuf.message#Metadata>Metadata</a></code></td><td style=border-left-width:0 id=Message.GetMetadata><div style=padding-left:16px;text-indent:-16px><code><b>GetMetadata</b>() const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get a struct containing the metadata for the <a href=google.protobuf.message#Message>Message</a>, which is used in turn to implement <a href=google.protobuf.message#Message.GetDescriptor>GetDescriptor()</a> and <a href=google.protobuf.message#Message.GetReflection>GetReflection()</a> above.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected explicit</code></td><td style=border-left-width:0 id=Message.Message><div style=padding-left:16px;text-indent:-16px><code><b>Message</b>(<a href=google.protobuf.arena#Arena>Arena</a> * arena)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected static uint64</code></td><td style=border-left-width:0 id=Message.GetInvariantPerBuild><div style=padding-left:16px;text-indent:-16px><code><b>GetInvariantPerBuild</b>(uint64 salt)</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Basic Operations</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual <a href=google.protobuf.message#Message>Message</a> *</code></td><td style=border-left-width:0 id=Message.New><div style=padding-left:16px;text-indent:-16px><code><b>New</b>() const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Construct a new instance of the same type. <a href=#Message.New.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual <a href=google.protobuf.message#Message>Message</a> *</code></td><td style=border-left-width:0 id=Message.New><div style=padding-left:16px;text-indent:-16px><code><b>New</b>(<a href=google.protobuf.arena#Arena>Arena</a> * arena) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Construct a new instance on the arena. <a href=#Message.New.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=Message.CopyFrom><div style=padding-left:16px;text-indent:-16px><code><b>CopyFrom</b>(const <a href=google.protobuf.message#Message>Message</a> & from)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Make this message into a copy of the given message. <a href=#Message.CopyFrom.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=Message.MergeFrom><div style=padding-left:16px;text-indent:-16px><code><b>MergeFrom</b>(const <a href=google.protobuf.message#Message>Message</a> & from)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Merge the fields from the given message into this message. <a href=#Message.MergeFrom.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Message.CheckInitialized><div style=padding-left:16px;text-indent:-16px><code><b>CheckInitialized</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Verifies that <a href=google.protobuf.message#Message.IsInitialized>IsInitialized()</a> returns true. <a href=#Message.CheckInitialized.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Message.FindInitializationErrors><div style=padding-left:16px;text-indent:-16px><code><b>FindInitializationErrors</b>(std::vector&lt; std::string > * errors) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Slowly build a list of all required fields that are not set. <a href=#Message.FindInitializationErrors.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=Message.InitializationErrorString><div style=padding-left:16px;text-indent:-16px><code><b>InitializationErrorString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like FindInitializationErrors, but joins all the strings, delimited by commas, and returns them.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=Message.DiscardUnknownFields><div style=padding-left:16px;text-indent:-16px><code><b>DiscardUnknownFields</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Clears all unknown fields from this message and all embedded messages. <a href=#Message.DiscardUnknownFields.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual size_t</code></td><td style=border-left-width:0 id=Message.SpaceUsedLong><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsedLong</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Computes (an estimate of) the total number of bytes currently used for storing the message in memory. <a href=#Message.SpaceUsedLong.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Message.SpaceUsed><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsed</b>() const</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Debugging & Testing</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=Message.DebugString><div style=padding-left:16px;text-indent:-16px><code><b>DebugString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Generates a human readable form of this message, useful for debugging and other purposes.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=Message.ShortDebugString><div style=padding-left:16px;text-indent:-16px><code><b>ShortDebugString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message#Message.DebugString>DebugString()</a>, but with less whitespace.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=Message.Utf8DebugString><div style=padding-left:16px;text-indent:-16px><code><b>Utf8DebugString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message#Message.DebugString>DebugString()</a>, but do not escape UTF-8 byte sequences.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Message.PrintDebugString><div style=padding-left:16px;text-indent:-16px><code><b>PrintDebugString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Convenience function useful in GDB. Prints <a href=google.protobuf.message#Message.DebugString>DebugString()</a> to stdout.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Reflection-based methods</h3><div style=font-style:italic;font-weight:400>These methods are pure-virtual in <a href=google.protobuf.message_lite#MessageLite>MessageLite</a>, but <a href=google.protobuf.message#Message>Message</a> provides reflection-based default implementations.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=Message.GetTypeName><div style=padding-left:16px;text-indent:-16px><code><b>GetTypeName</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the name of this message type, e.g. "foo.bar.BazProto".</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=Message.Clear><div style=padding-left:16px;text-indent:-16px><code><b>Clear</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Clear all fields of the message and set them to their default values. <a href=#Message.Clear.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=Message.IsInitialized><div style=padding-left:16px;text-indent:-16px><code><b>IsInitialized</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns whether all required fields have been set. <a href=#Message.IsInitialized.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=Message.CheckTypeAndMergeFrom><div style=padding-left:16px;text-indent:-16px><code><b>CheckTypeAndMergeFrom</b>(const <a href=google.protobuf.message_lite#MessageLite>MessageLite</a> & other)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If |other| is the exact same class as this, calls <a href=google.protobuf.message#Message.MergeFrom>MergeFrom()</a>. <a href=#Message.CheckTypeAndMergeFrom.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual const char *</code></td><td style=border-left-width:0 id=Message._InternalParse><div style=padding-left:16px;text-indent:-16px><code><b>_InternalParse</b>(const char * ptr, internal::ParseContext * ctx)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reflective parser.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual size_t</code></td><td style=border-left-width:0 id=Message.ByteSizeLong><div style=padding-left:16px;text-indent:-16px><code><b>ByteSizeLong</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Computes the serialized size of the message. <a href=#Message.ByteSizeLong.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual uint8 *</code></td><td style=border-left-width:0 id=Message._InternalSerialize><div style=padding-left:16px;text-indent:-16px><code><b>_InternalSerialize</b>(uint8 * ptr, <a href=google.protobuf.io.coded_stream#EpsCopyOutputStream>io::EpsCopyOutputStream</a> * stream) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Fast path when conditions match (ie. <a href=#Message._InternalSerialize.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Introspection</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=Message.GetDescriptor><div style=padding-left:16px;text-indent:-16px><code><b>GetDescriptor</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get a non-owning pointer to a <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> for this message's type. <a href=#Message.GetDescriptor.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.message#Reflection>Reflection</a> *</code></td><td style=border-left-width:0 id=Message.GetReflection><div style=padding-left:16px;text-indent:-16px><code><b>GetReflection</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get a non-owning pointer to the <a href=google.protobuf.message#Reflection>Reflection</a> interface for this <a href=google.protobuf.message#Message>Message</a>, which can be used to read and modify the fields of the <a href=google.protobuf.message#Message>Message</a> dynamically (in other words, without knowing the message type at compile time). <a href=#Message.GetReflection.details>more...</a></div></td></tr></table><hr><h3 id=Message.New.details><code>virtual <a href=google.protobuf.message#Message>Message</a> * Message::New() const = 0</code></h3><div style=margin-left:16px><p>Construct a new instance of the same type.</p><p>Ownership is passed to the caller. (This is also defined in <a href=google.protobuf.message_lite#MessageLite>MessageLite</a>, but is defined again here for return-type covariance.)</p></div><hr><h3 id=Message.New.details><code>virtual <a href=google.protobuf.message#Message>Message</a> * Message::New(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.arena#Arena>Arena</a> * arena) const</code></h3><div style=margin-left:16px><p>Construct a new instance on the arena.</p><p>Ownership is passed to the caller if arena is a nullptr. Default implementation allows for API compatibility during the <a href=google.protobuf.arena#Arena>Arena</a> transition.</p></div><hr><h3 id=Message.CopyFrom.details><code>virtual void Message::CopyFrom(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & from)</code></h3><div style=margin-left:16px><p>Make this message into a copy of the given message.</p><p>The given message must have the same descriptor, but need not necessarily be the same class. By default this is just implemented as "Clear(); MergeFrom(from);".</p></div><hr><h3 id=Message.MergeFrom.details><code>virtual void Message::MergeFrom(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & from)</code></h3><div style=margin-left:16px><p>Merge the fields from the given message into this message.</p><p>Singular fields will be overwritten, if specified in from, except for embedded messages which will be merged. Repeated fields will be concatenated. The given message must be of the same type as this message (i.e. the exact same class).</p></div><hr><h3 id=Message.CheckInitialized.details><code>void Message::CheckInitialized() const</code></h3><div style=margin-left:16px><p>Verifies that <a href=google.protobuf.message#Message.IsInitialized>IsInitialized()</a> returns true.</p><p>GOOGLE_CHECK-fails otherwise, with a nice error message.</p></div><hr><h3 id=Message.FindInitializationErrors.details><code>void Message::FindInitializationErrors(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; std::string > * errors) const</code></h3><div style=margin-left:16px><p>Slowly build a list of all required fields that are not set.</p><p>This is much, much slower than <a href=google.protobuf.message#Message.IsInitialized>IsInitialized()</a> as it is implemented purely via reflection. Generally, you should not call this unless you have already determined that an error exists by calling <a href=google.protobuf.message#Message.IsInitialized>IsInitialized()</a>.</p></div><hr><h3 id=Message.DiscardUnknownFields.details><code>virtual void Message::DiscardUnknownFields()</code></h3><div style=margin-left:16px><p>Clears all unknown fields from this message and all embedded messages.</p><p>Normally, if unknown tag numbers are encountered when parsing a message, the tag and value are stored in the message's <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> and then written back out when the message is serialized. This allows servers which simply route messages to other servers to pass through messages that have new field definitions which they don't yet know about. However, this behavior can have security implications. To avoid it, call this method after parsing.</p><p>See <a href=google.protobuf.message#Reflection.GetUnknownFields>Reflection::GetUnknownFields()</a> for more on unknown fields.</p></div><hr><h3 id=Message.SpaceUsedLong.details><code>virtual size_t Message::SpaceUsedLong() const</code></h3><div style=margin-left:16px><p>Computes (an estimate of) the total number of bytes currently used for storing the message in memory.</p><p>The default implementation calls the <a href=google.protobuf.message#Reflection>Reflection</a> object's SpaceUsed() method.</p><p>SpaceUsed() is noticeably slower than <a href=google.protobuf.message_lite#MessageLite.ByteSize>ByteSize()</a>, as it is implemented using reflection (rather than the generated code implementation for <a href=google.protobuf.message_lite#MessageLite.ByteSize>ByteSize()</a>). Like <a href=google.protobuf.message_lite#MessageLite.ByteSize>ByteSize()</a>, its CPU time is linear in the number of fields defined for the proto.</p></div><hr><h3 id=Message.Clear.details><code>virtual void Message::Clear()</code></h3><div style=margin-left:16px><p>Clear all fields of the message and set them to their default values.</p><p><a href=google.protobuf.message#Message.Clear>Clear()</a> avoids freeing memory, assuming that any memory allocated to hold parts of the message will be needed again to hold the next message. If you actually want to free the memory used by a <a href=google.protobuf.message#Message>Message</a>, you must delete it.</p></div><hr><h3 id=Message.IsInitialized.details><code>virtual bool Message::IsInitialized() const</code></h3><div style=margin-left:16px><p>Returns whether all required fields have been set.</p><p>Note that required fields no longer exist starting in proto3.</p></div><hr><h3 id=Message.CheckTypeAndMergeFrom.details><code>virtual void Message::CheckTypeAndMergeFrom(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message_lite#MessageLite>MessageLite</a> & other)</code></h3><div style=margin-left:16px><p>If |other| is the exact same class as this, calls <a href=google.protobuf.message#Message.MergeFrom>MergeFrom()</a>.</p><p>Otherwise, results are undefined (probably crash).</p></div><hr><h3 id=Message.ByteSizeLong.details><code>virtual size_t Message::ByteSizeLong() const</code></h3><div style=margin-left:16px><p>Computes the serialized size of the message.</p><p>This recursively calls <a href=google.protobuf.message#Message.ByteSizeLong>ByteSizeLong()</a> on all embedded messages.</p><p><a href=google.protobuf.message#Message.ByteSizeLong>ByteSizeLong()</a> is generally linear in the number of fields defined for the proto.</p></div><hr><h3 id=Message._InternalSerialize.details><code>virtual uint8 * Message::_InternalSerialize(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8 * ptr,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.coded_stream#EpsCopyOutputStream>io::EpsCopyOutputStream</a> * stream) const</code></h3><div style=margin-left:16px><p>Fast path when conditions match (ie.</p><p>non-deterministic) uint8* _InternalSerialize(uint8* ptr) const;</p></div><hr><h3 id=Message.GetDescriptor.details><code>const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Message::GetDescriptor() const</code></h3><div style=margin-left:16px><p>Get a non-owning pointer to a <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> for this message's type.</p><p>This describes what fields the message contains, the types of those fields, etc. This object remains property of the <a href=google.protobuf.message#Message>Message</a>.</p></div><hr><h3 id=Message.GetReflection.details><code>const <a href=google.protobuf.message#Reflection>Reflection</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Message::GetReflection() const</code></h3><div style=margin-left:16px><p>Get a non-owning pointer to the <a href=google.protobuf.message#Reflection>Reflection</a> interface for this <a href=google.protobuf.message#Message>Message</a>, which can be used to read and modify the fields of the <a href=google.protobuf.message#Message>Message</a> dynamically (in other words, without knowing the message type at compile time).</p><p>This object remains property of the <a href=google.protobuf.message#Message>Message</a>.</p></div><h2 id=Reflection>class Reflection</h2><p><code>#include &lt;<a href=#>google/protobuf/message.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>This interface contains methods that can be used to dynamically access and modify the fields of a protocol message.</p><p>Their semantics are similar to the accessors the protocol compiler generates.</p><p>To get the <a href=google.protobuf.message#Reflection>Reflection</a> for a given <a href=google.protobuf.message#Message>Message</a>, call <a href=google.protobuf.message#Message.GetReflection>Message::GetReflection()</a>.</p><p>This interface is separate from <a href=google.protobuf.message#Message>Message</a> only for efficiency reasons; the vast majority of implementations of <a href=google.protobuf.message#Message>Message</a> will share the same implementation of <a href=google.protobuf.message#Reflection>Reflection</a> (GeneratedMessageReflection, defined in generated_message.h), and all Messages of a particular class should share the same <a href=google.protobuf.message#Reflection>Reflection</a> object (though you should not rely on the latter fact).</p><p>There are several ways that these methods can be used incorrectly. For example, any of the following conditions will lead to undefined results (probably assertion failures):</p><ul><li>The <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> is not a field of this message type.</li><li>The method called is not appropriate for the field's type. For each field type in FieldDescriptor::TYPE_*, there is only one Get*() method, one Set*() method, and one Add*() method that is valid for that type. It should be obvious which (except maybe for TYPE_BYTES, which are represented using strings in C++).</li><li>A Get*() or Set*() method for singular fields is called on a repeated field.</li><li>GetRepeated*(), SetRepeated*(), or Add*() is called on a non-repeated field.</li><li>The <a href=google.protobuf.message#Message>Message</a> object passed to any method is not of the right type for this <a href=google.protobuf.message#Reflection>Reflection</a> object (i.e. message.GetReflection() != reflection).</li></ul><p>You might wonder why there is not any abstract representation for a field of arbitrary type. E.g., why isn't there just a "GetField()" method that returns "const Field&", where "Field" is some class with accessors like "GetInt32Value()". The problem is that someone would have to deal with allocating these Field objects. For generated message classes, having to allocate space for an additional object to wrap every field would at least double the message's memory footprint, probably worse. Allocating the objects on-demand, on the other hand, would be expensive and prone to memory leaks. So, instead we ended up with this flat interface.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> &</code></td><td style=border-left-width:0 id=Reflection.GetUnknownFields><div style=padding-left:16px;text-indent:-16px><code><b>GetUnknownFields</b>(const <a href=google.protobuf.message#Message>Message</a> & message) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> for the message. <a href=#Reflection.GetUnknownFields.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> *</code></td><td style=border-left-width:0 id=Reflection.MutableUnknownFields><div style=padding-left:16px;text-indent:-16px><code><b>MutableUnknownFields</b>(<a href=google.protobuf.message#Message>Message</a> * message) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get a mutable pointer to the <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> for the message. <a href=#Reflection.MutableUnknownFields.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>size_t</code></td><td style=border-left-width:0 id=Reflection.SpaceUsedLong><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsedLong</b>(const <a href=google.protobuf.message#Message>Message</a> & message) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Estimate the amount of memory used by the message object.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Reflection.SpaceUsed><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsed</b>(const <a href=google.protobuf.message#Message>Message</a> & message) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Reflection.HasField><div style=padding-left:16px;text-indent:-16px><code><b>HasField</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Check if the given non-repeated field is set.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Reflection.FieldSize><div style=padding-left:16px;text-indent:-16px><code><b>FieldSize</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the number of elements of a repeated field.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.ClearField><div style=padding-left:16px;text-indent:-16px><code><b>ClearField</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Clear the value of a field, so that <a href=google.protobuf.message#Reflection.HasField>HasField()</a> returns false or <a href=google.protobuf.message#Reflection.FieldSize>FieldSize()</a> returns zero.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Reflection.HasOneof><div style=padding-left:16px;text-indent:-16px><code><b>HasOneof</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#OneofDescriptor>OneofDescriptor</a> * oneof_descriptor) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Check if the oneof is set. <a href=#Reflection.HasOneof.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.ClearOneof><div style=padding-left:16px;text-indent:-16px><code><b>ClearOneof</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#OneofDescriptor>OneofDescriptor</a> * oneof_descriptor) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=Reflection.GetOneofFieldDescriptor><div style=padding-left:16px;text-indent:-16px><code><b>GetOneofFieldDescriptor</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#OneofDescriptor>OneofDescriptor</a> * oneof_descriptor) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the field descriptor if the oneof is set. nullptr otherwise.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.RemoveLast><div style=padding-left:16px;text-indent:-16px><code><b>RemoveLast</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Removes the last element of a repeated field. <a href=#Reflection.RemoveLast.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_FUTURE_MUST_USE_RESULT <a href=google.protobuf.message#Message>Message</a> *</code></td><td style=border-left-width:0 id=Reflection.ReleaseLast><div style=padding-left:16px;text-indent:-16px><code><b>ReleaseLast</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Removes the last element of a repeated message field, and returns the pointer to the caller. <a href=#Reflection.ReleaseLast.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.Swap><div style=padding-left:16px;text-indent:-16px><code><b>Swap</b>(<a href=google.protobuf.message#Message>Message</a> * message1, <a href=google.protobuf.message#Message>Message</a> * message2) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Swap the complete contents of two messages.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SwapFields><div style=padding-left:16px;text-indent:-16px><code><b>SwapFields</b>(<a href=google.protobuf.message#Message>Message</a> * message1, <a href=google.protobuf.message#Message>Message</a> * message2, const std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > & fields) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Swap fields listed in fields vector of two messages.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SwapElements><div style=padding-left:16px;text-indent:-16px><code><b>SwapElements</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index1, int index2) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Swap two elements of a repeated field.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.ListFields><div style=padding-left:16px;text-indent:-16px><code><b>ListFields</b>(const <a href=google.protobuf.message#Message>Message</a> & message, std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>List all fields of the message which are currently set, except for unknown fields, but including extension known to the parser (i.e. <a href=#Reflection.ListFields.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>&lt; <a href=google.protobuf.message#Message>Message</a> > &</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedPtrFieldInternal><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedPtrFieldInternal</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>&lt; <a href=google.protobuf.message#Message>Message</a> > *</code></td><td style=border-left-width:0 id=Reflection.MutableRepeatedPtrFieldInternal><div style=padding-left:16px;text-indent:-16px><code><b>MutableRepeatedPtrFieldInternal</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Singular field getters</h3><div style=font-style:italic;font-weight:400>These get the value of a non-repeated field. They return the default value for fields that aren't set.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>int32</code></td><td style=border-left-width:0 id=Reflection.GetInt32><div style=padding-left:16px;text-indent:-16px><code><b>GetInt32</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int64</code></td><td style=border-left-width:0 id=Reflection.GetInt64><div style=padding-left:16px;text-indent:-16px><code><b>GetInt64</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint32</code></td><td style=border-left-width:0 id=Reflection.GetUInt32><div style=padding-left:16px;text-indent:-16px><code><b>GetUInt32</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint64</code></td><td style=border-left-width:0 id=Reflection.GetUInt64><div style=padding-left:16px;text-indent:-16px><code><b>GetUInt64</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>float</code></td><td style=border-left-width:0 id=Reflection.GetFloat><div style=padding-left:16px;text-indent:-16px><code><b>GetFloat</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>double</code></td><td style=border-left-width:0 id=Reflection.GetDouble><div style=padding-left:16px;text-indent:-16px><code><b>GetDouble</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Reflection.GetBool><div style=padding-left:16px;text-indent:-16px><code><b>GetBool</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=Reflection.GetString><div style=padding-left:16px;text-indent:-16px><code><b>GetString</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *</code></td><td style=border-left-width:0 id=Reflection.GetEnum><div style=padding-left:16px;text-indent:-16px><code><b>GetEnum</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Reflection.GetEnumValue><div style=padding-left:16px;text-indent:-16px><code><b>GetEnumValue</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.message#Reflection.GetEnumValue>GetEnumValue()</a> returns an enum field's value as an integer rather than an EnumValueDescriptor*. <a href=#Reflection.GetEnumValue.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.message#Message>Message</a> &</code></td><td style=border-left-width:0 id=Reflection.GetMessage><div style=padding-left:16px;text-indent:-16px><code><b>GetMessage</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, <a href=google.protobuf.message#MessageFactory>MessageFactory</a> * factory = nullptr) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.message#Reflection.MutableMessage>MutableMessage()</a> for the meaning of the "factory" parameter.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=Reflection.GetStringReference><div style=padding-left:16px;text-indent:-16px><code><b>GetStringReference</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, std::string * scratch) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get a string value without copying, if possible. <a href=#Reflection.GetStringReference.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Singular field mutators</h3><div style=font-style:italic;font-weight:400>These mutate the value of a non-repeated field.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetInt32><div style=padding-left:16px;text-indent:-16px><code><b>SetInt32</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int32 value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetInt64><div style=padding-left:16px;text-indent:-16px><code><b>SetInt64</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int64 value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetUInt32><div style=padding-left:16px;text-indent:-16px><code><b>SetUInt32</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, uint32 value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetUInt64><div style=padding-left:16px;text-indent:-16px><code><b>SetUInt64</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, uint64 value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetFloat><div style=padding-left:16px;text-indent:-16px><code><b>SetFloat</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, float value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetDouble><div style=padding-left:16px;text-indent:-16px><code><b>SetDouble</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, double value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetBool><div style=padding-left:16px;text-indent:-16px><code><b>SetBool</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, bool value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetString><div style=padding-left:16px;text-indent:-16px><code><b>SetString</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, std::string value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetEnum><div style=padding-left:16px;text-indent:-16px><code><b>SetEnum</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> * value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetEnumValue><div style=padding-left:16px;text-indent:-16px><code><b>SetEnumValue</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int value) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Set an enum field's value with an integer rather than <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a>. <a href=#Reflection.SetEnumValue.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.message#Message>Message</a> *</code></td><td style=border-left-width:0 id=Reflection.MutableMessage><div style=padding-left:16px;text-indent:-16px><code><b>MutableMessage</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, <a href=google.protobuf.message#MessageFactory>MessageFactory</a> * factory = nullptr) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get a mutable pointer to a field with a message type. <a href=#Reflection.MutableMessage.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetAllocatedMessage><div style=padding-left:16px;text-indent:-16px><code><b>SetAllocatedMessage</b>(<a href=google.protobuf.message#Message>Message</a> * message, <a href=google.protobuf.message#Message>Message</a> * sub_message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Replaces the message specified by 'field' with the already-allocated object sub_message, passing ownership to the message. <a href=#Reflection.SetAllocatedMessage.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.UnsafeArenaSetAllocatedMessage><div style=padding-left:16px;text-indent:-16px><code><b>UnsafeArenaSetAllocatedMessage</b>(<a href=google.protobuf.message#Message>Message</a> * message, <a href=google.protobuf.message#Message>Message</a> * sub_message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Similar to <code>SetAllocatedMessage</code>, but omits all internal safety and ownership checks. <a href=#Reflection.UnsafeArenaSetAllocatedMessage.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_FUTURE_MUST_USE_RESULT <a href=google.protobuf.message#Message>Message</a> *</code></td><td style=border-left-width:0 id=Reflection.ReleaseMessage><div style=padding-left:16px;text-indent:-16px><code><b>ReleaseMessage</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, <a href=google.protobuf.message#MessageFactory>MessageFactory</a> * factory = nullptr) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Releases the message specified by 'field' and returns the pointer, <a href=google.protobuf.message#Reflection.ReleaseMessage>ReleaseMessage()</a> will return the message the message object if it exists. <a href=#Reflection.ReleaseMessage.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.message#Message>Message</a> *</code></td><td style=border-left-width:0 id=Reflection.UnsafeArenaReleaseMessage><div style=padding-left:16px;text-indent:-16px><code><b>UnsafeArenaReleaseMessage</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, <a href=google.protobuf.message#MessageFactory>MessageFactory</a> * factory = nullptr) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Similar to <code>ReleaseMessage</code>, but omits all internal safety and ownership checks. <a href=#Reflection.UnsafeArenaReleaseMessage.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Repeated field getters</h3><div style=font-style:italic;font-weight:400>These get the value of one element of a repeated field.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>int32</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedInt32><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedInt32</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int64</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedInt64><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedInt64</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint32</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedUInt32><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedUInt32</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint64</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedUInt64><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedUInt64</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>float</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedFloat><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedFloat</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>double</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedDouble><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedDouble</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedBool><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedBool</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedString><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedString</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> *</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedEnum><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedEnum</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedEnumValue><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedEnumValue</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.message#Reflection.GetRepeatedEnumValue>GetRepeatedEnumValue()</a> returns an enum field's value as an integer rather than an EnumValueDescriptor*. <a href=#Reflection.GetRepeatedEnumValue.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.message#Message>Message</a> &</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedMessage><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedMessage</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedStringReference><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedStringReference</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index, std::string * scratch) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.message#Reflection.GetStringReference>GetStringReference()</a>, above.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Repeated field mutators</h3><div style=font-style:italic;font-weight:400>These mutate the value of one element of a repeated field.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetRepeatedInt32><div style=padding-left:16px;text-indent:-16px><code><b>SetRepeatedInt32</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index, int32 value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetRepeatedInt64><div style=padding-left:16px;text-indent:-16px><code><b>SetRepeatedInt64</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index, int64 value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetRepeatedUInt32><div style=padding-left:16px;text-indent:-16px><code><b>SetRepeatedUInt32</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index, uint32 value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetRepeatedUInt64><div style=padding-left:16px;text-indent:-16px><code><b>SetRepeatedUInt64</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index, uint64 value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetRepeatedFloat><div style=padding-left:16px;text-indent:-16px><code><b>SetRepeatedFloat</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index, float value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetRepeatedDouble><div style=padding-left:16px;text-indent:-16px><code><b>SetRepeatedDouble</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index, double value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetRepeatedBool><div style=padding-left:16px;text-indent:-16px><code><b>SetRepeatedBool</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index, bool value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetRepeatedString><div style=padding-left:16px;text-indent:-16px><code><b>SetRepeatedString</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index, std::string value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetRepeatedEnum><div style=padding-left:16px;text-indent:-16px><code><b>SetRepeatedEnum</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index, const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> * value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.SetRepeatedEnumValue><div style=padding-left:16px;text-indent:-16px><code><b>SetRepeatedEnumValue</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index, int value) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Set an enum field's value with an integer rather than <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a>. <a href=#Reflection.SetRepeatedEnumValue.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.message#Message>Message</a> *</code></td><td style=border-left-width:0 id=Reflection.MutableRepeatedMessage><div style=padding-left:16px;text-indent:-16px><code><b>MutableRepeatedMessage</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get a mutable pointer to an element of a repeated field with a message type.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Repeated field adders</h3><div style=font-style:italic;font-weight:400>These add an element to a repeated field.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.AddInt32><div style=padding-left:16px;text-indent:-16px><code><b>AddInt32</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int32 value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.AddInt64><div style=padding-left:16px;text-indent:-16px><code><b>AddInt64</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int64 value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.AddUInt32><div style=padding-left:16px;text-indent:-16px><code><b>AddUInt32</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, uint32 value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.AddUInt64><div style=padding-left:16px;text-indent:-16px><code><b>AddUInt64</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, uint64 value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.AddFloat><div style=padding-left:16px;text-indent:-16px><code><b>AddFloat</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, float value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.AddDouble><div style=padding-left:16px;text-indent:-16px><code><b>AddDouble</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, double value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.AddBool><div style=padding-left:16px;text-indent:-16px><code><b>AddBool</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, bool value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.AddString><div style=padding-left:16px;text-indent:-16px><code><b>AddString</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, std::string value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.AddEnum><div style=padding-left:16px;text-indent:-16px><code><b>AddEnum</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, const <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> * value) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.AddEnumValue><div style=padding-left:16px;text-indent:-16px><code><b>AddEnumValue</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int value) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Add an integer value to a repeated enum field rather than <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a>. <a href=#Reflection.AddEnumValue.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.message#Message>Message</a> *</code></td><td style=border-left-width:0 id=Reflection.AddMessage><div style=padding-left:16px;text-indent:-16px><code><b>AddMessage</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, <a href=google.protobuf.message#MessageFactory>MessageFactory</a> * factory = nullptr) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>See <a href=google.protobuf.message#Reflection.MutableMessage>MutableMessage()</a> for comments on the "factory" parameter.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Reflection.AddAllocatedMessage><div style=padding-left:16px;text-indent:-16px><code><b>AddAllocatedMessage</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, <a href=google.protobuf.message#Message>Message</a> * new_entry) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Appends an already-allocated object 'new_entry' to the repeated field specified by 'field' passing ownership to the message.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template RepeatedFieldRef&lt; T ></code></td><td style=border-left-width:0 id=Reflection.GetRepeatedFieldRef><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedFieldRef</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get a RepeatedFieldRef object that can be used to read the underlying repeated field. <a href=#Reflection.GetRepeatedFieldRef.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template MutableRepeatedFieldRef&lt; T ></code></td><td style=border-left-width:0 id=Reflection.GetMutableRepeatedFieldRef><div style=padding-left:16px;text-indent:-16px><code><b>GetMutableRepeatedFieldRef</b>(<a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message#Reflection.GetRepeatedFieldRef>GetRepeatedFieldRef()</a> but return an object that can also be used manipulate the underlying repeated field.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template const <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a>&lt; T > &</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedField><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedField</b>(const <a href=google.protobuf.message#Message>Message</a> & msg, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * d) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>DEPRECATED. <a href=#Reflection.GetRepeatedField.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a>&lt; T > *</code></td><td style=border-left-width:0 id=Reflection.MutableRepeatedField><div style=padding-left:16px;text-indent:-16px><code><b>MutableRepeatedField</b>(<a href=google.protobuf.message#Message>Message</a> * msg, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * d) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>DEPRECATED. <a href=#Reflection.MutableRepeatedField.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template const <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>&lt; T > &</code></td><td style=border-left-width:0 id=Reflection.GetRepeatedPtrField><div style=padding-left:16px;text-indent:-16px><code><b>GetRepeatedPtrField</b>(const <a href=google.protobuf.message#Message>Message</a> & msg, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * d) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>DEPRECATED. <a href=#Reflection.GetRepeatedPtrField.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>&lt; T > *</code></td><td style=border-left-width:0 id=Reflection.MutableRepeatedPtrField><div style=padding-left:16px;text-indent:-16px><code><b>MutableRepeatedPtrField</b>(<a href=google.protobuf.message#Message>Message</a> * msg, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * d) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>DEPRECATED. <a href=#Reflection.MutableRepeatedPtrField.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Extensions</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=Reflection.FindKnownExtensionByName><div style=padding-left:16px;text-indent:-16px><code><b>FindKnownExtensionByName</b>(const std::string & name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Try to find an extension of this message type by fully-qualified field name. <a href=#Reflection.FindKnownExtensionByName.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=Reflection.FindKnownExtensionByNumber><div style=padding-left:16px;text-indent:-16px><code><b>FindKnownExtensionByNumber</b>(int number) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Try to find an extension of this message type by field number. <a href=#Reflection.FindKnownExtensionByNumber.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Feature Flags</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=Reflection.SupportsUnknownEnumValues><div style=padding-left:16px;text-indent:-16px><code><b>SupportsUnknownEnumValues</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Does this message support storing arbitrary integer values in enum fields? If |true|, GetEnumValue/SetEnumValue and associated repeated-field versions take arbitrary integer values, and the legacy GetEnum() getter will dynamically create an <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> for any integer value without one. <a href=#Reflection.SupportsUnknownEnumValues.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.message#MessageFactory>MessageFactory</a> *</code></td><td style=border-left-width:0 id=Reflection.GetMessageFactory><div style=padding-left:16px;text-indent:-16px><code><b>GetMessageFactory</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the <a href=google.protobuf.message#MessageFactory>MessageFactory</a> associated with this message. <a href=#Reflection.GetMessageFactory.details>more...</a></div></td></tr></table><hr><h3 id=Reflection.GetUnknownFields.details><code>const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> &<br>&nbsp;&nbsp;&nbsp;&nbsp;Reflection::GetUnknownFields(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message) const</code></h3><div style=margin-left:16px><p>Get the <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> for the message.</p><p>This contains fields which were seen when the <a href=google.protobuf.message#Message>Message</a> was parsed but were not recognized according to the <a href=google.protobuf.message#Message>Message</a>'s definition.</p></div><hr><h3 id=Reflection.MutableUnknownFields.details><code><a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Reflection::MutableUnknownFields(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message) const</code></h3><div style=margin-left:16px><p>Get a mutable pointer to the <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> for the message.</p><p>This contains fields which were seen when the <a href=google.protobuf.message#Message>Message</a> was parsed but were not recognized according to the <a href=google.protobuf.message#Message>Message</a>'s definition.</p></div><hr><h3 id=Reflection.HasOneof.details><code>bool Reflection::HasOneof(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#OneofDescriptor>OneofDescriptor</a> * oneof_descriptor) const</code></h3><div style=margin-left:16px><p>Check if the oneof is set.</p><p>Returns true if any field in oneof is set, false otherwise.</p></div><hr><h3 id=Reflection.RemoveLast.details><code>void Reflection::RemoveLast(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></h3><div style=margin-left:16px><p>Removes the last element of a repeated field.</p><p>We don't provide a way to remove any element other than the last because it invites inefficient use, such as O(n^2) filtering loops that should have been O(n). If you want to remove an element other than the last, the best way to do it is to re-arrange the elements (using <a href=google.protobuf.message#Reflection.Swap>Swap()</a>) so that the one you want removed is at the end, then call <a href=google.protobuf.message#Reflection.RemoveLast>RemoveLast()</a>.</p></div><hr><h3 id=Reflection.ReleaseLast.details><code>PROTOBUF_FUTURE_MUST_USE_RESULT <a href=google.protobuf.message#Message>Message</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Reflection::ReleaseLast(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></h3><div style=margin-left:16px><p>Removes the last element of a repeated message field, and returns the pointer to the caller.</p><p>Caller takes ownership of the returned pointer.</p></div><hr><h3 id=Reflection.ListFields.details><code>void Reflection::ListFields(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > * output) const</code></h3><div style=margin-left:16px><p>List all fields of the message which are currently set, except for unknown fields, but including extension known to the parser (i.e.</p><p>compiled in). Singular fields will only be listed if HasField(field) would return true and repeated fields will only be listed if FieldSize(field) would return non-zero. Fields (both normal fields and extension fields) will be listed ordered by field number. Use <a href=google.protobuf.message#Reflection.GetUnknownFields>Reflection::GetUnknownFields()</a> or message.unknown_fields() to also get access to fields/extensions unknown to the parser.</p></div><hr><h3 id=Reflection.GetEnumValue.details><code>int Reflection::GetEnumValue(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></h3><div style=margin-left:16px><p><a href=google.protobuf.message#Reflection.GetEnumValue>GetEnumValue()</a> returns an enum field's value as an integer rather than an EnumValueDescriptor*.</p><p>If the integer value does not correspond to a known value descriptor, a new value descriptor is created. (Such a value will only be present when the new unknown-enum-value semantics are enabled for a message.)</p></div><hr><h3 id=Reflection.GetStringReference.details><code>const std::string &<br>&nbsp;&nbsp;&nbsp;&nbsp;Reflection::GetStringReference(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * scratch) const</code></h3><div style=margin-left:16px><p>Get a string value without copying, if possible.</p><p>GetString() necessarily returns a copy of the string. This can be inefficient when the std::string is already stored in a std::string object in the underlying message. <a href=google.protobuf.message#Reflection.GetStringReference>GetStringReference()</a> will return a reference to the underlying std::string in this case. Otherwise, it will copy the string into *scratch and return that.</p><p>Note: It is perfectly reasonable and useful to write code like:</p><pre>str = reflection-&gt;GetStringReference(message, field, &amp;str);</pre><p>This line would ensure that only one copy of the string is made regardless of the field's underlying representation. When initializing a newly-constructed string, though, it's just as fast and more readable to use code like:</p><pre>std::string str = reflection-&gt;GetString(message, field);</pre></div><hr><h3 id=Reflection.SetEnumValue.details><code>void Reflection::SetEnumValue(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int value) const</code></h3><div style=margin-left:16px><p>Set an enum field's value with an integer rather than <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a>.</p><p>For proto3 this is just setting the enum field to the value specified, for proto2 it's more complicated. If value is a known enum value the field is set as usual. If the value is unknown then it is added to the unknown field set. Note this matches the behavior of parsing unknown enum values. If multiple calls with unknown values happen than they are all added to the unknown field set in order of the calls.</p></div><hr><h3 id=Reflection.MutableMessage.details><code><a href=google.protobuf.message#Message>Message</a> * Reflection::MutableMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#MessageFactory>MessageFactory</a> * factory = nullptr) const</code></h3><div style=margin-left:16px><p>Get a mutable pointer to a field with a message type.</p><p>If a <a href=google.protobuf.message#MessageFactory>MessageFactory</a> is provided, it will be used to construct instances of the sub-message; otherwise, the default factory is used. If the field is an extension that does not live in the same pool as the containing message's descriptor (e.g. it lives in an overlay pool), then a <a href=google.protobuf.message#MessageFactory>MessageFactory</a> must be provided. If you have no idea what that meant, then you probably don't need to worry about it (don't provide a <a href=google.protobuf.message#MessageFactory>MessageFactory</a>). WARNING: If the <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> is for a compiled-in extension, then factory->GetPrototype(field->message_type()) MUST return an instance of the compiled-in class for this type, NOT DynamicMessage.</p></div><hr><h3 id=Reflection.SetAllocatedMessage.details><code>void Reflection::SetAllocatedMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * sub_message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></h3><div style=margin-left:16px><p>Replaces the message specified by 'field' with the already-allocated object sub_message, passing ownership to the message.</p><p>If the field contained a message, that message is deleted. If sub_message is nullptr, the field is cleared.</p></div><hr><h3 id=Reflection.UnsafeArenaSetAllocatedMessage.details><code>void Reflection::UnsafeArenaSetAllocatedMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * sub_message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></h3><div style=margin-left:16px><p>Similar to <code>SetAllocatedMessage</code>, but omits all internal safety and ownership checks.</p><p>This method should only be used when the objects are on the same arena or paired with a call to <code>UnsafeArenaReleaseMessage</code>.</p></div><hr><h3 id=Reflection.ReleaseMessage.details><code>PROTOBUF_FUTURE_MUST_USE_RESULT <a href=google.protobuf.message#Message>Message</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Reflection::ReleaseMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#MessageFactory>MessageFactory</a> * factory = nullptr) const</code></h3><div style=margin-left:16px><p>Releases the message specified by 'field' and returns the pointer, <a href=google.protobuf.message#Reflection.ReleaseMessage>ReleaseMessage()</a> will return the message the message object if it exists.</p><p>Otherwise, it may or may not return nullptr. In any case, if the return value is non-null, the caller takes ownership of the pointer. If the field existed (<a href=google.protobuf.message#Reflection.HasField>HasField()</a> is true), then the returned pointer will be the same as the pointer returned by <a href=google.protobuf.message#Reflection.MutableMessage>MutableMessage()</a>. This function has the same effect as <a href=google.protobuf.message#Reflection.ClearField>ClearField()</a>.</p></div><hr><h3 id=Reflection.UnsafeArenaReleaseMessage.details><code><a href=google.protobuf.message#Message>Message</a> * Reflection::UnsafeArenaReleaseMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#MessageFactory>MessageFactory</a> * factory = nullptr) const</code></h3><div style=margin-left:16px><p>Similar to <code>ReleaseMessage</code>, but omits all internal safety and ownership checks.</p><p>This method should only be used when the objects are on the same arena or paired with a call to <code>UnsafeArenaSetAllocatedMessage</code>.</p></div><hr><h3 id=Reflection.GetRepeatedEnumValue.details><code>int Reflection::GetRepeatedEnumValue(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p><a href=google.protobuf.message#Reflection.GetRepeatedEnumValue>GetRepeatedEnumValue()</a> returns an enum field's value as an integer rather than an EnumValueDescriptor*.</p><p>If the integer value does not correspond to a known value descriptor, a new value descriptor is created. (Such a value will only be present when the new unknown-enum-value semantics are enabled for a message.)</p></div><hr><h3 id=Reflection.SetRepeatedEnumValue.details><code>void Reflection::SetRepeatedEnumValue(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int value) const</code></h3><div style=margin-left:16px><p>Set an enum field's value with an integer rather than <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a>.</p><p>For proto3 this is just setting the enum field to the value specified, for proto2 it's more complicated. If value is a known enum value the field is set as usual. If the value is unknown then it is added to the unknown field set. Note this matches the behavior of parsing unknown enum values. If multiple calls with unknown values happen than they are all added to the unknown field set in order of the calls.</p></div><hr><h3 id=Reflection.AddEnumValue.details><code>void Reflection::AddEnumValue(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int value) const</code></h3><div style=margin-left:16px><p>Add an integer value to a repeated enum field rather than <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a>.</p><p>For proto3 this is just setting the enum field to the value specified, for proto2 it's more complicated. If value is a known enum value the field is set as usual. If the value is unknown then it is added to the unknown field set. Note this matches the behavior of parsing unknown enum values. If multiple calls with unknown values happen than they are all added to the unknown field set in order of the calls.</p></div><hr><h3 id=Reflection.GetRepeatedFieldRef.details><code>template RepeatedFieldRef&lt; T ><br>&nbsp;&nbsp;&nbsp;&nbsp;Reflection::GetRepeatedFieldRef(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></h3><div style=margin-left:16px><p>Get a RepeatedFieldRef object that can be used to read the underlying repeated field.</p><p>The type parameter T must be set according to the field's cpp type. The following table shows the mapping from cpp type to acceptable T.</p><pre>field-&gt;cpp_type()      T
CPPTYPE_INT32        int32
CPPTYPE_UINT32       uint32
CPPTYPE_INT64        int64
CPPTYPE_UINT64       uint64
CPPTYPE_DOUBLE       double
CPPTYPE_FLOAT        float
CPPTYPE_BOOL         bool
CPPTYPE_ENUM         generated enum type or int32
CPPTYPE_STRING       std::string
CPPTYPE_MESSAGE      generated message type or google::protobuf::Message</pre><p>A RepeatedFieldRef object can be copied and the resulted object will point to the same repeated field in the same message. The object can be used as long as the message is not destroyed.</p><p>Note that to use this method users need to include the header file "reflection.h" (which defines the RepeatedFieldRef class templates).</p></div><hr><h3 id=Reflection.GetRepeatedField.details><code>template const <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a>&lt; T > &<br>&nbsp;&nbsp;&nbsp;&nbsp;Reflection::GetRepeatedField(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & msg,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * d) const</code></h3><div style=margin-left:16px><p>DEPRECATED.</p><p>Please use <a href=google.protobuf.message#Reflection.GetRepeatedFieldRef>GetRepeatedFieldRef()</a>.</p><p>for T = Cord and all protobuf scalar types except enums.</p></div><hr><h3 id=Reflection.MutableRepeatedField.details><code>template <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a>&lt; T > *<br>&nbsp;&nbsp;&nbsp;&nbsp;Reflection::MutableRepeatedField(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * msg,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * d) const</code></h3><div style=margin-left:16px><p>DEPRECATED.</p><p>Please use <a href=google.protobuf.message#Reflection.GetMutableRepeatedFieldRef>GetMutableRepeatedFieldRef()</a>.</p><p>for T = Cord and all protobuf scalar types except enums.</p></div><hr><h3 id=Reflection.GetRepeatedPtrField.details><code>template const <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>&lt; T > &<br>&nbsp;&nbsp;&nbsp;&nbsp;Reflection::GetRepeatedPtrField(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & msg,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * d) const</code></h3><div style=margin-left:16px><p>DEPRECATED.</p><p>Please use <a href=google.protobuf.message#Reflection.GetRepeatedFieldRef>GetRepeatedFieldRef()</a>.</p><p>for T = std::string, google::protobuf::internal::StringPieceField</p><pre>google::protobuf::Message &amp; descendants.</pre></div><hr><h3 id=Reflection.MutableRepeatedPtrField.details><code>template <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>&lt; T > *<br>&nbsp;&nbsp;&nbsp;&nbsp;Reflection::MutableRepeatedPtrField(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * msg,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * d) const</code></h3><div style=margin-left:16px><p>DEPRECATED.</p><p>Please use <a href=google.protobuf.message#Reflection.GetMutableRepeatedFieldRef>GetMutableRepeatedFieldRef()</a>.</p><p>for T = std::string, google::protobuf::internal::StringPieceField</p><pre>google::protobuf::Message &amp; descendants.</pre></div><hr><h3 id=Reflection.FindKnownExtensionByName.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Reflection::FindKnownExtensionByName(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & name) const</code></h3><div style=margin-left:16px><p>Try to find an extension of this message type by fully-qualified field name.</p><p>Returns nullptr if no extension is known for this name or number.</p></div><hr><h3 id=Reflection.FindKnownExtensionByNumber.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Reflection::FindKnownExtensionByNumber(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int number) const</code></h3><div style=margin-left:16px><p>Try to find an extension of this message type by field number.</p><p>Returns nullptr if no extension is known for this name or number.</p></div><hr><h3 id=Reflection.SupportsUnknownEnumValues.details><code>bool Reflection::SupportsUnknownEnumValues() const</code></h3><div style=margin-left:16px><p>Does this message support storing arbitrary integer values in enum fields? If |true|, GetEnumValue/SetEnumValue and associated repeated-field versions take arbitrary integer values, and the legacy GetEnum() getter will dynamically create an <a href=google.protobuf.descriptor#EnumValueDescriptor>EnumValueDescriptor</a> for any integer value without one.</p><p>If |false|, setting an unknown enum value via the integer-based setters results in undefined behavior (in practice, GOOGLE_DCHECK-fails).</p><p>Generic code that uses reflection to handle messages with enum fields should check this flag before using the integer-based setter, and either downgrade to a compatible value or use the <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> if not. For example:</p><pre>int new_value = GetValueFromApplicationLogic();
if (reflection-&gt;SupportsUnknownEnumValues()) {
  reflection-&gt;SetEnumValue(message, field, new_value);
} else {
  if (field_descriptor-&gt;enum_type()-&gt;
          FindValueByNumber(new_value) != nullptr) {
    reflection-&gt;SetEnumValue(message, field, new_value);
  } else if (emit_unknown_enum_values) {
    reflection-&gt;MutableUnknownFields(message)-&gt;AddVarint(
        field-&gt;number(), new_value);
  } else {
    // convert value to a compatible/default value.
    new_value = CompatibleDowngrade(new_value);
    reflection-&gt;SetEnumValue(message, field, new_value);
  }
}</pre></div><hr><h3 id=Reflection.GetMessageFactory.details><code><a href=google.protobuf.message#MessageFactory>MessageFactory</a> * Reflection::GetMessageFactory() const</code></h3><div style=margin-left:16px><p>Returns the <a href=google.protobuf.message#MessageFactory>MessageFactory</a> associated with this message.</p><p>This can be useful for determining if a message is a generated message or not, for example:</p><pre>if (message-&gt;GetReflection()-&gt;GetMessageFactory() ==
    google::protobuf::MessageFactory::generated_factory()) {
  // This is a generated message.
}</pre><p>It can also be used to create more messages of this type, though <a href=google.protobuf.message#Message.New>Message::New()</a> is an easier way to accomplish this.</p></div><h2 id=MessageFactory>class MessageFactory</h2><p><code>#include &lt;<a href=#>google/protobuf/message.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Abstract interface for a factory for message objects.</p><p>Known subclasses:</p><ul><li><code><a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a></code></li></ul><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=MessageFactory.MessageFactory><div style=padding-left:16px;text-indent:-16px><code><b>MessageFactory</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=MessageFactory.~MessageFactory><div style=padding-left:16px;text-indent:-16px><code><b>~MessageFactory</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual const <a href=google.protobuf.message#Message>Message</a> *</code></td><td style=border-left-width:0 id=MessageFactory.GetPrototype><div style=padding-left:16px;text-indent:-16px><code><b>GetPrototype</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * type) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Given a <a href=google.protobuf.descriptor#Descriptor>Descriptor</a>, gets or constructs the default (prototype) <a href=google.protobuf.message#Message>Message</a> of that type. <a href=#MessageFactory.GetPrototype.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static <a href=google.protobuf.message#MessageFactory>MessageFactory</a> *</code></td><td style=border-left-width:0 id=MessageFactory.generated_factory><div style=padding-left:16px;text-indent:-16px><code><b>generated_factory</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets a <a href=google.protobuf.message#MessageFactory>MessageFactory</a> which supports all generated, compiled-in messages. <a href=#MessageFactory.generated_factory.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=MessageFactory.InternalRegisterGeneratedFile><div style=padding-left:16px;text-indent:-16px><code><b>InternalRegisterGeneratedFile</b>(const google::protobuf::internal::DescriptorTable * table)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For internal use only: Registers a .proto file at static initialization time, to be placed in generated_factory. <a href=#MessageFactory.InternalRegisterGeneratedFile.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=MessageFactory.InternalRegisterGeneratedMessage><div style=padding-left:16px;text-indent:-16px><code><b>InternalRegisterGeneratedMessage</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor, const <a href=google.protobuf.message#Message>Message</a> * prototype)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For internal use only: Registers a message type. <a href=#MessageFactory.InternalRegisterGeneratedMessage.details>more...</a></div></td></tr></table><hr><h3 id=MessageFactory.GetPrototype.details><code>virtual const <a href=google.protobuf.message#Message>Message</a> * MessageFactory::GetPrototype(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * type) = 0</code></h3><div style=margin-left:16px><p>Given a <a href=google.protobuf.descriptor#Descriptor>Descriptor</a>, gets or constructs the default (prototype) <a href=google.protobuf.message#Message>Message</a> of that type.</p><p>You can then call that message's New() method to construct a mutable message of that type.</p><p>Calling this method twice with the same <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> returns the same object. The returned object remains property of the factory. Also, any objects created by calling the prototype's New() method share some data with the prototype, so these must be destroyed before the <a href=google.protobuf.message#MessageFactory>MessageFactory</a> is destroyed.</p><p>The given descriptor must outlive the returned message, and hence must outlive the <a href=google.protobuf.message#MessageFactory>MessageFactory</a>.</p><p>Some implementations do not support all types. <a href=google.protobuf.message#MessageFactory.GetPrototype>GetPrototype()</a> will return nullptr if the descriptor passed in is not supported.</p><p>This method may or may not be thread-safe depending on the implementation. Each implementation should document its own degree thread-safety.</p></div><hr><h3 id=MessageFactory.generated_factory.details><code>static <a href=google.protobuf.message#MessageFactory>MessageFactory</a> * MessageFactory::generated_factory()</code></h3><div style=margin-left:16px><p>Gets a <a href=google.protobuf.message#MessageFactory>MessageFactory</a> which supports all generated, compiled-in messages.</p><p>In other words, for any compiled-in type FooMessage, the following is true:</p><pre>MessageFactory::generated_factory()-&gt;GetPrototype(
  FooMessage::descriptor()) == FooMessage::default_instance()</pre><p>This factory supports all types which are found in <a href=google.protobuf.descriptor#DescriptorPool.generated_pool>DescriptorPool::generated_pool()</a>. If given a descriptor from any other pool, <a href=google.protobuf.message#MessageFactory.GetPrototype>GetPrototype()</a> will return nullptr. (You can also check if a descriptor is for a generated message by checking if descriptor->file()->pool() == <a href=google.protobuf.descriptor#DescriptorPool.generated_pool>DescriptorPool::generated_pool()</a>.)</p><p>This factory is 100% thread-safe; calling <a href=google.protobuf.message#MessageFactory.GetPrototype>GetPrototype()</a> does not modify any shared data.</p><p>This factory is a singleton. The caller must not delete the object.</p></div><hr><h3 id=MessageFactory.InternalRegisterGeneratedFile.details><code>static void MessageFactory::InternalRegisterGeneratedFile(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const google::protobuf::internal::DescriptorTable * table)</code></h3><div style=margin-left:16px><p>For internal use only: Registers a .proto file at static initialization time, to be placed in generated_factory.</p><p>The first time <a href=google.protobuf.message#MessageFactory.GetPrototype>GetPrototype()</a> is called with a descriptor from this file, |register_messages| will be called, with the file name as the parameter. It must call <a href=google.protobuf.message#MessageFactory.InternalRegisterGeneratedMessage>InternalRegisterGeneratedMessage()</a> (below) to register each message type in the file. This strange mechanism is necessary because descriptors are built lazily, so we can't register types by their descriptor until we know that the descriptor exists. |filename| must be a permanent string.</p></div><hr><h3 id=MessageFactory.InternalRegisterGeneratedMessage.details><code>static void MessageFactory::InternalRegisterGeneratedMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> * prototype)</code></h3><div style=margin-left:16px><p>For internal use only: Registers a message type.</p><p>Called only by the functions which are registered with <a href=google.protobuf.message#MessageFactory.InternalRegisterGeneratedFile>InternalRegisterGeneratedFile()</a>, above.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-713da57988bf3e81d689166d1bae3a3e>1.4.33 -</h1><html devsite><head><title>message_lite.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>message_lite.h</h1><p><code>#include &lt;google/protobuf/message_lite.h><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Defines <a href=google.protobuf.message_lite#MessageLite>MessageLite</a>, the abstract interface implemented by all (lite and non-lite) protocol message objects.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#MessageLite>MessageLite</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Interface to light weight protocol messages.</div></td></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=ShutdownProtobufLibrary><div style=padding-left:16px;text-indent:-16px><code><b>ShutdownProtobufLibrary</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Shut down the entire protocol buffers library, deleting all static-duration objects allocated by the library or by generated .pb.cc files. <a href=#ShutdownProtobufLibrary.details>more...</a></div></td></tr></table><hr><h3 id=ShutdownProtobufLibrary.details><code>void protobuf::ShutdownProtobufLibrary()</code></h3><div style=margin-left:16px><p>Shut down the entire protocol buffers library, deleting all static-duration objects allocated by the library or by generated .pb.cc files.</p><p>There are two reasons you might want to call this:</p><ul><li>You use a draconian definition of "memory leak" in which you expect every single malloc() to have a corresponding free(), even for objects which live until program exit.</li><li>You are writing a dynamically-loaded library which needs to clean up after itself when the library is unloaded.</li></ul><p>It is safe to call this multiple times. However, it is not safe to use any other part of the protocol buffers library after <a href=google.protobuf.message_lite#ShutdownProtobufLibrary>ShutdownProtobufLibrary()</a> has been called. Furthermore this call is not thread safe, user needs to synchronize multiple calls.</p></div><h2 id=MessageLite>class MessageLite</h2><p><code>#include &lt;<a href=#>google/protobuf/message_lite.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Interface to light weight protocol messages.</p><p>This interface is implemented by all protocol message objects. Non-lite messages additionally implement the <a href=google.protobuf.message#Message>Message</a> interface, which is a subclass of <a href=google.protobuf.message_lite#MessageLite>MessageLite</a>. Use <a href=google.protobuf.message_lite#MessageLite>MessageLite</a> instead when you only need the subset of features which it supports &ndash; namely, nothing that uses descriptors or reflection. You can instruct the protocol compiler to generate classes which implement only <a href=google.protobuf.message_lite#MessageLite>MessageLite</a>, not the full <a href=google.protobuf.message#Message>Message</a> interface, by adding the following line to the .proto file:</p><pre>option optimize_for = LITE_RUNTIME;</pre><p>This is particularly useful on resource-constrained systems where the full protocol buffers runtime library is too big.</p><p>Note that on non-constrained systems (e.g. servers) when you need to link in lots of protocol definitions, a better way to reduce total code footprint is to use optimize_for = CODE_SIZE. This will make the generated code smaller while still supporting all the same features (at the expense of speed). optimize_for = LITE_RUNTIME is best when you only have a small number of message types linked into your binary, in which case the size of the protocol buffers runtime itself is the biggest problem.</p><p>Users must not derive from this class. Only the protocol compiler and the internal library are allowed to create subclasses.</p><p>Known subclasses:</p><ul><li><code><a href=google.protobuf.message#Message>Message</a></code></li></ul><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=MessageLite.ParseFlags><div style=padding-left:16px;text-indent:-16px><code><b>ParseFlags</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#MessageLite.ParseFlags.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected internal::InternalMetadata</code></td><td style=border-left-width:0 id=MessageLite._internal_metadata_><div style=padding-left:16px;text-indent:-16px><code><b>_internal_metadata_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr</code></td><td style=border-left-width:0 id=MessageLite.MessageLite><div style=padding-left:16px;text-indent:-16px><code><b>MessageLite</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=MessageLite.~MessageLite><div style=padding-left:16px;text-indent:-16px><code><b>~MessageLite</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template bool</code></td><td style=border-left-width:0 id=MessageLite.ParseFrom><div style=padding-left:16px;text-indent:-16px><code><b>ParseFrom</b>(const T & input)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual uint8 *</code></td><td style=border-left-width:0 id=MessageLite._InternalSerialize><div style=padding-left:16px;text-indent:-16px><code><b>_InternalSerialize</b>(uint8 * ptr, <a href=google.protobuf.io.coded_stream#EpsCopyOutputStream>io::EpsCopyOutputStream</a> * stream) const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Fast path when conditions match (ie. <a href=#MessageLite._InternalSerialize.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.IsInitializedWithErrors><div style=padding-left:16px;text-indent:-16px><code><b>IsInitializedWithErrors</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Identical to <a href=google.protobuf.message_lite#MessageLite.IsInitialized>IsInitialized()</a> except that it logs an error message.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected template static T *</code></td><td style=border-left-width:0 id=MessageLite.CreateMaybeMessage><div style=padding-left:16px;text-indent:-16px><code><b>CreateMaybeMessage</b>(<a href=google.protobuf.arena#Arena>Arena</a> * arena)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected explicit</code></td><td style=border-left-width:0 id=MessageLite.MessageLite><div style=padding-left:16px;text-indent:-16px><code><b>MessageLite</b>(<a href=google.protobuf.arena#Arena>Arena</a> * arena)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected <a href=google.protobuf.arena#Arena>Arena</a> *</code></td><td style=border-left-width:0 id=MessageLite.GetOwningArena><div style=padding-left:16px;text-indent:-16px><code><b>GetOwningArena</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the arena, if any, that directly owns this message and its internal memory (<a href=google.protobuf.arena#Arena.Own>Arena::Own</a> is different in that the arena doesn't directly own the internal memory). <a href=#MessageLite.GetOwningArena.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected <a href=google.protobuf.arena#Arena>Arena</a> *</code></td><td style=border-left-width:0 id=MessageLite.GetArenaForAllocation><div style=padding-left:16px;text-indent:-16px><code><b>GetArenaForAllocation</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the arena, used for allocating internal objects(e.g., child messages, etc), or owning incoming objects (e.g., set allocated).</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Basic Operations</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=MessageLite.GetTypeName><div style=padding-left:16px;text-indent:-16px><code><b>GetTypeName</b>() const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the name of this message type, e.g. "foo.bar.BazProto".</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual <a href=google.protobuf.message_lite#MessageLite>MessageLite</a> *</code></td><td style=border-left-width:0 id=MessageLite.New><div style=padding-left:16px;text-indent:-16px><code><b>New</b>() const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Construct a new instance of the same type. <a href=#MessageLite.New.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual <a href=google.protobuf.message_lite#MessageLite>MessageLite</a> *</code></td><td style=border-left-width:0 id=MessageLite.New><div style=padding-left:16px;text-indent:-16px><code><b>New</b>(<a href=google.protobuf.arena#Arena>Arena</a> * arena) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Construct a new instance on the arena. <a href=#MessageLite.New.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.arena#Arena>Arena</a> *</code></td><td style=border-left-width:0 id=MessageLite.GetArena><div style=padding-left:16px;text-indent:-16px><code><b>GetArena</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Same as GetOwningArena.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void *</code></td><td style=border-left-width:0 id=MessageLite.GetMaybeArenaPointer><div style=padding-left:16px;text-indent:-16px><code><b>GetMaybeArenaPointer</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get a pointer that may be equal to this message's arena, or may not be. <a href=#MessageLite.GetMaybeArenaPointer.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageLite.Clear><div style=padding-left:16px;text-indent:-16px><code><b>Clear</b>() = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Clear all fields of the message and set them to their default values. <a href=#MessageLite.Clear.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=MessageLite.IsInitialized><div style=padding-left:16px;text-indent:-16px><code><b>IsInitialized</b>() const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Quickly check if all required fields have values set.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=MessageLite.InitializationErrorString><div style=padding-left:16px;text-indent:-16px><code><b>InitializationErrorString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This is not implemented for Lite messages &ndash; it just returns "(cannot
determine missing fields for lite message)". <a href=#MessageLite.InitializationErrorString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageLite.CheckTypeAndMergeFrom><div style=padding-left:16px;text-indent:-16px><code><b>CheckTypeAndMergeFrom</b>(const <a href=google.protobuf.message_lite#MessageLite>MessageLite</a> & other) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If |other| is the exact same class as this, calls MergeFrom(). <a href=#MessageLite.CheckTypeAndMergeFrom.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=MessageLite.DebugString><div style=padding-left:16px;text-indent:-16px><code><b>DebugString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>These methods return a human-readable summary of the message. <a href=#MessageLite.DebugString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=MessageLite.ShortDebugString><div style=padding-left:16px;text-indent:-16px><code><b>ShortDebugString</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=MessageLite.Utf8DebugString><div style=padding-left:16px;text-indent:-16px><code><b>Utf8DebugString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.message_lite#MessageLite.DebugString>MessageLite::DebugString</a> is already Utf8 Safe. <a href=#MessageLite.Utf8DebugString.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Parsing</h3><div style=font-style:italic;font-weight:400><p>Methods for parsing in protocol buffer format.</p><p>Most of these are just simple wrappers around <a href=google.protobuf.message_lite#MessageLite.MergeFromCodedStream>MergeFromCodedStream()</a>. <a href=google.protobuf.message_lite#MessageLite.Clear>Clear()</a> will be called before merging the input.</p></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool</code></td><td style=border-left-width:0 id=MessageLite.ParseFromCodedStream><div style=padding-left:16px;text-indent:-16px><code><b>ParseFromCodedStream</b>(<a href=google.protobuf.io.coded_stream#CodedInputStream>io::CodedInputStream</a> * input)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Fill the message with a protocol buffer parsed from the given input stream. <a href=#MessageLite.ParseFromCodedStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool</code></td><td style=border-left-width:0 id=MessageLite.ParsePartialFromCodedStream><div style=padding-left:16px;text-indent:-16px><code><b>ParsePartialFromCodedStream</b>(<a href=google.protobuf.io.coded_stream#CodedInputStream>io::CodedInputStream</a> * input)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.ParseFromCodedStream>ParseFromCodedStream()</a>, but accepts messages that are missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool</code></td><td style=border-left-width:0 id=MessageLite.ParseFromZeroCopyStream><div style=padding-left:16px;text-indent:-16px><code><b>ParseFromZeroCopyStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * input)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Read a protocol buffer from the given zero-copy input stream. <a href=#MessageLite.ParseFromZeroCopyStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool</code></td><td style=border-left-width:0 id=MessageLite.ParsePartialFromZeroCopyStream><div style=padding-left:16px;text-indent:-16px><code><b>ParsePartialFromZeroCopyStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * input)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.ParseFromZeroCopyStream>ParseFromZeroCopyStream()</a>, but accepts messages that are missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool</code></td><td style=border-left-width:0 id=MessageLite.ParseFromFileDescriptor><div style=padding-left:16px;text-indent:-16px><code><b>ParseFromFileDescriptor</b>(int file_descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Parse a protocol buffer from a file descriptor. <a href=#MessageLite.ParseFromFileDescriptor.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool</code></td><td style=border-left-width:0 id=MessageLite.ParsePartialFromFileDescriptor><div style=padding-left:16px;text-indent:-16px><code><b>ParsePartialFromFileDescriptor</b>(int file_descriptor)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.ParseFromFileDescriptor>ParseFromFileDescriptor()</a>, but accepts messages that are missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool</code></td><td style=border-left-width:0 id=MessageLite.ParseFromIstream><div style=padding-left:16px;text-indent:-16px><code><b>ParseFromIstream</b>(std::istream * input)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Parse a protocol buffer from a C++ istream. <a href=#MessageLite.ParseFromIstream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool</code></td><td style=border-left-width:0 id=MessageLite.ParsePartialFromIstream><div style=padding-left:16px;text-indent:-16px><code><b>ParsePartialFromIstream</b>(std::istream * input)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.ParseFromIstream>ParseFromIstream()</a>, but accepts messages that are missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.MergePartialFromBoundedZeroCopyStream><div style=padding-left:16px;text-indent:-16px><code><b>MergePartialFromBoundedZeroCopyStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * input, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Read a protocol buffer from the given zero-copy input stream, expecting the message to be exactly "size" bytes long. <a href=#MessageLite.MergePartialFromBoundedZeroCopyStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.MergeFromBoundedZeroCopyStream><div style=padding-left:16px;text-indent:-16px><code><b>MergeFromBoundedZeroCopyStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * input, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like ParseFromBoundedZeroCopyStream(), but accepts messages that are missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool</code></td><td style=border-left-width:0 id=MessageLite.ParseFromBoundedZeroCopyStream><div style=padding-left:16px;text-indent:-16px><code><b>ParseFromBoundedZeroCopyStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * input, int size)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool</code></td><td style=border-left-width:0 id=MessageLite.ParsePartialFromBoundedZeroCopyStream><div style=padding-left:16px;text-indent:-16px><code><b>ParsePartialFromBoundedZeroCopyStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * input, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like ParseFromBoundedZeroCopyStream(), but accepts messages that are missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool</code></td><td style=border-left-width:0 id=MessageLite.ParseFromString><div style=padding-left:16px;text-indent:-16px><code><b>ParseFromString</b>(ConstStringParam data)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Parses a protocol buffer contained in a string. <a href=#MessageLite.ParseFromString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool</code></td><td style=border-left-width:0 id=MessageLite.ParsePartialFromString><div style=padding-left:16px;text-indent:-16px><code><b>ParsePartialFromString</b>(ConstStringParam data)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.ParseFromString>ParseFromString()</a>, but accepts messages that are missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool</code></td><td style=border-left-width:0 id=MessageLite.ParseFromArray><div style=padding-left:16px;text-indent:-16px><code><b>ParseFromArray</b>(const void * data, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Parse a protocol buffer contained in an array of bytes.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool</code></td><td style=border-left-width:0 id=MessageLite.ParsePartialFromArray><div style=padding-left:16px;text-indent:-16px><code><b>ParsePartialFromArray</b>(const void * data, int size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.ParseFromArray>ParseFromArray()</a>, but accepts messages that are missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.MergeFromCodedStream><div style=padding-left:16px;text-indent:-16px><code><b>MergeFromCodedStream</b>(<a href=google.protobuf.io.coded_stream#CodedInputStream>io::CodedInputStream</a> * input)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reads a protocol buffer from the stream and merges it into this <a href=google.protobuf.message#Message>Message</a>. <a href=#MessageLite.MergeFromCodedStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.MergePartialFromCodedStream><div style=padding-left:16px;text-indent:-16px><code><b>MergePartialFromCodedStream</b>(<a href=google.protobuf.io.coded_stream#CodedInputStream>io::CodedInputStream</a> * input)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.MergeFromCodedStream>MergeFromCodedStream()</a>, but succeeds even if required fields are missing in the input. <a href=#MessageLite.MergePartialFromCodedStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.MergeFromString><div style=padding-left:16px;text-indent:-16px><code><b>MergeFromString</b>(ConstStringParam data)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Merge a protocol buffer contained in a string.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Serialization</h3><div style=font-style:italic;font-weight:400><p>Methods for serializing in protocol buffer format.</p><p>Most of these are just simple wrappers around <a href=google.protobuf.message_lite#MessageLite.ByteSize>ByteSize()</a> and <a href=google.protobuf.message_lite#MessageLite.SerializeWithCachedSizes>SerializeWithCachedSizes()</a>.</p></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.SerializeToCodedStream><div style=padding-left:16px;text-indent:-16px><code><b>SerializeToCodedStream</b>(<a href=google.protobuf.io.coded_stream#CodedOutputStream>io::CodedOutputStream</a> * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write a protocol buffer of this message to the given output. <a href=#MessageLite.SerializeToCodedStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.SerializePartialToCodedStream><div style=padding-left:16px;text-indent:-16px><code><b>SerializePartialToCodedStream</b>(<a href=google.protobuf.io.coded_stream#CodedOutputStream>io::CodedOutputStream</a> * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.SerializeToCodedStream>SerializeToCodedStream()</a>, but allows missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.SerializeToZeroCopyStream><div style=padding-left:16px;text-indent:-16px><code><b>SerializeToZeroCopyStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Write the message to the given zero-copy output stream. <a href=#MessageLite.SerializeToZeroCopyStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.SerializePartialToZeroCopyStream><div style=padding-left:16px;text-indent:-16px><code><b>SerializePartialToZeroCopyStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.SerializeToZeroCopyStream>SerializeToZeroCopyStream()</a>, but allows missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.SerializeToString><div style=padding-left:16px;text-indent:-16px><code><b>SerializeToString</b>(std::string * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Serialize the message and store it in the given string. <a href=#MessageLite.SerializeToString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.SerializePartialToString><div style=padding-left:16px;text-indent:-16px><code><b>SerializePartialToString</b>(std::string * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.SerializeToString>SerializeToString()</a>, but allows missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.SerializeToArray><div style=padding-left:16px;text-indent:-16px><code><b>SerializeToArray</b>(void * data, int size) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Serialize the message and store it in the given byte array. <a href=#MessageLite.SerializeToArray.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.SerializePartialToArray><div style=padding-left:16px;text-indent:-16px><code><b>SerializePartialToArray</b>(void * data, int size) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.SerializeToArray>SerializeToArray()</a>, but allows missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=MessageLite.SerializeAsString><div style=padding-left:16px;text-indent:-16px><code><b>SerializeAsString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Make a string encoding the message. <a href=#MessageLite.SerializeAsString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string</code></td><td style=border-left-width:0 id=MessageLite.SerializePartialAsString><div style=padding-left:16px;text-indent:-16px><code><b>SerializePartialAsString</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.SerializeAsString>SerializeAsString()</a>, but allows missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.SerializeToFileDescriptor><div style=padding-left:16px;text-indent:-16px><code><b>SerializeToFileDescriptor</b>(int file_descriptor) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Serialize the message and write it to the given file descriptor. <a href=#MessageLite.SerializeToFileDescriptor.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.SerializePartialToFileDescriptor><div style=padding-left:16px;text-indent:-16px><code><b>SerializePartialToFileDescriptor</b>(int file_descriptor) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.SerializeToFileDescriptor>SerializeToFileDescriptor()</a>, but allows missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.SerializeToOstream><div style=padding-left:16px;text-indent:-16px><code><b>SerializeToOstream</b>(std::ostream * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Serialize the message and write it to the given C++ ostream. <a href=#MessageLite.SerializeToOstream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.SerializePartialToOstream><div style=padding-left:16px;text-indent:-16px><code><b>SerializePartialToOstream</b>(std::ostream * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.SerializeToOstream>SerializeToOstream()</a>, but allows missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.AppendToString><div style=padding-left:16px;text-indent:-16px><code><b>AppendToString</b>(std::string * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.SerializeToString>SerializeToString()</a>, but appends to the data to the string's existing contents. <a href=#MessageLite.AppendToString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageLite.AppendPartialToString><div style=padding-left:16px;text-indent:-16px><code><b>AppendPartialToString</b>(std::string * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.message_lite#MessageLite.AppendToString>AppendToString()</a>, but allows missing required fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual size_t</code></td><td style=border-left-width:0 id=MessageLite.ByteSizeLong><div style=padding-left:16px;text-indent:-16px><code><b>ByteSizeLong</b>() const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Computes the serialized size of the message. <a href=#MessageLite.ByteSizeLong.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=MessageLite.ByteSize><div style=padding-left:16px;text-indent:-16px><code><b>ByteSize</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Legacy <a href=google.protobuf.message_lite#MessageLite.ByteSize>ByteSize()</a> API.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageLite.SerializeWithCachedSizes><div style=padding-left:16px;text-indent:-16px><code><b>SerializeWithCachedSizes</b>(<a href=google.protobuf.io.coded_stream#CodedOutputStream>io::CodedOutputStream</a> * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Serializes the message without recomputing the size. <a href=#MessageLite.SerializeWithCachedSizes.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint8 *</code></td><td style=border-left-width:0 id=MessageLite.SerializeWithCachedSizesToArray><div style=padding-left:16px;text-indent:-16px><code><b>SerializeWithCachedSizesToArray</b>(uint8 * target) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like SerializeWithCachedSizes, but writes directly to *target, returning a pointer to the byte immediately after the last byte written. <a href=#MessageLite.SerializeWithCachedSizesToArray.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual int</code></td><td style=border-left-width:0 id=MessageLite.GetCachedSize><div style=padding-left:16px;text-indent:-16px><code><b>GetCachedSize</b>() const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the result of the last call to <a href=google.protobuf.message_lite#MessageLite.ByteSize>ByteSize()</a>. <a href=#MessageLite.GetCachedSize.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual const char *</code></td><td style=border-left-width:0 id=MessageLite._InternalParse><div style=padding-left:16px;text-indent:-16px><code><b>_InternalParse</b>(const char * , internal::ParseContext * )</code></div></td></tr></table><hr><h3 id=MessageLite.ParseFlags.details><code>enum MessageLite::ParseFlags {<br>&nbsp;&nbsp;kMerge = = 0,<br>&nbsp;&nbsp;kParse = = 1,<br>&nbsp;&nbsp;kMergePartial = = 2,<br>&nbsp;&nbsp;kParsePartial = = 3,<br>&nbsp;&nbsp;kMergeWithAliasing = = 4,<br>&nbsp;&nbsp;kParseWithAliasing = = 5,<br>&nbsp;&nbsp;kMergePartialWithAliasing = = 6,<br>&nbsp;&nbsp;kParsePartialWithAliasing = = 7<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>kMerge</td><td></td></tr><tr><td>kParse</td><td></td></tr><tr><td>kMergePartial</td><td></td></tr><tr><td>kParsePartial</td><td></td></tr><tr><td>kMergeWithAliasing</td><td></td></tr><tr><td>kParseWithAliasing</td><td></td></tr><tr><td>kMergePartialWithAliasing</td><td></td></tr><tr><td>kParsePartialWithAliasing</td><td></td></tr></table></div><hr><h3 id=MessageLite._InternalSerialize.details><code>virtual uint8 * MessageLite::_InternalSerialize(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8 * ptr,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.coded_stream#EpsCopyOutputStream>io::EpsCopyOutputStream</a> * stream) const = 0</code></h3><div style=margin-left:16px><p>Fast path when conditions match (ie.</p><p>non-deterministic) uint8* _InternalSerialize(uint8* ptr) const;</p></div><hr><h3 id=MessageLite.GetOwningArena.details><code>protected <a href=google.protobuf.arena#Arena>Arena</a> * MessageLite::GetOwningArena() const</code></h3><div style=margin-left:16px><p>Returns the arena, if any, that directly owns this message and its internal memory (<a href=google.protobuf.arena#Arena.Own>Arena::Own</a> is different in that the arena doesn't directly own the internal memory).</p><p>This method is used in proto's implementation for swapping, moving and setting allocated, for deciding whether the ownership of this message or its internal memory could be changed.</p></div><hr><h3 id=MessageLite.New.details><code>virtual <a href=google.protobuf.message_lite#MessageLite>MessageLite</a> * MessageLite::New() const = 0</code></h3><div style=margin-left:16px><p>Construct a new instance of the same type.</p><p>Ownership is passed to the caller.</p></div><hr><h3 id=MessageLite.New.details><code>virtual <a href=google.protobuf.message_lite#MessageLite>MessageLite</a> * MessageLite::New(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.arena#Arena>Arena</a> * arena) const</code></h3><div style=margin-left:16px><p>Construct a new instance on the arena.</p><p>Ownership is passed to the caller if arena is a NULL. Default implementation for backwards compatibility.</p></div><hr><h3 id=MessageLite.GetMaybeArenaPointer.details><code>void * MessageLite::GetMaybeArenaPointer() const</code></h3><div style=margin-left:16px><p>Get a pointer that may be equal to this message's arena, or may not be.</p><p>If the value returned by this method is equal to some arena pointer, then this message is on that arena; however, if this message is on some arena, this method may or may not return that arena's pointer. As a tradeoff, this method may be more efficient than <a href=google.protobuf.message_lite#MessageLite.GetArena>GetArena()</a>. The intent is to allow underlying representations that use e.g. tagged pointers to sometimes store the arena pointer directly, and sometimes in a more indirect way, and allow a fastpath comparison against the arena pointer when it's easy to obtain.</p></div><hr><h3 id=MessageLite.Clear.details><code>virtual void MessageLite::Clear() = 0</code></h3><div style=margin-left:16px><p>Clear all fields of the message and set them to their default values.</p><p><a href=google.protobuf.message_lite#MessageLite.Clear>Clear()</a> avoids freeing memory, assuming that any memory allocated to hold parts of the message will be needed again to hold the next message. If you actually want to free the memory used by a <a href=google.protobuf.message#Message>Message</a>, you must delete it.</p></div><hr><h3 id=MessageLite.InitializationErrorString.details><code>virtual std::string MessageLite::InitializationErrorString() const</code></h3><div style=margin-left:16px><p>This is not implemented for Lite messages &ndash; it just returns "(cannot
determine missing fields for lite message)".</p><p>However, it is implemented for full messages. See <a href=google.protobuf.message>message.h</a>.</p></div><hr><h3 id=MessageLite.CheckTypeAndMergeFrom.details><code>virtual void MessageLite::CheckTypeAndMergeFrom(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message_lite#MessageLite>MessageLite</a> & other) = 0</code></h3><div style=margin-left:16px><p>If |other| is the exact same class as this, calls MergeFrom().</p><p>Otherwise, results are undefined (probably crash).</p></div><hr><h3 id=MessageLite.DebugString.details><code>std::string MessageLite::DebugString() const</code></h3><div style=margin-left:16px><p>These methods return a human-readable summary of the message.</p><p>Note that since the <a href=google.protobuf.message_lite#MessageLite>MessageLite</a> interface does not support reflection, there is very little information that these methods can provide. They are shadowed by methods of the same name on the <a href=google.protobuf.message#Message>Message</a> interface which provide much more information. The methods here are intended primarily to facilitate code reuse for logic that needs to interoperate with both full and lite protos.</p><p>The format of the returned string is subject to change, so please do not assume it will remain stable over time.</p></div><hr><h3 id=MessageLite.Utf8DebugString.details><code>std::string MessageLite::Utf8DebugString() const</code></h3><div style=margin-left:16px><p><a href=google.protobuf.message_lite#MessageLite.DebugString>MessageLite::DebugString</a> is already Utf8 Safe.</p><p>This is to add compatibility with <a href=google.protobuf.message#Message>Message</a>.</p></div><hr><h3 id=MessageLite.ParseFromCodedStream.details><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool<br>&nbsp;&nbsp;&nbsp;&nbsp;MessageLite::ParseFromCodedStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.coded_stream#CodedInputStream>io::CodedInputStream</a> * input)</code></h3><div style=margin-left:16px><p>Fill the message with a protocol buffer parsed from the given input stream.</p><p>Returns false on a read error or if the input is in the wrong format. A successful return does not indicate the entire input is consumed, ensure you call ConsumedEntireMessage() to check that if applicable.</p></div><hr><h3 id=MessageLite.ParseFromZeroCopyStream.details><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool<br>&nbsp;&nbsp;&nbsp;&nbsp;MessageLite::ParseFromZeroCopyStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * input)</code></h3><div style=margin-left:16px><p>Read a protocol buffer from the given zero-copy input stream.</p><p>If successful, the entire input will be consumed.</p></div><hr><h3 id=MessageLite.ParseFromFileDescriptor.details><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool<br>&nbsp;&nbsp;&nbsp;&nbsp;MessageLite::ParseFromFileDescriptor(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int file_descriptor)</code></h3><div style=margin-left:16px><p>Parse a protocol buffer from a file descriptor.</p><p>If successful, the entire input will be consumed.</p></div><hr><h3 id=MessageLite.ParseFromIstream.details><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool<br>&nbsp;&nbsp;&nbsp;&nbsp;MessageLite::ParseFromIstream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::istream * input)</code></h3><div style=margin-left:16px><p>Parse a protocol buffer from a C++ istream.</p><p>If successful, the entire input will be consumed.</p></div><hr><h3 id=MessageLite.MergePartialFromBoundedZeroCopyStream.details><code>bool MessageLite::MergePartialFromBoundedZeroCopyStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * input,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size)</code></h3><div style=margin-left:16px><p>Read a protocol buffer from the given zero-copy input stream, expecting the message to be exactly "size" bytes long.</p><p>If successful, exactly this many bytes will have been consumed from the input.</p></div><hr><h3 id=MessageLite.ParseFromString.details><code>PROTOBUF_ATTRIBUTE_REINITIALIZES bool<br>&nbsp;&nbsp;&nbsp;&nbsp;MessageLite::ParseFromString(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstStringParam data)</code></h3><div style=margin-left:16px><p>Parses a protocol buffer contained in a string.</p><p>Returns true on success. This function takes a string in the (non-human-readable) binary wire format, matching the encoding output by <a href=google.protobuf.message_lite#MessageLite.SerializeToString>MessageLite::SerializeToString()</a>. If you'd like to convert a human-readable string into a protocol buffer object, see <a href=google.protobuf.text_format#TextFormat.ParseFromString>google::protobuf::TextFormat::ParseFromString()</a>.</p></div><hr><h3 id=MessageLite.MergeFromCodedStream.details><code>bool MessageLite::MergeFromCodedStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.coded_stream#CodedInputStream>io::CodedInputStream</a> * input)</code></h3><div style=margin-left:16px><p>Reads a protocol buffer from the stream and merges it into this <a href=google.protobuf.message#Message>Message</a>.</p><p>Singular fields read from the what is already in the <a href=google.protobuf.message#Message>Message</a> and repeated fields are appended to those already present.</p><p>It is the responsibility of the caller to call input->LastTagWas() (for groups) or input->ConsumedEntireMessage() (for non-groups) after this returns to verify that the message's end was delimited correctly.</p><p><a href=google.protobuf.message_lite#MessageLite.ParseFromCodedStream>ParseFromCodedStream()</a> is implemented as <a href=google.protobuf.message_lite#MessageLite.Clear>Clear()</a> followed by <a href=google.protobuf.message_lite#MessageLite.MergeFromCodedStream>MergeFromCodedStream()</a>.</p></div><hr><h3 id=MessageLite.MergePartialFromCodedStream.details><code>bool MessageLite::MergePartialFromCodedStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.coded_stream#CodedInputStream>io::CodedInputStream</a> * input)</code></h3><div style=margin-left:16px><p>Like <a href=google.protobuf.message_lite#MessageLite.MergeFromCodedStream>MergeFromCodedStream()</a>, but succeeds even if required fields are missing in the input.</p><p><a href=google.protobuf.message_lite#MessageLite.MergeFromCodedStream>MergeFromCodedStream()</a> is just implemented as <a href=google.protobuf.message_lite#MessageLite.MergePartialFromCodedStream>MergePartialFromCodedStream()</a> followed by <a href=google.protobuf.message_lite#MessageLite.IsInitialized>IsInitialized()</a>.</p></div><hr><h3 id=MessageLite.SerializeToCodedStream.details><code>bool MessageLite::SerializeToCodedStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.coded_stream#CodedOutputStream>io::CodedOutputStream</a> * output) const</code></h3><div style=margin-left:16px><p>Write a protocol buffer of this message to the given output.</p><p>Returns false on a write error. If the message is missing required fields, this may GOOGLE_CHECK-fail.</p></div><hr><h3 id=MessageLite.SerializeToZeroCopyStream.details><code>bool MessageLite::SerializeToZeroCopyStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * output) const</code></h3><div style=margin-left:16px><p>Write the message to the given zero-copy output stream.</p><p>All required fields must be set.</p></div><hr><h3 id=MessageLite.SerializeToString.details><code>bool MessageLite::SerializeToString(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * output) const</code></h3><div style=margin-left:16px><p>Serialize the message and store it in the given string.</p><p>All required fields must be set.</p></div><hr><h3 id=MessageLite.SerializeToArray.details><code>bool MessageLite::SerializeToArray(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void * data,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int size) const</code></h3><div style=margin-left:16px><p>Serialize the message and store it in the given byte array.</p><p>All required fields must be set.</p></div><hr><h3 id=MessageLite.SerializeAsString.details><code>std::string MessageLite::SerializeAsString() const</code></h3><div style=margin-left:16px><p>Make a string encoding the message.</p><p>Is equivalent to calling <a href=google.protobuf.message_lite#MessageLite.SerializeToString>SerializeToString()</a> on a string and using that. Returns the empty string if <a href=google.protobuf.message_lite#MessageLite.SerializeToString>SerializeToString()</a> would have returned an error. Note: If you intend to generate many such strings, you may reduce heap fragmentation by instead re-using the same string object with calls to <a href=google.protobuf.message_lite#MessageLite.SerializeToString>SerializeToString()</a>.</p></div><hr><h3 id=MessageLite.SerializeToFileDescriptor.details><code>bool MessageLite::SerializeToFileDescriptor(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int file_descriptor) const</code></h3><div style=margin-left:16px><p>Serialize the message and write it to the given file descriptor.</p><p>All required fields must be set.</p></div><hr><h3 id=MessageLite.SerializeToOstream.details><code>bool MessageLite::SerializeToOstream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::ostream * output) const</code></h3><div style=margin-left:16px><p>Serialize the message and write it to the given C++ ostream.</p><p>All required fields must be set.</p></div><hr><h3 id=MessageLite.AppendToString.details><code>bool MessageLite::AppendToString(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * output) const</code></h3><div style=margin-left:16px><p>Like <a href=google.protobuf.message_lite#MessageLite.SerializeToString>SerializeToString()</a>, but appends to the data to the string's existing contents.</p><p>All required fields must be set.</p></div><hr><h3 id=MessageLite.ByteSizeLong.details><code>virtual size_t MessageLite::ByteSizeLong() const = 0</code></h3><div style=margin-left:16px><p>Computes the serialized size of the message.</p><p>This recursively calls <a href=google.protobuf.message_lite#MessageLite.ByteSizeLong>ByteSizeLong()</a> on all embedded messages.</p><p><a href=google.protobuf.message_lite#MessageLite.ByteSizeLong>ByteSizeLong()</a> is generally linear in the number of fields defined for the proto.</p></div><hr><h3 id=MessageLite.SerializeWithCachedSizes.details><code>void MessageLite::SerializeWithCachedSizes(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.coded_stream#CodedOutputStream>io::CodedOutputStream</a> * output) const</code></h3><div style=margin-left:16px><p>Serializes the message without recomputing the size.</p><p>The message must not have changed since the last call to <a href=google.protobuf.message_lite#MessageLite.ByteSize>ByteSize()</a>, and the value returned by ByteSize must be non-negative. Otherwise the results are undefined.</p></div><hr><h3 id=MessageLite.SerializeWithCachedSizesToArray.details><code>uint8 * MessageLite::SerializeWithCachedSizesToArray(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint8 * target) const</code></h3><div style=margin-left:16px><p>Like SerializeWithCachedSizes, but writes directly to *target, returning a pointer to the byte immediately after the last byte written.</p><p>"target" must point at a byte array of at least <a href=google.protobuf.message_lite#MessageLite.ByteSize>ByteSize()</a> bytes. Whether to use deterministic serialization, e.g., maps in sorted order, is determined by CodedOutputStream::IsDefaultSerializationDeterministic().</p></div><hr><h3 id=MessageLite.GetCachedSize.details><code>virtual int MessageLite::GetCachedSize() const = 0</code></h3><div style=margin-left:16px><p>Returns the result of the last call to <a href=google.protobuf.message_lite#MessageLite.ByteSize>ByteSize()</a>.</p><p>An embedded message's size is needed both to serialize it (because embedded messages are length-delimited) and to compute the outer message's size. Caching the size avoids computing it multiple times.</p><p><a href=google.protobuf.message_lite#MessageLite.ByteSize>ByteSize()</a> does not automatically use the cached size when available because this would require invalidating it every time the message was modified, which would be too hard and expensive. (E.g. if a deeply-nested sub-message is changed, all of its parents' cached sizes would need to be invalidated, which is too much work for an otherwise inlined setter method.)</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-f0799e16da33ea1241019acde901e09f>1.4.34 -</h1><html devsite><head><title>repeated_field.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>repeated_field.h</h1><p><code>#include &lt;google/protobuf/repeated_field.h><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p><a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> and <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> are used by generated protocol message classes to manipulate repeated fields.</p><p>These classes are very similar to STL's vector, but include a number of optimizations found to be useful specifically in the case of Protocol Buffers. <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> is particularly different from STL vector as it manages ownership of the pointers that it contains.</p><p>Typically, clients should not need to access <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> objects directly, but should instead use the accessor functions generated automatically by the protocol compiler.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#RepeatedField>RepeatedField</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> is used to represent repeated fields of a primitive type (in other words, everything except strings and nested Messages).</div></td></tr><tr><td><div><code><a href=#RepeatedPtrField>RepeatedPtrField</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> is like <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a>, but used for repeated strings or Messages.</div></td></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>template internal::RepeatedFieldBackInsertIterator&lt; T ></code></td><td style=border-left-width:0 id=RepeatedFieldBackInserter><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedFieldBackInserter</b>(<a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a>&lt; T > *const mutable_field)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Provides a back insert iterator for <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> instances, similar to std::back_inserter().</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template internal::RepeatedPtrFieldBackInsertIterator&lt; T ></code></td><td style=border-left-width:0 id=RepeatedPtrFieldBackInserter><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedPtrFieldBackInserter</b>(<a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>&lt; T > *const mutable_field)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Provides a back insert iterator for <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> instances, similar to std::back_inserter().</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template internal::RepeatedPtrFieldBackInsertIterator&lt; T ></code></td><td style=border-left-width:0 id=RepeatedFieldBackInserter><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedFieldBackInserter</b>(<a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>&lt; T > *const mutable_field)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Special back insert iterator for <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> instances, just in case someone wants to write generic template code that can access both RepeatedFields and RepeatedPtrFields using a common name.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template internal::AllocatedRepeatedPtrFieldBackInsertIterator&lt; T ></code></td><td style=border-left-width:0 id=AllocatedRepeatedPtrFieldBackInserter><div style=padding-left:16px;text-indent:-16px><code><b>AllocatedRepeatedPtrFieldBackInserter</b>(<a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>&lt; T > *const mutable_field)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Provides a back insert iterator for <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> instances similar to std::back_inserter() which transfers the ownership while copying elements.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template internal::UnsafeArenaAllocatedRepeatedPtrFieldBackInsertIterator&lt; T ></code></td><td style=border-left-width:0 id=UnsafeArenaAllocatedRepeatedPtrFieldBackInserter><div style=padding-left:16px;text-indent:-16px><code><b>UnsafeArenaAllocatedRepeatedPtrFieldBackInserter</b>(<a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>&lt; T > *const mutable_field)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Similar to AllocatedRepeatedPtrFieldBackInserter, using UnsafeArenaAddAllocated instead of AddAllocated. <a href=#UnsafeArenaAllocatedRepeatedPtrFieldBackInserter.details>more...</a></div></td></tr></table><hr><h3 id=UnsafeArenaAllocatedRepeatedPtrFieldBackInserter.details><code>template internal::UnsafeArenaAllocatedRepeatedPtrFieldBackInsertIterator&lt; T ><br>&nbsp;&nbsp;&nbsp;&nbsp;protobuf::UnsafeArenaAllocatedRepeatedPtrFieldBackInserter(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>&lt; T > *const mutable_field)</code></h3><div style=margin-left:16px><p>Similar to AllocatedRepeatedPtrFieldBackInserter, using UnsafeArenaAddAllocated instead of AddAllocated.</p><p>This is slightly faster if that matters. It is also useful in legacy code that uses temporary ownership to avoid copies. Example:</p><pre>RepeatedPtrField&lt;T&gt; temp_field;
temp_field.AddAllocated(new T);
... // Do something with temp_field
temp_field.ExtractSubrange(0, temp_field.size(), nullptr);</pre><p>If you put temp_field on the arena this fails, because the ownership transfers to the arena at the "AddAllocated" call and is not released anymore causing a double delete. Using UnsafeArenaAddAllocated prevents this.</p></div><h2 id=RepeatedField>template class RepeatedField</h2><p><code>#include &lt;<a href=#>google/protobuf/repeated_field.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a><br><br>template &lt;typename ></code></p><p><a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> is used to represent repeated fields of a primitive type (in other words, everything except strings and nested Messages).</p><p>Most users will not ever use a <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> directly; they will use the get-by-index, set-by-index, and add accessors that are generated for all repeated fields.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedField.iterator><div style=padding-left:16px;text-indent:-16px><code>Element * <b>iterator</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>STL-like iterator support.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedField.const_iterator><div style=padding-left:16px;text-indent:-16px><code>const Element * <b>const_iterator</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedField.value_type><div style=padding-left:16px;text-indent:-16px><code>Element <b>value_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedField.reference><div style=padding-left:16px;text-indent:-16px><code>value_type & <b>reference</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedField.const_reference><div style=padding-left:16px;text-indent:-16px><code>const value_type & <b>const_reference</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedField.pointer><div style=padding-left:16px;text-indent:-16px><code>value_type * <b>pointer</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedField.const_pointer><div style=padding-left:16px;text-indent:-16px><code>const value_type * <b>const_pointer</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedField.size_type><div style=padding-left:16px;text-indent:-16px><code>int <b>size_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedField.difference_type><div style=padding-left:16px;text-indent:-16px><code>ptrdiff_t <b>difference_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedField.const_reverse_iterator><div style=padding-left:16px;text-indent:-16px><code>std::reverse_iterator&lt; const_iterator > <b>const_reverse_iterator</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reverse iterator support.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedField.reverse_iterator><div style=padding-left:16px;text-indent:-16px><code>std::reverse_iterator&lt; <a href=google.protobuf.repeated_field#RepeatedField.iterator>iterator</a> > <b>reverse_iterator</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr</code></td><td style=border-left-width:0 id=RepeatedField.RepeatedField><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedField</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=RepeatedField.RepeatedField><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedField</b>(<a href=google.protobuf.arena#Arena>Arena</a> * arena)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=RepeatedField.RepeatedField><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedField</b>(const <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> & other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template</code></td><td style=border-left-width:0 id=RepeatedField.RepeatedField><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedField</b>(Iter begin, Iter end)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=RepeatedField.~RepeatedField><div style=padding-left:16px;text-indent:-16px><code><b>~RepeatedField</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> &</code></td><td style=border-left-width:0 id="RepeatedField.operator="><div style=padding-left:16px;text-indent:-16px><code><b>operator=</b>(const <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> & other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=RepeatedField.RepeatedField><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedField</b>(<a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> && other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> &</code></td><td style=border-left-width:0 id="RepeatedField.operator="><div style=padding-left:16px;text-indent:-16px><code><b>operator=</b>(<a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> && other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=RepeatedField.empty><div style=padding-left:16px;text-indent:-16px><code><b>empty</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=RepeatedField.size><div style=padding-left:16px;text-indent:-16px><code><b>size</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const Element &</code></td><td style=border-left-width:0 id=RepeatedField.Get><div style=padding-left:16px;text-indent:-16px><code><b>Get</b>(int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>Element *</code></td><td style=border-left-width:0 id=RepeatedField.Mutable><div style=padding-left:16px;text-indent:-16px><code><b>Mutable</b>(int index)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const Element &</code></td><td style=border-left-width:0 id=RepeatedField.operator[]><div style=padding-left:16px;text-indent:-16px><code><b>operator[]</b>(int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>Element &</code></td><td style=border-left-width:0 id=RepeatedField.operator[]><div style=padding-left:16px;text-indent:-16px><code><b>operator[]</b>(int index)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const Element &</code></td><td style=border-left-width:0 id=RepeatedField.at><div style=padding-left:16px;text-indent:-16px><code><b>at</b>(int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>Element &</code></td><td style=border-left-width:0 id=RepeatedField.at><div style=padding-left:16px;text-indent:-16px><code><b>at</b>(int index)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.Set><div style=padding-left:16px;text-indent:-16px><code><b>Set</b>(int index, const Element & value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.Add><div style=padding-left:16px;text-indent:-16px><code><b>Add</b>(const Element & value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>Element *</code></td><td style=border-left-width:0 id=RepeatedField.Add><div style=padding-left:16px;text-indent:-16px><code><b>Add</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Appends a new element and return a pointer to it. <a href=#RepeatedField.Add.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=RepeatedField.Add><div style=padding-left:16px;text-indent:-16px><code><b>Add</b>(Iter begin, Iter end)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Append elements in the range [[]begin, end) after reserving the appropriate number of elements.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.RemoveLast><div style=padding-left:16px;text-indent:-16px><code><b>RemoveLast</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Remove the last element in the array.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.ExtractSubrange><div style=padding-left:16px;text-indent:-16px><code><b>ExtractSubrange</b>(int start, int num, Element * elements)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Extract elements with indices in "[[]start .. start+num-1]". <a href=#RepeatedField.ExtractSubrange.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.Clear><div style=padding-left:16px;text-indent:-16px><code><b>Clear</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.MergeFrom><div style=padding-left:16px;text-indent:-16px><code><b>MergeFrom</b>(const <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> & other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.CopyFrom><div style=padding-left:16px;text-indent:-16px><code><b>CopyFrom</b>(const <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> & other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=RepeatedField.Assign><div style=padding-left:16px;text-indent:-16px><code><b>Assign</b>(Iter begin, Iter end)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Replaces the contents with RepeatedField(begin, end).</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.Reserve><div style=padding-left:16px;text-indent:-16px><code><b>Reserve</b>(int new_size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reserve space to expand the field to at least the given size. <a href=#RepeatedField.Reserve.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.Truncate><div style=padding-left:16px;text-indent:-16px><code><b>Truncate</b>(int new_size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Resize the <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> to a new, smaller size. This is O(1).</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.AddAlreadyReserved><div style=padding-left:16px;text-indent:-16px><code><b>AddAlreadyReserved</b>(const Element & value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>Element *</code></td><td style=border-left-width:0 id=RepeatedField.AddAlreadyReserved><div style=padding-left:16px;text-indent:-16px><code><b>AddAlreadyReserved</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Appends a new element and return a pointer to it. <a href=#RepeatedField.AddAlreadyReserved.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>Element *</code></td><td style=border-left-width:0 id=RepeatedField.AddNAlreadyReserved><div style=padding-left:16px;text-indent:-16px><code><b>AddNAlreadyReserved</b>(int elements)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=RepeatedField.Capacity><div style=padding-left:16px;text-indent:-16px><code><b>Capacity</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.Resize><div style=padding-left:16px;text-indent:-16px><code><b>Resize</b>(int new_size, const Element & value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like STL resize. <a href=#RepeatedField.Resize.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>Element *</code></td><td style=border-left-width:0 id=RepeatedField.mutable_data><div style=padding-left:16px;text-indent:-16px><code><b>mutable_data</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets the underlying array. <a href=#RepeatedField.mutable_data.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const Element *</code></td><td style=border-left-width:0 id=RepeatedField.data><div style=padding-left:16px;text-indent:-16px><code><b>data</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.Swap><div style=padding-left:16px;text-indent:-16px><code><b>Swap</b>(<a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> * other)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Swap entire contents with "other". <a href=#RepeatedField.Swap.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.UnsafeArenaSwap><div style=padding-left:16px;text-indent:-16px><code><b>UnsafeArenaSwap</b>(<a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> * other)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Swap entire contents with "other". <a href=#RepeatedField.UnsafeArenaSwap.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.SwapElements><div style=padding-left:16px;text-indent:-16px><code><b>SwapElements</b>(int index1, int index2)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Swap two elements.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedField.iterator>iterator</a></code></td><td style=border-left-width:0 id=RepeatedField.begin><div style=padding-left:16px;text-indent:-16px><code><b>begin</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const_iterator</code></td><td style=border-left-width:0 id=RepeatedField.begin><div style=padding-left:16px;text-indent:-16px><code><b>begin</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const_iterator</code></td><td style=border-left-width:0 id=RepeatedField.cbegin><div style=padding-left:16px;text-indent:-16px><code><b>cbegin</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedField.iterator>iterator</a></code></td><td style=border-left-width:0 id=RepeatedField.end><div style=padding-left:16px;text-indent:-16px><code><b>end</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const_iterator</code></td><td style=border-left-width:0 id=RepeatedField.end><div style=padding-left:16px;text-indent:-16px><code><b>end</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const_iterator</code></td><td style=border-left-width:0 id=RepeatedField.cend><div style=padding-left:16px;text-indent:-16px><code><b>cend</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>reverse_iterator</code></td><td style=border-left-width:0 id=RepeatedField.rbegin><div style=padding-left:16px;text-indent:-16px><code><b>rbegin</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedField.const_reverse_iterator>const_reverse_iterator</a></code></td><td style=border-left-width:0 id=RepeatedField.rbegin><div style=padding-left:16px;text-indent:-16px><code><b>rbegin</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>reverse_iterator</code></td><td style=border-left-width:0 id=RepeatedField.rend><div style=padding-left:16px;text-indent:-16px><code><b>rend</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedField.const_reverse_iterator>const_reverse_iterator</a></code></td><td style=border-left-width:0 id=RepeatedField.rend><div style=padding-left:16px;text-indent:-16px><code><b>rend</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>size_t</code></td><td style=border-left-width:0 id=RepeatedField.SpaceUsedExcludingSelfLong><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsedExcludingSelfLong</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the number of bytes used by the repeated field, excluding sizeof(*this)</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=RepeatedField.SpaceUsedExcludingSelf><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsedExcludingSelf</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedField.iterator>iterator</a></code></td><td style=border-left-width:0 id=RepeatedField.erase><div style=padding-left:16px;text-indent:-16px><code><b>erase</b>(const_iterator position)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Removes the element referenced by position. <a href=#RepeatedField.erase.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedField.iterator>iterator</a></code></td><td style=border-left-width:0 id=RepeatedField.erase><div style=padding-left:16px;text-indent:-16px><code><b>erase</b>(const_iterator first, const_iterator last)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Removes the elements in the range [[]first, last). <a href=#RepeatedField.erase.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.arena#Arena>Arena</a> *</code></td><td style=border-left-width:0 id=RepeatedField.GetArena><div style=padding-left:16px;text-indent:-16px><code><b>GetArena</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the <a href=google.protobuf.arena#Arena>Arena</a> on which this <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> stores its elements.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedField.InternalSwap><div style=padding-left:16px;text-indent:-16px><code><b>InternalSwap</b>(<a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> * other)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For internal use only. <a href=#RepeatedField.InternalSwap.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template</code></td><td style=border-left-width:0 id=RepeatedField.RepeatedField><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedField</b>(Iter begin, Iter end)</code></div></td></tr></table><hr><h3 id=RepeatedField.Add.details><code>Element * RepeatedField::Add()</code></h3><div style=margin-left:16px><p>Appends a new element and return a pointer to it.</p><p>The new element is uninitialized if |Element| is a POD type.</p></div><hr><h3 id=RepeatedField.ExtractSubrange.details><code>void RepeatedField::ExtractSubrange(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int start,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int num,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element * elements)</code></h3><div style=margin-left:16px><p>Extract elements with indices in "[[]start .. start+num-1]".</p><p>Copy them into "elements[[]0 .. num-1]" if "elements" is not NULL. Caution: implementation also moves elements with indices [[]start+num ..]. Calling this routine inside a loop can cause quadratic behavior.</p></div><hr><h3 id=RepeatedField.Reserve.details><code>void RepeatedField::Reserve(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int new_size)</code></h3><div style=margin-left:16px><p>Reserve space to expand the field to at least the given size.</p><p>Avoid inlining of <a href=google.protobuf.repeated_field#RepeatedField.Reserve>Reserve()</a>: new, copy, and delete[[]] lead to a significant amount of code bloat.</p><p>If the array is grown, it will always be at least doubled in size.</p></div><hr><h3 id=RepeatedField.AddAlreadyReserved.details><code>Element * RepeatedField::AddAlreadyReserved()</code></h3><div style=margin-left:16px><p>Appends a new element and return a pointer to it.</p><p>The new element is uninitialized if |Element| is a POD type. Should be called only if Capacity() > Size().</p></div><hr><h3 id=RepeatedField.Resize.details><code>void RepeatedField::Resize(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int new_size,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const Element & value)</code></h3><div style=margin-left:16px><p>Like STL resize.</p><p>Uses value to fill appended elements. Like <a href=google.protobuf.repeated_field#RepeatedField.Truncate>Truncate()</a> if new_size &lt;= size(), otherwise this is O(new_size - size()).</p></div><hr><h3 id=RepeatedField.mutable_data.details><code>Element * RepeatedField::mutable_data()</code></h3><div style=margin-left:16px><p>Gets the underlying array.</p><p>This pointer is possibly invalidated by any add or remove operation.</p></div><hr><h3 id=RepeatedField.Swap.details><code>void RepeatedField::Swap(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> * other)</code></h3><div style=margin-left:16px><p>Swap entire contents with "other".</p><p>If they are separate arenas then, copies data between each other.</p></div><hr><h3 id=RepeatedField.UnsafeArenaSwap.details><code>void RepeatedField::UnsafeArenaSwap(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> * other)</code></h3><div style=margin-left:16px><p>Swap entire contents with "other".</p><p>Should be called only if the caller can guarantee that both repeated fields are on the same arena or are on the heap. Swapping between different arenas is disallowed and caught by a GOOGLE_DCHECK (see API docs for details).</p></div><hr><h3 id=RepeatedField.erase.details><code><a href=google.protobuf.repeated_field#RepeatedField.iterator>iterator</a> RepeatedField::erase(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const_iterator position)</code></h3><div style=margin-left:16px><p>Removes the element referenced by position.</p><p>Returns an iterator to the element immediately following the removed element.</p><p>Invalidates all iterators at or after the removed element, including end().</p></div><hr><h3 id=RepeatedField.erase.details><code><a href=google.protobuf.repeated_field#RepeatedField.iterator>iterator</a> RepeatedField::erase(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const_iterator first,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const_iterator last)</code></h3><div style=margin-left:16px><p>Removes the elements in the range [[]first, last).</p><p>Returns an iterator to the element immediately following the removed range.</p><p>Invalidates all iterators at or after the removed range, including end().</p></div><hr><h3 id=RepeatedField.InternalSwap.details><code>void RepeatedField::InternalSwap(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a> * other)</code></h3><div style=margin-left:16px><p>For internal use only.</p><p>This is public due to it being called by generated code.</p></div><h2 id=RepeatedPtrField>template class RepeatedPtrField</h2><p><code>#include &lt;<a href=#>google/protobuf/repeated_field.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a><br><br>template &lt;typename ></code></p><p><a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> is like <a href=google.protobuf.repeated_field#RepeatedField>RepeatedField</a>, but used for repeated strings or Messages.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedPtrField.iterator><div style=padding-left:16px;text-indent:-16px><code>internal::RepeatedPtrIterator&lt; Element > <b>iterator</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>STL-like iterator support.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedPtrField.const_iterator><div style=padding-left:16px;text-indent:-16px><code>internal::RepeatedPtrIterator&lt; const Element > <b>const_iterator</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedPtrField.value_type><div style=padding-left:16px;text-indent:-16px><code>Element <b>value_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedPtrField.reference><div style=padding-left:16px;text-indent:-16px><code>value_type & <b>reference</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedPtrField.const_reference><div style=padding-left:16px;text-indent:-16px><code>const value_type & <b>const_reference</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedPtrField.pointer><div style=padding-left:16px;text-indent:-16px><code>value_type * <b>pointer</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedPtrField.const_pointer><div style=padding-left:16px;text-indent:-16px><code>const value_type * <b>const_pointer</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedPtrField.size_type><div style=padding-left:16px;text-indent:-16px><code>int <b>size_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedPtrField.difference_type><div style=padding-left:16px;text-indent:-16px><code>ptrdiff_t <b>difference_type</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedPtrField.const_reverse_iterator><div style=padding-left:16px;text-indent:-16px><code>std::reverse_iterator&lt; const_iterator > <b>const_reverse_iterator</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reverse iterator support.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedPtrField.reverse_iterator><div style=padding-left:16px;text-indent:-16px><code>std::reverse_iterator&lt; <a href=google.protobuf.repeated_field#RepeatedPtrField.iterator>iterator</a> > <b>reverse_iterator</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedPtrField.pointer_iterator><div style=padding-left:16px;text-indent:-16px><code>internal::RepeatedPtrOverPtrsIterator&lt; Element *, void * > <b>pointer_iterator</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Custom STL-like iterator that iterates over and returns the underlying pointers to Element rather than Element itself.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=RepeatedPtrField.const_pointer_iterator><div style=padding-left:16px;text-indent:-16px><code>internal::RepeatedPtrOverPtrsIterator&lt; const Element *const, const void *const > <b>const_pointer_iterator</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>constexpr</code></td><td style=border-left-width:0 id=RepeatedPtrField.RepeatedPtrField><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedPtrField</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=RepeatedPtrField.RepeatedPtrField><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedPtrField</b>(<a href=google.protobuf.arena#Arena>Arena</a> * arena)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=RepeatedPtrField.RepeatedPtrField><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedPtrField</b>(const <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> & other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template</code></td><td style=border-left-width:0 id=RepeatedPtrField.RepeatedPtrField><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedPtrField</b>(Iter begin, Iter end)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=RepeatedPtrField.~RepeatedPtrField><div style=padding-left:16px;text-indent:-16px><code><b>~RepeatedPtrField</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> &</code></td><td style=border-left-width:0 id="RepeatedPtrField.operator="><div style=padding-left:16px;text-indent:-16px><code><b>operator=</b>(const <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> & other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=RepeatedPtrField.RepeatedPtrField><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedPtrField</b>(<a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> && other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> &</code></td><td style=border-left-width:0 id="RepeatedPtrField.operator="><div style=padding-left:16px;text-indent:-16px><code><b>operator=</b>(<a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> && other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=RepeatedPtrField.empty><div style=padding-left:16px;text-indent:-16px><code><b>empty</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=RepeatedPtrField.size><div style=padding-left:16px;text-indent:-16px><code><b>size</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const Element &</code></td><td style=border-left-width:0 id=RepeatedPtrField.Get><div style=padding-left:16px;text-indent:-16px><code><b>Get</b>(int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>Element *</code></td><td style=border-left-width:0 id=RepeatedPtrField.Mutable><div style=padding-left:16px;text-indent:-16px><code><b>Mutable</b>(int index)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>Element *</code></td><td style=border-left-width:0 id=RepeatedPtrField.Add><div style=padding-left:16px;text-indent:-16px><code><b>Add</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.Add><div style=padding-left:16px;text-indent:-16px><code><b>Add</b>(Element && value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=RepeatedPtrField.Add><div style=padding-left:16px;text-indent:-16px><code><b>Add</b>(Iter begin, Iter end)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Append elements in the range [[]begin, end) after reserving the appropriate number of elements.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const Element &</code></td><td style=border-left-width:0 id=RepeatedPtrField.operator[]><div style=padding-left:16px;text-indent:-16px><code><b>operator[]</b>(int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>Element &</code></td><td style=border-left-width:0 id=RepeatedPtrField.operator[]><div style=padding-left:16px;text-indent:-16px><code><b>operator[]</b>(int index)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const Element &</code></td><td style=border-left-width:0 id=RepeatedPtrField.at><div style=padding-left:16px;text-indent:-16px><code><b>at</b>(int index) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>Element &</code></td><td style=border-left-width:0 id=RepeatedPtrField.at><div style=padding-left:16px;text-indent:-16px><code><b>at</b>(int index)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.RemoveLast><div style=padding-left:16px;text-indent:-16px><code><b>RemoveLast</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Remove the last element in the array. <a href=#RepeatedPtrField.RemoveLast.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.DeleteSubrange><div style=padding-left:16px;text-indent:-16px><code><b>DeleteSubrange</b>(int start, int num)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Delete elements with indices in the range [[]start . <a href=#RepeatedPtrField.DeleteSubrange.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.Clear><div style=padding-left:16px;text-indent:-16px><code><b>Clear</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.MergeFrom><div style=padding-left:16px;text-indent:-16px><code><b>MergeFrom</b>(const <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> & other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.CopyFrom><div style=padding-left:16px;text-indent:-16px><code><b>CopyFrom</b>(const <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> & other)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=RepeatedPtrField.Assign><div style=padding-left:16px;text-indent:-16px><code><b>Assign</b>(Iter begin, Iter end)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Replaces the contents with RepeatedPtrField(begin, end).</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.Reserve><div style=padding-left:16px;text-indent:-16px><code><b>Reserve</b>(int new_size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reserve space to expand the field to at least the given size. <a href=#RepeatedPtrField.Reserve.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=RepeatedPtrField.Capacity><div style=padding-left:16px;text-indent:-16px><code><b>Capacity</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>Element **</code></td><td style=border-left-width:0 id=RepeatedPtrField.mutable_data><div style=padding-left:16px;text-indent:-16px><code><b>mutable_data</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets the underlying array. <a href=#RepeatedPtrField.mutable_data.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const Element *const *</code></td><td style=border-left-width:0 id=RepeatedPtrField.data><div style=padding-left:16px;text-indent:-16px><code><b>data</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.Swap><div style=padding-left:16px;text-indent:-16px><code><b>Swap</b>(<a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> * other)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Swap entire contents with "other". <a href=#RepeatedPtrField.Swap.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.UnsafeArenaSwap><div style=padding-left:16px;text-indent:-16px><code><b>UnsafeArenaSwap</b>(<a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> * other)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Swap entire contents with "other". <a href=#RepeatedPtrField.UnsafeArenaSwap.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.SwapElements><div style=padding-left:16px;text-indent:-16px><code><b>SwapElements</b>(int index1, int index2)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Swap two elements.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedPtrField.iterator>iterator</a></code></td><td style=border-left-width:0 id=RepeatedPtrField.begin><div style=padding-left:16px;text-indent:-16px><code><b>begin</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const_iterator</code></td><td style=border-left-width:0 id=RepeatedPtrField.begin><div style=padding-left:16px;text-indent:-16px><code><b>begin</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const_iterator</code></td><td style=border-left-width:0 id=RepeatedPtrField.cbegin><div style=padding-left:16px;text-indent:-16px><code><b>cbegin</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedPtrField.iterator>iterator</a></code></td><td style=border-left-width:0 id=RepeatedPtrField.end><div style=padding-left:16px;text-indent:-16px><code><b>end</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const_iterator</code></td><td style=border-left-width:0 id=RepeatedPtrField.end><div style=padding-left:16px;text-indent:-16px><code><b>end</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const_iterator</code></td><td style=border-left-width:0 id=RepeatedPtrField.cend><div style=padding-left:16px;text-indent:-16px><code><b>cend</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>reverse_iterator</code></td><td style=border-left-width:0 id=RepeatedPtrField.rbegin><div style=padding-left:16px;text-indent:-16px><code><b>rbegin</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedPtrField.const_reverse_iterator>const_reverse_iterator</a></code></td><td style=border-left-width:0 id=RepeatedPtrField.rbegin><div style=padding-left:16px;text-indent:-16px><code><b>rbegin</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>reverse_iterator</code></td><td style=border-left-width:0 id=RepeatedPtrField.rend><div style=padding-left:16px;text-indent:-16px><code><b>rend</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedPtrField.const_reverse_iterator>const_reverse_iterator</a></code></td><td style=border-left-width:0 id=RepeatedPtrField.rend><div style=padding-left:16px;text-indent:-16px><code><b>rend</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedPtrField.pointer_iterator>pointer_iterator</a></code></td><td style=border-left-width:0 id=RepeatedPtrField.pointer_begin><div style=padding-left:16px;text-indent:-16px><code><b>pointer_begin</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const_pointer_iterator</code></td><td style=border-left-width:0 id=RepeatedPtrField.pointer_begin><div style=padding-left:16px;text-indent:-16px><code><b>pointer_begin</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedPtrField.pointer_iterator>pointer_iterator</a></code></td><td style=border-left-width:0 id=RepeatedPtrField.pointer_end><div style=padding-left:16px;text-indent:-16px><code><b>pointer_end</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const_pointer_iterator</code></td><td style=border-left-width:0 id=RepeatedPtrField.pointer_end><div style=padding-left:16px;text-indent:-16px><code><b>pointer_end</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>size_t</code></td><td style=border-left-width:0 id=RepeatedPtrField.SpaceUsedExcludingSelfLong><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsedExcludingSelfLong</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns (an estimate of) the number of bytes used by the repeated field, excluding sizeof(*this).</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=RepeatedPtrField.SpaceUsedExcludingSelf><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsedExcludingSelf</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template</code></td><td style=border-left-width:0 id=RepeatedPtrField.RepeatedPtrField><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedPtrField</b>(Iter begin, Iter end)</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Advanced memory management</h3><div style=font-style:italic;font-weight:400>When hardcore memory management becomes necessary &ndash; as it sometimes does here at Google &ndash; the following methods may be useful.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.AddAllocated><div style=padding-left:16px;text-indent:-16px><code><b>AddAllocated</b>(Element * value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Add an already-allocated object, passing ownership to the <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>. <a href=#RepeatedPtrField.AddAllocated.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_FUTURE_MUST_USE_RESULT Element *</code></td><td style=border-left-width:0 id=RepeatedPtrField.ReleaseLast><div style=padding-left:16px;text-indent:-16px><code><b>ReleaseLast</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Remove the last element and return it, passing ownership to the caller. <a href=#RepeatedPtrField.ReleaseLast.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.UnsafeArenaAddAllocated><div style=padding-left:16px;text-indent:-16px><code><b>UnsafeArenaAddAllocated</b>(Element * value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Add an already-allocated object, skipping arena-ownership checks. <a href=#RepeatedPtrField.UnsafeArenaAddAllocated.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>Element *</code></td><td style=border-left-width:0 id=RepeatedPtrField.UnsafeArenaReleaseLast><div style=padding-left:16px;text-indent:-16px><code><b>UnsafeArenaReleaseLast</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Remove the last element and return it. <a href=#RepeatedPtrField.UnsafeArenaReleaseLast.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.ExtractSubrange><div style=padding-left:16px;text-indent:-16px><code><b>ExtractSubrange</b>(int start, int num, Element ** elements)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Extract elements with indices in the range "[[]start .. start+num-1]". <a href=#RepeatedPtrField.ExtractSubrange.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.UnsafeArenaExtractSubrange><div style=padding-left:16px;text-indent:-16px><code><b>UnsafeArenaExtractSubrange</b>(int start, int num, Element ** elements)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Identical to <a href=google.protobuf.repeated_field#RepeatedPtrField.ExtractSubrange>ExtractSubrange()</a> described above, except that when this repeated field is on an arena, no object copies are performed. <a href=#RepeatedPtrField.UnsafeArenaExtractSubrange.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=RepeatedPtrField.ClearedCount><div style=padding-left:16px;text-indent:-16px><code><b>ClearedCount</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the number of cleared objects that are currently being kept around for reuse.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.AddCleared><div style=padding-left:16px;text-indent:-16px><code><b>AddCleared</b>(Element * value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Add an element to the pool of cleared objects, passing ownership to the <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>. <a href=#RepeatedPtrField.AddCleared.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>PROTOBUF_FUTURE_MUST_USE_RESULT Element *</code></td><td style=border-left-width:0 id=RepeatedPtrField.ReleaseCleared><div style=padding-left:16px;text-indent:-16px><code><b>ReleaseCleared</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Remove a single element from the cleared pool and return it, passing ownership to the caller. <a href=#RepeatedPtrField.ReleaseCleared.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedPtrField.iterator>iterator</a></code></td><td style=border-left-width:0 id=RepeatedPtrField.erase><div style=padding-left:16px;text-indent:-16px><code><b>erase</b>(const_iterator position)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Removes the element referenced by position. <a href=#RepeatedPtrField.erase.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.repeated_field#RepeatedPtrField.iterator>iterator</a></code></td><td style=border-left-width:0 id=RepeatedPtrField.erase><div style=padding-left:16px;text-indent:-16px><code><b>erase</b>(const_iterator first, const_iterator last)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Removes the elements in the range [[]first, last). <a href=#RepeatedPtrField.erase.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.arena#Arena>Arena</a> *</code></td><td style=border-left-width:0 id=RepeatedPtrField.GetArena><div style=padding-left:16px;text-indent:-16px><code><b>GetArena</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets the arena on which this <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> stores its elements.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=RepeatedPtrField.InternalSwap><div style=padding-left:16px;text-indent:-16px><code><b>InternalSwap</b>(<a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> * other)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For internal use only. <a href=#RepeatedPtrField.InternalSwap.details>more...</a></div></td></tr></table><hr><h3 id=RepeatedPtrField.RemoveLast.details><code>void RepeatedPtrField::RemoveLast()</code></h3><div style=margin-left:16px><p>Remove the last element in the array.</p><p>Ownership of the element is retained by the array.</p></div><hr><h3 id=RepeatedPtrField.DeleteSubrange.details><code>void RepeatedPtrField::DeleteSubrange(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int start,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int num)</code></h3><div style=margin-left:16px><p>Delete elements with indices in the range [[]start .</p><p>. start+num-1]. Caution: implementation moves all elements with indices [[]start+num .. ]. Calling this routine inside a loop can cause quadratic behavior.</p></div><hr><h3 id=RepeatedPtrField.Reserve.details><code>void RepeatedPtrField::Reserve(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int new_size)</code></h3><div style=margin-left:16px><p>Reserve space to expand the field to at least the given size.</p><p>This only resizes the pointer array; it doesn't allocate any objects. If the array is grown, it will always be at least doubled in size.</p></div><hr><h3 id=RepeatedPtrField.mutable_data.details><code>Element ** RepeatedPtrField::mutable_data()</code></h3><div style=margin-left:16px><p>Gets the underlying array.</p><p>This pointer is possibly invalidated by any add or remove operation.</p></div><hr><h3 id=RepeatedPtrField.Swap.details><code>void RepeatedPtrField::Swap(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> * other)</code></h3><div style=margin-left:16px><p>Swap entire contents with "other".</p><p>If they are on separate arenas, then copies data.</p></div><hr><h3 id=RepeatedPtrField.UnsafeArenaSwap.details><code>void RepeatedPtrField::UnsafeArenaSwap(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> * other)</code></h3><div style=margin-left:16px><p>Swap entire contents with "other".</p><p>Caller should guarantee that either both fields are on the same arena or both are on the heap. Swapping between different arenas with this function is disallowed and is caught via GOOGLE_DCHECK.</p></div><hr><h3 id=RepeatedPtrField.AddAllocated.details><code>void RepeatedPtrField::AddAllocated(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element * value)</code></h3><div style=margin-left:16px><p>Add an already-allocated object, passing ownership to the <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>.</p><p>Note that some special behavior occurs with respect to arenas:</p><pre>(i) if this field holds submessages, the new submessage will be copied if
the original is in an arena and this RepeatedPtrField is either in a
different arena, or on the heap.
(ii) if this field holds strings, the passed-in string *must* be
heap-allocated, not arena-allocated. There is no way to dynamically check
this at runtime, so User Beware.</pre></div><hr><h3 id=RepeatedPtrField.ReleaseLast.details><code>PROTOBUF_FUTURE_MUST_USE_RESULT Element *<br>&nbsp;&nbsp;&nbsp;&nbsp;RepeatedPtrField::ReleaseLast()</code></h3><div style=margin-left:16px><p>Remove the last element and return it, passing ownership to the caller.</p><p>Requires: size() > 0</p><p>If this <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> is on an arena, an object copy is required to pass ownership back to the user (for compatible semantics). Use <a href=google.protobuf.repeated_field#RepeatedPtrField.UnsafeArenaReleaseLast>UnsafeArenaReleaseLast()</a> if this behavior is undesired.</p></div><hr><h3 id=RepeatedPtrField.UnsafeArenaAddAllocated.details><code>void RepeatedPtrField::UnsafeArenaAddAllocated(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element * value)</code></h3><div style=margin-left:16px><p>Add an already-allocated object, skipping arena-ownership checks.</p><p>The user must guarantee that the given object is in the same arena as this <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>. It is also useful in legacy code that uses temporary ownership to avoid copies. Example:</p><pre>RepeatedPtrField&lt;T&gt; temp_field;
temp_field.AddAllocated(new T);
... // Do something with temp_field
temp_field.ExtractSubrange(0, temp_field.size(), nullptr);</pre><p>If you put temp_field on the arena this fails, because the ownership transfers to the arena at the "AddAllocated" call and is not released anymore causing a double delete. UnsafeArenaAddAllocated prevents this.</p></div><hr><h3 id=RepeatedPtrField.UnsafeArenaReleaseLast.details><code>Element * RepeatedPtrField::UnsafeArenaReleaseLast()</code></h3><div style=margin-left:16px><p>Remove the last element and return it.</p><p>Works only when operating on an arena. The returned pointer is to the original object in the arena, hence has the arena's lifetime. Requires: current_size_ > 0</p></div><hr><h3 id=RepeatedPtrField.ExtractSubrange.details><code>void RepeatedPtrField::ExtractSubrange(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int start,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int num,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element ** elements)</code></h3><div style=margin-left:16px><p>Extract elements with indices in the range "[[]start .. start+num-1]".</p><p>The caller assumes ownership of the extracted elements and is responsible for deleting them when they are no longer needed. If "elements" is non-NULL, then pointers to the extracted elements are stored in "elements[[]0 .. num-1]" for the convenience of the caller. If "elements" is NULL, then the caller must use some other mechanism to perform any further operations (like deletion) on these elements. Caution: implementation also moves elements with indices [[]start+num ..]. Calling this routine inside a loop can cause quadratic behavior.</p><p>Memory copying behavior is identical to <a href=google.protobuf.repeated_field#RepeatedPtrField.ReleaseLast>ReleaseLast()</a>, described above: if this <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> is on an arena, an object copy is performed for each returned element, so that all returned element pointers are to heap-allocated copies. If this copy is not desired, the user should call <a href=google.protobuf.repeated_field#RepeatedPtrField.UnsafeArenaExtractSubrange>UnsafeArenaExtractSubrange()</a>.</p></div><hr><h3 id=RepeatedPtrField.UnsafeArenaExtractSubrange.details><code>void RepeatedPtrField::UnsafeArenaExtractSubrange(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int start,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int num,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element ** elements)</code></h3><div style=margin-left:16px><p>Identical to <a href=google.protobuf.repeated_field#RepeatedPtrField.ExtractSubrange>ExtractSubrange()</a> described above, except that when this repeated field is on an arena, no object copies are performed.</p><p>Instead, the raw object pointers are returned. Thus, if on an arena, the returned objects must not be freed, because they will not be heap-allocated objects.</p></div><hr><h3 id=RepeatedPtrField.AddCleared.details><code>void RepeatedPtrField::AddCleared(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element * value)</code></h3><div style=margin-left:16px><p>Add an element to the pool of cleared objects, passing ownership to the <a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a>.</p><p>The element must be cleared prior to calling this method.</p><p>This method cannot be called when the repeated field is on an arena or when |value| is; both cases will trigger a GOOGLE_DCHECK-failure.</p></div><hr><h3 id=RepeatedPtrField.ReleaseCleared.details><code>PROTOBUF_FUTURE_MUST_USE_RESULT Element *<br>&nbsp;&nbsp;&nbsp;&nbsp;RepeatedPtrField::ReleaseCleared()</code></h3><div style=margin-left:16px><p>Remove a single element from the cleared pool and return it, passing ownership to the caller.</p><p>The element is guaranteed to be cleared. Requires: <a href=google.protobuf.repeated_field#RepeatedPtrField.ClearedCount>ClearedCount()</a> > 0</p><p>This method cannot be called when the repeated field is on an arena; doing so will trigger a GOOGLE_DCHECK-failure.</p></div><hr><h3 id=RepeatedPtrField.erase.details><code><a href=google.protobuf.repeated_field#RepeatedPtrField.iterator>iterator</a> RepeatedPtrField::erase(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const_iterator position)</code></h3><div style=margin-left:16px><p>Removes the element referenced by position.</p><p>Returns an iterator to the element immediately following the removed element.</p><p>Invalidates all iterators at or after the removed element, including end().</p></div><hr><h3 id=RepeatedPtrField.erase.details><code><a href=google.protobuf.repeated_field#RepeatedPtrField.iterator>iterator</a> RepeatedPtrField::erase(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const_iterator first,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const_iterator last)</code></h3><div style=margin-left:16px><p>Removes the elements in the range [[]first, last).</p><p>Returns an iterator to the element immediately following the removed range.</p><p>Invalidates all iterators at or after the removed range, including end().</p></div><hr><h3 id=RepeatedPtrField.InternalSwap.details><code>void RepeatedPtrField::InternalSwap(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> * other)</code></h3><div style=margin-left:16px><p>For internal use only.</p><p>This is public due to it being called by generated code.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-78f81d98b6444e626ba0b333c523bbd5>1.4.35 -</h1><html devsite><head><title>service.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>service.h</h1><p><code>#include &lt;google/protobuf/service.h><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>DEPRECATED: This module declares the abstract interfaces underlying proto2 RPC services.</p><p>These are intended to be independent of any particular RPC implementation, so that proto2 services can be used on top of a variety of implementations. Starting with version 2.3.0, RPC implementations should not try to build on these, but should instead provide code generator plugins which generate code specific to the particular RPC implementation. This way the generated code can be more appropriate for the implementation in use and can avoid unnecessary layers of indirection.</p><p>When you use the protocol compiler to compile a service definition, it generates two classes: An abstract interface for the service (with methods matching the service definition) and a "stub" implementation. A stub is just a type-safe wrapper around an <a href=google.protobuf.service#RpcChannel>RpcChannel</a> which emulates a local implementation of the service.</p><p>For example, the service definition:</p><pre>service MyService {
  rpc Foo(MyRequest) returns(MyResponse);
}</pre><p>will generate abstract interface "MyService" and class "MyService::Stub". You could implement a MyService as follows:</p><pre>class MyServiceImpl : public MyService {
 public:
  MyServiceImpl() {}
  ~MyServiceImpl() {}
<p>// implements MyService &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</p>
<p>void Foo(google::protobuf::RpcController* controller,
const MyRequest* request,
MyResponse* response,
Closure* done) {
// &hellip; read request and fill in response &hellip;
done-&gt;Run();
}
};</pre></p><p>You would then register an instance of MyServiceImpl with your RPC server implementation. (How to do that depends on the implementation.)</p><p>To call a remote MyServiceImpl, first you need an <a href=google.protobuf.service#RpcChannel>RpcChannel</a> connected to it. How to construct a channel depends, again, on your RPC implementation. Here we use a hypothetical "MyRpcChannel" as an example:</p><pre>MyRpcChannel channel("rpc:hostname:1234/myservice");
MyRpcController controller;
MyServiceImpl::Stub stub(&amp;channel);
FooRequest request;
FooResponse response;
<p>// &hellip; fill in request &hellip;</p>
<p>stub.Foo(&amp;controller, request, &amp;response, NewCallback(HandleResponse));</pre></p><p>On Thread-Safety:</p><p>Different RPC implementations may make different guarantees about what threads they may run callbacks on, and what threads the application is allowed to use to call the RPC system. Portable software should be ready for callbacks to be called on any thread, but should not try to call the RPC system from any thread except for the ones on which it received the callbacks. Realistically, though, simple software will probably want to use a single-threaded RPC system while high-end software will want to use multiple threads. RPC implementations should provide multiple choices.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#Service>Service</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Abstract base interface for protocol-buffer-based RPC services.</div></td></tr><tr><td><div><code><a href=#RpcController>RpcController</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>An <a href=google.protobuf.service#RpcController>RpcController</a> mediates a single method call.</div></td></tr><tr><td><div><code><a href=#RpcChannel>RpcChannel</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Abstract interface for an RPC channel.</div></td></tr></table><h2 id=Service>class Service</h2><p><code>#include &lt;<a href=#>google/protobuf/service.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Abstract base interface for protocol-buffer-based RPC services.</p><p>Services themselves are abstract interfaces (implemented either by servers or as stubs), but they subclass this base interface. The methods of this interface can be used to call the methods of the <a href=google.protobuf.service#Service>Service</a> without knowing its exact type at compile time (analogous to <a href=google.protobuf.message#Reflection>Reflection</a>).</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=Service.ChannelOwnership><div style=padding-left:16px;text-indent:-16px><code><b>ChannelOwnership</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>When constructing a stub, you may pass STUB_OWNS_CHANNEL as the second parameter to the constructor to tell it to delete its <a href=google.protobuf.service#RpcChannel>RpcChannel</a> when destroyed. <a href=#Service.ChannelOwnership.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Service.Service><div style=padding-left:16px;text-indent:-16px><code><b>Service</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=Service.~Service><div style=padding-left:16px;text-indent:-16px><code><b>~Service</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual const <a href=google.protobuf.descriptor#ServiceDescriptor>ServiceDescriptor</a> *</code></td><td style=border-left-width:0 id=Service.GetDescriptor><div style=padding-left:16px;text-indent:-16px><code><b>GetDescriptor</b>() = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the <a href=google.protobuf.descriptor#ServiceDescriptor>ServiceDescriptor</a> describing this service and its methods.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=Service.CallMethod><div style=padding-left:16px;text-indent:-16px><code><b>CallMethod</b>(const <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> * method, <a href=google.protobuf.service#RpcController>RpcController</a> * controller, const <a href=google.protobuf.message#Message>Message</a> * request, <a href=google.protobuf.message#Message>Message</a> * response, Closure * done) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Call a method of the service specified by <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a>. <a href=#Service.CallMethod.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual const <a href=google.protobuf.message#Message>Message</a> &</code></td><td style=border-left-width:0 id=Service.GetRequestPrototype><div style=padding-left:16px;text-indent:-16px><code><b>GetRequestPrototype</b>(const <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> * method) const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.service#Service.CallMethod>CallMethod()</a> requires that the request and response passed in are of a particular subclass of <a href=google.protobuf.message#Message>Message</a>. <a href=#Service.GetRequestPrototype.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual const <a href=google.protobuf.message#Message>Message</a> &</code></td><td style=border-left-width:0 id=Service.GetResponsePrototype><div style=padding-left:16px;text-indent:-16px><code><b>GetResponsePrototype</b>(const <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> * method) const = 0</code></div></td></tr></table><hr><h3 id=Service.ChannelOwnership.details><code>enum Service::ChannelOwnership {<br>&nbsp;&nbsp;STUB_OWNS_CHANNEL,<br>&nbsp;&nbsp;STUB_DOESNT_OWN_CHANNEL<br>}</code></h3><div style=margin-left:16px><p>When constructing a stub, you may pass STUB_OWNS_CHANNEL as the second parameter to the constructor to tell it to delete its <a href=google.protobuf.service#RpcChannel>RpcChannel</a> when destroyed.</p><table><tr><td>STUB_OWNS_CHANNEL</td><td></td></tr><tr><td>STUB_DOESNT_OWN_CHANNEL</td><td></td></tr></table></div><hr><h3 id=Service.CallMethod.details><code>virtual void Service::CallMethod(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> * method,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.service#RpcController>RpcController</a> * controller,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> * request,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * response,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Closure * done) = 0</code></h3><div style=margin-left:16px><p>Call a method of the service specified by <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a>.</p><p>This is normally implemented as a simple switch() that calls the standard definitions of the service's methods.</p><p>Preconditions:</p><ul><li>method->service() == <a href=google.protobuf.service#Service.GetDescriptor>GetDescriptor()</a></li><li>request and response are of the exact same classes as the objects returned by GetRequestPrototype(method) and GetResponsePrototype(method).</li><li>After the call has started, the request must not be modified and the response must not be accessed at all until "done" is called.</li><li>"controller" is of the correct type for the RPC implementation being used by this <a href=google.protobuf.service#Service>Service</a>. For stubs, the "correct type" depends on the <a href=google.protobuf.service#RpcChannel>RpcChannel</a> which the stub is using. Server-side <a href=google.protobuf.service#Service>Service</a> implementations are expected to accept whatever type of <a href=google.protobuf.service#RpcController>RpcController</a> the server-side RPC implementation uses.</li></ul><p>Postconditions:</p><ul><li>"done" will be called when the method is complete. This may be before <a href=google.protobuf.service#Service.CallMethod>CallMethod()</a> returns or it may be at some point in the future.</li><li>If the RPC succeeded, "response" contains the response returned by the server.</li><li>If the RPC failed, "response"'s contents are undefined. The <a href=google.protobuf.service#RpcController>RpcController</a> can be queried to determine if an error occurred and possibly to get more information about the error.</li></ul></div><hr><h3 id=Service.GetRequestPrototype.details><code>virtual const <a href=google.protobuf.message#Message>Message</a> & Service::GetRequestPrototype(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> * method) const = 0</code></h3><div style=margin-left:16px><p><a href=google.protobuf.service#Service.CallMethod>CallMethod()</a> requires that the request and response passed in are of a particular subclass of <a href=google.protobuf.message#Message>Message</a>.</p><p><a href=google.protobuf.service#Service.GetRequestPrototype>GetRequestPrototype()</a> and GetResponsePrototype() get the default instances of these required types. You can then call <a href=google.protobuf.message#Message.New>Message::New()</a> on these instances to construct mutable objects which you can then pass to <a href=google.protobuf.service#Service.CallMethod>CallMethod()</a>.</p><p>Example:</p><pre>const MethodDescriptor* method =
  service-&gt;GetDescriptor()-&gt;FindMethodByName("Foo");
Message* request  = stub-&gt;GetRequestPrototype (method)-&gt;New();
Message* response = stub-&gt;GetResponsePrototype(method)-&gt;New();
request-&gt;ParseFromString(input);
service-&gt;CallMethod(method, *request, response, callback);</pre></div><h2 id=RpcController>class RpcController</h2><p><code>#include &lt;<a href=#>google/protobuf/service.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>An <a href=google.protobuf.service#RpcController>RpcController</a> mediates a single method call.</p><p>The primary purpose of the controller is to provide a way to manipulate settings specific to the RPC implementation and to find out about RPC-level errors.</p><p>The methods provided by the <a href=google.protobuf.service#RpcController>RpcController</a> interface are intended to be a "least common denominator" set of features which we expect all implementations to support. Specific implementations may provide more advanced features (e.g. deadline propagation).</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=RpcController.RpcController><div style=padding-left:16px;text-indent:-16px><code><b>RpcController</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=RpcController.~RpcController><div style=padding-left:16px;text-indent:-16px><code><b>~RpcController</b>()</code></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Client-side methods</h3><div style=font-style:italic;font-weight:400>These calls may be made from the client side only. Their results are undefined on the server side (may crash).</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=RpcController.Reset><div style=padding-left:16px;text-indent:-16px><code><b>Reset</b>() = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Resets the <a href=google.protobuf.service#RpcController>RpcController</a> to its initial state so that it may be reused in a new call. <a href=#RpcController.Reset.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=RpcController.Failed><div style=padding-left:16px;text-indent:-16px><code><b>Failed</b>() const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>After a call has finished, returns true if the call failed. <a href=#RpcController.Failed.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=RpcController.ErrorText><div style=padding-left:16px;text-indent:-16px><code><b>ErrorText</b>() const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If <a href=google.protobuf.service#RpcController.Failed>Failed()</a> is true, returns a human-readable description of the error.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=RpcController.StartCancel><div style=padding-left:16px;text-indent:-16px><code><b>StartCancel</b>() = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Advises the RPC system that the caller desires that the RPC call be canceled. <a href=#RpcController.StartCancel.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Server-side methods</h3><div style=font-style:italic;font-weight:400><p>These calls may be made from the server side only.</p><p>Their results are undefined on the client side (may crash).</p></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=RpcController.SetFailed><div style=padding-left:16px;text-indent:-16px><code><b>SetFailed</b>(const std::string & reason) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Causes <a href=google.protobuf.service#RpcController.Failed>Failed()</a> to return true on the client side. <a href=#RpcController.SetFailed.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=RpcController.IsCanceled><div style=padding-left:16px;text-indent:-16px><code><b>IsCanceled</b>() const = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If true, indicates that the client canceled the RPC, so the server may as well give up on replying to it. <a href=#RpcController.IsCanceled.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=RpcController.NotifyOnCancel><div style=padding-left:16px;text-indent:-16px><code><b>NotifyOnCancel</b>(Closure * callback) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Asks that the given callback be called when the RPC is canceled. <a href=#RpcController.NotifyOnCancel.details>more...</a></div></td></tr></table><hr><h3 id=RpcController.Reset.details><code>virtual void RpcController::Reset() = 0</code></h3><div style=margin-left:16px><p>Resets the <a href=google.protobuf.service#RpcController>RpcController</a> to its initial state so that it may be reused in a new call.</p><p>Must not be called while an RPC is in progress.</p></div><hr><h3 id=RpcController.Failed.details><code>virtual bool RpcController::Failed() const = 0</code></h3><div style=margin-left:16px><p>After a call has finished, returns true if the call failed.</p><p>The possible reasons for failure depend on the RPC implementation. <a href=google.protobuf.service#RpcController.Failed>Failed()</a> must not be called before a call has finished. If <a href=google.protobuf.service#RpcController.Failed>Failed()</a> returns true, the contents of the response message are undefined.</p></div><hr><h3 id=RpcController.StartCancel.details><code>virtual void RpcController::StartCancel() = 0</code></h3><div style=margin-left:16px><p>Advises the RPC system that the caller desires that the RPC call be canceled.</p><p>The RPC system may cancel it immediately, may wait awhile and then cancel it, or may not even cancel the call at all. If the call is canceled, the "done" callback will still be called and the <a href=google.protobuf.service#RpcController>RpcController</a> will indicate that the call failed at that time.</p></div><hr><h3 id=RpcController.SetFailed.details><code>virtual void RpcController::SetFailed(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & reason) = 0</code></h3><div style=margin-left:16px><p>Causes <a href=google.protobuf.service#RpcController.Failed>Failed()</a> to return true on the client side.</p><p>"reason" will be incorporated into the message returned by <a href=google.protobuf.service#RpcController.ErrorText>ErrorText()</a>. If you find you need to return machine-readable information about failures, you should incorporate it into your response protocol buffer and should NOT call <a href=google.protobuf.service#RpcController.SetFailed>SetFailed()</a>.</p></div><hr><h3 id=RpcController.IsCanceled.details><code>virtual bool RpcController::IsCanceled() const = 0</code></h3><div style=margin-left:16px><p>If true, indicates that the client canceled the RPC, so the server may as well give up on replying to it.</p><p>The server should still call the final "done" callback.</p></div><hr><h3 id=RpcController.NotifyOnCancel.details><code>virtual void RpcController::NotifyOnCancel(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Closure * callback) = 0</code></h3><div style=margin-left:16px><p>Asks that the given callback be called when the RPC is canceled.</p><p>The callback will always be called exactly once. If the RPC completes without being canceled, the callback will be called after completion. If the RPC has already been canceled when <a href=google.protobuf.service#RpcController.NotifyOnCancel>NotifyOnCancel()</a> is called, the callback will be called immediately.</p><p><a href=google.protobuf.service#RpcController.NotifyOnCancel>NotifyOnCancel()</a> must be called no more than once per request.</p></div><h2 id=RpcChannel>class RpcChannel</h2><p><code>#include &lt;<a href=#>google/protobuf/service.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Abstract interface for an RPC channel.</p><p>An <a href=google.protobuf.service#RpcChannel>RpcChannel</a> represents a communication line to a <a href=google.protobuf.service#Service>Service</a> which can be used to call that <a href=google.protobuf.service#Service>Service</a>'s methods. The <a href=google.protobuf.service#Service>Service</a> may be running on another machine. Normally, you should not call an <a href=google.protobuf.service#RpcChannel>RpcChannel</a> directly, but instead construct a stub <a href=google.protobuf.service#Service>Service</a> wrapping it. Example:</p><pre>RpcChannel* channel = new MyRpcChannel("remotehost.example.com:1234");
MyService* service = new MyService::Stub(channel);
service-&gt;MyMethod(request, &amp;response, callback);</pre><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=RpcChannel.RpcChannel><div style=padding-left:16px;text-indent:-16px><code><b>RpcChannel</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=RpcChannel.~RpcChannel><div style=padding-left:16px;text-indent:-16px><code><b>~RpcChannel</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=RpcChannel.CallMethod><div style=padding-left:16px;text-indent:-16px><code><b>CallMethod</b>(const <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> * method, <a href=google.protobuf.service#RpcController>RpcController</a> * controller, const <a href=google.protobuf.message#Message>Message</a> * request, <a href=google.protobuf.message#Message>Message</a> * response, Closure * done) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Call the given method of the remote service. <a href=#RpcChannel.CallMethod.details>more...</a></div></td></tr></table><hr><h3 id=RpcChannel.CallMethod.details><code>virtual void RpcChannel::CallMethod(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#MethodDescriptor>MethodDescriptor</a> * method,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.service#RpcController>RpcController</a> * controller,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> * request,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * response,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Closure * done) = 0</code></h3><div style=margin-left:16px><p>Call the given method of the remote service.</p><p>The signature of this procedure looks the same as <a href=google.protobuf.service#Service.CallMethod>Service::CallMethod()</a>, but the requirements are less strict in one important way: the request and response objects need not be of any specific class as long as their descriptors are method->input_type() and method->output_type().</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-d83cca053a0529949538cbc330d265d9>1.4.36 -</h1><html devsite><head><title>text_format.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>text_format.h</h1><p><code>#include &lt;google/protobuf/text_format.h><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Utilities for printing and parsing protocol messages in a human-readable, text-based format.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#TextFormat>TextFormat</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This class implements protocol buffer text format, colloquially known as text proto.</div></td></tr><tr><td><div><code><a href=#TextFormat.BaseTextGenerator>TextFormat::BaseTextGenerator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr><tr><td><div><code><a href=#TextFormat.FastFieldValuePrinter>TextFormat::FastFieldValuePrinter</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The default printer that converts scalar values from fields into their string representation.</div></td></tr><tr><td><div><code><a href=#TextFormat.FieldValuePrinter>TextFormat::FieldValuePrinter</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Deprecated: please use <a href=google.protobuf.text_format#TextFormat.FastFieldValuePrinter>FastFieldValuePrinter</a> instead.</div></td></tr><tr><td><div><code><a href=#TextFormat.Finder>TextFormat::Finder</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Interface that Printers or Parsers can use to find extensions, or types referenced in Any messages.</div></td></tr><tr><td><div><code><a href=#TextFormat.MessagePrinter>TextFormat::MessagePrinter</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr><tr><td><div><code><a href=#TextFormat.ParseInfoTree>TextFormat::ParseInfoTree</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Data structure which is populated with the locations of each field value parsed from the text.</div></td></tr><tr><td><div><code><a href=#TextFormat.ParseLocation>TextFormat::ParseLocation</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A location in the parsed text.</div></td></tr><tr><td><div><code><a href=#TextFormat.Parser>TextFormat::Parser</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For more control over parsing, use this class.</div></td></tr><tr><td><div><code><a href=#TextFormat.Printer>TextFormat::Printer</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Class for those users which require more fine-grained control over how a protobuffer message is printed out.</div></td></tr></table><h2 id=TextFormat>class TextFormat</h2><p><code>#include &lt;<a href=#>google/protobuf/text_format.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>This class implements protocol buffer text format, colloquially known as text proto.</p><p>Printing and parsing protocol messages in text format is useful for debugging and human editing of messages.</p><p>This class is really a namespace that contains only static methods.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=TextFormat.Print><div style=padding-left:16px;text-indent:-16px><code><b>Print</b>(const <a href=google.protobuf.message#Message>Message</a> & message, <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Outputs a textual representation of the given message to the given output stream. <a href=#TextFormat.Print.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=TextFormat.PrintUnknownFields><div style=padding-left:16px;text-indent:-16px><code><b>PrintUnknownFields</b>(const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> & unknown_fields, <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Print the fields in an <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a>. <a href=#TextFormat.PrintUnknownFields.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=TextFormat.PrintToString><div style=padding-left:16px;text-indent:-16px><code><b>PrintToString</b>(const <a href=google.protobuf.message#Message>Message</a> & message, std::string * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.Print>Print()</a>, but outputs directly to a string. <a href=#TextFormat.PrintToString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=TextFormat.PrintUnknownFieldsToString><div style=padding-left:16px;text-indent:-16px><code><b>PrintUnknownFieldsToString</b>(const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> & unknown_fields, std::string * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.PrintUnknownFields>PrintUnknownFields()</a>, but outputs directly to a string. <a href=#TextFormat.PrintUnknownFieldsToString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=TextFormat.PrintFieldValueToString><div style=padding-left:16px;text-indent:-16px><code><b>PrintFieldValueToString</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index, std::string * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Outputs a textual representation of the value of the field supplied on the message supplied. <a href=#TextFormat.PrintFieldValueToString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=TextFormat.Parse><div style=padding-left:16px;text-indent:-16px><code><b>Parse</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * input, <a href=google.protobuf.message#Message>Message</a> * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Parses a text-format protocol message from the given input stream to the given message object. <a href=#TextFormat.Parse.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=TextFormat.ParseFromString><div style=padding-left:16px;text-indent:-16px><code><b>ParseFromString</b>(ConstStringParam input, <a href=google.protobuf.message#Message>Message</a> * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.Parse>Parse()</a>, but reads directly from a string.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=TextFormat.Merge><div style=padding-left:16px;text-indent:-16px><code><b>Merge</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * input, <a href=google.protobuf.message#Message>Message</a> * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.Parse>Parse()</a>, but the data is merged into the given message, as if using <a href=google.protobuf.message#Message.MergeFrom>Message::MergeFrom()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=TextFormat.MergeFromString><div style=padding-left:16px;text-indent:-16px><code><b>MergeFromString</b>(ConstStringParam input, <a href=google.protobuf.message#Message>Message</a> * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.Merge>Merge()</a>, but reads directly from a string.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=TextFormat.ParseFieldValueFromString><div style=padding-left:16px;text-indent:-16px><code><b>ParseFieldValueFromString</b>(const std::string & input, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, <a href=google.protobuf.message#Message>Message</a> * message)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Parse the given text as a single field value and store it into the given field of the given message. <a href=#TextFormat.ParseFieldValueFromString.details>more...</a></div></td></tr></table><hr><h3 id=TextFormat.Print.details><code>static bool TextFormat::Print(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * output)</code></h3><div style=margin-left:16px><p>Outputs a textual representation of the given message to the given output stream.</p><p>Returns false if printing fails.</p></div><hr><h3 id=TextFormat.PrintUnknownFields.details><code>static bool TextFormat::PrintUnknownFields(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> & unknown_fields,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * output)</code></h3><div style=margin-left:16px><p>Print the fields in an <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a>.</p><p>They are printed by tag number only. Embedded messages are heuristically identified by attempting to parse them. Returns false if printing fails.</p></div><hr><h3 id=TextFormat.PrintToString.details><code>static bool TextFormat::PrintToString(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * output)</code></h3><div style=margin-left:16px><p>Like <a href=google.protobuf.text_format#TextFormat.Print>Print()</a>, but outputs directly to a string.</p><p>Note: output will be cleared prior to printing, and will be left empty even if printing fails. Returns false if printing fails.</p></div><hr><h3 id=TextFormat.PrintUnknownFieldsToString.details><code>static bool TextFormat::PrintUnknownFieldsToString(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> & unknown_fields,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * output)</code></h3><div style=margin-left:16px><p>Like <a href=google.protobuf.text_format#TextFormat.PrintUnknownFields>PrintUnknownFields()</a>, but outputs directly to a string.</p><p>Returns false if printing fails.</p></div><hr><h3 id=TextFormat.PrintFieldValueToString.details><code>static void TextFormat::PrintFieldValueToString(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * output)</code></h3><div style=margin-left:16px><p>Outputs a textual representation of the value of the field supplied on the message supplied.</p><p>For non-repeated fields, an index of -1 must be supplied. Note that this method will print the default value for a field if it is not set.</p></div><hr><h3 id=TextFormat.Parse.details><code>static bool TextFormat::Parse(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * input,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * output)</code></h3><div style=margin-left:16px><p>Parses a text-format protocol message from the given input stream to the given message object.</p><p>This function parses the human-readable format written by <a href=google.protobuf.text_format#TextFormat.Print>Print()</a>. Returns true on success. The message is cleared first, even if the function fails &ndash; See <a href=google.protobuf.text_format#TextFormat.Merge>Merge()</a> to avoid this behavior.</p><p>Example input: "user {\n id: 123 extra { gender: MALE language: 'en' }\n}"</p><p>One use for this function is parsing handwritten strings in test code. Another use is to parse the output from <a href=google.protobuf.message#Message.DebugString>google::protobuf::Message::DebugString()</a> (or ShortDebugString()), because these functions output using <a href=google.protobuf.text_format#TextFormat.Print>google::protobuf::TextFormat::Print()</a>.</p><p>If you would like to read a protocol buffer serialized in the (non-human-readable) binary wire format, see <a href=google.protobuf.message_lite#MessageLite.ParseFromString>google::protobuf::MessageLite::ParseFromString()</a>.</p></div><hr><h3 id=TextFormat.ParseFieldValueFromString.details><code>static bool TextFormat::ParseFieldValueFromString(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & input,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message)</code></h3><div style=margin-left:16px><p>Parse the given text as a single field value and store it into the given field of the given message.</p><p>If the field is a repeated field, the new value will be added to the end</p></div><h2 id=TextFormat.BaseTextGenerator>class TextFormat::BaseTextGenerator</h2><p><code>#include &lt;<a href=#>google/protobuf/text_format.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=TextFormat.BaseTextGenerator.~BaseTextGenerator><div style=padding-left:16px;text-indent:-16px><code><b>~BaseTextGenerator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.BaseTextGenerator.Indent><div style=padding-left:16px;text-indent:-16px><code><b>Indent</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.BaseTextGenerator.Outdent><div style=padding-left:16px;text-indent:-16px><code><b>Outdent</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual size_t</code></td><td style=border-left-width:0 id=TextFormat.BaseTextGenerator.GetCurrentIndentationSize><div style=padding-left:16px;text-indent:-16px><code><b>GetCurrentIndentationSize</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the current indentation size in characters.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.BaseTextGenerator.Print><div style=padding-left:16px;text-indent:-16px><code><b>Print</b>(const char * text, size_t size) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Print text to the output stream.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.BaseTextGenerator.PrintString><div style=padding-left:16px;text-indent:-16px><code><b>PrintString</b>(const std::string & str)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=TextFormat.BaseTextGenerator.PrintLiteral><div style=padding-left:16px;text-indent:-16px><code><b>PrintLiteral</b>(const char(&) text)</code></div></td></tr></table><h2 id=TextFormat.FastFieldValuePrinter>class TextFormat::FastFieldValuePrinter</h2><p><code>#include &lt;<a href=#>google/protobuf/text_format.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>The default printer that converts scalar values from fields into their string representation.</p><p>You can derive from this <a href=google.protobuf.text_format#TextFormat.FastFieldValuePrinter>FastFieldValuePrinter</a> if you want to have fields to be printed in a different way and register it at the <a href=google.protobuf.text_format#TextFormat.Printer>Printer</a>.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.FastFieldValuePrinter><div style=padding-left:16px;text-indent:-16px><code><b>FastFieldValuePrinter</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.~FastFieldValuePrinter><div style=padding-left:16px;text-indent:-16px><code><b>~FastFieldValuePrinter</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintBool><div style=padding-left:16px;text-indent:-16px><code><b>PrintBool</b>(bool val, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintInt32><div style=padding-left:16px;text-indent:-16px><code><b>PrintInt32</b>(int32 val, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintUInt32><div style=padding-left:16px;text-indent:-16px><code><b>PrintUInt32</b>(uint32 val, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintInt64><div style=padding-left:16px;text-indent:-16px><code><b>PrintInt64</b>(int64 val, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintUInt64><div style=padding-left:16px;text-indent:-16px><code><b>PrintUInt64</b>(uint64 val, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintFloat><div style=padding-left:16px;text-indent:-16px><code><b>PrintFloat</b>(float val, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintDouble><div style=padding-left:16px;text-indent:-16px><code><b>PrintDouble</b>(double val, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintString><div style=padding-left:16px;text-indent:-16px><code><b>PrintString</b>(const std::string & val, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintBytes><div style=padding-left:16px;text-indent:-16px><code><b>PrintBytes</b>(const std::string & val, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintEnum><div style=padding-left:16px;text-indent:-16px><code><b>PrintEnum</b>(int32 val, const std::string & name, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintFieldName><div style=padding-left:16px;text-indent:-16px><code><b>PrintFieldName</b>(const <a href=google.protobuf.message#Message>Message</a> & message, int field_index, int field_count, const <a href=google.protobuf.message#Reflection>Reflection</a> * reflection, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintFieldName><div style=padding-left:16px;text-indent:-16px><code><b>PrintFieldName</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.message#Reflection>Reflection</a> * reflection, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintMessageStart><div style=padding-left:16px;text-indent:-16px><code><b>PrintMessageStart</b>(const <a href=google.protobuf.message#Message>Message</a> & message, int field_index, int field_count, bool single_line_mode, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintMessageContent><div style=padding-left:16px;text-indent:-16px><code><b>PrintMessageContent</b>(const <a href=google.protobuf.message#Message>Message</a> & message, int field_index, int field_count, bool single_line_mode, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Allows to override the logic on how to print the content of a message. <a href=#TextFormat.FastFieldValuePrinter.PrintMessageContent.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.FastFieldValuePrinter.PrintMessageEnd><div style=padding-left:16px;text-indent:-16px><code><b>PrintMessageEnd</b>(const <a href=google.protobuf.message#Message>Message</a> & message, int field_index, int field_count, bool single_line_mode, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></div></td></tr></table><hr><h3 id=TextFormat.FastFieldValuePrinter.PrintMessageContent.details><code>virtual bool FastFieldValuePrinter::PrintMessageContent(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int field_index,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int field_count,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool single_line_mode,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const</code></h3><div style=margin-left:16px><p>Allows to override the logic on how to print the content of a message.</p><p>Return false to use the default printing logic. Note that it is legal for this function to print something and then return false to use the default content printing (although at that point it would behave similarly to PrintMessageStart).</p></div><h2 id=TextFormat.FieldValuePrinter>class TextFormat::FieldValuePrinter</h2><p><code>#include &lt;<a href=#>google/protobuf/text_format.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Deprecated: please use <a href=google.protobuf.text_format#TextFormat.FastFieldValuePrinter>FastFieldValuePrinter</a> instead.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.FieldValuePrinter><div style=padding-left:16px;text-indent:-16px><code><b>FieldValuePrinter</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.~FieldValuePrinter><div style=padding-left:16px;text-indent:-16px><code><b>~FieldValuePrinter</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.PrintBool><div style=padding-left:16px;text-indent:-16px><code><b>PrintBool</b>(bool val) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.PrintInt32><div style=padding-left:16px;text-indent:-16px><code><b>PrintInt32</b>(int32 val) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.PrintUInt32><div style=padding-left:16px;text-indent:-16px><code><b>PrintUInt32</b>(uint32 val) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.PrintInt64><div style=padding-left:16px;text-indent:-16px><code><b>PrintInt64</b>(int64 val) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.PrintUInt64><div style=padding-left:16px;text-indent:-16px><code><b>PrintUInt64</b>(uint64 val) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.PrintFloat><div style=padding-left:16px;text-indent:-16px><code><b>PrintFloat</b>(float val) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.PrintDouble><div style=padding-left:16px;text-indent:-16px><code><b>PrintDouble</b>(double val) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.PrintString><div style=padding-left:16px;text-indent:-16px><code><b>PrintString</b>(const std::string & val) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.PrintBytes><div style=padding-left:16px;text-indent:-16px><code><b>PrintBytes</b>(const std::string & val) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.PrintEnum><div style=padding-left:16px;text-indent:-16px><code><b>PrintEnum</b>(int32 val, const std::string & name) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.PrintFieldName><div style=padding-left:16px;text-indent:-16px><code><b>PrintFieldName</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.message#Reflection>Reflection</a> * reflection, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.PrintMessageStart><div style=padding-left:16px;text-indent:-16px><code><b>PrintMessageStart</b>(const <a href=google.protobuf.message#Message>Message</a> & message, int field_index, int field_count, bool single_line_mode) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual std::string</code></td><td style=border-left-width:0 id=TextFormat.FieldValuePrinter.PrintMessageEnd><div style=padding-left:16px;text-indent:-16px><code><b>PrintMessageEnd</b>(const <a href=google.protobuf.message#Message>Message</a> & message, int field_index, int field_count, bool single_line_mode) const</code></div></td></tr></table><h2 id=TextFormat.Finder>class TextFormat::Finder</h2><p><code>#include &lt;<a href=#>google/protobuf/text_format.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Interface that Printers or Parsers can use to find extensions, or types referenced in Any messages.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=TextFormat.Finder.~Finder><div style=padding-left:16px;text-indent:-16px><code><b>~Finder</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=TextFormat.Finder.FindExtension><div style=padding-left:16px;text-indent:-16px><code><b>FindExtension</b>(<a href=google.protobuf.message#Message>Message</a> * message, const std::string & name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Try to find an extension of *message by fully-qualified field name. <a href=#TextFormat.Finder.FindExtension.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=TextFormat.Finder.FindExtensionByNumber><div style=padding-left:16px;text-indent:-16px><code><b>FindExtensionByNumber</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor, int number) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Similar to FindExtension, but uses a <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> and the extension number instead of using a <a href=google.protobuf.message#Message>Message</a> and the name when doing the look up.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *</code></td><td style=border-left-width:0 id=TextFormat.Finder.FindAnyType><div style=padding-left:16px;text-indent:-16px><code><b>FindAnyType</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const std::string & prefix, const std::string & name) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the message type for an Any proto. <a href=#TextFormat.Finder.FindAnyType.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual <a href=google.protobuf.message#MessageFactory>MessageFactory</a> *</code></td><td style=border-left-width:0 id=TextFormat.Finder.FindExtensionFactory><div style=padding-left:16px;text-indent:-16px><code><b>FindExtensionFactory</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Find the message factory for the given extension field. <a href=#TextFormat.Finder.FindExtensionFactory.details>more...</a></div></td></tr></table><hr><h3 id=TextFormat.Finder.FindExtension.details><code>virtual const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Finder::FindExtension(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & name) const</code></h3><div style=margin-left:16px><p>Try to find an extension of *message by fully-qualified field name.</p><p>Returns NULL if no extension is known for this name or number. The base implementation uses the extensions already known by the message.</p></div><hr><h3 id=TextFormat.Finder.FindAnyType.details><code>virtual const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> *<br>&nbsp;&nbsp;&nbsp;&nbsp;Finder::FindAnyType(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & prefix,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & name) const</code></h3><div style=margin-left:16px><p>Find the message type for an Any proto.</p><p>Returns NULL if no message is known for this name. The base implementation only accepts prefixes of type.googleprod.com/ or type.googleapis.com/, and searches the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> of the parent message.</p></div><hr><h3 id=TextFormat.Finder.FindExtensionFactory.details><code>virtual <a href=google.protobuf.message#MessageFactory>MessageFactory</a> * Finder::FindExtensionFactory(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field) const</code></h3><div style=margin-left:16px><p>Find the message factory for the given extension field.</p><p>This can be used to generalize the <a href=google.protobuf.text_format#TextFormat.Parser>Parser</a> to add extension fields to a message in the same way as the "input" message for the <a href=google.protobuf.text_format#TextFormat.Parser>Parser</a>.</p></div><h2 id=TextFormat.MessagePrinter>class TextFormat::MessagePrinter</h2><p><code>#include &lt;<a href=#>google/protobuf/text_format.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=TextFormat.MessagePrinter.MessagePrinter><div style=padding-left:16px;text-indent:-16px><code><b>MessagePrinter</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=TextFormat.MessagePrinter.~MessagePrinter><div style=padding-left:16px;text-indent:-16px><code><b>~MessagePrinter</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=TextFormat.MessagePrinter.Print><div style=padding-left:16px;text-indent:-16px><code><b>Print</b>(const <a href=google.protobuf.message#Message>Message</a> & message, bool single_line_mode, <a href=google.protobuf.text_format#TextFormat.BaseTextGenerator>BaseTextGenerator</a> * generator) const = 0</code></div></td></tr></table><h2 id=TextFormat.ParseInfoTree>class TextFormat::ParseInfoTree</h2><p><code>#include &lt;<a href=#>google/protobuf/text_format.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Data structure which is populated with the locations of each field value parsed from the text.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=TextFormat.ParseInfoTree.ParseInfoTree><div style=padding-left:16px;text-indent:-16px><code><b>ParseInfoTree</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=TextFormat.ParseInfoTree.ParseInfoTree><div style=padding-left:16px;text-indent:-16px><code><b>ParseInfoTree</b>(const <a href=google.protobuf.text_format#TextFormat.ParseInfoTree>ParseInfoTree</a> & )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.text_format#TextFormat.ParseInfoTree>ParseInfoTree</a> &</code></td><td style=border-left-width:0 id="TextFormat.ParseInfoTree.operator="><div style=padding-left:16px;text-indent:-16px><code><b>operator=</b>(const <a href=google.protobuf.text_format#TextFormat.ParseInfoTree>ParseInfoTree</a> & )</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.text_format#TextFormat.ParseLocation>ParseLocation</a></code></td><td style=border-left-width:0 id=TextFormat.ParseInfoTree.GetLocation><div style=padding-left:16px;text-indent:-16px><code><b>GetLocation</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the parse location for index-th value of the field in the parsed text. <a href=#TextFormat.ParseInfoTree.GetLocation.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.text_format#TextFormat.ParseInfoTree>ParseInfoTree</a> *</code></td><td style=border-left-width:0 id=TextFormat.ParseInfoTree.GetTreeForNested><div style=padding-left:16px;text-indent:-16px><code><b>GetTreeForNested</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the parse info tree for the given field, which must be a message type. <a href=#TextFormat.ParseInfoTree.GetTreeForNested.details>more...</a></div></td></tr></table><hr><h3 id=TextFormat.ParseInfoTree.GetLocation.details><code><a href=google.protobuf.text_format#TextFormat.ParseLocation>ParseLocation</a> ParseInfoTree::GetLocation(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Returns the parse location for index-th value of the field in the parsed text.</p><p>If none exists, returns a location with line = -1. Index should be -1 for not-repeated fields.</p></div><hr><h3 id=TextFormat.ParseInfoTree.GetTreeForNested.details><code><a href=google.protobuf.text_format#TextFormat.ParseInfoTree>ParseInfoTree</a> * ParseInfoTree::GetTreeForNested(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Returns the parse info tree for the given field, which must be a message type.</p><p>The nested information tree is owned by the root tree and will be deleted when it is deleted.</p></div><h2 id=TextFormat.ParseLocation>struct TextFormat::ParseLocation</h2><p><code>#include &lt;<a href=#>google/protobuf/text_format.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>A location in the parsed text.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=TextFormat.ParseLocation.line><div style=padding-left:16px;text-indent:-16px><code><b>line</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=TextFormat.ParseLocation.column><div style=padding-left:16px;text-indent:-16px><code><b>column</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=TextFormat.ParseLocation.ParseLocation><div style=padding-left:16px;text-indent:-16px><code><b>ParseLocation</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=TextFormat.ParseLocation.ParseLocation><div style=padding-left:16px;text-indent:-16px><code><b>ParseLocation</b>(int line_param, int column_param)</code></div></td></tr></table><h2 id=TextFormat.Parser>class TextFormat::Parser</h2><p><code>#include &lt;<a href=#>google/protobuf/text_format.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>For more control over parsing, use this class.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=TextFormat.Parser.Parser><div style=padding-left:16px;text-indent:-16px><code><b>Parser</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=TextFormat.Parser.~Parser><div style=padding-left:16px;text-indent:-16px><code><b>~Parser</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=TextFormat.Parser.Parse><div style=padding-left:16px;text-indent:-16px><code><b>Parse</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * input, <a href=google.protobuf.message#Message>Message</a> * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.Parse>TextFormat::Parse()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=TextFormat.Parser.ParseFromString><div style=padding-left:16px;text-indent:-16px><code><b>ParseFromString</b>(ConstStringParam input, <a href=google.protobuf.message#Message>Message</a> * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.ParseFromString>TextFormat::ParseFromString()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=TextFormat.Parser.Merge><div style=padding-left:16px;text-indent:-16px><code><b>Merge</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * input, <a href=google.protobuf.message#Message>Message</a> * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.Merge>TextFormat::Merge()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=TextFormat.Parser.MergeFromString><div style=padding-left:16px;text-indent:-16px><code><b>MergeFromString</b>(ConstStringParam input, <a href=google.protobuf.message#Message>Message</a> * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.MergeFromString>TextFormat::MergeFromString()</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Parser.RecordErrorsTo><div style=padding-left:16px;text-indent:-16px><code><b>RecordErrorsTo</b>(<a href=google.protobuf.io.tokenizer#ErrorCollector>io::ErrorCollector</a> * error_collector)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Set where to report parse errors. <a href=#TextFormat.Parser.RecordErrorsTo.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Parser.SetFinder><div style=padding-left:16px;text-indent:-16px><code><b>SetFinder</b>(const <a href=google.protobuf.text_format#TextFormat.Finder>Finder</a> * finder)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Set how parser finds extensions. <a href=#TextFormat.Parser.SetFinder.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Parser.WriteLocationsTo><div style=padding-left:16px;text-indent:-16px><code><b>WriteLocationsTo</b>(<a href=google.protobuf.text_format#TextFormat.ParseInfoTree>ParseInfoTree</a> * tree)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sets where location information about the parse will be written. <a href=#TextFormat.Parser.WriteLocationsTo.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Parser.AllowPartialMessage><div style=padding-left:16px;text-indent:-16px><code><b>AllowPartialMessage</b>(bool allow)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Normally parsing fails if, after parsing, output->IsInitialized() returns false. <a href=#TextFormat.Parser.AllowPartialMessage.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Parser.AllowCaseInsensitiveField><div style=padding-left:16px;text-indent:-16px><code><b>AllowCaseInsensitiveField</b>(bool allow)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Allow field names to be matched case-insensitively. <a href=#TextFormat.Parser.AllowCaseInsensitiveField.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=TextFormat.Parser.ParseFieldValueFromString><div style=padding-left:16px;text-indent:-16px><code><b>ParseFieldValueFromString</b>(const std::string & input, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, <a href=google.protobuf.message#Message>Message</a> * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.ParseFieldValueFromString>TextFormat::ParseFieldValueFromString</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Parser.AllowUnknownExtension><div style=padding-left:16px;text-indent:-16px><code><b>AllowUnknownExtension</b>(bool allow)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>When an unknown extension is met, parsing will fail if this option is set to false (the default). <a href=#TextFormat.Parser.AllowUnknownExtension.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Parser.AllowUnknownField><div style=padding-left:16px;text-indent:-16px><code><b>AllowUnknownField</b>(bool allow)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>When an unknown field is met, parsing will fail if this option is set to false (the default). <a href=#TextFormat.Parser.AllowUnknownField.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Parser.AllowFieldNumber><div style=padding-left:16px;text-indent:-16px><code><b>AllowFieldNumber</b>(bool allow)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Parser.SetRecursionLimit><div style=padding-left:16px;text-indent:-16px><code><b>SetRecursionLimit</b>(int limit)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sets maximum recursion depth which parser can use. <a href=#TextFormat.Parser.SetRecursionLimit.details>more...</a></div></td></tr></table><hr><h3 id=TextFormat.Parser.RecordErrorsTo.details><code>void Parser::RecordErrorsTo(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.tokenizer#ErrorCollector>io::ErrorCollector</a> * error_collector)</code></h3><div style=margin-left:16px><p>Set where to report parse errors.</p><p>If NULL (the default), errors will be printed to stderr.</p></div><hr><h3 id=TextFormat.Parser.SetFinder.details><code>void Parser::SetFinder(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.text_format#TextFormat.Finder>Finder</a> * finder)</code></h3><div style=margin-left:16px><p>Set how parser finds extensions.</p><p>If NULL (the default), the parser will use the standard <a href=google.protobuf.message#Reflection>Reflection</a> object associated with the message being parsed.</p></div><hr><h3 id=TextFormat.Parser.WriteLocationsTo.details><code>void Parser::WriteLocationsTo(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.text_format#TextFormat.ParseInfoTree>ParseInfoTree</a> * tree)</code></h3><div style=margin-left:16px><p>Sets where location information about the parse will be written.</p><p>If NULL (the default), then no location will be written.</p></div><hr><h3 id=TextFormat.Parser.AllowPartialMessage.details><code>void Parser::AllowPartialMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool allow)</code></h3><div style=margin-left:16px><p>Normally parsing fails if, after parsing, output->IsInitialized() returns false.</p><p>Call AllowPartialMessage(true) to skip this check.</p></div><hr><h3 id=TextFormat.Parser.AllowCaseInsensitiveField.details><code>void Parser::AllowCaseInsensitiveField(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool allow)</code></h3><div style=margin-left:16px><p>Allow field names to be matched case-insensitively.</p><p>This is not advisable if there are fields that only differ in case, or if you want to enforce writing in the canonical form. This is 'false' by default.</p></div><hr><h3 id=TextFormat.Parser.AllowUnknownExtension.details><code>void Parser::AllowUnknownExtension(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool allow)</code></h3><div style=margin-left:16px><p>When an unknown extension is met, parsing will fail if this option is set to false (the default).</p><p>If true, unknown extensions will be ignored and a warning message will be generated. Beware! Setting this option true may hide some errors (e.g. spelling error on extension name). This allows data loss; unlike binary format, text format cannot preserve unknown extensions. Avoid using this option if possible.</p></div><hr><h3 id=TextFormat.Parser.AllowUnknownField.details><code>void Parser::AllowUnknownField(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool allow)</code></h3><div style=margin-left:16px><p>When an unknown field is met, parsing will fail if this option is set to false (the default).</p><p>If true, unknown fields will be ignored and a warning message will be generated. Beware! Setting this option true may hide some errors (e.g. spelling error on field name). This allows data loss; unlike binary format, text format cannot preserve unknown fields. Avoid using this option if possible.</p></div><hr><h3 id=TextFormat.Parser.SetRecursionLimit.details><code>void Parser::SetRecursionLimit(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int limit)</code></h3><div style=margin-left:16px><p>Sets maximum recursion depth which parser can use.</p><p>This is effectively the maximum allowed nesting of proto messages.</p></div><h2 id=TextFormat.Printer>class TextFormat::Printer</h2><p><code>#include &lt;<a href=#>google/protobuf/text_format.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Class for those users which require more fine-grained control over how a protobuffer message is printed out.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=TextFormat.Printer.Printer><div style=padding-left:16px;text-indent:-16px><code><b>Printer</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=TextFormat.Printer.Print><div style=padding-left:16px;text-indent:-16px><code><b>Print</b>(const <a href=google.protobuf.message#Message>Message</a> & message, <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.Print>TextFormat::Print</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=TextFormat.Printer.PrintUnknownFields><div style=padding-left:16px;text-indent:-16px><code><b>PrintUnknownFields</b>(const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> & unknown_fields, <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.PrintUnknownFields>TextFormat::PrintUnknownFields</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=TextFormat.Printer.PrintToString><div style=padding-left:16px;text-indent:-16px><code><b>PrintToString</b>(const <a href=google.protobuf.message#Message>Message</a> & message, std::string * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.PrintToString>TextFormat::PrintToString</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=TextFormat.Printer.PrintUnknownFieldsToString><div style=padding-left:16px;text-indent:-16px><code><b>PrintUnknownFieldsToString</b>(const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> & unknown_fields, std::string * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.PrintUnknownFieldsToString>TextFormat::PrintUnknownFieldsToString</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Printer.PrintFieldValueToString><div style=padding-left:16px;text-indent:-16px><code><b>PrintFieldValueToString</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index, std::string * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Like <a href=google.protobuf.text_format#TextFormat.PrintFieldValueToString>TextFormat::PrintFieldValueToString</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Printer.SetInitialIndentLevel><div style=padding-left:16px;text-indent:-16px><code><b>SetInitialIndentLevel</b>(int indent_level)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Adjust the initial indent level of all output. <a href=#TextFormat.Printer.SetInitialIndentLevel.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Printer.SetSingleLineMode><div style=padding-left:16px;text-indent:-16px><code><b>SetSingleLineMode</b>(bool single_line_mode)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If printing in single line mode, then the entire message will be output on a single line with no line breaks.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=TextFormat.Printer.IsInSingleLineMode><div style=padding-left:16px;text-indent:-16px><code><b>IsInSingleLineMode</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Printer.SetUseFieldNumber><div style=padding-left:16px;text-indent:-16px><code><b>SetUseFieldNumber</b>(bool use_field_number)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If use_field_number is true, uses field number instead of field name.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Printer.SetUseShortRepeatedPrimitives><div style=padding-left:16px;text-indent:-16px><code><b>SetUseShortRepeatedPrimitives</b>(bool use_short_repeated_primitives)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Set true to print repeated primitives in a format like: <a href=#TextFormat.Printer.SetUseShortRepeatedPrimitives.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Printer.SetUseUtf8StringEscaping><div style=padding-left:16px;text-indent:-16px><code><b>SetUseUtf8StringEscaping</b>(bool as_utf8)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Set true to output UTF-8 instead of ASCII. <a href=#TextFormat.Printer.SetUseUtf8StringEscaping.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Printer.SetDefaultFieldValuePrinter><div style=padding-left:16px;text-indent:-16px><code><b>SetDefaultFieldValuePrinter</b>(const <a href=google.protobuf.text_format#TextFormat.FastFieldValuePrinter>FastFieldValuePrinter</a> * printer)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Set the default <a href=google.protobuf.text_format#TextFormat.FastFieldValuePrinter>FastFieldValuePrinter</a> that is used for all fields that don't have a field-specific printer registered. <a href=#TextFormat.Printer.SetDefaultFieldValuePrinter.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Printer.SetDefaultFieldValuePrinter><div style=padding-left:16px;text-indent:-16px><code><b>SetDefaultFieldValuePrinter</b>(const <a href=google.protobuf.text_format#TextFormat.FieldValuePrinter>FieldValuePrinter</a> * printer)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Printer.SetHideUnknownFields><div style=padding-left:16px;text-indent:-16px><code><b>SetHideUnknownFields</b>(bool hide)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sets whether we want to hide unknown fields or not. <a href=#TextFormat.Printer.SetHideUnknownFields.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Printer.SetPrintMessageFieldsInIndexOrder><div style=padding-left:16px;text-indent:-16px><code><b>SetPrintMessageFieldsInIndexOrder</b>(bool print_message_fields_in_index_order)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If print_message_fields_in_index_order is true, fields of a proto message will be printed using the order defined in source code instead of the field number, extensions will be printed at the end of the message and their relative order is determined by the extension number. <a href=#TextFormat.Printer.SetPrintMessageFieldsInIndexOrder.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Printer.SetExpandAny><div style=padding-left:16px;text-indent:-16px><code><b>SetExpandAny</b>(bool expand)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If expand==true, expand google.protobuf.Any payloads. <a href=#TextFormat.Printer.SetExpandAny.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Printer.SetFinder><div style=padding-left:16px;text-indent:-16px><code><b>SetFinder</b>(const <a href=google.protobuf.text_format#TextFormat.Finder>Finder</a> * finder)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Set how parser finds message for Any payloads.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=TextFormat.Printer.SetTruncateStringFieldLongerThan><div style=padding-left:16px;text-indent:-16px><code><b>SetTruncateStringFieldLongerThan</b>(const int64 truncate_string_field_longer_than)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If non-zero, we truncate all string fields that are longer than this threshold. <a href=#TextFormat.Printer.SetTruncateStringFieldLongerThan.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=TextFormat.Printer.RegisterFieldValuePrinter><div style=padding-left:16px;text-indent:-16px><code><b>RegisterFieldValuePrinter</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, const <a href=google.protobuf.text_format#TextFormat.FastFieldValuePrinter>FastFieldValuePrinter</a> * printer)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Register a custom field-specific <a href=google.protobuf.text_format#TextFormat.FastFieldValuePrinter>FastFieldValuePrinter</a> for fields with a particular <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a>. <a href=#TextFormat.Printer.RegisterFieldValuePrinter.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=TextFormat.Printer.RegisterFieldValuePrinter><div style=padding-left:16px;text-indent:-16px><code><b>RegisterFieldValuePrinter</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, const <a href=google.protobuf.text_format#TextFormat.FieldValuePrinter>FieldValuePrinter</a> * printer)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=TextFormat.Printer.RegisterMessagePrinter><div style=padding-left:16px;text-indent:-16px><code><b>RegisterMessagePrinter</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor, const <a href=google.protobuf.text_format#TextFormat.MessagePrinter>MessagePrinter</a> * printer)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Register a custom message-specific <a href=google.protobuf.text_format#TextFormat.MessagePrinter>MessagePrinter</a> for messages with a particular <a href=google.protobuf.descriptor#Descriptor>Descriptor</a>. <a href=#TextFormat.Printer.RegisterMessagePrinter.details>more...</a></div></td></tr></table><hr><h3 id=TextFormat.Printer.SetInitialIndentLevel.details><code>void Printer::SetInitialIndentLevel(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int indent_level)</code></h3><div style=margin-left:16px><p>Adjust the initial indent level of all output.</p><p>Each indent level is equal to two spaces.</p></div><hr><h3 id=TextFormat.Printer.SetUseShortRepeatedPrimitives.details><code>void Printer::SetUseShortRepeatedPrimitives(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool use_short_repeated_primitives)</code></h3><div style=margin-left:16px><p>Set true to print repeated primitives in a format like:</p><pre>field_name: [[]1, 2, 3, 4]</pre><p>instead of printing each value on its own line. Short format applies only to primitive values &ndash; i.e. everything except strings and sub-messages/groups.</p></div><hr><h3 id=TextFormat.Printer.SetUseUtf8StringEscaping.details><code>void Printer::SetUseUtf8StringEscaping(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool as_utf8)</code></h3><div style=margin-left:16px><p>Set true to output UTF-8 instead of ASCII.</p><p>The only difference is that bytes >= 0x80 in string fields will not be escaped, because they are assumed to be part of UTF-8 multi-byte sequences. This will change the default <a href=google.protobuf.text_format#TextFormat.FastFieldValuePrinter>FastFieldValuePrinter</a>.</p></div><hr><h3 id=TextFormat.Printer.SetDefaultFieldValuePrinter.details><code>void Printer::SetDefaultFieldValuePrinter(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.text_format#TextFormat.FastFieldValuePrinter>FastFieldValuePrinter</a> * printer)</code></h3><div style=margin-left:16px><p>Set the default <a href=google.protobuf.text_format#TextFormat.FastFieldValuePrinter>FastFieldValuePrinter</a> that is used for all fields that don't have a field-specific printer registered.</p><p>Takes ownership of the printer.</p></div><hr><h3 id=TextFormat.Printer.SetHideUnknownFields.details><code>void Printer::SetHideUnknownFields(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool hide)</code></h3><div style=margin-left:16px><p>Sets whether we want to hide unknown fields or not.</p><p>Usually unknown fields are printed in a generic way that includes the tag number of the field instead of field name. However, sometimes it is useful to be able to print the message without unknown fields (e.g. for the python protobuf version to maintain consistency between its pure python and c++ implementations).</p></div><hr><h3 id=TextFormat.Printer.SetPrintMessageFieldsInIndexOrder.details><code>void Printer::SetPrintMessageFieldsInIndexOrder(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool print_message_fields_in_index_order)</code></h3><div style=margin-left:16px><p>If print_message_fields_in_index_order is true, fields of a proto message will be printed using the order defined in source code instead of the field number, extensions will be printed at the end of the message and their relative order is determined by the extension number.</p><p>By default, use the field number order.</p></div><hr><h3 id=TextFormat.Printer.SetExpandAny.details><code>void Printer::SetExpandAny(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool expand)</code></h3><div style=margin-left:16px><p>If expand==true, expand google.protobuf.Any payloads.</p><p>The output will be of form</p><pre>[[]type_url] { &lt;value_printed_in_text&gt; }</pre><p>If expand==false, print Any using the default printer. The output will look like</p><pre>type_url: "&lt;type_url&gt;"  value: "serialized_content"</pre></div><hr><h3 id=TextFormat.Printer.SetTruncateStringFieldLongerThan.details><code>void Printer::SetTruncateStringFieldLongerThan(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const int64 truncate_string_field_longer_than)</code></h3><div style=margin-left:16px><p>If non-zero, we truncate all string fields that are longer than this threshold.</p><p>This is useful when the proto message has very long strings, e.g., dump of encoded image file.</p><p>NOTE(hfgong): Setting a non-zero value breaks round-trip safe property of <a href=google.protobuf.text_format#TextFormat.Printer>TextFormat::Printer</a>. That is, from the printed message, we cannot fully recover the original string field any more.</p></div><hr><h3 id=TextFormat.Printer.RegisterFieldValuePrinter.details><code>bool Printer::RegisterFieldValuePrinter(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.text_format#TextFormat.FastFieldValuePrinter>FastFieldValuePrinter</a> * printer)</code></h3><div style=margin-left:16px><p>Register a custom field-specific <a href=google.protobuf.text_format#TextFormat.FastFieldValuePrinter>FastFieldValuePrinter</a> for fields with a particular <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a>.</p><p>Returns "true" if the registration succeeded, or "false", if there is already a printer for that <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a>. Takes ownership of the printer on successful registration.</p></div><hr><h3 id=TextFormat.Printer.RegisterMessagePrinter.details><code>bool Printer::RegisterMessagePrinter(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.text_format#TextFormat.MessagePrinter>MessagePrinter</a> * printer)</code></h3><div style=margin-left:16px><p>Register a custom message-specific <a href=google.protobuf.text_format#TextFormat.MessagePrinter>MessagePrinter</a> for messages with a particular <a href=google.protobuf.descriptor#Descriptor>Descriptor</a>.</p><p>Returns "true" if the registration succeeded, or "false" if there is already a printer for that <a href=google.protobuf.descriptor#Descriptor>Descriptor</a>.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-d8b22100fe3778b790c3ba19138ae034>1.4.37 -</h1><html devsite><head><title>unknown_field_set.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>unknown_field_set.h</h1><p><code>#include &lt;google/protobuf/unknown_field_set.h><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Contains classes used to keep track of unrecognized fields seen while parsing a protocol message.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#UnknownFieldSet>UnknownFieldSet</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>An <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> contains fields that were encountered while parsing a message but were not defined by its type.</div></td></tr><tr><td><div><code><a href=#UnknownField>UnknownField</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Represents one field in an <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a>.</div></td></tr><tr><td><div><code><a href=#UnknownField.LengthDelimited>UnknownField::LengthDelimited</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr></table><h2 id=UnknownFieldSet>class UnknownFieldSet</h2><p><code>#include &lt;<a href=#>google/protobuf/unknown_field_set.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>An <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> contains fields that were encountered while parsing a message but were not defined by its type.</p><p>Keeping track of these can be useful, especially in that they may be written if the message is serialized again without being cleared in between. This means that software which simply receives messages and forwards them to other servers does not need to be updated every time a new field is added to the message definition.</p><p>To get the <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> attached to any message, call <a href=google.protobuf.message#Reflection.GetUnknownFields>Reflection::GetUnknownFields()</a>.</p><p>This class is necessarily tied to the protocol buffer wire format, unlike the <a href=google.protobuf.message#Reflection>Reflection</a> interface which is independent of any serialization scheme.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=UnknownFieldSet.UnknownFieldSet><div style=padding-left:16px;text-indent:-16px><code><b>UnknownFieldSet</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=UnknownFieldSet.~UnknownFieldSet><div style=padding-left:16px;text-indent:-16px><code><b>~UnknownFieldSet</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownFieldSet.Clear><div style=padding-left:16px;text-indent:-16px><code><b>Clear</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Remove all fields.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownFieldSet.ClearAndFreeMemory><div style=padding-left:16px;text-indent:-16px><code><b>ClearAndFreeMemory</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Remove all fields and deallocate internal data objects.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=UnknownFieldSet.empty><div style=padding-left:16px;text-indent:-16px><code><b>empty</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Is this set empty?</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownFieldSet.MergeFrom><div style=padding-left:16px;text-indent:-16px><code><b>MergeFrom</b>(const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> & other)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Merge the contents of some other <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> with this one.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownFieldSet.MergeFromAndDestroy><div style=padding-left:16px;text-indent:-16px><code><b>MergeFromAndDestroy</b>(<a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> * other)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Similar to above, but this function will destroy the contents of other.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownFieldSet.Swap><div style=padding-left:16px;text-indent:-16px><code><b>Swap</b>(<a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> * x)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Swaps the contents of some other <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> with this one.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>size_t</code></td><td style=border-left-width:0 id=UnknownFieldSet.SpaceUsedExcludingSelfLong><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsedExcludingSelfLong</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Computes (an estimate of) the total number of bytes currently used for storing the unknown fields in memory. <a href=#UnknownFieldSet.SpaceUsedExcludingSelfLong.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=UnknownFieldSet.SpaceUsedExcludingSelf><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsedExcludingSelf</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>size_t</code></td><td style=border-left-width:0 id=UnknownFieldSet.SpaceUsedLong><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsedLong</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Version of SpaceUsed() including sizeof(*this).</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=UnknownFieldSet.SpaceUsed><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsed</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=UnknownFieldSet.field_count><div style=padding-left:16px;text-indent:-16px><code><b>field_count</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the number of fields present in the <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.unknown_field_set#UnknownField>UnknownField</a> &</code></td><td style=border-left-width:0 id=UnknownFieldSet.field><div style=padding-left:16px;text-indent:-16px><code><b>field</b>(int index) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get a field in the set, where 0 &lt;= index &lt; <a href=google.protobuf.unknown_field_set#UnknownFieldSet.field_count>field_count()</a>. <a href=#UnknownFieldSet.field.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.unknown_field_set#UnknownField>UnknownField</a> *</code></td><td style=border-left-width:0 id=UnknownFieldSet.mutable_field><div style=padding-left:16px;text-indent:-16px><code><b>mutable_field</b>(int index)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get a mutable pointer to a field in the set, where 0 &lt;= index &lt; <a href=google.protobuf.unknown_field_set#UnknownFieldSet.field_count>field_count()</a>. <a href=#UnknownFieldSet.mutable_field.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=UnknownFieldSet.MergeToInternalMetadata><div style=padding-left:16px;text-indent:-16px><code><b>MergeToInternalMetadata</b>(const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> & other, internal::InternalMetadata * metadata)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Merge the contents an <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> with the <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> in *metadata, if there is one. <a href=#UnknownFieldSet.MergeToInternalMetadata.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Adding fields</h3><div style=font-style:italic;font-weight:400></div></th></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownFieldSet.AddVarint><div style=padding-left:16px;text-indent:-16px><code><b>AddVarint</b>(int number, uint64 value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownFieldSet.AddFixed32><div style=padding-left:16px;text-indent:-16px><code><b>AddFixed32</b>(int number, uint32 value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownFieldSet.AddFixed64><div style=padding-left:16px;text-indent:-16px><code><b>AddFixed64</b>(int number, uint64 value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownFieldSet.AddLengthDelimited><div style=padding-left:16px;text-indent:-16px><code><b>AddLengthDelimited</b>(int number, const std::string & value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string *</code></td><td style=border-left-width:0 id=UnknownFieldSet.AddLengthDelimited><div style=padding-left:16px;text-indent:-16px><code><b>AddLengthDelimited</b>(int number)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> *</code></td><td style=border-left-width:0 id=UnknownFieldSet.AddGroup><div style=padding-left:16px;text-indent:-16px><code><b>AddGroup</b>(int number)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownFieldSet.AddField><div style=padding-left:16px;text-indent:-16px><code><b>AddField</b>(const <a href=google.protobuf.unknown_field_set#UnknownField>UnknownField</a> & field)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Adds an unknown field from another set.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownFieldSet.DeleteSubrange><div style=padding-left:16px;text-indent:-16px><code><b>DeleteSubrange</b>(int start, int num)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Delete fields with indices in the range [[]start . <a href=#UnknownFieldSet.DeleteSubrange.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownFieldSet.DeleteByNumber><div style=padding-left:16px;text-indent:-16px><code><b>DeleteByNumber</b>(int number)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Delete all fields with a specific field number. <a href=#UnknownFieldSet.DeleteByNumber.details>more...</a></div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Parsing helpers</h3><div style=font-style:italic;font-weight:400>These work exactly like the similarly-named methods of <a href=google.protobuf.message#Message>Message</a>.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=UnknownFieldSet.MergeFromCodedStream><div style=padding-left:16px;text-indent:-16px><code><b>MergeFromCodedStream</b>(<a href=google.protobuf.io.coded_stream#CodedInputStream>io::CodedInputStream</a> * input)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=UnknownFieldSet.ParseFromCodedStream><div style=padding-left:16px;text-indent:-16px><code><b>ParseFromCodedStream</b>(<a href=google.protobuf.io.coded_stream#CodedInputStream>io::CodedInputStream</a> * input)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=UnknownFieldSet.ParseFromZeroCopyStream><div style=padding-left:16px;text-indent:-16px><code><b>ParseFromZeroCopyStream</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * input)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=UnknownFieldSet.ParseFromArray><div style=padding-left:16px;text-indent:-16px><code><b>ParseFromArray</b>(const void * data, int size)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=UnknownFieldSet.ParseFromString><div style=padding-left:16px;text-indent:-16px><code><b>ParseFromString</b>(const std::string & data)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template bool</code></td><td style=border-left-width:0 id=UnknownFieldSet.MergeFromMessage><div style=padding-left:16px;text-indent:-16px><code><b>MergeFromMessage</b>(const MessageType & message)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Merges this message's unknown field data (if any). <a href=#UnknownFieldSet.MergeFromMessage.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> &</code></td><td style=border-left-width:0 id=UnknownFieldSet.default_instance><div style=padding-left:16px;text-indent:-16px><code><b>default_instance</b>()</code></div></td></tr></table><hr><h3 id=UnknownFieldSet.SpaceUsedExcludingSelfLong.details><code>size_t UnknownFieldSet::SpaceUsedExcludingSelfLong() const</code></h3><div style=margin-left:16px><p>Computes (an estimate of) the total number of bytes currently used for storing the unknown fields in memory.</p><p>Does NOT include sizeof(*this) in the calculation.</p></div><hr><h3 id=UnknownFieldSet.field.details><code>const <a href=google.protobuf.unknown_field_set#UnknownField>UnknownField</a> &<br>&nbsp;&nbsp;&nbsp;&nbsp;UnknownFieldSet::field(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index) const</code></h3><div style=margin-left:16px><p>Get a field in the set, where 0 &lt;= index &lt; <a href=google.protobuf.unknown_field_set#UnknownFieldSet.field_count>field_count()</a>.</p><p>The fields appear in the order in which they were added.</p></div><hr><h3 id=UnknownFieldSet.mutable_field.details><code><a href=google.protobuf.unknown_field_set#UnknownField>UnknownField</a> * UnknownFieldSet::mutable_field(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index)</code></h3><div style=margin-left:16px><p>Get a mutable pointer to a field in the set, where 0 &lt;= index &lt; <a href=google.protobuf.unknown_field_set#UnknownFieldSet.field_count>field_count()</a>.</p><p>The fields appear in the order in which they were added.</p></div><hr><h3 id=UnknownFieldSet.MergeToInternalMetadata.details><code>static void UnknownFieldSet::MergeToInternalMetadata(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> & other,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;internal::InternalMetadata * metadata)</code></h3><div style=margin-left:16px><p>Merge the contents an <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> with the <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> in *metadata, if there is one.</p><p>If *metadata doesn't have an <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> then add one to it and make it be a copy of the first arg.</p></div><hr><h3 id=UnknownFieldSet.DeleteSubrange.details><code>void UnknownFieldSet::DeleteSubrange(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int start,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int num)</code></h3><div style=margin-left:16px><p>Delete fields with indices in the range [[]start .</p><p>. start+num-1]. Caution: implementation moves all fields with indices [[]start+num .. ].</p></div><hr><h3 id=UnknownFieldSet.DeleteByNumber.details><code>void UnknownFieldSet::DeleteByNumber(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int number)</code></h3><div style=margin-left:16px><p>Delete all fields with a specific field number.</p><p>The order of left fields is preserved. Caution: implementation moves all fields after the first deleted field.</p></div><hr><h3 id=UnknownFieldSet.MergeFromMessage.details><code>template bool UnknownFieldSet::MergeFromMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const MessageType & message)</code></h3><div style=margin-left:16px><p>Merges this message's unknown field data (if any).</p><p>This works whether the message is a lite or full proto (for legacy reasons, lite and full return different types for MessageType::unknown_fields()).</p></div><h2 id=UnknownField>class UnknownField</h2><p><code>#include &lt;<a href=#>google/protobuf/unknown_field_set.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>Represents one field in an <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a>.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=UnknownField.Type><div style=padding-left:16px;text-indent:-16px><code><b>Type</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#UnknownField.Type.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint64</code></td><td style=border-left-width:0 id=UnknownField.varint_><div style=padding-left:16px;text-indent:-16px><code><b>varint_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint32</code></td><td style=border-left-width:0 id=UnknownField.fixed32_><div style=padding-left:16px;text-indent:-16px><code><b>fixed32_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint64</code></td><td style=border-left-width:0 id=UnknownField.fixed64_><div style=padding-left:16px;text-indent:-16px><code><b>fixed64_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>union <a href=google.protobuf.unknown_field_set#UnknownField.LengthDelimited>LengthDelimited</a></code></td><td style=border-left-width:0 id=UnknownField.length_delimited_><div style=padding-left:16px;text-indent:-16px><code><b>length_delimited_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> *</code></td><td style=border-left-width:0 id=UnknownField.group_><div style=padding-left:16px;text-indent:-16px><code><b>group_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=UnknownField.number><div style=padding-left:16px;text-indent:-16px><code><b>number</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The field's field number, as seen on the wire.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>Type</code></td><td style=border-left-width:0 id=UnknownField.type><div style=padding-left:16px;text-indent:-16px><code><b>type</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The field type.</div></td></tr><tr><th colspan=2><h3 style=margin-top:4px;margin-bottom:4px>Accessors</h3><div style=font-style:italic;font-weight:400>Each method works only for UnknownFields of the corresponding type.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>uint32</code></td><td style=border-left-width:0 id=UnknownField.number_><div style=padding-left:16px;text-indent:-16px><code><b>number_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint32</code></td><td style=border-left-width:0 id=UnknownField.type_><div style=padding-left:16px;text-indent:-16px><code><b>type_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>union google::protobuf::UnknownField::@35</code></td><td style=border-left-width:0 id=UnknownField.data_><div style=padding-left:16px;text-indent:-16px><code><b>data_</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint64</code></td><td style=border-left-width:0 id=UnknownField.varint><div style=padding-left:16px;text-indent:-16px><code><b>varint</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint32</code></td><td style=border-left-width:0 id=UnknownField.fixed32><div style=padding-left:16px;text-indent:-16px><code><b>fixed32</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint64</code></td><td style=border-left-width:0 id=UnknownField.fixed64><div style=padding-left:16px;text-indent:-16px><code><b>fixed64</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const std::string &</code></td><td style=border-left-width:0 id=UnknownField.length_delimited><div style=padding-left:16px;text-indent:-16px><code><b>length_delimited</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> &</code></td><td style=border-left-width:0 id=UnknownField.group><div style=padding-left:16px;text-indent:-16px><code><b>group</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownField.set_varint><div style=padding-left:16px;text-indent:-16px><code><b>set_varint</b>(uint64 value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownField.set_fixed32><div style=padding-left:16px;text-indent:-16px><code><b>set_fixed32</b>(uint32 value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownField.set_fixed64><div style=padding-left:16px;text-indent:-16px><code><b>set_fixed64</b>(uint64 value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownField.set_length_delimited><div style=padding-left:16px;text-indent:-16px><code><b>set_length_delimited</b>(const std::string & value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::string *</code></td><td style=border-left-width:0 id=UnknownField.mutable_length_delimited><div style=padding-left:16px;text-indent:-16px><code><b>mutable_length_delimited</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> *</code></td><td style=border-left-width:0 id=UnknownField.mutable_group><div style=padding-left:16px;text-indent:-16px><code><b>mutable_group</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownField.SerializeLengthDelimitedNoTag><div style=padding-left:16px;text-indent:-16px><code><b>SerializeLengthDelimitedNoTag</b>(<a href=google.protobuf.io.coded_stream#CodedOutputStream>io::CodedOutputStream</a> * output) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Serialization API. <a href=#UnknownField.SerializeLengthDelimitedNoTag.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>size_t</code></td><td style=border-left-width:0 id=UnknownField.GetLengthDelimitedSize><div style=padding-left:16px;text-indent:-16px><code><b>GetLengthDelimitedSize</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint8 *</code></td><td style=border-left-width:0 id=UnknownField.InternalSerializeLengthDelimitedNoTag><div style=padding-left:16px;text-indent:-16px><code><b>InternalSerializeLengthDelimitedNoTag</b>(uint8 * target, <a href=google.protobuf.io.coded_stream#EpsCopyOutputStream>io::EpsCopyOutputStream</a> * stream) const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownField.Delete><div style=padding-left:16px;text-indent:-16px><code><b>Delete</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If this <a href=google.protobuf.unknown_field_set#UnknownField>UnknownField</a> contains a pointer, delete it.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownField.DeepCopy><div style=padding-left:16px;text-indent:-16px><code><b>DeepCopy</b>(const <a href=google.protobuf.unknown_field_set#UnknownField>UnknownField</a> & other)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Make a deep copy of any pointers in this <a href=google.protobuf.unknown_field_set#UnknownField>UnknownField</a>.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=UnknownField.SetType><div style=padding-left:16px;text-indent:-16px><code><b>SetType</b>(Type type)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Set the wire type of this <a href=google.protobuf.unknown_field_set#UnknownField>UnknownField</a>. <a href=#UnknownField.SetType.details>more...</a></div></td></tr></table><hr><h3 id=UnknownField.Type.details><code>enum UnknownField::Type {<br>&nbsp;&nbsp;TYPE_VARINT,<br>&nbsp;&nbsp;TYPE_FIXED32,<br>&nbsp;&nbsp;TYPE_FIXED64,<br>&nbsp;&nbsp;TYPE_LENGTH_DELIMITED,<br>&nbsp;&nbsp;TYPE_GROUP<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>TYPE_VARINT</td><td></td></tr><tr><td>TYPE_FIXED32</td><td></td></tr><tr><td>TYPE_FIXED64</td><td></td></tr><tr><td>TYPE_LENGTH_DELIMITED</td><td></td></tr><tr><td>TYPE_GROUP</td><td></td></tr></table></div><hr><h3 id=UnknownField.SerializeLengthDelimitedNoTag.details><code>void UnknownField::SerializeLengthDelimitedNoTag(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.coded_stream#CodedOutputStream>io::CodedOutputStream</a> * output) const</code></h3><div style=margin-left:16px><p>Serialization API.</p><p>These methods can take advantage of the underlying implementation and may archieve a better performance than using getters to retrieve the data and do the serialization yourself.</p></div><hr><h3 id=UnknownField.SetType.details><code>void UnknownField::SetType(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type type)</code></h3><div style=margin-left:16px><p>Set the wire type of this <a href=google.protobuf.unknown_field_set#UnknownField>UnknownField</a>.</p><p>Should only be used when this <a href=google.protobuf.unknown_field_set#UnknownField>UnknownField</a> is being created.</p></div><h2 id=UnknownField.LengthDelimited>union UnknownField::LengthDelimited</h2><p><code>#include &lt;<a href=#>google/protobuf/unknown_field_set.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>std::string *</code></td><td style=border-left-width:0 id=UnknownField.LengthDelimited.string_value><div style=padding-left:16px;text-indent:-16px><code><b>string_value</b></code></div></td></tr></table></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-01f28463413726cd6cf1ffbebb5cd5cd>1.4.38 -</h1><html devsite><head><title>field_comparator.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>field_comparator.h</h1><p><code>#include &lt;google/protobuf/util/field_comparator.h><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>Defines classes for field comparison.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#FieldComparator>FieldComparator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Base class specifying the interface for comparing protocol buffer fields.</div></td></tr><tr><td><div><code><a href=#SimpleFieldComparator>SimpleFieldComparator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Basic implementation of <a href=google.protobuf.util.field_comparator#FieldComparator>FieldComparator</a>.</div></td></tr><tr><td><div><code><a href=#DefaultFieldComparator>DefaultFieldComparator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr></table><h2 id=FieldComparator>class FieldComparator</h2><p><code>#include &lt;<a href=#>google/protobuf/util/field_comparator.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>Base class specifying the interface for comparing protocol buffer fields.</p><p>Regular users should consider using or subclassing <a href=google.protobuf.util.field_comparator#DefaultFieldComparator>DefaultFieldComparator</a> rather than this interface. Currently, this does not support comparing unknown fields.</p><p>Known subclasses:</p><ul><li><code><a href=google.protobuf.util.field_comparator#SimpleFieldComparator>SimpleFieldComparator</a></code></li></ul><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=FieldComparator.ComparisonResult><div style=padding-left:16px;text-indent:-16px><code><b>ComparisonResult</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#FieldComparator.ComparisonResult.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=FieldComparator.FieldComparator><div style=padding-left:16px;text-indent:-16px><code><b>FieldComparator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=FieldComparator.~FieldComparator><div style=padding-left:16px;text-indent:-16px><code><b>~FieldComparator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual <a href=google.protobuf.util.field_comparator#FieldComparator.ComparisonResult>ComparisonResult</a></code></td><td style=border-left-width:0 id=FieldComparator.Compare><div style=padding-left:16px;text-indent:-16px><code><b>Compare</b>(const <a href=google.protobuf.message#Message>Message</a> & message_1, const <a href=google.protobuf.message#Message>Message</a> & message_2, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index_1, int index_2, const <a href=google.protobuf.util.message_differencer#FieldContext>util::FieldContext</a> * field_context) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Compares the values of a field in two protocol buffer messages. <a href=#FieldComparator.Compare.details>more...</a></div></td></tr></table><hr><h3 id=FieldComparator.ComparisonResult.details><code>enum FieldComparator::ComparisonResult {<br>&nbsp;&nbsp;SAME,<br>&nbsp;&nbsp;DIFFERENT,<br>&nbsp;&nbsp;RECURSE<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>SAME</td><td><p>Compared fields are equal.</p><p>In case of comparing submessages, user should not recursively compare their contents.</p></td></tr><tr><td>DIFFERENT</td><td><p>Compared fields are different.</p><p>In case of comparing submessages, user should not recursively compare their contents.</p></td></tr><tr><td>RECURSE</td><td><p>Compared submessages need to be compared recursively.</p><p><a href=google.protobuf.util.field_comparator#FieldComparator>FieldComparator</a> does not specify the semantics of recursive comparison. This value should not be returned for simple values.</p></td></tr></table></div><hr><h3 id=FieldComparator.Compare.details><code>virtual <a href=google.protobuf.util.field_comparator#FieldComparator.ComparisonResult>ComparisonResult</a> FieldComparator::Compare(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message_1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message_2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index_1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index_2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.util.message_differencer#FieldContext>util::FieldContext</a> * field_context) = 0</code></h3><div style=margin-left:16px><p>Compares the values of a field in two protocol buffer messages.</p><p>Returns SAME or DIFFERENT for simple values, and SAME, DIFFERENT or RECURSE for submessages. Returning RECURSE for fields not being submessages is illegal. In case the given <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> points to a repeated field, the indices need to be valid. Otherwise they should be ignored.</p><p><a href=google.protobuf.util.message_differencer#FieldContext>FieldContext</a> contains information about the specific instances of the fields being compared, versus <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> which only contains general type information about the fields.</p></div><h2 id=SimpleFieldComparator>class SimpleFieldComparator: public <a href=google.protobuf.util.field_comparator#FieldComparator>FieldComparator</a></h2><p><code>#include &lt;<a href=#>google/protobuf/util/field_comparator.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>Basic implementation of <a href=google.protobuf.util.field_comparator#FieldComparator>FieldComparator</a>.</p><p>Supports three modes of floating point value comparison: exact, approximate using MathUtil::AlmostEqual method, and arbitrarily precise using MathUtil::WithinFractionOrMargin.</p><p>Known subclasses:</p><ul><li><code><a href=google.protobuf.util.field_comparator#DefaultFieldComparator>DefaultFieldComparator</a></code></li></ul><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=SimpleFieldComparator.FloatComparison><div style=padding-left:16px;text-indent:-16px><code><b>FloatComparison</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#SimpleFieldComparator.FloatComparison.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=SimpleFieldComparator.SimpleFieldComparator><div style=padding-left:16px;text-indent:-16px><code><b>SimpleFieldComparator</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates new comparator with float comparison set to EXACT.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=SimpleFieldComparator.~SimpleFieldComparator><div style=padding-left:16px;text-indent:-16px><code><b>~SimpleFieldComparator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=SimpleFieldComparator.set_float_comparison><div style=padding-left:16px;text-indent:-16px><code><b>set_float_comparison</b>(<a href=google.protobuf.util.field_comparator#SimpleFieldComparator.FloatComparison>FloatComparison</a> float_comparison)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.util.field_comparator#SimpleFieldComparator.FloatComparison>FloatComparison</a></code></td><td style=border-left-width:0 id=SimpleFieldComparator.float_comparison><div style=padding-left:16px;text-indent:-16px><code><b>float_comparison</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=SimpleFieldComparator.set_treat_nan_as_equal><div style=padding-left:16px;text-indent:-16px><code><b>set_treat_nan_as_equal</b>(bool treat_nan_as_equal)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Set whether the <a href=google.protobuf.util.field_comparator#FieldComparator>FieldComparator</a> shall treat floats or doubles that are both NaN as equal (treat_nan_as_equal = true) or as different (treat_nan_as_equal = false). <a href=#SimpleFieldComparator.set_treat_nan_as_equal.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=SimpleFieldComparator.treat_nan_as_equal><div style=padding-left:16px;text-indent:-16px><code><b>treat_nan_as_equal</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=SimpleFieldComparator.SetFractionAndMargin><div style=padding-left:16px;text-indent:-16px><code><b>SetFractionAndMargin</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, double fraction, double margin)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sets the fraction and margin for the float comparison of a given field. <a href=#SimpleFieldComparator.SetFractionAndMargin.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=SimpleFieldComparator.SetDefaultFractionAndMargin><div style=padding-left:16px;text-indent:-16px><code><b>SetDefaultFractionAndMargin</b>(double fraction, double margin)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sets the fraction and margin for the float comparison of all float and double fields, unless a field has been given a specific setting via <a href=google.protobuf.util.field_comparator#SimpleFieldComparator.SetFractionAndMargin>SetFractionAndMargin()</a> above. <a href=#SimpleFieldComparator.SetDefaultFractionAndMargin.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected <a href=google.protobuf.util.field_comparator#FieldComparator.ComparisonResult>ComparisonResult</a></code></td><td style=border-left-width:0 id=SimpleFieldComparator.SimpleCompare><div style=padding-left:16px;text-indent:-16px><code><b>SimpleCompare</b>(const <a href=google.protobuf.message#Message>Message</a> & message_1, const <a href=google.protobuf.message#Message>Message</a> & message_2, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index_1, int index_2, const <a href=google.protobuf.util.message_differencer#FieldContext>util::FieldContext</a> * field_context)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the comparison result for the given field in two messages. <a href=#SimpleFieldComparator.SimpleCompare.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected bool</code></td><td style=border-left-width:0 id=SimpleFieldComparator.CompareWithDifferencer><div style=padding-left:16px;text-indent:-16px><code><b>CompareWithDifferencer</b>(<a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> * differencer, const <a href=google.protobuf.message#Message>Message</a> & message1, const <a href=google.protobuf.message#Message>Message</a> & message2, const <a href=google.protobuf.util.message_differencer#FieldContext>util::FieldContext</a> * field_context)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Compare using the provided message_differencer. <a href=#SimpleFieldComparator.CompareWithDifferencer.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected <a href=google.protobuf.util.field_comparator#FieldComparator.ComparisonResult>ComparisonResult</a></code></td><td style=border-left-width:0 id=SimpleFieldComparator.ResultFromBoolean><div style=padding-left:16px;text-indent:-16px><code><b>ResultFromBoolean</b>(bool boolean_result) const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns <a href=google.protobuf.util.field_comparator#FieldComparator.ComparisonResult>FieldComparator::SAME</a> if boolean_result is true and <a href=google.protobuf.util.field_comparator#FieldComparator.ComparisonResult>FieldComparator::DIFFERENT</a> otherwise.</div></td></tr></table><hr><h3 id=SimpleFieldComparator.FloatComparison.details><code>enum SimpleFieldComparator::FloatComparison {<br>&nbsp;&nbsp;EXACT,<br>&nbsp;&nbsp;APPROXIMATE<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>EXACT</td><td>Floats and doubles are compared exactly.</td></tr><tr><td>APPROXIMATE</td><td>Floats and doubles are compared using the MathUtil::AlmostEqual method or MathUtil::WithinFractionOrMargin method.</td></tr></table></div><hr><h3 id=SimpleFieldComparator.set_treat_nan_as_equal.details><code>void SimpleFieldComparator::set_treat_nan_as_equal(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool treat_nan_as_equal)</code></h3><div style=margin-left:16px><p>Set whether the <a href=google.protobuf.util.field_comparator#FieldComparator>FieldComparator</a> shall treat floats or doubles that are both NaN as equal (treat_nan_as_equal = true) or as different (treat_nan_as_equal = false).</p><p>Default is treating NaNs always as different.</p></div><hr><h3 id=SimpleFieldComparator.SetFractionAndMargin.details><code>void SimpleFieldComparator::SetFractionAndMargin(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double fraction,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double margin)</code></h3><div style=margin-left:16px><p>Sets the fraction and margin for the float comparison of a given field.</p><p>Uses MathUtil::WithinFractionOrMargin to compare the values.</p><p>REQUIRES: field->cpp_type == <a href=google.protobuf.descriptor#FieldDescriptor.CppType>FieldDescriptor::CPPTYPE_DOUBLE</a> or</p><pre>field-&gt;cpp_type == FieldDescriptor::CPPTYPE_FLOAT</pre><p>REQUIRES: float_comparison_ == APPROXIMATE</p></div><hr><h3 id=SimpleFieldComparator.SetDefaultFractionAndMargin.details><code>void SimpleFieldComparator::SetDefaultFractionAndMargin(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double fraction,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double margin)</code></h3><div style=margin-left:16px><p>Sets the fraction and margin for the float comparison of all float and double fields, unless a field has been given a specific setting via <a href=google.protobuf.util.field_comparator#SimpleFieldComparator.SetFractionAndMargin>SetFractionAndMargin()</a> above.</p><p>Uses MathUtil::WithinFractionOrMargin to compare the values.</p><p>REQUIRES: float_comparison_ == APPROXIMATE</p></div><hr><h3 id=SimpleFieldComparator.SimpleCompare.details><code>protected <a href=google.protobuf.util.field_comparator#FieldComparator.ComparisonResult>ComparisonResult</a> SimpleFieldComparator::SimpleCompare(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message_1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message_2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index_1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index_2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.util.message_differencer#FieldContext>util::FieldContext</a> * field_context)</code></h3><div style=margin-left:16px><p>Returns the comparison result for the given field in two messages.</p><p>This function is called directly by <a href=google.protobuf.util.field_comparator#DefaultFieldComparator.Compare>DefaultFieldComparator::Compare</a>. Subclasses can call this function to compare fields they do not need to handle specially.</p></div><hr><h3 id=SimpleFieldComparator.CompareWithDifferencer.details><code>protected bool SimpleFieldComparator::CompareWithDifferencer(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> * differencer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.util.message_differencer#FieldContext>util::FieldContext</a> * field_context)</code></h3><div style=margin-left:16px><p>Compare using the provided message_differencer.</p><p>For example, a subclass can use this method to compare some field in a certain way using the same message_differencer instance and the field context.</p></div><h2 id=DefaultFieldComparator>class DefaultFieldComparator: public <a href=google.protobuf.util.field_comparator#SimpleFieldComparator>SimpleFieldComparator</a></h2><p><code>#include &lt;<a href=#>google/protobuf/util/field_comparator.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>virtual <a href=google.protobuf.util.field_comparator#FieldComparator.ComparisonResult>ComparisonResult</a></code></td><td style=border-left-width:0 id=DefaultFieldComparator.Compare><div style=padding-left:16px;text-indent:-16px><code><b>Compare</b>(const <a href=google.protobuf.message#Message>Message</a> & message_1, const <a href=google.protobuf.message#Message>Message</a> & message_2, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, int index_1, int index_2, const <a href=google.protobuf.util.message_differencer#FieldContext>util::FieldContext</a> * field_context)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Compares the values of a field in two protocol buffer messages. <a href=#DefaultFieldComparator.Compare.details>more...</a></div></td></tr></table><hr><h3 id=DefaultFieldComparator.Compare.details><code>virtual <a href=google.protobuf.util.field_comparator#FieldComparator.ComparisonResult>ComparisonResult</a> DefaultFieldComparator::Compare(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message_1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message_2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index_1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index_2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.util.message_differencer#FieldContext>util::FieldContext</a> * field_context)</code></h3><div style=margin-left:16px><p>Compares the values of a field in two protocol buffer messages.</p><p>Returns SAME or DIFFERENT for simple values, and SAME, DIFFERENT or RECURSE for submessages. Returning RECURSE for fields not being submessages is illegal. In case the given <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> points to a repeated field, the indices need to be valid. Otherwise they should be ignored.</p><p><a href=google.protobuf.util.message_differencer#FieldContext>FieldContext</a> contains information about the specific instances of the fields being compared, versus <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> which only contains general type information about the fields.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-11c857e6898a08c24a813e10b62de212>1.4.39 -</h1><html devsite><head><title>field_mask_util.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>field_mask_util.h</h1><p><code>#include &lt;google/protobuf/util/field_mask_util.h><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>Defines utilities for the FieldMask well known type.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#FieldMaskUtil>FieldMaskUtil</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr><tr><td><div><code><a href=#FieldMaskUtil.MergeOptions>FieldMaskUtil::MergeOptions</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr><tr><td><div><code><a href=#FieldMaskUtil.TrimOptions>FieldMaskUtil::TrimOptions</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr></table><h2 id=FieldMaskUtil>class FieldMaskUtil</h2><p><code>#include &lt;<a href=#>google/protobuf/util/field_mask_util.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>static std::string</code></td><td style=border-left-width:0 id=FieldMaskUtil.ToString><div style=padding-left:16px;text-indent:-16px><code><b>ToString</b>(const FieldMask & mask)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Converts FieldMask to/from string, formatted by separating each path with a comma (e.g., "foo_bar,baz.quz").</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=FieldMaskUtil.FromString><div style=padding-left:16px;text-indent:-16px><code><b>FromString</b>(StringPiece str, FieldMask * out)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static void</code></td><td style=border-left-width:0 id=FieldMaskUtil.FromFieldNumbers><div style=padding-left:16px;text-indent:-16px><code><b>FromFieldNumbers</b>(const std::vector&lt; int64_t > & field_numbers, FieldMask * out)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Populates the FieldMask with the paths corresponding to the fields with the given numbers, after checking that all field numbers are valid.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=FieldMaskUtil.ToJsonString><div style=padding-left:16px;text-indent:-16px><code><b>ToJsonString</b>(const FieldMask & mask, std::string * out)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Converts FieldMask to/from string, formatted according to proto3 JSON spec for FieldMask (e.g., "fooBar,baz.quz"). <a href=#FieldMaskUtil.ToJsonString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=FieldMaskUtil.FromJsonString><div style=padding-left:16px;text-indent:-16px><code><b>FromJsonString</b>(StringPiece str, FieldMask * out)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=FieldMaskUtil.GetFieldDescriptors><div style=padding-left:16px;text-indent:-16px><code><b>GetFieldDescriptors</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor, StringPiece path, std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > * field_descriptors)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Get the descriptors of the fields which the given path from the message descriptor traverses, if field_descriptors is not null. <a href=#FieldMaskUtil.GetFieldDescriptors.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static bool</code></td><td style=border-left-width:0 id=FieldMaskUtil.IsValidPath><div style=padding-left:16px;text-indent:-16px><code><b>IsValidPath</b>(StringPiece path)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Checks whether the given path is valid for type T.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static bool</code></td><td style=border-left-width:0 id=FieldMaskUtil.IsValidFieldMask><div style=padding-left:16px;text-indent:-16px><code><b>IsValidFieldMask</b>(const FieldMask & mask)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Checks whether the given FieldMask is valid for type T.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static void</code></td><td style=border-left-width:0 id=FieldMaskUtil.AddPathToFieldMask><div style=padding-left:16px;text-indent:-16px><code><b>AddPathToFieldMask</b>(StringPiece path, FieldMask * mask)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Adds a path to FieldMask after checking whether the given path is valid. <a href=#FieldMaskUtil.AddPathToFieldMask.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static FieldMask</code></td><td style=border-left-width:0 id=FieldMaskUtil.GetFieldMaskForAllFields><div style=padding-left:16px;text-indent:-16px><code><b>GetFieldMaskForAllFields</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates a FieldMask with all fields of type T. <a href=#FieldMaskUtil.GetFieldMaskForAllFields.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static void</code></td><td style=border-left-width:0 id=FieldMaskUtil.GetFieldMaskForAllFields><div style=padding-left:16px;text-indent:-16px><code><b>GetFieldMaskForAllFields</b>(FieldMask * out)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=FieldMaskUtil.GetFieldMaskForAllFields><div style=padding-left:16px;text-indent:-16px><code><b>GetFieldMaskForAllFields</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor, FieldMask * out)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This flavor takes the protobuf type descriptor as an argument. <a href=#FieldMaskUtil.GetFieldMaskForAllFields.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=FieldMaskUtil.ToCanonicalForm><div style=padding-left:16px;text-indent:-16px><code><b>ToCanonicalForm</b>(const FieldMask & mask, FieldMask * out)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Converts a FieldMask to the canonical form. <a href=#FieldMaskUtil.ToCanonicalForm.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=FieldMaskUtil.Union><div style=padding-left:16px;text-indent:-16px><code><b>Union</b>(const FieldMask & mask1, const FieldMask & mask2, FieldMask * out)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates an union of two FieldMasks.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=FieldMaskUtil.Intersect><div style=padding-left:16px;text-indent:-16px><code><b>Intersect</b>(const FieldMask & mask1, const FieldMask & mask2, FieldMask * out)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates an intersection of two FieldMasks.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static void</code></td><td style=border-left-width:0 id=FieldMaskUtil.Subtract><div style=padding-left:16px;text-indent:-16px><code><b>Subtract</b>(const FieldMask & mask1, const FieldMask & mask2, FieldMask * out)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Subtracts mask2 from mask1 base of type T.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=FieldMaskUtil.Subtract><div style=padding-left:16px;text-indent:-16px><code><b>Subtract</b>(const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor, const FieldMask & mask1, const FieldMask & mask2, FieldMask * out)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This flavor takes the protobuf type descriptor as an argument. <a href=#FieldMaskUtil.Subtract.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=FieldMaskUtil.IsPathInFieldMask><div style=padding-left:16px;text-indent:-16px><code><b>IsPathInFieldMask</b>(StringPiece path, const FieldMask & mask)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if path is covered by the given FieldMask. <a href=#FieldMaskUtil.IsPathInFieldMask.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static void</code></td><td style=border-left-width:0 id=FieldMaskUtil.MergeMessageTo><div style=padding-left:16px;text-indent:-16px><code><b>MergeMessageTo</b>(const <a href=google.protobuf.message#Message>Message</a> & source, const FieldMask & mask, const <a href=google.protobuf.util.field_mask_util#FieldMaskUtil.MergeOptions>MergeOptions</a> & options, <a href=google.protobuf.message#Message>Message</a> * destination)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Merges fields specified in a FieldMask into another message.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=FieldMaskUtil.TrimMessage><div style=padding-left:16px;text-indent:-16px><code><b>TrimMessage</b>(const FieldMask & mask, <a href=google.protobuf.message#Message>Message</a> * message)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Removes from 'message' any field that is not represented in the given FieldMask. <a href=#FieldMaskUtil.TrimMessage.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=FieldMaskUtil.TrimMessage><div style=padding-left:16px;text-indent:-16px><code><b>TrimMessage</b>(const FieldMask & mask, <a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.util.field_mask_util#FieldMaskUtil.TrimOptions>TrimOptions</a> & options)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Removes from 'message' any field that is not represented in the given FieldMask with customized <a href=google.protobuf.util.field_mask_util#FieldMaskUtil.TrimOptions>TrimOptions</a>. <a href=#FieldMaskUtil.TrimMessage.details>more...</a></div></td></tr></table><hr><h3 id=FieldMaskUtil.ToJsonString.details><code>static bool FieldMaskUtil::ToJsonString(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const FieldMask & mask,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * out)</code></h3><div style=margin-left:16px><p>Converts FieldMask to/from string, formatted according to proto3 JSON spec for FieldMask (e.g., "fooBar,baz.quz").</p><p>If the field name is not style conforming (i.e., not snake_case when converted to string, or not camelCase when converted from string), the conversion will fail.</p></div><hr><h3 id=FieldMaskUtil.GetFieldDescriptors.details><code>static bool FieldMaskUtil::GetFieldDescriptors(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringPiece path,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > * field_descriptors)</code></h3><div style=margin-left:16px><p>Get the descriptors of the fields which the given path from the message descriptor traverses, if field_descriptors is not null.</p><p>Return false if the path is not valid, and the content of field_descriptors is unspecified.</p></div><hr><h3 id=FieldMaskUtil.AddPathToFieldMask.details><code>template static void FieldMaskUtil::AddPathToFieldMask(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringPiece path,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FieldMask * mask)</code></h3><div style=margin-left:16px><p>Adds a path to FieldMask after checking whether the given path is valid.</p><p>This method check-fails if the path is not a valid path for type T.</p></div><hr><h3 id=FieldMaskUtil.GetFieldMaskForAllFields.details><code>template static FieldMask FieldMaskUtil::GetFieldMaskForAllFields()</code></h3><div style=margin-left:16px><p>Creates a FieldMask with all fields of type T.</p><p>This FieldMask only contains fields of T but not any sub-message fields.</p></div><hr><h3 id=FieldMaskUtil.GetFieldMaskForAllFields.details><code>static void FieldMaskUtil::GetFieldMaskForAllFields(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FieldMask * out)</code></h3><div style=margin-left:16px><p>This flavor takes the protobuf type descriptor as an argument.</p><p>Useful when the type is not known at compile time.</p></div><hr><h3 id=FieldMaskUtil.ToCanonicalForm.details><code>static void FieldMaskUtil::ToCanonicalForm(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const FieldMask & mask,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FieldMask * out)</code></h3><div style=margin-left:16px><p>Converts a FieldMask to the canonical form.</p><p>It will:</p><pre>1. Remove paths that are covered by another path. For example,
   "foo.bar" is covered by "foo" and will be removed if "foo"
   is also in the FieldMask.
2. Sort all paths in alphabetical order.</pre></div><hr><h3 id=FieldMaskUtil.Subtract.details><code>static void FieldMaskUtil::Subtract(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> * descriptor,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const FieldMask & mask1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const FieldMask & mask2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FieldMask * out)</code></h3><div style=margin-left:16px><p>This flavor takes the protobuf type descriptor as an argument.</p><p>Useful when the type is not known at compile time.</p></div><hr><h3 id=FieldMaskUtil.IsPathInFieldMask.details><code>static bool FieldMaskUtil::IsPathInFieldMask(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringPiece path,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const FieldMask & mask)</code></h3><div style=margin-left:16px><p>Returns true if path is covered by the given FieldMask.</p><p>Note that path "foo.bar" covers all paths like "foo.bar.baz", "foo.bar.quz.x", etc. Also note that parent paths are not covered by explicit child path, i.e. "foo.bar" does NOT cover "foo", even if "bar" is the only child.</p></div><hr><h3 id=FieldMaskUtil.TrimMessage.details><code>static bool FieldMaskUtil::TrimMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const FieldMask & mask,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message)</code></h3><div style=margin-left:16px><p>Removes from 'message' any field that is not represented in the given FieldMask.</p><p>If the FieldMask is empty, does nothing. Returns true if the message is modified.</p></div><hr><h3 id=FieldMaskUtil.TrimMessage.details><code>static bool FieldMaskUtil::TrimMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const FieldMask & mask,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.util.field_mask_util#FieldMaskUtil.TrimOptions>TrimOptions</a> & options)</code></h3><div style=margin-left:16px><p>Removes from 'message' any field that is not represented in the given FieldMask with customized <a href=google.protobuf.util.field_mask_util#FieldMaskUtil.TrimOptions>TrimOptions</a>.</p><p>If the FieldMask is empty, does nothing. Returns true if the message is modified.</p></div><h2 id=FieldMaskUtil.MergeOptions>class FieldMaskUtil::MergeOptions</h2><p><code>#include &lt;<a href=#>google/protobuf/util/field_mask_util.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=FieldMaskUtil.MergeOptions.MergeOptions><div style=padding-left:16px;text-indent:-16px><code><b>MergeOptions</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=FieldMaskUtil.MergeOptions.set_replace_message_fields><div style=padding-left:16px;text-indent:-16px><code><b>set_replace_message_fields</b>(bool value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>When merging message fields, the default behavior is to merge the content of two message fields together. <a href=#FieldMaskUtil.MergeOptions.set_replace_message_fields.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldMaskUtil.MergeOptions.replace_message_fields><div style=padding-left:16px;text-indent:-16px><code><b>replace_message_fields</b>() const</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=FieldMaskUtil.MergeOptions.set_replace_repeated_fields><div style=padding-left:16px;text-indent:-16px><code><b>set_replace_repeated_fields</b>(bool value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The default merging behavior will append entries from the source repeated field to the destination repeated field. <a href=#FieldMaskUtil.MergeOptions.set_replace_repeated_fields.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldMaskUtil.MergeOptions.replace_repeated_fields><div style=padding-left:16px;text-indent:-16px><code><b>replace_repeated_fields</b>() const</code></div></td></tr></table><hr><h3 id=FieldMaskUtil.MergeOptions.set_replace_message_fields.details><code>void MergeOptions::set_replace_message_fields(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool value)</code></h3><div style=margin-left:16px><p>When merging message fields, the default behavior is to merge the content of two message fields together.</p><p>If you instead want to use the field from the source message to replace the corresponding field in the destination message, set this flag to true. When this flag is set, specified submessage fields that are missing in source will be cleared in destination.</p></div><hr><h3 id=FieldMaskUtil.MergeOptions.set_replace_repeated_fields.details><code>void MergeOptions::set_replace_repeated_fields(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool value)</code></h3><div style=margin-left:16px><p>The default merging behavior will append entries from the source repeated field to the destination repeated field.</p><p>If you only want to keep the entries from the source repeated field, set this flag to true.</p></div><h2 id=FieldMaskUtil.TrimOptions>class FieldMaskUtil::TrimOptions</h2><p><code>#include &lt;<a href=#>google/protobuf/util/field_mask_util.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=FieldMaskUtil.TrimOptions.TrimOptions><div style=padding-left:16px;text-indent:-16px><code><b>TrimOptions</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=FieldMaskUtil.TrimOptions.set_keep_required_fields><div style=padding-left:16px;text-indent:-16px><code><b>set_keep_required_fields</b>(bool value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>When trimming message fields, the default behavior is to trim required fields of the present message if they are not specified in the field mask. <a href=#FieldMaskUtil.TrimOptions.set_keep_required_fields.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=FieldMaskUtil.TrimOptions.keep_required_fields><div style=padding-left:16px;text-indent:-16px><code><b>keep_required_fields</b>() const</code></div></td></tr></table><hr><h3 id=FieldMaskUtil.TrimOptions.set_keep_required_fields.details><code>void TrimOptions::set_keep_required_fields(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool value)</code></h3><div style=margin-left:16px><p>When trimming message fields, the default behavior is to trim required fields of the present message if they are not specified in the field mask.</p><p>If you instead want to keep required fields of the present message even they are not specified in the field mask, set this flag to true.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-b555607545973cc10ab9e114d6b04d84>1.4.40 -</h1><html devsite><head><title>json_util.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>json_util.h</h1><p><code>#include &lt;google/protobuf/util/json_util.h><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>Utility functions to convert between protobuf binary format and proto3 JSON format.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#JsonParseOptions>JsonParseOptions</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr><tr><td><div><code><a href=#JsonPrintOptions>JsonPrintOptions</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=JsonOptions><div style=padding-left:16px;text-indent:-16px><code><a href=google.protobuf.util.json_util#JsonPrintOptions>JsonPrintOptions</a> <b>JsonOptions</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>DEPRECATED. Use <a href=google.protobuf.util.json_util#JsonPrintOptions>JsonPrintOptions</a> instead.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>util::Status</code></td><td style=border-left-width:0 id=MessageToJsonString><div style=padding-left:16px;text-indent:-16px><code><b>MessageToJsonString</b>(const <a href=google.protobuf.message#Message>Message</a> & message, std::string * output, const <a href=google.protobuf.util.json_util#JsonOptions>JsonOptions</a> & options)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Converts from protobuf message to JSON and appends it to |output|. <a href=#MessageToJsonString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>util::Status</code></td><td style=border-left-width:0 id=MessageToJsonString><div style=padding-left:16px;text-indent:-16px><code><b>MessageToJsonString</b>(const <a href=google.protobuf.message#Message>Message</a> & message, std::string * output)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>util::Status</code></td><td style=border-left-width:0 id=JsonStringToMessage><div style=padding-left:16px;text-indent:-16px><code><b>JsonStringToMessage</b>(StringPiece input, <a href=google.protobuf.message#Message>Message</a> * message, const <a href=google.protobuf.util.json_util#JsonParseOptions>JsonParseOptions</a> & options)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Converts from JSON to protobuf message. <a href=#JsonStringToMessage.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>util::Status</code></td><td style=border-left-width:0 id=JsonStringToMessage><div style=padding-left:16px;text-indent:-16px><code><b>JsonStringToMessage</b>(StringPiece input, <a href=google.protobuf.message#Message>Message</a> * message)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>util::Status</code></td><td style=border-left-width:0 id=BinaryToJsonStream><div style=padding-left:16px;text-indent:-16px><code><b>BinaryToJsonStream</b>(<a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a> * resolver, const std::string & type_url, <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * binary_input, <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * json_output, const <a href=google.protobuf.util.json_util#JsonPrintOptions>JsonPrintOptions</a> & options)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Converts protobuf binary data to JSON. <a href=#BinaryToJsonStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>util::Status</code></td><td style=border-left-width:0 id=BinaryToJsonStream><div style=padding-left:16px;text-indent:-16px><code><b>BinaryToJsonStream</b>(<a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a> * resolver, const std::string & type_url, <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * binary_input, <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * json_output)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>util::Status</code></td><td style=border-left-width:0 id=BinaryToJsonString><div style=padding-left:16px;text-indent:-16px><code><b>BinaryToJsonString</b>(<a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a> * resolver, const std::string & type_url, const std::string & binary_input, std::string * json_output, const <a href=google.protobuf.util.json_util#JsonPrintOptions>JsonPrintOptions</a> & options)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>util::Status</code></td><td style=border-left-width:0 id=BinaryToJsonString><div style=padding-left:16px;text-indent:-16px><code><b>BinaryToJsonString</b>(<a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a> * resolver, const std::string & type_url, const std::string & binary_input, std::string * json_output)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>util::Status</code></td><td style=border-left-width:0 id=JsonToBinaryStream><div style=padding-left:16px;text-indent:-16px><code><b>JsonToBinaryStream</b>(<a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a> * resolver, const std::string & type_url, <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * json_input, <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * binary_output, const <a href=google.protobuf.util.json_util#JsonParseOptions>JsonParseOptions</a> & options)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Converts JSON data to protobuf binary format. <a href=#JsonToBinaryStream.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>util::Status</code></td><td style=border-left-width:0 id=JsonToBinaryStream><div style=padding-left:16px;text-indent:-16px><code><b>JsonToBinaryStream</b>(<a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a> * resolver, const std::string & type_url, <a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * json_input, <a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * binary_output)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>util::Status</code></td><td style=border-left-width:0 id=JsonToBinaryString><div style=padding-left:16px;text-indent:-16px><code><b>JsonToBinaryString</b>(<a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a> * resolver, const std::string & type_url, StringPiece json_input, std::string * binary_output, const <a href=google.protobuf.util.json_util#JsonParseOptions>JsonParseOptions</a> & options)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>util::Status</code></td><td style=border-left-width:0 id=JsonToBinaryString><div style=padding-left:16px;text-indent:-16px><code><b>JsonToBinaryString</b>(<a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a> * resolver, const std::string & type_url, StringPiece json_input, std::string * binary_output)</code></div></td></tr></table><hr><h3 id=MessageToJsonString.details><code>util::Status util::MessageToJsonString(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * output,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.util.json_util#JsonOptions>JsonOptions</a> & options)</code></h3><div style=margin-left:16px><p>Converts from protobuf message to JSON and appends it to |output|.</p><p>This is a simple wrapper of BinaryToJsonString(). It will use the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> of the passed-in message to resolve Any types.</p></div><hr><h3 id=JsonStringToMessage.details><code>util::Status util::JsonStringToMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringPiece input,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.message#Message>Message</a> * message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.util.json_util#JsonParseOptions>JsonParseOptions</a> & options)</code></h3><div style=margin-left:16px><p>Converts from JSON to protobuf message.</p><p>This is a simple wrapper of JsonStringToBinary(). It will use the <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> of the passed-in message to resolve Any types.</p></div><hr><h3 id=BinaryToJsonStream.details><code>util::Status util::BinaryToJsonStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a> * resolver,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & type_url,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * binary_input,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * json_output,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.util.json_util#JsonPrintOptions>JsonPrintOptions</a> & options)</code></h3><div style=margin-left:16px><p>Converts protobuf binary data to JSON.</p><p>The conversion will fail if:</p><pre>1. TypeResolver fails to resolve a type.
2. input is not valid protobuf wire format, or conflicts with the type
   information returned by TypeResolver.</pre><p>Note that unknown fields will be discarded silently.</p></div><hr><h3 id=JsonToBinaryStream.details><code>util::Status util::JsonToBinaryStream(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a> * resolver,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & type_url,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream#ZeroCopyInputStream>io::ZeroCopyInputStream</a> * json_input,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * binary_output,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.util.json_util#JsonParseOptions>JsonParseOptions</a> & options)</code></h3><div style=margin-left:16px><p>Converts JSON data to protobuf binary format.</p><p>The conversion will fail if:</p><pre>1. TypeResolver fails to resolve a type.
2. input is not valid JSON format, or conflicts with the type
   information returned by TypeResolver.</pre></div><h2 id=JsonParseOptions>struct JsonParseOptions</h2><p><code>#include &lt;<a href=#>google/protobuf/util/json_util.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=JsonParseOptions.ignore_unknown_fields><div style=padding-left:16px;text-indent:-16px><code><b>ignore_unknown_fields</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Whether to ignore unknown JSON fields during parsing.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=JsonParseOptions.case_insensitive_enum_parsing><div style=padding-left:16px;text-indent:-16px><code><b>case_insensitive_enum_parsing</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If true, when a lowercase enum value fails to parse, try convert it to UPPER_CASE and see if it matches a valid enum. <a href=#JsonParseOptions.case_insensitive_enum_parsing.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=JsonParseOptions.JsonParseOptions><div style=padding-left:16px;text-indent:-16px><code><b>JsonParseOptions</b>()</code></div></td></tr></table><hr><h3 id=JsonParseOptions.case_insensitive_enum_parsing.details><code>bool JsonParseOptions::case_insensitive_enum_parsing</code></h3><div style=margin-left:16px><p>If true, when a lowercase enum value fails to parse, try convert it to UPPER_CASE and see if it matches a valid enum.</p><p>WARNING: This option exists only to preserve legacy behavior. Avoid using this option. If your enum needs to support different casing, consider using allow_alias instead.</p></div><h2 id=JsonPrintOptions>struct JsonPrintOptions</h2><p><code>#include &lt;<a href=#>google/protobuf/util/json_util.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=JsonPrintOptions.add_whitespace><div style=padding-left:16px;text-indent:-16px><code><b>add_whitespace</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Whether to add spaces, line breaks and indentation to make the JSON output easy to read.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=JsonPrintOptions.always_print_primitive_fields><div style=padding-left:16px;text-indent:-16px><code><b>always_print_primitive_fields</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Whether to always print primitive fields. <a href=#JsonPrintOptions.always_print_primitive_fields.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=JsonPrintOptions.always_print_enums_as_ints><div style=padding-left:16px;text-indent:-16px><code><b>always_print_enums_as_ints</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Whether to always print enums as ints. <a href=#JsonPrintOptions.always_print_enums_as_ints.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=JsonPrintOptions.preserve_proto_field_names><div style=padding-left:16px;text-indent:-16px><code><b>preserve_proto_field_names</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Whether to preserve proto field names.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=JsonPrintOptions.JsonPrintOptions><div style=padding-left:16px;text-indent:-16px><code><b>JsonPrintOptions</b>()</code></div></td></tr></table><hr><h3 id=JsonPrintOptions.always_print_primitive_fields.details><code>bool JsonPrintOptions::always_print_primitive_fields</code></h3><div style=margin-left:16px><p>Whether to always print primitive fields.</p><p>By default proto3 primitive fields with default values will be omitted in JSON output. For example, an int32 field set to 0 will be omitted. Set this flag to true will override the default behavior and print primitive fields regardless of their values.</p></div><hr><h3 id=JsonPrintOptions.always_print_enums_as_ints.details><code>bool JsonPrintOptions::always_print_enums_as_ints</code></h3><div style=margin-left:16px><p>Whether to always print enums as ints.</p><p>By default they are rendered as strings.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-60c136bbee922dd28a5cbdc7f6440831>1.4.41 -</h1><html devsite><head><title>message_differencer.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>message_differencer.h</h1><p><code>#include &lt;google/protobuf/util/message_differencer.h><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>This file defines static methods and classes for comparing Protocol Messages.</p><p>Aug. 2008: Added Unknown Fields Comparison for messages. Aug. 2009: Added different options to compare repeated fields. Apr. 2010: Moved field comparison to FieldComparator Sep. 2020: Added option to output map keys in path</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#MessageDifferencer>MessageDifferencer</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A basic differencer that can be used to determine the differences between two specified Protocol Messages.</div></td></tr><tr><td><div><code><a href=#MessageDifferencer.IgnoreCriteria>MessageDifferencer::IgnoreCriteria</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Abstract base class from which all <a href=google.protobuf.util.message_differencer#MessageDifferencer.IgnoreCriteria>IgnoreCriteria</a> derive.</div></td></tr><tr><td><div><code><a href=#MessageDifferencer.MapKeyComparator>MessageDifferencer::MapKeyComparator</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=google.protobuf.util.message_differencer#MessageDifferencer.MapKeyComparator>MapKeyComparator</a> is used to determine if two elements have the same key when comparing elements of a repeated field as a map.</div></td></tr><tr><td><div><code><a href=#MessageDifferencer.Reporter>MessageDifferencer::Reporter</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Abstract base class from which all <a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> reporters derive.</div></td></tr><tr><td><div><code><a href=#MessageDifferencer.SpecificField>MessageDifferencer::SpecificField</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Identifies an individual field in a message instance.</div></td></tr><tr><td><div><code><a href=#MessageDifferencer.StreamReporter>MessageDifferencer::StreamReporter</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>An implementation of the <a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> <a href=google.protobuf.util.message_differencer#MessageDifferencer.Reporter>Reporter</a> that outputs any differences found in human-readable form to the supplied ZeroCopyOutputStream or Printer.</div></td></tr><tr><td><div><code><a href=#MessageDifferencer.UnpackAnyField>MessageDifferencer::UnpackAnyField</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Class for processing Any deserialization.</div></td></tr><tr><td><div><code><a href=#FieldContext>FieldContext</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This class provides extra information to the <a href=google.protobuf.util.field_comparator#FieldComparator.Compare>FieldComparator::Compare</a> function.</div></td></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code>typedef</code></td><td style=border-left-width:0 id=FieldDescriptorArray><div style=padding-left:16px;text-indent:-16px><code>std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > <b>FieldDescriptorArray</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Defines a collection of field descriptors. <a href=#FieldDescriptorArray.details>more...</a></div></td></tr></table><hr><h3 id=FieldDescriptorArray.details><code>typedef util::FieldDescriptorArray</code></h3><div style=margin-left:16px><p>Defines a collection of field descriptors.</p><p>In case of internal google codebase we are using absl::FixedArray instead of vector. It significantly speeds up proto comparison (by ~30%) by reducing the number of malloc/free operations</p></div><h2 id=MessageDifferencer>class MessageDifferencer</h2><p><code>#include &lt;<a href=#>google/protobuf/util/message_differencer.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>A basic differencer that can be used to determine the differences between two specified Protocol Messages.</p><p>If any differences are found, the Compare method will return false, and any differencer reporter specified via ReportDifferencesTo will have its reporting methods called (see below for implementation of the report). Based off of the original ProtocolDifferencer implementation in //net/proto/protocol-differencer.h (Thanks Todd!).</p><p><a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> REQUIRES that compared messages be the same type, defined as messages that share the same descriptor. If not, the behavior of this class is undefined.</p><p>People disagree on what <a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> should do when asked to compare messages with different descriptors. Some people think it should always return false. Others expect it to try to look for similar fields and compare them anyway &ndash; especially if the descriptors happen to be identical. If we chose either of these behaviors, some set of people would find it surprising, and could end up writing code expecting the other behavior without realizing their error. Therefore, we forbid that usage.</p><p>This class is implemented based on the proto2 reflection. The performance should be good enough for normal usages. However, for places where the performance is extremely sensitive, there are several alternatives:</p><ul><li>Comparing serialized string Downside: false negatives (there are messages that are the same but their serialized strings are different).</li><li>Equals code generator by compiler plugin (net/proto2/contrib/equals_plugin) Downside: more generated code; maintenance overhead for the additional rule (must be in sync with the original proto_library).</li></ul><p>Note on handling of google.protobuf.Any: <a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> automatically unpacks Any::value into a <a href=google.protobuf.message#Message>Message</a> and compares its individual fields. Messages encoded in a repeated Any cannot be compared using TreatAsMap.</p><p>Note on thread-safety: <a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> is <i>not</i> thread-safe. You need to guard it with a lock to use the same <a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> instance from multiple threads. Note that it's fine to call static comparison methods (like <a href=google.protobuf.util.message_differencer#MessageDifferencer.Equals>MessageDifferencer::Equals</a>) concurrently, but it's not recommended for performance critical code as it leads to extra allocations.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=MessageDifferencer.MessageFieldComparison><div style=padding-left:16px;text-indent:-16px><code><b>MessageFieldComparison</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#MessageDifferencer.MessageFieldComparison.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=MessageDifferencer.Scope><div style=padding-left:16px;text-indent:-16px><code><b>Scope</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#MessageDifferencer.Scope.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=MessageDifferencer.FloatComparison><div style=padding-left:16px;text-indent:-16px><code><b>FloatComparison</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>DEPRECATED. Use FieldComparator::FloatComparison instead. <a href=#MessageDifferencer.FloatComparison.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>enum</code></td><td style=border-left-width:0 id=MessageDifferencer.RepeatedFieldComparison><div style=padding-left:16px;text-indent:-16px><code><b>RepeatedFieldComparison</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#MessageDifferencer.RepeatedFieldComparison.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.util.field_comparator#DefaultFieldComparator>DefaultFieldComparator</a> *</code></td><td style=border-left-width:0 id=MessageDifferencer.default_impl><div style=padding-left:16px;text-indent:-16px><code><b>default_impl</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.util.field_comparator#FieldComparator>FieldComparator</a> *</code></td><td style=border-left-width:0 id=MessageDifferencer.base><div style=padding-left:16px;text-indent:-16px><code><b>base</b></code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=MessageDifferencer.Equals><div style=padding-left:16px;text-indent:-16px><code><b>Equals</b>(const <a href=google.protobuf.message#Message>Message</a> & message1, const <a href=google.protobuf.message#Message>Message</a> & message2)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Determines whether the supplied messages are equal. <a href=#MessageDifferencer.Equals.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=MessageDifferencer.Equivalent><div style=padding-left:16px;text-indent:-16px><code><b>Equivalent</b>(const <a href=google.protobuf.message#Message>Message</a> & message1, const <a href=google.protobuf.message#Message>Message</a> & message2)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Determines whether the supplied messages are equivalent. <a href=#MessageDifferencer.Equivalent.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=MessageDifferencer.ApproximatelyEquals><div style=padding-left:16px;text-indent:-16px><code><b>ApproximatelyEquals</b>(const <a href=google.protobuf.message#Message>Message</a> & message1, const <a href=google.protobuf.message#Message>Message</a> & message2)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Determines whether the supplied messages are approximately equal. <a href=#MessageDifferencer.ApproximatelyEquals.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=MessageDifferencer.ApproximatelyEquivalent><div style=padding-left:16px;text-indent:-16px><code><b>ApproximatelyEquivalent</b>(const <a href=google.protobuf.message#Message>Message</a> & message1, const <a href=google.protobuf.message#Message>Message</a> & message2)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Determines whether the supplied messages are approximately equivalent. <a href=#MessageDifferencer.ApproximatelyEquivalent.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=MessageDifferencer.MessageDifferencer><div style=padding-left:16px;text-indent:-16px><code><b>MessageDifferencer</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>To add a <a href=google.protobuf.util.message_differencer#MessageDifferencer.Reporter>Reporter</a>, construct default here, then use ReportDifferencesTo or ReportDifferencesToString.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=MessageDifferencer.~MessageDifferencer><div style=padding-left:16px;text-indent:-16px><code><b>~MessageDifferencer</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.TreatAsSet><div style=padding-left:16px;text-indent:-16px><code><b>TreatAsSet</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The elements of the given repeated field will be treated as a set for diffing purposes, so different orderings of the same elements will be considered equal. <a href=#MessageDifferencer.TreatAsSet.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.TreatAsSmartSet><div style=padding-left:16px;text-indent:-16px><code><b>TreatAsSmartSet</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.TreatAsList><div style=padding-left:16px;text-indent:-16px><code><b>TreatAsList</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The elements of the given repeated field will be treated as a list for diffing purposes, so different orderings of the same elements will NOT be considered equal. <a href=#MessageDifferencer.TreatAsList.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.TreatAsSmartList><div style=padding-left:16px;text-indent:-16px><code><b>TreatAsSmartList</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Note that the complexity is similar to treating as SET.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.TreatAsMap><div style=padding-left:16px;text-indent:-16px><code><b>TreatAsMap</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * key)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The elements of the given repeated field will be treated as a map for diffing purposes, with |key| being the map key. <a href=#MessageDifferencer.TreatAsMap.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.TreatAsMapWithMultipleFieldsAsKey><div style=padding-left:16px;text-indent:-16px><code><b>TreatAsMapWithMultipleFieldsAsKey</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, const std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > & key_fields)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Same as TreatAsMap except that this method will use multiple fields as the key in comparison. <a href=#MessageDifferencer.TreatAsMapWithMultipleFieldsAsKey.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.TreatAsMapWithMultipleFieldPathsAsKey><div style=padding-left:16px;text-indent:-16px><code><b>TreatAsMapWithMultipleFieldPathsAsKey</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, const std::vector&lt; std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > > & key_field_paths)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Same as TreatAsMapWithMultipleFieldsAsKey, except that each of the field do not necessarily need to be a direct subfield. <a href=#MessageDifferencer.TreatAsMapWithMultipleFieldPathsAsKey.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.TreatAsMapUsingKeyComparator><div style=padding-left:16px;text-indent:-16px><code><b>TreatAsMapUsingKeyComparator</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, const <a href=google.protobuf.util.message_differencer#MessageDifferencer.MapKeyComparator>MapKeyComparator</a> * key_comparator)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Uses a custom <a href=google.protobuf.util.message_differencer#MessageDifferencer.MapKeyComparator>MapKeyComparator</a> to determine if two elements have the same key when comparing a repeated field as a map. <a href=#MessageDifferencer.TreatAsMapUsingKeyComparator.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.util.message_differencer#MessageDifferencer.MapKeyComparator>MapKeyComparator</a> *</code></td><td style=border-left-width:0 id=MessageDifferencer.CreateMultipleFieldsMapKeyComparator><div style=padding-left:16px;text-indent:-16px><code><b>CreateMultipleFieldsMapKeyComparator</b>(const std::vector&lt; std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > > & key_field_paths)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Initiates and returns a new instance of MultipleFieldsMapKeyComparator.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.AddIgnoreCriteria><div style=padding-left:16px;text-indent:-16px><code><b>AddIgnoreCriteria</b>(<a href=google.protobuf.util.message_differencer#MessageDifferencer.IgnoreCriteria>IgnoreCriteria</a> * ignore_criteria)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Add a custom ignore criteria that is evaluated in addition to the ignored fields added with IgnoreField. <a href=#MessageDifferencer.AddIgnoreCriteria.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.IgnoreField><div style=padding-left:16px;text-indent:-16px><code><b>IgnoreField</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Indicates that any field with the given descriptor should be ignored for the purposes of comparing two messages. <a href=#MessageDifferencer.IgnoreField.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.set_field_comparator><div style=padding-left:16px;text-indent:-16px><code><b>set_field_comparator</b>(<a href=google.protobuf.util.field_comparator#FieldComparator>FieldComparator</a> * comparator)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sets the field comparator used to determine differences between protocol buffer fields. <a href=#MessageDifferencer.set_field_comparator.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.SetFractionAndMargin><div style=padding-left:16px;text-indent:-16px><code><b>SetFractionAndMargin</b>(const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field, double fraction, double margin)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>DEPRECATED. <a href=#MessageDifferencer.SetFractionAndMargin.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.set_message_field_comparison><div style=padding-left:16px;text-indent:-16px><code><b>set_message_field_comparison</b>(<a href=google.protobuf.util.message_differencer#MessageDifferencer.MessageFieldComparison>MessageFieldComparison</a> comparison)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sets the type of comparison (as defined in the MessageFieldComparison enumeration above) that is used by this differencer when determining how to compare fields in messages.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.set_report_matches><div style=padding-left:16px;text-indent:-16px><code><b>set_report_matches</b>(bool report_matches)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Tells the differencer whether or not to report matches. <a href=#MessageDifferencer.set_report_matches.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.set_report_moves><div style=padding-left:16px;text-indent:-16px><code><b>set_report_moves</b>(bool report_moves)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Tells the differencer whether or not to report moves (in a set or map repeated field). <a href=#MessageDifferencer.set_report_moves.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.set_report_ignores><div style=padding-left:16px;text-indent:-16px><code><b>set_report_ignores</b>(bool report_ignores)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Tells the differencer whether or not to report ignored values. <a href=#MessageDifferencer.set_report_ignores.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.set_scope><div style=padding-left:16px;text-indent:-16px><code><b>set_scope</b>(<a href=google.protobuf.util.message_differencer#MessageDifferencer.Scope>Scope</a> scope)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sets the scope of the comparison (as defined in the Scope enumeration above) that is used by this differencer when determining which fields to compare between the messages.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.util.message_differencer#MessageDifferencer.Scope>Scope</a></code></td><td style=border-left-width:0 id=MessageDifferencer.scope><div style=padding-left:16px;text-indent:-16px><code><b>scope</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the current scope used by this differencer.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.set_float_comparison><div style=padding-left:16px;text-indent:-16px><code><b>set_float_comparison</b>(<a href=google.protobuf.util.message_differencer#MessageDifferencer.FloatComparison>FloatComparison</a> comparison)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>DEPRECATED. <a href=#MessageDifferencer.set_float_comparison.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.set_repeated_field_comparison><div style=padding-left:16px;text-indent:-16px><code><b>set_repeated_field_comparison</b>(<a href=google.protobuf.util.message_differencer#MessageDifferencer.RepeatedFieldComparison>RepeatedFieldComparison</a> comparison)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Sets the type of comparison for repeated field (as defined in the RepeatedFieldComparison enumeration above) that is used by this differencer when compare repeated fields in messages.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.util.message_differencer#MessageDifferencer.RepeatedFieldComparison>RepeatedFieldComparison</a></code></td><td style=border-left-width:0 id=MessageDifferencer.repeated_field_comparison><div style=padding-left:16px;text-indent:-16px><code><b>repeated_field_comparison</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the current repeated field comparison used by this differencer.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageDifferencer.Compare><div style=padding-left:16px;text-indent:-16px><code><b>Compare</b>(const <a href=google.protobuf.message#Message>Message</a> & message1, const <a href=google.protobuf.message#Message>Message</a> & message2)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Compares the two specified messages, returning true if they are the same, false otherwise. <a href=#MessageDifferencer.Compare.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageDifferencer.CompareWithFields><div style=padding-left:16px;text-indent:-16px><code><b>CompareWithFields</b>(const <a href=google.protobuf.message#Message>Message</a> & message1, const <a href=google.protobuf.message#Message>Message</a> & message2, const std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > & message1_fields, const std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > & message2_fields)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Same as above, except comparing only the list of fields specified by the two vectors of FieldDescriptors.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.ReportDifferencesToString><div style=padding-left:16px;text-indent:-16px><code><b>ReportDifferencesToString</b>(std::string * output)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Automatically creates a reporter that will output the differences found (if any) to the specified output string pointer. <a href=#MessageDifferencer.ReportDifferencesToString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.ReportDifferencesTo><div style=padding-left:16px;text-indent:-16px><code><b>ReportDifferencesTo</b>(<a href=google.protobuf.util.message_differencer#MessageDifferencer.Reporter>Reporter</a> * reporter)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Tells the <a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> to report differences via the specified reporter. <a href=#MessageDifferencer.ReportDifferencesTo.details>more...</a></div></td></tr></table><hr><h3 id=MessageDifferencer.MessageFieldComparison.details><code>enum MessageDifferencer::MessageFieldComparison {<br>&nbsp;&nbsp;EQUAL,<br>&nbsp;&nbsp;EQUIVALENT<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>EQUAL</td><td>Fields must be present in both messages for the messages to be considered the same.</td></tr><tr><td>EQUIVALENT</td><td><p>Fields with default values are considered set for comparison purposes even if not explicitly set in the messages themselves.</p><p>Unknown fields are ignored.</p></td></tr></table></div><hr><h3 id=MessageDifferencer.Scope.details><code>enum MessageDifferencer::Scope {<br>&nbsp;&nbsp;FULL,<br>&nbsp;&nbsp;PARTIAL<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>FULL</td><td>All fields of both messages are considered in the comparison.</td></tr><tr><td>PARTIAL</td><td>Only fields present in the first message are considered; fields set only in the second message will be skipped during comparison.</td></tr></table></div><hr><h3 id=MessageDifferencer.FloatComparison.details><code>enum MessageDifferencer::FloatComparison {<br>&nbsp;&nbsp;EXACT,<br>&nbsp;&nbsp;APPROXIMATE<br>}</code></h3><div style=margin-left:16px><p>DEPRECATED. Use FieldComparator::FloatComparison instead.</p><table><tr><td>EXACT</td><td>Floats and doubles are compared exactly.</td></tr><tr><td>APPROXIMATE</td><td>Floats and doubles are compared using the MathUtil::AlmostEquals method.</td></tr></table></div><hr><h3 id=MessageDifferencer.RepeatedFieldComparison.details><code>enum MessageDifferencer::RepeatedFieldComparison {<br>&nbsp;&nbsp;AS_LIST,<br>&nbsp;&nbsp;AS_SET,<br>&nbsp;&nbsp;AS_SMART_LIST,<br>&nbsp;&nbsp;AS_SMART_SET<br>}</code></h3><div style=margin-left:16px><p></p><table><tr><td>AS_LIST</td><td><p>Repeated fields are compared in order.</p><p>Differing values at the same index are reported using ReportModified(). If the repeated fields have different numbers of elements, the unpaired elements are reported using ReportAdded() or ReportDeleted().</p></td></tr><tr><td>AS_SET</td><td><p>Treat all the repeated fields as sets.</p><p>See <a href=google.protobuf.util.message_differencer#MessageDifferencer.TreatAsSet>TreatAsSet()</a>, as below.</p></td></tr><tr><td>AS_SMART_LIST</td><td><p>Similar to AS_SET, but preserve the order and find the longest matching sequence from the first matching element.</p><p>To use an optimal solution, call SetMatchIndicesForSmartListCallback() to pass it in.</p></td></tr><tr><td>AS_SMART_SET</td><td>Similar to AS_SET, but match elements with fewest diffs.</td></tr></table></div><hr><h3 id=MessageDifferencer.Equals.details><code>static bool MessageDifferencer::Equals(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message2)</code></h3><div style=margin-left:16px><p>Determines whether the supplied messages are equal.</p><p>Equality is defined as all fields within the two messages being set to the same value. Primitive fields and strings are compared by value while embedded messages/groups are compared as if via a recursive call. Use <a href=google.protobuf.util.message_differencer#MessageDifferencer.Compare>Compare()</a> with <a href=google.protobuf.util.message_differencer#MessageDifferencer.IgnoreField>IgnoreField()</a> if some fields should be ignored in the comparison. Use <a href=google.protobuf.util.message_differencer#MessageDifferencer.Compare>Compare()</a> with <a href=google.protobuf.util.message_differencer#MessageDifferencer.TreatAsSet>TreatAsSet()</a> if there are repeated fields where ordering does not matter.</p><p>This method REQUIRES that the two messages have the same <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> (message1.GetDescriptor() == message2.GetDescriptor()).</p></div><hr><h3 id=MessageDifferencer.Equivalent.details><code>static bool MessageDifferencer::Equivalent(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message2)</code></h3><div style=margin-left:16px><p>Determines whether the supplied messages are equivalent.</p><p>Equivalency is defined as all fields within the two messages having the same value. This differs from the Equals method above in that fields with default values are considered set to said value automatically. For details on how default values are defined for each field type, see: <a href="/programming-guides/proto?csw=1#optional'></a>. Also, <a href='google.protobuf.util.message_differencer#MessageDifferencer.Equivalent'>Equivalent()</a> ignores unknown fields. Use <a href='google.protobuf.util.message_differencer#MessageDifferencer.IgnoreField'>IgnoreField()</a> and <a href='google.protobuf.util.message_differencer#MessageDifferencer.Compare'>Compare()</a> if some fields should be ignored in the comparison.</p>
<p>This method REQUIRES that the two messages have the same <a href='google.protobuf.descriptor#Descriptor'>Descriptor</a> (message1.GetDescriptor() == message2.GetDescriptor()). </p>
</div> <hr><h3 id=" messagedifferencer.approximatelyequals.details"><code>static bool MessageDifferencer::ApproximatelyEquals(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message2)</code></h3><div style=margin-left:16px><p>Determines whether the supplied messages are approximately equal.</p><p>Approximate equality is defined as all fields within the two messages being approximately equal. Primitive (non-float) fields and strings are compared by value, floats are compared using MathUtil::AlmostEquals() and embedded messages/groups are compared as if via a recursive call. Use <a href=google.protobuf.util.message_differencer#MessageDifferencer.IgnoreField>IgnoreField()</a> and <a href=google.protobuf.util.message_differencer#MessageDifferencer.Compare>Compare()</a> if some fields should be ignored in the comparison.</p><p>This method REQUIRES that the two messages have the same <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> (message1.GetDescriptor() == message2.GetDescriptor()).</p></div><hr><h3 id=MessageDifferencer.ApproximatelyEquivalent.details><code>static bool MessageDifferencer::ApproximatelyEquivalent(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message2)</code></h3><div style=margin-left:16px><p>Determines whether the supplied messages are approximately equivalent.</p><p>Approximate equivalency is defined as all fields within the two messages being approximately equivalent. As in <a href=google.protobuf.util.message_differencer#MessageDifferencer.ApproximatelyEquals>MessageDifferencer::ApproximatelyEquals</a>, primitive (non-float) fields and strings are compared by value, floats are compared using MathUtil::AlmostEquals() and embedded messages/groups are compared as if via a recursive call. However, fields with default values are considered set to said value, as per MessageDiffencer::Equivalent. Use <a href=google.protobuf.util.message_differencer#MessageDifferencer.IgnoreField>IgnoreField()</a> and <a href=google.protobuf.util.message_differencer#MessageDifferencer.Compare>Compare()</a> if some fields should be ignored in the comparison.</p><p>This method REQUIRES that the two messages have the same <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> (message1.GetDescriptor() == message2.GetDescriptor()).</p></div><hr><h3 id=MessageDifferencer.TreatAsSet.details><code>void MessageDifferencer::TreatAsSet(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></h3><div style=margin-left:16px><p>The elements of the given repeated field will be treated as a set for diffing purposes, so different orderings of the same elements will be considered equal.</p><p>Elements which are present on both sides of the comparison but which have changed position will be reported with ReportMoved(). Elements which only exist on one side or the other are reported with ReportAdded() and ReportDeleted() regardless of their positions. ReportModified() is never used for this repeated field. If the only differences between the compared messages is that some fields have been moved, then the comparison returns true.</p><p>Note that despite the name of this method, this is really comparison as multisets: if one side of the comparison has a duplicate in the repeated field but the other side doesn't, this will count as a mismatch.</p><p>If the scope of comparison is set to PARTIAL, then in addition to what's above, extra values added to repeated fields of the second message will not cause the comparison to fail.</p><p>Note that set comparison is currently O(k * n^2) (where n is the total number of elements, and k is the average size of each element). In theory it could be made O(n * k) with a more complex hashing implementation. Feel free to contribute one if the current implementation is too slow for you. If partial matching is also enabled, the time complexity will be O(k * n^2</p><ul><li>n^3) in which n^3 is the time complexity of the maximum matching algorithm.</li></ul><p>REQUIRES: field->is_repeated() and field not registered with TreatAsMap*</p></div><hr><h3 id=MessageDifferencer.TreatAsList.details><code>void MessageDifferencer::TreatAsList(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></h3><div style=margin-left:16px><p>The elements of the given repeated field will be treated as a list for diffing purposes, so different orderings of the same elements will NOT be considered equal.</p><p>REQUIRES: field->is_repeated() and field not registered with TreatAsMap*</p></div><hr><h3 id=MessageDifferencer.TreatAsMap.details><code>void MessageDifferencer::TreatAsMap(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * key)</code></h3><div style=margin-left:16px><p>The elements of the given repeated field will be treated as a map for diffing purposes, with |key| being the map key.</p><p>Thus, elements with the same key will be compared even if they do not appear at the same index. Differences are reported similarly to <a href=google.protobuf.util.message_differencer#MessageDifferencer.TreatAsSet>TreatAsSet()</a>, except that ReportModified() is used to report elements with the same key but different values. Note that if an element is both moved and modified, only ReportModified() will be called. As with TreatAsSet, if the only differences between the compared messages is that some fields have been moved, then the comparison returns true. See TreatAsSet for notes on performance.</p><p>REQUIRES: field->is_repeated() REQUIRES: field->cpp_type() == <a href=google.protobuf.descriptor#FieldDescriptor.CppType>FieldDescriptor::CPPTYPE_MESSAGE</a> REQUIRES: key->containing_type() == field->message_type()</p></div><hr><h3 id=MessageDifferencer.TreatAsMapWithMultipleFieldsAsKey.details><code>void MessageDifferencer::TreatAsMapWithMultipleFieldsAsKey(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > & key_fields)</code></h3><div style=margin-left:16px><p>Same as TreatAsMap except that this method will use multiple fields as the key in comparison.</p><p>All specified fields in 'key_fields' should be present in the compared elements. Two elements will be treated as having the same key iff they have the same value for every specified field. There are two steps in the comparison process. The first one is key matching. Every element from one message will be compared to every element from the other message. Only fields in 'key_fields' are compared in this step to decide if two elements have the same key. The second step is value comparison. Those pairs of elements with the same key (with equal value for every field in 'key_fields') will be compared in this step. Time complexity of the first step is O(s * m * n ^ 2) where s is the average size of the fields specified in 'key_fields', m is the number of fields in 'key_fields' and n is the number of elements. If partial matching is enabled, an extra O(n^3) will be incured by the maximum matching algorithm. The second step is O(k * n) where k is the average size of each element.</p></div><hr><h3 id=MessageDifferencer.TreatAsMapWithMultipleFieldPathsAsKey.details><code>void MessageDifferencer::TreatAsMapWithMultipleFieldPathsAsKey(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; std::vector&lt; const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * > > & key_field_paths)</code></h3><div style=margin-left:16px><p>Same as TreatAsMapWithMultipleFieldsAsKey, except that each of the field do not necessarily need to be a direct subfield.</p><p>Each element in key_field_paths indicate a path from the message being compared, listing successive subfield to reach the key field.</p><p>REQUIRES:</p><pre>for key_field_path in key_field_paths:
  key_field_path[[]0]-&gt;containing_type() == field-&gt;message_type()
  for i in [[]0, key_field_path.size() - 1):
    key_field_path[[]i+1]-&gt;containing_type() ==
        key_field_path[[]i]-&gt;message_type()
    key_field_path[[]i]-&gt;cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE
    !key_field_path[[]i]-&gt;is_repeated()</pre></div><hr><h3 id=MessageDifferencer.TreatAsMapUsingKeyComparator.details><code>void MessageDifferencer::TreatAsMapUsingKeyComparator(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.util.message_differencer#MessageDifferencer.MapKeyComparator>MapKeyComparator</a> * key_comparator)</code></h3><div style=margin-left:16px><p>Uses a custom <a href=google.protobuf.util.message_differencer#MessageDifferencer.MapKeyComparator>MapKeyComparator</a> to determine if two elements have the same key when comparing a repeated field as a map.</p><p>The caller is responsible to delete the key_comparator. This method varies from TreatAsMapWithMultipleFieldsAsKey only in the first key matching step. Rather than comparing some specified fields, it will invoke the IsMatch method of the given 'key_comparator' to decide if two elements have the same key.</p></div><hr><h3 id=MessageDifferencer.AddIgnoreCriteria.details><code>void MessageDifferencer::AddIgnoreCriteria(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.util.message_differencer#MessageDifferencer.IgnoreCriteria>IgnoreCriteria</a> * ignore_criteria)</code></h3><div style=margin-left:16px><p>Add a custom ignore criteria that is evaluated in addition to the ignored fields added with IgnoreField.</p><p>Takes ownership of ignore_criteria.</p></div><hr><h3 id=MessageDifferencer.IgnoreField.details><code>void MessageDifferencer::IgnoreField(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field)</code></h3><div style=margin-left:16px><p>Indicates that any field with the given descriptor should be ignored for the purposes of comparing two messages.</p><p>This applies to fields nested in the message structure as well as top level ones. When the <a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> encounters an ignored field, ReportIgnored is called on the reporter, if one is specified.</p><p>The only place where the field's 'ignored' status is not applied is when it is being used as a key in a field passed to TreatAsMap or is one of the fields passed to TreatAsMapWithMultipleFieldsAsKey. In this case it is compared in key matching but after that it's ignored in value comparison.</p></div><hr><h3 id=MessageDifferencer.set_field_comparator.details><code>void MessageDifferencer::set_field_comparator(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.util.field_comparator#FieldComparator>FieldComparator</a> * comparator)</code></h3><div style=margin-left:16px><p>Sets the field comparator used to determine differences between protocol buffer fields.</p><p>By default it's set to a <a href=google.protobuf.util.field_comparator#DefaultFieldComparator>DefaultFieldComparator</a> instance. <a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> doesn't take ownership over the passed object. Note that this method must be called before Compare for the comparator to be used.</p></div><hr><h3 id=MessageDifferencer.SetFractionAndMargin.details><code>void MessageDifferencer::SetFractionAndMargin(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double fraction,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double margin)</code></h3><div style=margin-left:16px><p>DEPRECATED.</p><p>Pass a <a href=google.protobuf.util.field_comparator#DefaultFieldComparator>DefaultFieldComparator</a> instance instead. Sets the fraction and margin for the float comparison of a given field. Uses MathUtil::WithinFractionOrMargin to compare the values. NOTE: this method does nothing if differencer's field comparator has been</p><pre>set to a custom object.</pre><p>REQUIRES: field->cpp_type == <a href=google.protobuf.descriptor#FieldDescriptor.CppType>FieldDescriptor::CPPTYPE_DOUBLE</a> or</p><pre>field-&gt;cpp_type == FieldDescriptor::CPPTYPE_FLOAT</pre><p>REQUIRES: float_comparison_ == APPROXIMATE</p></div><hr><h3 id=MessageDifferencer.set_report_matches.details><code>void MessageDifferencer::set_report_matches(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool report_matches)</code></h3><div style=margin-left:16px><p>Tells the differencer whether or not to report matches.</p><p>This method must be called before Compare. The default for a new differencer is false.</p></div><hr><h3 id=MessageDifferencer.set_report_moves.details><code>void MessageDifferencer::set_report_moves(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool report_moves)</code></h3><div style=margin-left:16px><p>Tells the differencer whether or not to report moves (in a set or map repeated field).</p><p>This method must be called before Compare. The default for a new differencer is true.</p></div><hr><h3 id=MessageDifferencer.set_report_ignores.details><code>void MessageDifferencer::set_report_ignores(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool report_ignores)</code></h3><div style=margin-left:16px><p>Tells the differencer whether or not to report ignored values.</p><p>This method must be called before Compare. The default for a new differencer is true.</p></div><hr><h3 id=MessageDifferencer.set_float_comparison.details><code>void MessageDifferencer::set_float_comparison(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.util.message_differencer#MessageDifferencer.FloatComparison>FloatComparison</a> comparison)</code></h3><div style=margin-left:16px><p>DEPRECATED.</p><p>Pass a <a href=google.protobuf.util.field_comparator#DefaultFieldComparator>DefaultFieldComparator</a> instance instead. Sets the type of comparison (as defined in the FloatComparison enumeration above) that is used by this differencer when comparing float (and double) fields in messages. NOTE: this method does nothing if differencer's field comparator has been</p><pre>set to a custom object.</pre></div><hr><h3 id=MessageDifferencer.Compare.details><code>bool MessageDifferencer::Compare(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message2)</code></h3><div style=margin-left:16px><p>Compares the two specified messages, returning true if they are the same, false otherwise.</p><p>If this method returns false, any changes between the two messages will be reported if a <a href=google.protobuf.util.message_differencer#MessageDifferencer.Reporter>Reporter</a> was specified via ReportDifferencesTo (see also ReportDifferencesToString).</p><p>This method REQUIRES that the two messages have the same <a href=google.protobuf.descriptor#Descriptor>Descriptor</a> (message1.GetDescriptor() == message2.GetDescriptor()).</p></div><hr><h3 id=MessageDifferencer.ReportDifferencesToString.details><code>void MessageDifferencer::ReportDifferencesToString(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string * output)</code></h3><div style=margin-left:16px><p>Automatically creates a reporter that will output the differences found (if any) to the specified output string pointer.</p><p>Note that this method must be called before Compare.</p></div><hr><h3 id=MessageDifferencer.ReportDifferencesTo.details><code>void MessageDifferencer::ReportDifferencesTo(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=google.protobuf.util.message_differencer#MessageDifferencer.Reporter>Reporter</a> * reporter)</code></h3><div style=margin-left:16px><p>Tells the <a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> to report differences via the specified reporter.</p><p>Note that this method must be called before Compare for the reporter to be used. It is the responsibility of the caller to delete this object. If the provided pointer equals NULL, the <a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> stops reporting differences to any previously set reporters or output strings.</p></div><h2 id=MessageDifferencer.IgnoreCriteria>class MessageDifferencer::IgnoreCriteria</h2><p><code>#include &lt;<a href=#>google/protobuf/util/message_differencer.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>Abstract base class from which all <a href=google.protobuf.util.message_differencer#MessageDifferencer.IgnoreCriteria>IgnoreCriteria</a> derive.</p><p>By adding <a href=google.protobuf.util.message_differencer#MessageDifferencer.IgnoreCriteria>IgnoreCriteria</a> more complex ignore logic can be implemented. <a href=google.protobuf.util.message_differencer#MessageDifferencer.IgnoreCriteria>IgnoreCriteria</a> are registered with AddIgnoreCriteria. For each compared field IsIgnored is called on each added <a href=google.protobuf.util.message_differencer#MessageDifferencer.IgnoreCriteria>IgnoreCriteria</a> until one returns true or all return false. IsIgnored is called for fields where at least one side has a value.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=MessageDifferencer.IgnoreCriteria.IgnoreCriteria><div style=padding-left:16px;text-indent:-16px><code><b>IgnoreCriteria</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=MessageDifferencer.IgnoreCriteria.~IgnoreCriteria><div style=padding-left:16px;text-indent:-16px><code><b>~IgnoreCriteria</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=MessageDifferencer.IgnoreCriteria.IsIgnored><div style=padding-left:16px;text-indent:-16px><code><b>IsIgnored</b>(const <a href=google.protobuf.message#Message>Message</a> & , const <a href=google.protobuf.message#Message>Message</a> & , const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * , const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & ) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if the field should be ignored.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=MessageDifferencer.IgnoreCriteria.IsUnknownFieldIgnored><div style=padding-left:16px;text-indent:-16px><code><b>IsUnknownFieldIgnored</b>(const <a href=google.protobuf.message#Message>Message</a> & , const <a href=google.protobuf.message#Message>Message</a> & , const <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> & , const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns true if the unknown field should be ignored. <a href=#MessageDifferencer.IgnoreCriteria.IsUnknownFieldIgnored.details>more...</a></div></td></tr></table><hr><h3 id=MessageDifferencer.IgnoreCriteria.IsUnknownFieldIgnored.details><code>virtual bool IgnoreCriteria::IsUnknownFieldIgnored(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></h3><div style=margin-left:16px><p>Returns true if the unknown field should be ignored.</p><p>Note: This will be called for unknown fields as well in which case</p><pre>field.field will be null.</pre></div><h2 id=MessageDifferencer.MapKeyComparator>class MessageDifferencer::MapKeyComparator</h2><p><code>#include &lt;<a href=#>google/protobuf/util/message_differencer.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p><a href=google.protobuf.util.message_differencer#MessageDifferencer.MapKeyComparator>MapKeyComparator</a> is used to determine if two elements have the same key when comparing elements of a repeated field as a map.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=MessageDifferencer.MapKeyComparator.MapKeyComparator><div style=padding-left:16px;text-indent:-16px><code><b>MapKeyComparator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=MessageDifferencer.MapKeyComparator.~MapKeyComparator><div style=padding-left:16px;text-indent:-16px><code><b>~MapKeyComparator</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual bool</code></td><td style=border-left-width:0 id=MessageDifferencer.MapKeyComparator.IsMatch><div style=padding-left:16px;text-indent:-16px><code><b>IsMatch</b>(const <a href=google.protobuf.message#Message>Message</a> & , const <a href=google.protobuf.message#Message>Message</a> & , const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & ) const</code></div></td></tr></table><h2 id=MessageDifferencer.Reporter>class MessageDifferencer::Reporter</h2><p><code>#include &lt;<a href=#>google/protobuf/util/message_differencer.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>Abstract base class from which all <a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> reporters derive.</p><p>The five Report* methods below will be called when a field has been added, deleted, modified, moved, or matched. The third argument is a vector of <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> pointers which describes the chain of fields that was taken to find the current field. For example, for a field found in an embedded message, the vector will contain two FieldDescriptors. The first will be the field of the embedded message itself and the second will be the actual field in the embedded message that was added/deleted/modified. Fields will be reported in PostTraversalOrder. For example, given following proto, if both baz and quux are changed. foo {</p><pre>bar {
  baz: 1
  quux: 2
}</pre><p>} ReportModified will be invoked with following order:</p><ol><li>foo.bar.baz or foo.bar.quux</li><li>foo.bar.quux or foo.bar.baz</li></ol><ol><li>foo.bar</li><li>foo</li></ol><p>Known subclasses:</p><ul><li><code><a href=google.protobuf.util.message_differencer#MessageDifferencer.StreamReporter>StreamReporter</a></code></li></ul><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=MessageDifferencer.Reporter.Reporter><div style=padding-left:16px;text-indent:-16px><code><b>Reporter</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=MessageDifferencer.Reporter.~Reporter><div style=padding-left:16px;text-indent:-16px><code><b>~Reporter</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.Reporter.ReportAdded><div style=padding-left:16px;text-indent:-16px><code><b>ReportAdded</b>(const <a href=google.protobuf.message#Message>Message</a> & message1, const <a href=google.protobuf.message#Message>Message</a> & message2, const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & field_path) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reports that a field has been added into Message2.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.Reporter.ReportDeleted><div style=padding-left:16px;text-indent:-16px><code><b>ReportDeleted</b>(const <a href=google.protobuf.message#Message>Message</a> & message1, const <a href=google.protobuf.message#Message>Message</a> & message2, const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & field_path) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reports that a field has been deleted from Message1.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.Reporter.ReportModified><div style=padding-left:16px;text-indent:-16px><code><b>ReportModified</b>(const <a href=google.protobuf.message#Message>Message</a> & message1, const <a href=google.protobuf.message#Message>Message</a> & message2, const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & field_path) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reports that the value of a field has been modified.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.Reporter.ReportMoved><div style=padding-left:16px;text-indent:-16px><code><b>ReportMoved</b>(const <a href=google.protobuf.message#Message>Message</a> & , const <a href=google.protobuf.message#Message>Message</a> & , const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reports that a repeated field has been moved to another location. <a href=#MessageDifferencer.Reporter.ReportMoved.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.Reporter.ReportMatched><div style=padding-left:16px;text-indent:-16px><code><b>ReportMatched</b>(const <a href=google.protobuf.message#Message>Message</a> & , const <a href=google.protobuf.message#Message>Message</a> & , const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reports that two fields match. <a href=#MessageDifferencer.Reporter.ReportMatched.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.Reporter.ReportIgnored><div style=padding-left:16px;text-indent:-16px><code><b>ReportIgnored</b>(const <a href=google.protobuf.message#Message>Message</a> & , const <a href=google.protobuf.message#Message>Message</a> & , const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reports that two fields would have been compared, but the comparison has been skipped because the field was marked as 'ignored' using <a href=google.protobuf.util.message_differencer#MessageDifferencer.IgnoreField>IgnoreField()</a>. <a href=#MessageDifferencer.Reporter.ReportIgnored.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.Reporter.ReportUnknownFieldIgnored><div style=padding-left:16px;text-indent:-16px><code><b>ReportUnknownFieldIgnored</b>(const <a href=google.protobuf.message#Message>Message</a> & , const <a href=google.protobuf.message#Message>Message</a> & , const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Report that an unknown field is ignored. <a href=#MessageDifferencer.Reporter.ReportUnknownFieldIgnored.details>more...</a></div></td></tr></table><hr><h3 id=MessageDifferencer.Reporter.ReportMoved.details><code>virtual void Reporter::ReportMoved(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></h3><div style=margin-left:16px><p>Reports that a repeated field has been moved to another location.</p><p>This only applies when using TreatAsSet or <a href=google.protobuf.util.message_differencer#MessageDifferencer.TreatAsMap>TreatAsMap()</a> &ndash; see below. Also note that for any given field, ReportModified and ReportMoved are mutually exclusive. If a field has been both moved and modified, then only ReportModified will be called.</p></div><hr><h3 id=MessageDifferencer.Reporter.ReportMatched.details><code>virtual void Reporter::ReportMatched(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></h3><div style=margin-left:16px><p>Reports that two fields match.</p><p>Useful for doing side-by-side diffs. This function is mutually exclusive with ReportModified and ReportMoved. Note that you must call set_report_matches(true) before calling Compare to make use of this function.</p></div><hr><h3 id=MessageDifferencer.Reporter.ReportIgnored.details><code>virtual void Reporter::ReportIgnored(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></h3><div style=margin-left:16px><p>Reports that two fields would have been compared, but the comparison has been skipped because the field was marked as 'ignored' using <a href=google.protobuf.util.message_differencer#MessageDifferencer.IgnoreField>IgnoreField()</a>.</p><p>This function is mutually exclusive with all the other Report() functions.</p><p>The contract of ReportIgnored is slightly different than the other Report() functions, in that |field_path.back().index| is always equal to -1, even if the last field is repeated. This is because while the other Report() functions indicate where in a repeated field the action (Addition, Deletion, etc...) happened, when a repeated field is 'ignored', the differencer simply calls ReportIgnored on the repeated field as a whole and moves on without looking at its individual elements.</p><p>Furthermore, <a href=google.protobuf.util.message_differencer#MessageDifferencer.Reporter.ReportIgnored>ReportIgnored()</a> does not indicate whether the fields were in fact equal or not, as <a href=google.protobuf.util.message_differencer#MessageDifferencer.Compare>Compare()</a> does not inspect these fields at all. It is up to the <a href=google.protobuf.util.message_differencer#MessageDifferencer.Reporter>Reporter</a> to decide whether the fields are equal or not (perhaps with a second call to <a href=google.protobuf.util.message_differencer#MessageDifferencer.Compare>Compare()</a>), if it cares.</p></div><hr><h3 id=MessageDifferencer.Reporter.ReportUnknownFieldIgnored.details><code>virtual void Reporter::ReportUnknownFieldIgnored(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></h3><div style=margin-left:16px><p>Report that an unknown field is ignored.</p><p>(see comment above). Note this is a different function since the last <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> in field path has a null field. This could break existing <a href=google.protobuf.util.message_differencer#MessageDifferencer.Reporter>Reporter</a>.</p></div><h2 id=MessageDifferencer.SpecificField>struct MessageDifferencer::SpecificField</h2><p><code>#include &lt;<a href=#>google/protobuf/util/message_differencer.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>Identifies an individual field in a message instance.</p><p>Used for field_path, below.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> *</code></td><td style=border-left-width:0 id=MessageDifferencer.SpecificField.field><div style=padding-left:16px;text-indent:-16px><code><b>field</b> = = nullptr</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For known fields, "field" is filled in and "unknown_field_number" is -1. <a href=#MessageDifferencer.SpecificField.field.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=MessageDifferencer.SpecificField.unknown_field_number><div style=padding-left:16px;text-indent:-16px><code><b>unknown_field_number</b> = = -1</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>UnknownField::Type</code></td><td style=border-left-width:0 id=MessageDifferencer.SpecificField.unknown_field_type><div style=padding-left:16px;text-indent:-16px><code><b>unknown_field_type</b> = = UnknownField::Type::TYPE_VARINT</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=MessageDifferencer.SpecificField.index><div style=padding-left:16px;text-indent:-16px><code><b>index</b> = = -1</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If this a repeated field, "index" is the index within it. <a href=#MessageDifferencer.SpecificField.index.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=MessageDifferencer.SpecificField.new_index><div style=padding-left:16px;text-indent:-16px><code><b>new_index</b> = = -1</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If "field" is a repeated field which is being treated as a map or a set (see <a href=google.protobuf.util.message_differencer#MessageDifferencer.TreatAsMap>TreatAsMap()</a> and <a href=google.protobuf.util.message_differencer#MessageDifferencer.TreatAsSet>TreatAsSet()</a>, below), new_index indicates the index the position to which the element has moved. <a href=#MessageDifferencer.SpecificField.new_index.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> *</code></td><td style=border-left-width:0 id=MessageDifferencer.SpecificField.unknown_field_set1><div style=padding-left:16px;text-indent:-16px><code><b>unknown_field_set1</b> = = nullptr</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For unknown fields, these are the pointers to the <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> containing the unknown fields. <a href=#MessageDifferencer.SpecificField.unknown_field_set1.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> *</code></td><td style=border-left-width:0 id=MessageDifferencer.SpecificField.unknown_field_set2><div style=padding-left:16px;text-indent:-16px><code><b>unknown_field_set2</b> = = nullptr</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=MessageDifferencer.SpecificField.unknown_field_index1><div style=padding-left:16px;text-indent:-16px><code><b>unknown_field_index1</b> = = -1</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For unknown fields, these are the index of the field within the UnknownFieldSets. <a href=#MessageDifferencer.SpecificField.unknown_field_index1.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>int</code></td><td style=border-left-width:0 id=MessageDifferencer.SpecificField.unknown_field_index2><div style=padding-left:16px;text-indent:-16px><code><b>unknown_field_index2</b> = = -1</code></div></td></tr></table><hr><h3 id=MessageDifferencer.SpecificField.field.details><code>const <a href=google.protobuf.descriptor#FieldDescriptor>FieldDescriptor</a> * SpecificField::field = = nullptr</code></h3><div style=margin-left:16px><p>For known fields, "field" is filled in and "unknown_field_number" is -1.</p><p>For unknown fields, "field" is NULL, "unknown_field_number" is the field number, and "unknown_field_type" is its type.</p></div><hr><h3 id=MessageDifferencer.SpecificField.index.details><code>int SpecificField::index = = -1</code></h3><div style=margin-left:16px><p>If this a repeated field, "index" is the index within it.</p><p>For unknown fields, this is the index of the field among all unknown fields of the same field number and type.</p></div><hr><h3 id=MessageDifferencer.SpecificField.new_index.details><code>int SpecificField::new_index = = -1</code></h3><div style=margin-left:16px><p>If "field" is a repeated field which is being treated as a map or a set (see <a href=google.protobuf.util.message_differencer#MessageDifferencer.TreatAsMap>TreatAsMap()</a> and <a href=google.protobuf.util.message_differencer#MessageDifferencer.TreatAsSet>TreatAsSet()</a>, below), new_index indicates the index the position to which the element has moved.</p><p>If the element has not moved, "new_index" will have the same value as "index".</p></div><hr><h3 id=MessageDifferencer.SpecificField.unknown_field_set1.details><code>const <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> * SpecificField::unknown_field_set1 = = nullptr</code></h3><div style=margin-left:16px><p>For unknown fields, these are the pointers to the <a href=google.protobuf.unknown_field_set#UnknownFieldSet>UnknownFieldSet</a> containing the unknown fields.</p><p>In certain cases (e.g. proto1's MessageSet, or nested groups of unknown fields), these may differ from the messages' internal UnknownFieldSets.</p></div><hr><h3 id=MessageDifferencer.SpecificField.unknown_field_index1.details><code>int SpecificField::unknown_field_index1 = = -1</code></h3><div style=margin-left:16px><p>For unknown fields, these are the index of the field within the UnknownFieldSets.</p><p>One or the other will be -1 when reporting an addition or deletion.</p></div><h2 id=MessageDifferencer.StreamReporter>class MessageDifferencer::StreamReporter: public <a href=google.protobuf.util.message_differencer#MessageDifferencer.Reporter>Reporter</a></h2><p><code>#include &lt;<a href=#>google/protobuf/util/message_differencer.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>An implementation of the <a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> <a href=google.protobuf.util.message_differencer#MessageDifferencer.Reporter>Reporter</a> that outputs any differences found in human-readable form to the supplied ZeroCopyOutputStream or Printer.</p><p>If a printer is used, the delimiter <i>must</i> be '$'.</p><p>WARNING: this reporter does not necessarily flush its output until it is destroyed. As a result, it is not safe to assume the output is valid or complete until after you destroy the reporter. For example, if you use a <a href=google.protobuf.util.message_differencer#MessageDifferencer.StreamReporter>StreamReporter</a> to write to a StringOutputStream, the target string may contain uninitialized data until the reporter is destroyed.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.StreamReporter><div style=padding-left:16px;text-indent:-16px><code><b>StreamReporter</b>(<a href=google.protobuf.io.zero_copy_stream#ZeroCopyOutputStream>io::ZeroCopyOutputStream</a> * output)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.StreamReporter><div style=padding-left:16px;text-indent:-16px><code><b>StreamReporter</b>(<a href=google.protobuf.io.printer#Printer>io::Printer</a> * printer)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>delimiter '$'</div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.~StreamReporter><div style=padding-left:16px;text-indent:-16px><code><b>~StreamReporter</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.set_report_modified_aggregates><div style=padding-left:16px;text-indent:-16px><code><b>set_report_modified_aggregates</b>(bool report)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>When set to true, the stream reporter will also output aggregates nodes (i.e. <a href=#MessageDifferencer.StreamReporter.set_report_modified_aggregates.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.ReportAdded><div style=padding-left:16px;text-indent:-16px><code><b>ReportAdded</b>(const <a href=google.protobuf.message#Message>Message</a> & message1, const <a href=google.protobuf.message#Message>Message</a> & message2, const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & field_path)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reports that a field has been added into Message2.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.ReportDeleted><div style=padding-left:16px;text-indent:-16px><code><b>ReportDeleted</b>(const <a href=google.protobuf.message#Message>Message</a> & message1, const <a href=google.protobuf.message#Message>Message</a> & message2, const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & field_path)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reports that a field has been deleted from Message1.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.ReportModified><div style=padding-left:16px;text-indent:-16px><code><b>ReportModified</b>(const <a href=google.protobuf.message#Message>Message</a> & message1, const <a href=google.protobuf.message#Message>Message</a> & message2, const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & field_path)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reports that the value of a field has been modified.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.ReportMoved><div style=padding-left:16px;text-indent:-16px><code><b>ReportMoved</b>(const <a href=google.protobuf.message#Message>Message</a> & , const <a href=google.protobuf.message#Message>Message</a> & , const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reports that a repeated field has been moved to another location. <a href=#MessageDifferencer.StreamReporter.ReportMoved.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.ReportMatched><div style=padding-left:16px;text-indent:-16px><code><b>ReportMatched</b>(const <a href=google.protobuf.message#Message>Message</a> & , const <a href=google.protobuf.message#Message>Message</a> & , const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reports that two fields match. <a href=#MessageDifferencer.StreamReporter.ReportMatched.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.ReportIgnored><div style=padding-left:16px;text-indent:-16px><code><b>ReportIgnored</b>(const <a href=google.protobuf.message#Message>Message</a> & , const <a href=google.protobuf.message#Message>Message</a> & , const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Reports that two fields would have been compared, but the comparison has been skipped because the field was marked as 'ignored' using <a href=google.protobuf.util.message_differencer#MessageDifferencer.IgnoreField>IgnoreField()</a>. <a href=#MessageDifferencer.StreamReporter.ReportIgnored.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.ReportUnknownFieldIgnored><div style=padding-left:16px;text-indent:-16px><code><b>ReportUnknownFieldIgnored</b>(const <a href=google.protobuf.message#Message>Message</a> & , const <a href=google.protobuf.message#Message>Message</a> & , const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Report that an unknown field is ignored. <a href=#MessageDifferencer.StreamReporter.ReportUnknownFieldIgnored.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.SetMessages><div style=padding-left:16px;text-indent:-16px><code><b>SetMessages</b>(const <a href=google.protobuf.message#Message>Message</a> & message1, const <a href=google.protobuf.message#Message>Message</a> & message2)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Messages that are being compared must be provided to <a href=google.protobuf.util.message_differencer#MessageDifferencer.StreamReporter>StreamReporter</a> prior to processing.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.PrintPath><div style=padding-left:16px;text-indent:-16px><code><b>PrintPath</b>(const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & field_path, bool left_side)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Prints the specified path of fields to the buffer.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.PrintValue><div style=padding-left:16px;text-indent:-16px><code><b>PrintValue</b>(const <a href=google.protobuf.message#Message>Message</a> & message, const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & field_path, bool left_side)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Prints the value of fields to the buffer. <a href=#MessageDifferencer.StreamReporter.PrintValue.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected virtual void</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.PrintUnknownFieldValue><div style=padding-left:16px;text-indent:-16px><code><b>PrintUnknownFieldValue</b>(const <a href=google.protobuf.unknown_field_set#UnknownField>UnknownField</a> * unknown_field)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Prints the specified path of unknown fields to the buffer.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected void</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.Print><div style=padding-left:16px;text-indent:-16px><code><b>Print</b>(const std::string & str)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Just print a string.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>protected void</code></td><td style=border-left-width:0 id=MessageDifferencer.StreamReporter.PrintMapKey><div style=padding-left:16px;text-indent:-16px><code><b>PrintMapKey</b>(const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & field_path, bool left_side, const <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> & specific_field, size_t target_field_index)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>helper function for PrintPath that contains logic for printing maps</div></td></tr></table><hr><h3 id=MessageDifferencer.StreamReporter.set_report_modified_aggregates.details><code>void StreamReporter::set_report_modified_aggregates(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool report)</code></h3><div style=margin-left:16px><p>When set to true, the stream reporter will also output aggregates nodes (i.e.</p><p>messages and groups) whose subfields have been modified. When false, will only report the individual subfields. Defaults to false.</p></div><hr><h3 id=MessageDifferencer.StreamReporter.ReportMoved.details><code>virtual void StreamReporter::ReportMoved(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></h3><div style=margin-left:16px><p>Reports that a repeated field has been moved to another location.</p><p>This only applies when using TreatAsSet or <a href=google.protobuf.util.message_differencer#MessageDifferencer.TreatAsMap>TreatAsMap()</a> &ndash; see below. Also note that for any given field, ReportModified and ReportMoved are mutually exclusive. If a field has been both moved and modified, then only ReportModified will be called.</p></div><hr><h3 id=MessageDifferencer.StreamReporter.ReportMatched.details><code>virtual void StreamReporter::ReportMatched(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></h3><div style=margin-left:16px><p>Reports that two fields match.</p><p>Useful for doing side-by-side diffs. This function is mutually exclusive with ReportModified and ReportMoved. Note that you must call set_report_matches(true) before calling Compare to make use of this function.</p></div><hr><h3 id=MessageDifferencer.StreamReporter.ReportIgnored.details><code>virtual void StreamReporter::ReportIgnored(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></h3><div style=margin-left:16px><p>Reports that two fields would have been compared, but the comparison has been skipped because the field was marked as 'ignored' using <a href=google.protobuf.util.message_differencer#MessageDifferencer.IgnoreField>IgnoreField()</a>.</p><p>This function is mutually exclusive with all the other Report() functions.</p><p>The contract of ReportIgnored is slightly different than the other Report() functions, in that |field_path.back().index| is always equal to -1, even if the last field is repeated. This is because while the other Report() functions indicate where in a repeated field the action (Addition, Deletion, etc...) happened, when a repeated field is 'ignored', the differencer simply calls ReportIgnored on the repeated field as a whole and moves on without looking at its individual elements.</p><p>Furthermore, <a href=google.protobuf.util.message_differencer#MessageDifferencer.StreamReporter.ReportIgnored>ReportIgnored()</a> does not indicate whether the fields were in fact equal or not, as <a href=google.protobuf.util.message_differencer#MessageDifferencer.Compare>Compare()</a> does not inspect these fields at all. It is up to the <a href=google.protobuf.util.message_differencer#MessageDifferencer.Reporter>Reporter</a> to decide whether the fields are equal or not (perhaps with a second call to <a href=google.protobuf.util.message_differencer#MessageDifferencer.Compare>Compare()</a>), if it cares.</p></div><hr><h3 id=MessageDifferencer.StreamReporter.ReportUnknownFieldIgnored.details><code>virtual void StreamReporter::ReportUnknownFieldIgnored(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & ,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & )</code></h3><div style=margin-left:16px><p>Report that an unknown field is ignored.</p><p>(see comment above). Note this is a different function since the last <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> in field path has a null field. This could break existing <a href=google.protobuf.util.message_differencer#MessageDifferencer.Reporter>Reporter</a>.</p></div><hr><h3 id=MessageDifferencer.StreamReporter.PrintValue.details><code>protected virtual void StreamReporter::PrintValue(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.message#Message>Message</a> & message,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>SpecificField</a> > & field_path,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool left_side)</code></h3><div style=margin-left:16px><p>Prints the value of fields to the buffer.</p><p>left_side is true if the given message is from the left side of the comparison, false if it was the right. This is relevant only to decide whether to follow unknown_field_index1 or unknown_field_index2 when an unknown field is encountered in field_path.</p></div><h2 id=MessageDifferencer.UnpackAnyField>class MessageDifferencer::UnpackAnyField</h2><p><code>#include &lt;<a href=#>google/protobuf/util/message_differencer.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>Class for processing Any deserialization.</p><p>This logic is used by both the <a href=google.protobuf.util.message_differencer#MessageDifferencer>MessageDifferencer</a> and <a href=google.protobuf.util.message_differencer#MessageDifferencer.StreamReporter>StreamReporter</a> classes.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=MessageDifferencer.UnpackAnyField.UnpackAnyField><div style=padding-left:16px;text-indent:-16px><code><b>UnpackAnyField</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=MessageDifferencer.UnpackAnyField.~UnpackAnyField><div style=padding-left:16px;text-indent:-16px><code><b>~UnpackAnyField</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>bool</code></td><td style=border-left-width:0 id=MessageDifferencer.UnpackAnyField.UnpackAny><div style=padding-left:16px;text-indent:-16px><code><b>UnpackAny</b>(const <a href=google.protobuf.message#Message>Message</a> & any, std::unique_ptr&lt; <a href=google.protobuf.message#Message>Message</a> > * data)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>If "any" is of type google.protobuf.Any, extract its payload using <a href=google.protobuf.dynamic_message#DynamicMessageFactory>DynamicMessageFactory</a> and store in "data".</div></td></tr></table><h2 id=FieldContext>class FieldContext</h2><p><code>#include &lt;<a href=#>google/protobuf/util/message_differencer.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>This class provides extra information to the <a href=google.protobuf.util.field_comparator#FieldComparator.Compare>FieldComparator::Compare</a> function.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=FieldContext.FieldContext><div style=padding-left:16px;text-indent:-16px><code><b>FieldContext</b>(std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>MessageDifferencer::SpecificField</a> > * parent_fields)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>std::vector&lt; <a href=google.protobuf.util.message_differencer#MessageDifferencer.SpecificField>MessageDifferencer::SpecificField</a> > *</code></td><td style=border-left-width:0 id=FieldContext.parent_fields><div style=padding-left:16px;text-indent:-16px><code><b>parent_fields</b>() const</code></div></td></tr></table></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-52bb433fb5f8ddede70a427f6de12f6f>1.4.42 -</h1><html devsite><head><title>time_util.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>time_util.h</h1><p><code>#include &lt;google/protobuf/util/time_util.h><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>Defines utilities for the Timestamp and Duration well known types.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#TimeUtil>TimeUtil</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Utility functions for Timestamp and Duration.</div></td></tr></table><h2 id=TimeUtil>class TimeUtil</h2><p><code>#include &lt;<a href=#>google/protobuf/util/time_util.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>Utility functions for Timestamp and Duration.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>const int64_t</code></td><td style=border-left-width:0 id=TimeUtil.kTimestampMinSeconds><div style=padding-left:16px;text-indent:-16px><code><b>kTimestampMinSeconds</b> = = -62135596800LL</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The min/max Timestamp/Duration values we support. <a href=#TimeUtil.kTimestampMinSeconds.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const int64_t</code></td><td style=border-left-width:0 id=TimeUtil.kTimestampMaxSeconds><div style=padding-left:16px;text-indent:-16px><code><b>kTimestampMaxSeconds</b> = = 253402300799LL</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>For "9999-12-31T23:59:59.999999999Z".</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const int64_t</code></td><td style=border-left-width:0 id=TimeUtil.kDurationMinSeconds><div style=padding-left:16px;text-indent:-16px><code><b>kDurationMinSeconds</b> = = -315576000000LL</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>const int64_t</code></td><td style=border-left-width:0 id=TimeUtil.kDurationMaxSeconds><div style=padding-left:16px;text-indent:-16px><code><b>kDurationMaxSeconds</b> = = 315576000000LL</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static std::string</code></td><td style=border-left-width:0 id=TimeUtil.ToString><div style=padding-left:16px;text-indent:-16px><code><b>ToString</b>(const Timestamp & timestamp)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Converts Timestamp to/from RFC 3339 date string format. <a href=#TimeUtil.ToString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=TimeUtil.FromString><div style=padding-left:16px;text-indent:-16px><code><b>FromString</b>(const std::string & value, Timestamp * timestamp)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static std::string</code></td><td style=border-left-width:0 id=TimeUtil.ToString><div style=padding-left:16px;text-indent:-16px><code><b>ToString</b>(const Duration & duration)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Converts Duration to/from string format. <a href=#TimeUtil.ToString.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static bool</code></td><td style=border-left-width:0 id=TimeUtil.FromString><div style=padding-left:16px;text-indent:-16px><code><b>FromString</b>(const std::string & value, Duration * timestamp)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Timestamp</code></td><td style=border-left-width:0 id=TimeUtil.GetCurrentTime><div style=padding-left:16px;text-indent:-16px><code><b>GetCurrentTime</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Gets the current UTC time.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Timestamp</code></td><td style=border-left-width:0 id=TimeUtil.GetEpoch><div style=padding-left:16px;text-indent:-16px><code><b>GetEpoch</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the Time representing "1970-01-01 00:00:00".</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Duration</code></td><td style=border-left-width:0 id=TimeUtil.NanosecondsToDuration><div style=padding-left:16px;text-indent:-16px><code><b>NanosecondsToDuration</b>(int64_t nanos)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Converts between Duration and integer types. <a href=#TimeUtil.NanosecondsToDuration.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Duration</code></td><td style=border-left-width:0 id=TimeUtil.MicrosecondsToDuration><div style=padding-left:16px;text-indent:-16px><code><b>MicrosecondsToDuration</b>(int64_t micros)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Duration</code></td><td style=border-left-width:0 id=TimeUtil.MillisecondsToDuration><div style=padding-left:16px;text-indent:-16px><code><b>MillisecondsToDuration</b>(int64_t millis)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Duration</code></td><td style=border-left-width:0 id=TimeUtil.SecondsToDuration><div style=padding-left:16px;text-indent:-16px><code><b>SecondsToDuration</b>(int64_t seconds)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Duration</code></td><td style=border-left-width:0 id=TimeUtil.MinutesToDuration><div style=padding-left:16px;text-indent:-16px><code><b>MinutesToDuration</b>(int64_t minutes)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Duration</code></td><td style=border-left-width:0 id=TimeUtil.HoursToDuration><div style=padding-left:16px;text-indent:-16px><code><b>HoursToDuration</b>(int64_t hours)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static int64_t</code></td><td style=border-left-width:0 id=TimeUtil.DurationToNanoseconds><div style=padding-left:16px;text-indent:-16px><code><b>DurationToNanoseconds</b>(const Duration & duration)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Result will be truncated towards zero. <a href=#TimeUtil.DurationToNanoseconds.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static int64_t</code></td><td style=border-left-width:0 id=TimeUtil.DurationToMicroseconds><div style=padding-left:16px;text-indent:-16px><code><b>DurationToMicroseconds</b>(const Duration & duration)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static int64_t</code></td><td style=border-left-width:0 id=TimeUtil.DurationToMilliseconds><div style=padding-left:16px;text-indent:-16px><code><b>DurationToMilliseconds</b>(const Duration & duration)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static int64_t</code></td><td style=border-left-width:0 id=TimeUtil.DurationToSeconds><div style=padding-left:16px;text-indent:-16px><code><b>DurationToSeconds</b>(const Duration & duration)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static int64_t</code></td><td style=border-left-width:0 id=TimeUtil.DurationToMinutes><div style=padding-left:16px;text-indent:-16px><code><b>DurationToMinutes</b>(const Duration & duration)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static int64_t</code></td><td style=border-left-width:0 id=TimeUtil.DurationToHours><div style=padding-left:16px;text-indent:-16px><code><b>DurationToHours</b>(const Duration & duration)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Timestamp</code></td><td style=border-left-width:0 id=TimeUtil.NanosecondsToTimestamp><div style=padding-left:16px;text-indent:-16px><code><b>NanosecondsToTimestamp</b>(int64_t nanos)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates Timestamp from integer types. <a href=#TimeUtil.NanosecondsToTimestamp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Timestamp</code></td><td style=border-left-width:0 id=TimeUtil.MicrosecondsToTimestamp><div style=padding-left:16px;text-indent:-16px><code><b>MicrosecondsToTimestamp</b>(int64_t micros)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Timestamp</code></td><td style=border-left-width:0 id=TimeUtil.MillisecondsToTimestamp><div style=padding-left:16px;text-indent:-16px><code><b>MillisecondsToTimestamp</b>(int64_t millis)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Timestamp</code></td><td style=border-left-width:0 id=TimeUtil.SecondsToTimestamp><div style=padding-left:16px;text-indent:-16px><code><b>SecondsToTimestamp</b>(int64_t seconds)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static int64_t</code></td><td style=border-left-width:0 id=TimeUtil.TimestampToNanoseconds><div style=padding-left:16px;text-indent:-16px><code><b>TimestampToNanoseconds</b>(const Timestamp & timestamp)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Result will be truncated down to the nearest integer value. <a href=#TimeUtil.TimestampToNanoseconds.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static int64_t</code></td><td style=border-left-width:0 id=TimeUtil.TimestampToMicroseconds><div style=padding-left:16px;text-indent:-16px><code><b>TimestampToMicroseconds</b>(const Timestamp & timestamp)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static int64_t</code></td><td style=border-left-width:0 id=TimeUtil.TimestampToMilliseconds><div style=padding-left:16px;text-indent:-16px><code><b>TimestampToMilliseconds</b>(const Timestamp & timestamp)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static int64_t</code></td><td style=border-left-width:0 id=TimeUtil.TimestampToSeconds><div style=padding-left:16px;text-indent:-16px><code><b>TimestampToSeconds</b>(const Timestamp & timestamp)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Timestamp</code></td><td style=border-left-width:0 id=TimeUtil.TimeTToTimestamp><div style=padding-left:16px;text-indent:-16px><code><b>TimeTToTimestamp</b>(time_t value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Conversion to/from other time/date types. <a href=#TimeUtil.TimeTToTimestamp.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static time_t</code></td><td style=border-left-width:0 id=TimeUtil.TimestampToTimeT><div style=padding-left:16px;text-indent:-16px><code><b>TimestampToTimeT</b>(const Timestamp & value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Timestamp</code></td><td style=border-left-width:0 id=TimeUtil.TimevalToTimestamp><div style=padding-left:16px;text-indent:-16px><code><b>TimevalToTimestamp</b>(const timeval & value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Conversion to/from timeval.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static timeval</code></td><td style=border-left-width:0 id=TimeUtil.TimestampToTimeval><div style=padding-left:16px;text-indent:-16px><code><b>TimestampToTimeval</b>(const Timestamp & value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static Duration</code></td><td style=border-left-width:0 id=TimeUtil.TimevalToDuration><div style=padding-left:16px;text-indent:-16px><code><b>TimevalToDuration</b>(const timeval & value)</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static timeval</code></td><td style=border-left-width:0 id=TimeUtil.DurationToTimeval><div style=padding-left:16px;text-indent:-16px><code><b>DurationToTimeval</b>(const Duration & value)</code></div></td></tr></table><hr><h3 id=TimeUtil.kTimestampMinSeconds.details><code>const int64_t TimeUtil::kTimestampMinSeconds = = -62135596800LL</code></h3><div style=margin-left:16px><p>The min/max Timestamp/Duration values we support.</p><p>For "0001-01-01T00:00:00Z".</p></div><hr><h3 id=TimeUtil.ToString.details><code>static std::string TimeUtil::ToString(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const Timestamp & timestamp)</code></h3><div style=margin-left:16px><p>Converts Timestamp to/from RFC 3339 date string format.</p><p>Generated output will always be Z-normalized and uses 3, 6 or 9 fractional digits as required to represent the exact time. When parsing, any fractional digits (or none) and any offset are accepted as long as they fit into nano-seconds precision. Note that Timestamp can only represent time from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59.999999999Z. Converting a Timestamp outside of this range is undefined behavior. See <a href=https://www.ietf.org/rfc/rfc3339.txt></a></p><p>Example of generated format:</p><pre>"1972-01-01T10:00:20.021Z"</pre><p>Example of accepted format:</p><pre>"1972-01-01T10:00:20.021-05:00"</pre></div><hr><h3 id=TimeUtil.ToString.details><code>static std::string TimeUtil::ToString(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const Duration & duration)</code></h3><div style=margin-left:16px><p>Converts Duration to/from string format.</p><p>The string format will contains 3, 6, or 9 fractional digits depending on the precision required to represent the exact Duration value. For example:</p><pre>"1s", "1.010s", "1.000000100s", "-3.100s"</pre><p>The range that can be represented by Duration is from -315,576,000,000 to +315,576,000,000 inclusive (in seconds).</p></div><hr><h3 id=TimeUtil.NanosecondsToDuration.details><code>static Duration TimeUtil::NanosecondsToDuration(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int64_t nanos)</code></h3><div style=margin-left:16px><p>Converts between Duration and integer types.</p><p>The behavior is undefined if the input value is not in the valid range of Duration.</p></div><hr><h3 id=TimeUtil.DurationToNanoseconds.details><code>static int64_t TimeUtil::DurationToNanoseconds(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const Duration & duration)</code></h3><div style=margin-left:16px><p>Result will be truncated towards zero.</p><p>For example, "-1.5s" will be truncated to "-1s", and "1.5s" to "1s" when converting to seconds. It's undefined behavior if the input duration is not valid or the result exceeds the range of int64. A duration is not valid if it's not in the valid range of Duration, or have an invalid nanos value (i.e., larger than 999999999, less than -999999999, or have a different sign from the seconds part).</p></div><hr><h3 id=TimeUtil.NanosecondsToTimestamp.details><code>static Timestamp TimeUtil::NanosecondsToTimestamp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int64_t nanos)</code></h3><div style=margin-left:16px><p>Creates Timestamp from integer types.</p><p>The integer value indicates the time elapsed from Epoch time. The behavior is undefined if the input value is not in the valid range of Timestamp.</p></div><hr><h3 id=TimeUtil.TimestampToNanoseconds.details><code>static int64_t TimeUtil::TimestampToNanoseconds(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const Timestamp & timestamp)</code></h3><div style=margin-left:16px><p>Result will be truncated down to the nearest integer value.</p><p>For example, with "1969-12-31T23:59:59.9Z", TimestampToMilliseconds() returns -100 and TimestampToSeconds() returns -1. It's undefined behavior if the input Timestamp is not valid (i.e., its seconds part or nanos part does not fall in the valid range) or the return value doesn't fit into int64.</p></div><hr><h3 id=TimeUtil.TimeTToTimestamp.details><code>static Timestamp TimeUtil::TimeTToTimestamp(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time_t value)</code></h3><div style=margin-left:16px><p>Conversion to/from other time/date types.</p><p>Note that these types may have a different precision and time range from Timestamp/Duration. When converting to a lower precision type, the value will be truncated to the nearest value that can be represented. If the value is out of the range of the result type, the return value is undefined.</p><p>Conversion to/from time_t</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-0469327cf6144b16a716a37463bf0641>1.4.43 -</h1><html devsite><head><title>type_resolver.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>type_resolver.h</h1><p><code>#include &lt;google/protobuf/util/type_resolver.h><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>Defines a TypeResolver for the Any message.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#TypeResolver>TypeResolver</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Abstract interface for a type resolver.</div></td></tr></table><h2 id=TypeResolver>class TypeResolver</h2><p><code>#include &lt;<a href=#>google/protobuf/util/type_resolver.h</a>><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>Abstract interface for a type resolver.</p><p>Implementations of this interface must be thread-safe.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=TypeResolver.TypeResolver><div style=padding-left:16px;text-indent:-16px><code><b>TypeResolver</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual</code></td><td style=border-left-width:0 id=TypeResolver.~TypeResolver><div style=padding-left:16px;text-indent:-16px><code><b>~TypeResolver</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual util::Status</code></td><td style=border-left-width:0 id=TypeResolver.ResolveMessageType><div style=padding-left:16px;text-indent:-16px><code><b>ResolveMessageType</b>(const std::string & type_url, google::protobuf::Type * message_type) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Resolves a type url for a message type.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>virtual util::Status</code></td><td style=border-left-width:0 id=TypeResolver.ResolveEnumType><div style=padding-left:16px;text-indent:-16px><code><b>ResolveEnumType</b>(const std::string & type_url, google::protobuf::Enum * enum_type) = 0</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Resolves a type url for an enum type.</div></td></tr></table></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-e4121da8698610d94470036a83d0f0a3>1.4.44 -</h1><html devsite><head><title>type_resolver_util.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>type_resolver_util.h</h1><p><code>#include &lt;google/protobuf/util/type_resolver_util.h><br>namespace <a href=#google.protobuf.util>google::protobuf::util</a></code></p><p>Defines utilities for the TypeResolver.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr></table><table><tr><th colspan=2><h3 style=margin-top:4px>File Members</h3><div style=font-style:italic;font-weight:400>These definitions are not part of any class.</div></th></tr><tr><td style=border-right-width:0;text-align:right><code><a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a> *</code></td><td style=border-left-width:0 id=NewTypeResolverForDescriptorPool><div style=padding-left:16px;text-indent:-16px><code><b>NewTypeResolverForDescriptorPool</b>(const std::string & url_prefix, const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> * pool)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Creates a <a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a> that serves type information in the given descriptor pool. <a href=#NewTypeResolverForDescriptorPool.details>more...</a></div></td></tr></table><hr><h3 id=NewTypeResolverForDescriptorPool.details><code><a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a> * util::NewTypeResolverForDescriptorPool(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const std::string & url_prefix,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=google.protobuf.descriptor#DescriptorPool>DescriptorPool</a> * pool)</code></h3><div style=margin-left:16px><p>Creates a <a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a> that serves type information in the given descriptor pool.</p><p>Caller takes ownership of the returned <a href=google.protobuf.util.type_resolver#TypeResolver>TypeResolver</a>.</p></div></body></html></div><div class=td-content style=page-break-before:always><h1 id=pg-257658e602298bf8c1f54c43b6ce23f4>2 - C# Reference</h1><div class=lead>This section contains reference documentation for working with protocol buffer classes in C#</div><ul><li><a href=/reference/csharp/csharp-generated>C# Generated Code Guide</a></li><li><a href=/reference/csharp/api-docs/>C# API</a></li></ul></div><div class=td-content><h1 id=pg-7a9133a32842bee757990fd827b5c593>2.1 - C# Generated Code Guide</h1><div class=lead>This topic describes exactly what C# code the protocol buffer compiler generates for protocol definitions using proto3 syntax.</div><p>This page describes exactly what C# code the protocol buffer compiler generates
for protocol definitions using <code>proto3</code> syntax. You should read the
<a href=/programming-guides/proto3>proto3 language guide</a> before reading this
document.</p><div class="alert alert-note" role=alert><h4 class=alert-heading>Note</h4>The protobuf compiler can generate C# interfaces for definitions
using <code>proto2</code> syntax starting from release 3.10. Refer to the
<a href=/programming-guides/proto>proto2 language guide</a> for details of the
semantics of <code>proto2</code> definitions, and see <code>docs/csharp/proto2.md</code>
(<a href=https://github.com/protocolbuffers/protobuf/blob/master/docs/csharp/proto2.md>view on GitHub</a>)
for details on the generated C# code for proto2.</div><h2 id=invocation>Compiler Invocation</h2><p>The protocol buffer compiler produces C# output when invoked with the
<code>--csharp_out</code> command-line flag. The parameter to the <code>--csharp_out</code> option is
the directory where you want the compiler to write your C# output, although
depending on <a href=#compiler_options>other options</a> the compiler may create
subdirectories of the specified directory. The compiler creates a single source
file for each <code>.proto</code> file input, defaulting to an extension of <code>.cs</code> but
configurable via compiler options.</p><p>Only <code>proto3</code> messages are supported by the C# code generator. Ensure that each
<code>.proto</code> file begins with a declaration of:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>syntax</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;proto3&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h3 id=compiler_options>C#-specific Options</h3><p>You can provide further C# options to the protocol buffer compiler using the
<code>--csharp_opt</code> command-line flag. The supported options are:</p><ul><li><p><strong>file_extension</strong>: Sets the file extension for generated code. This
defaults to <code>.cs</code>, but a common alternative is <code>.g.cs</code> to indicate that the
file contains generated code.</p></li><li><p><strong>base_namespace</strong>: When this option is specified, the generator creates a
directory hierarchy for generated source code corresponding to the
namespaces of the generated classes, using the value of the option to
indicate which part of the namespace should be considered as the "base"
for the output directory. For example, with the following command-line:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>bar --csharp_out<span style=color:#ce5c00;font-weight:700>=</span>src --csharp_opt<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>base_namespace</span><span style=color:#ce5c00;font-weight:700>=</span>Example player.proto
</span></span></code></pre></div><p>where <code>player.proto</code> has a <code>csharp_namespace</code> option of <code>Example.Game</code> the
protocol buffer compiler generates a file <code>src/Game/Player.cs</code> being
created. This option would usually correspond with the <strong>default namespace</strong>
option in a C# project in Visual Studio. If the option is specified but
with an empty value, the full C# namespace as used in the generated file
will be used for the directory hierarchy. If the option is not specified at
all, the generated files are simply written into the directory specified by
<code>--csharp_out</code> without any hierarchy being created.</p></li><li><p><strong>internal_access</strong>: When this option is specified, the generator creates
types with the <code>internal</code> access modifier instead of <code>public</code>.</p></li><li><p><strong>serializable</strong>: When this option is specified, the generator adds the
<code>[Serializable]</code> attribute to generated message classes.</p></li></ul><p>Multiple options can be specified by separating them with commas, as in the
following example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --csharp_out<span style=color:#ce5c00;font-weight:700>=</span>build/gen --csharp_opt<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>file_extension</span><span style=color:#ce5c00;font-weight:700>=</span>.g.cs,base_namespace<span style=color:#ce5c00;font-weight:700>=</span>Example,internal_access src/foo.proto
</span></span></code></pre></div><h2 id=structure>File structure</h2><p>The name of the output file is derived from the <code>.proto</code> filename by converting
it to Pascal-case, treating underscores as word separators. So, for example, a
file called <code>player_record.proto</code> will result in an output file called
<code>PlayerRecord.cs</code> (where the file extension can be specified using
<code>--csharp_opt</code>, <a href=#compiler_options>as shown above</a>).</p><p>Each generated file takes the following form, in terms of public members. (The
implementation is not shown here.)</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#204a87;font-weight:700>namespace</span> <span style=color:#a40000>[</span><span style=color:#000>...</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>partial</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000;font-weight:700>[...</span> <span style=color:#000>descriptor</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>name</span> <span style=color:#000;font-weight:700>...]</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#000>FileDescriptor</span> <span style=color:#000>Descriptor</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>
</span></span></span><span style=display:flex><span><span style=color:#c4a000>  [... Enums ...]</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>  [... Message classes ...]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The <code>namespace</code> is inferred from the proto&rsquo;s <code>package</code>, using the same
conversion rules as the file name. For example, a proto package of
<code>example.high_score</code> would result in a namespace of <code>Example.HighScore</code>. You can
override the default generated namespace for a particular .proto using the
<code>csharp_namespace</code> <a href=/programming-guides/proto3#options>file option</a>.</p><p>Each top-level enum and message results in an enum or class being declared as
members of the namespace. Additionally, a single static partial class is always
generated for the file descriptor. This is used for reflection-based operations.
The descriptor class is given the same name as the file, without the extension.
However, if there is a message with the same name (as is quite common), the
descriptor class is placed in a nested <code>Proto</code> namespace to avoid colliding with
the message.</p><p>As an example of all of these rules, consider the <code>timestamp.proto</code> file which
is provided as part of Protocol Buffers. A cut down version of <code>timestamp.proto</code>
looks like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>syntax</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;proto3&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>protobuf</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>csharp_namespace</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Google.Protobuf.WellKnownTypes&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Timestamp</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#ce5c00;font-weight:700>...</span> <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The generated <code>Timestamp.cs</code> file has the following structure:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#204a87;font-weight:700>namespace</span> <span style=color:#000>Google.Protobuf.WellKnownTypes</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>namespace</span> <span style=color:#000>Proto</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>partial</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Timestamp</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#000>FileDescriptor</span> <span style=color:#000>Descriptor</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>sealed</span> <span style=color:#204a87;font-weight:700>partial</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Timestamp</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#000>IMessage</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>Timestamp</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>    [...]</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=message>Messages</h2><p>Given a simple message declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates a sealed, partial class called <code>Foo</code>,
which implements the <code>IMessage&lt;Foo></code> interface, as shown below with member
declarations. See the inline comments for more information.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>sealed</span> <span style=color:#204a87;font-weight:700>partial</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#000>IMessage</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>Foo</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Static properties for parsing and reflection</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#000>MessageParser</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>Foo</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>Parser</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#000>MessageDescriptor</span> <span style=color:#000>Descriptor</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Explicit implementation of IMessage.Descriptor, to avoid conflicting with</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// the static Descriptor property. Typically the static property is used when</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// referring to a type known at compile time, and the instance property is used</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// when referring to an arbitrary message, such as during JSON serialization.</span>
</span></span><span style=display:flex><span>  <span style=color:#000>MessageDescriptor</span> <span style=color:#000>IMessage</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Descriptor</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Parameterless constructor which calls the OnConstruction partial method if provided.</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Deep-cloning constructor</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Partial method which can be implemented in manually-written code for the same class, to provide</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// a hook for code which should be run whenever an instance is constructed.</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>partial</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>OnConstruction</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Implementation of IDeepCloneable&lt;T&gt;.Clone(); creates a deep clone of this message.</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Foo</span> <span style=color:#000>Clone</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Standard equality handling; note that IMessage&lt;T&gt; extends IEquatable&lt;T&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>override</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>Equals</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>object</span> <span style=color:#000>other</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>Equals</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo</span> <span style=color:#000>other</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>override</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>GetHashCode</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Converts the message to a JSON representation</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>override</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>ToString</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Serializes the message to the protobuf binary format</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>WriteTo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>CodedOutputStream</span> <span style=color:#000>output</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Calculates the size of the message in protobuf binary format</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>CalculateSize</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Merges the contents of the given message into this one. Typically</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// used by generated code and message parsers.</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>MergeFrom</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo</span> <span style=color:#000>other</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Merges the contents of the given protobuf binary format stream</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// into this message. Typically used by generated code and message parsers.</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>MergeFrom</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>CodedInputStream</span> <span style=color:#000>input</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Note that all of these members are always present; the <code>optimize_for</code> option
does not affect the output of the C# code generator.</p><h3 id=nested-types>Nested Types</h3><p>A message can be declared inside another message. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case—or if a message contains a nested enum—the compiler
generates a nested <code>Types</code> class, and then a <code>Bar</code> class within the <code>Types</code>
class, so the full generated code would be:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#204a87;font-weight:700>namespace</span> <span style=color:#a40000>[</span><span style=color:#000>...</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>sealed</span> <span style=color:#204a87;font-weight:700>partial</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#000>IMessage</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>Foo</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>partial</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Types</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>sealed</span> <span style=color:#204a87;font-weight:700>partial</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#000>IMessage</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>Bar</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>...</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Although the intermediate <code>Types</code> class is inconvenient, it is required to deal
with the common scenario of a nested type having a corresponding field in the
message. You would otherwise end up with both a property and a type with the
same name nested within the same class—and that would be invalid C#.</p><h2 id=fields>Fields</h2><p>The protocol buffer compiler generates a C# property for each field defined
within a message. The exact nature of the property depends on the nature of the
field: its type, and whether it is singular, repeated, or a map field.</p><h3 id=singular>Singular Fields</h3><p>Any singular field generates a read/write property. A <code>string</code> or <code>bytes</code> field
will generate an <code>ArgumentNullException</code> if a null value is specified; fetching
a value from a field which hasn&rsquo;t been explicitly set will return an empty
string or <code>ByteString</code>. Message fields can be set to null values, which is
effectively clearing the field. This is not equivalent to setting the value to
an "empty" instance of the message type.</p><h3 id=repeated>Repeated Fields</h3><p>Each repeated field generates a read-only property of type
<code>Google.Protobuf.Collections.RepeatedField&lt;T></code> where <code>T</code> is the field&rsquo;s element
type. For the most part, this acts like <code>List&lt;T></code>, but it has an additional
<code>Add</code> overload to allow a collection of items to be added in one go. This is
convenient when populating a repeated field in an object initializer.
Additionally, <code>RepeatedField&lt;T></code> has direct support for serialization,
deserialization and cloning, but this is usually used by generated code instead
of manually-written application code.</p><p>Repeated fields cannot contain null values, even of message types, except for
the nullable wrapper types <a href=#wrapper_types>explained below</a>.</p><h3 id=map>Map Fields</h3><p>Each map field generates a read-only property of type
<code>Google.Protobuf.Collections.MapField&lt;TKey, TValue></code> where <code>TKey</code> is the field&rsquo;s
key type and <code>TValue</code> is the field&rsquo;s value type. For the most part, this acts
like <code>Dictionary&lt;TKey, TValue></code>, but it has an additional <code>Add</code> overload to
allow another dictionary to be added in one go. This is convenient when
populating a repeated field in an object initializer. Additionally,
<code>MapField&lt;TKey, TValue></code> has direct support for serialization, deserialization
and cloning, but this is usually used by generated code instead of
manually-written application code. Keys in the map are not permitted to be null;
values may be if the corresponding singular field type would support null
values.</p><h3 id=oneof>Oneof Fields</h3><p>Each field within a oneof has a separate property, like a regular
<a href=#singular>singular field</a>. However, the compiler also generates an additional
property to determine which field in the enum has been set, along with an enum
and a method to clear the oneof. For example, for this oneof field definition</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>avatar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>image_url</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>image_data</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate these public members:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>AvatarOneofCase</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>None</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>ImageUrl</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>ImageData</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>AvatarOneofCase</span> <span style=color:#000>AvatarCase</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>ClearAvatar</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>ImageUrl</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>ByteString</span> <span style=color:#000>ImageData</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>If a property is the current oneof "case", fetching that property will return
the value set for that property. Otherwise, fetching the property will return
the default value for the property&rsquo;s type—only one member of a oneof can
be set at a time.</p><p>Setting any constituent property of the oneof will change the reported "case"
of the oneof. As with a regular <a href=#singular>singular field</a>, you cannot set a
oneof field with a <code>string</code> or <code>bytes</code> type to a null value. Setting a
message-type field to null is equivalent to calling the oneof-specific <code>Clear</code>
method.</p><h3 id=wrapper_types>Wrapper Type Fields</h3><p>Most of the well-known types in proto3 do not affect code generation, but the
wrapper types (<code>StringWrapper</code>, <code>Int32Wrapper</code> etc) change the type and
behaviour of the properties.</p><p>All of the wrapper types that correspond to C# value types (<code>Int32Wrapper</code>,
<code>DoubleWrapper</code>, <code>BoolWrapper</code> etc) are mapped to <code>Nullable&lt;T></code> where <code>T</code> is the
corresponding non-nullable type. For example, a field of type <code>DoubleValue</code>
results in a C# property of type <code>Nullable&lt;double></code>.</p><p>Fields of type <code>StringWrapper</code> or <code>BytesWrapper</code> result in C# properties of
type <code>string</code> and <code>ByteString</code> being generated, but with a default value of
null, and allowing null to be set as the property value.</p><p>For all wrapper types, null values are not permitted in a repeated field, but
are permitted as the values for map entries.</p><h2 id=enum>Enumerations</h2><p>Given an enumeration definition like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Color</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>COLOR_RED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>COLOR_GREEN</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>COLOR_BLUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1234</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate a C# enum type called <code>Color</code> with
the same set of values. The names of the enum values are converted to make them
more idiomatic for C# developers:</p><ul><li>If the original name starts with the upper-cased form of the enum name
itself, that is removed</li><li>The result is converted into Pascal case</li></ul><p>The <code>Color</code> proto enum above would therefore become the following C# code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Color</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Red</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Green</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Blue</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1234</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>This name transformation does not affect the text used within the JSON
representation of messages.</p><p>Note that the <code>.proto</code> language allows multiple enum symbols to have the same
numeric value. Symbols with the same numeric value are synonyms. These are
represented in C# in exactly the same way, with multiple names corresponding to
the same numeric value.</p><p>A non-nested enumeration leads to a C# enum being generated as a new namespace
member being generated; a nested enumeration lead to a C# enum being generated
in the <code>Types</code> nested class within the class corresponding to the message the
enumeration is nested within.</p><h2 id=service>Services</h2><p>The C# code generator ignores services entirely.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-f651149312c1749a238715390c4834e9>2.2 - C# API</h1></div><div class=td-content style=page-break-before:always><h1 id=pg-0ed9f2faef052ba56730badb55cf352f>3 - Dart Reference</h1><div class=lead>This section contains reference documentation for working with protocol buffer classes in Dart</div><ul><li><a href=/reference/dart/dart-generated>Dart Generated Code Guide</a></li><li><a href=https://pub.dev/documentation/protobuf/latest/>Dart API</a></li></ul></div><div class=td-content><h1 id=pg-e6bfe6333c6007301c9f517aea826e86>3.1 - Dart Generated Code Guide</h1><div class=lead>This topic describes what Dart code the protocol buffer compiler generates for any given protocol definition.</div><p>This page describes what Dart code the protocol buffer compiler generates for
any given protocol definition. Any differences between proto2 and proto3
generated code are highlighted - note that these differences are in the
generated code as described in this document, not the base API, which are the
same in both versions. You should read the
<a href=/programming-guides/proto>proto2 language guide</a> and/or the
<a href=/programming-guides/proto3>proto3 language guide</a> before reading this
document.</p><h2 id=invocation>Compiler Invocation</h2><p>The protocol buffer compiler requires a
<a href=https://github.com/dart-lang/dart-protoc-plugin>plugin to generate Dart</a> code.
Installing it following the
<a href=https://github.com/dart-lang/dart-protoc-plugin#how-to-build-and-use>instructions</a>
provides a <code>protoc-gen-dart</code> binary which <code>protoc</code> uses when invoked with the
<code>--dart_out</code> command-line flag. The <code>--dart_out</code> flag tells the compiler where
to write the Dart source files. For a <code>.proto</code> file input, the compiler produces
among others a <code>.pb.dart</code> file.</p><p>The name of the <code>.pb.dart</code> file is computed by taking the name of the <code>.proto</code>
file and making two changes:</p><ul><li>The extension (<code>.proto</code>) is replaced with <code>.pb.dart</code>. For example, a file
called <code>foo.proto</code> results in an output file called <code>foo.pb.dart</code>.</li><li>The proto path (specified with the <code>--proto_path</code> or <code>-I</code> command-line flag)
is replaced with the output path (specified with the <code>--dart_out</code> flag).</li></ul><p>For example, when you invoke the compiler as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --dart_out<span style=color:#ce5c00;font-weight:700>=</span>build/gen src/foo.proto src/bar/baz.proto
</span></span></code></pre></div><p>the compiler will read the files <code>src/foo.proto</code> and <code>src/bar/baz.proto</code>. It
produces: <code>build/gen/foo.pb.dart</code> and <code>build/gen/bar/baz.pb.dart</code>. The compiler
automatically creates the directory <code>build/gen/bar</code> if necessary, but it will
<em>not</em> create <code>build</code> or <code>build/gen</code>; they must already exist.</p><h2 id=message>Messages</h2><p>Given a simple message declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates a class called <code>Foo</code>, which extends the
class <code>GeneratedMessage</code>.</p><p>The class <code>GeneratedMessage</code> defines methods that let you check, manipulate,
read, or write the entire message. In addition to these methods, the <code>Foo</code> class
defines the following methods and constructors:</p><ul><li><code>Foo()</code>: Default constructor. Creates an instance where all singular fields
are unset and repeated fields are empty.</li><li><code>Foo.fromBuffer(...)</code>: Creates a <code>Foo</code> from serialized protocol buffer data
representing the message.</li><li><code>Foo.fromJson(...)</code>: Creates a <code>Foo</code> from a JSON string encoding the
message.</li><li><code>Foo clone()</code>: Creates a deep clone of the fields in the message.</li><li><code>Foo copyWith(void Function(Foo) updates)</code>: Makes a writable copy of this
message, applies the <code>updates</code> to it, and marks the copy read-only before
returning it.</li><li><code>static Foo create()</code>: Factory function to create a single <code>Foo</code>.</li><li><code>static PbList&lt;Foo> createRepeated()</code>: Factory function to create a List
implementing a mutable repeated field of <code>Foo</code> elements.</li><li><code>static Foo getDefault()</code>: Returns a singleton instance of <code>Foo</code>, which is
identical to a newly-constructed instance of Foo (so all singular fields are
unset and all repeated fields are empty).</li></ul><h3 id=nested-types>Nested Types</h3><p>A message can be declared inside another message. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, the compiler generates two classes: <code>Foo</code> and <code>Foo_Bar</code>.</p><h2 id=fields>Fields</h2><p>In addition to the methods described in the previous section, the protocol
buffer compiler generates accessor methods for each field defined within the
message in the <code>.proto</code> file.</p><p>Note that the generated names always use camel-case naming, even if the field
name in the <code>.proto</code> file uses lower-case with underscores
(<a href=/programming-guides/style>as it should</a>). The case-conversion works
as follows:</p><ol><li>For each underscore in the name, the underscore is removed, and the
following letter is capitalized.</li><li>If the name will have a prefix attached (e.g. "has"), the first letter is
capitalized. Otherwise, it is lower-cased.</li></ol><p>Thus, for the field <code>foo_bar_baz</code>, the getter becomes <code>get fooBarBaz</code> and a
method prefixed with <code>has</code> would be <code>hasFooBarBaz</code>.</p><h3 id=singular-primitive-fields-proto2>Singular Primitive Fields (proto2)</h3><p>For any of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods in the message class:</p><ul><li><code>int get foo</code>: Returns the current value of the field. If the field is not
set, returns the default value.</li><li><code>bool hasFoo()</code>: Returns <code>true</code> if the field is set.</li><li><code>set foo(int value)</code>: Sets the value of the field. After calling this,
<code>hasFoo()</code> will return <code>true</code> and <code>get foo</code> will return <code>value</code>.</li><li><code>void clearFoo()</code>: Clears the value of the field. After calling this,
<code>hasFoo()</code> will return <code>false</code> and <code>get foo</code> will return the default value.</li></ul><p>For other simple field types, the corresponding Dart type is chosen according to
the <a href=/programming-guides/proto#scalar>scalar value types table</a>.
For message and enum types, the value type is replaced with the message or enum
class.</p><h3 id=singular-primitive-fields-proto3>Singular Primitive Fields (proto3)</h3><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods in the message class:</p><ul><li><code>int get foo</code>: Returns the current value of the field. If the field is not
set, returns the default value.</li><li><code>set foo(int value)</code>: Sets the value of the field. After calling this, <code>get foo</code> will return <code>value</code>.</li><li><code>void clearFoo()</code>: Clears the value of the field. After calling this,<code>get foo</code> will return the default value.</li></ul><h3 id=singular-message>Singular Message Fields</h3><p>Given the message type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For a message with a <code>Bar</code> field:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// proto2
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#8f5902;font-style:italic>// The generated code is the same result if required instead of optional.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902;font-style:italic>// proto3
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>Bar</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods in the message class:</p><ul><li><code>Bar get bar</code>: Returns the current value of the field. If the field is not
set, returns the default value.</li><li><code>set bar(Bar value)</code>: Sets the value of the field. After calling this,
<code>hasBar()</code> will return <code>true</code> and <code>get bar</code> will return <code>value</code>.</li><li><code>bool hasBar()</code>: Returns <code>true</code> if the field is set.</li><li><code>void clearBar()</code>: Clears the value of the field. After calling this,
<code>hasBar()</code> will return <code>false</code> and <code>get bar</code> will return the default value.</li><li><code>Bar ensureBar()</code>: Sets <code>bar</code> to the empty instance if <code>hasBar()</code> returns
<code>false</code>, and then returns the value of <code>bar</code>. After calling this, <code>hasBar()</code>
will return <code>true</code>.</li></ul><h3 id=repeated-fields>Repeated Fields</h3><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate:</p><ul><li><code>List&lt;int> get foo</code>: Returns the list backing the field. If the field is not
set, returns an empty list. Modifications to the list are reflected in the
field.</li></ul><h3 id=int64-fields>Int64 Fields</h3><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// proto2
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int64</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902;font-style:italic>// proto3
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>int64</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate:</p><ul><li><code>Int64 get bar</code>: Returns an <code>Int64</code> object containing the field value.</li></ul><p>Note that <code>Int64</code> is not built into the Dart core libraries. To work with these
objects, you may need to import the Dart <code>fixnum</code> library:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#4e9a06>&#39;package:fixnum/fixnum.dart&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><h3 id=map-fields>Map Fields</h3><p>Given a <a href=/programming-guides/proto3#maps><code>map</code></a> field definition like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>map_field</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following getter:</p><ul><li><code>Map&lt;int, int> get mapField</code>: Returns the Dart map backing the field. If the
field is not set, returns an empty map. Modifications to the map are
reflected in the field.</li></ul><h2 id=any>Any</h2><p>Given an <a href=/programming-guides/proto3#any><code>Any</code></a> field like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#4e9a06>&#34;google/protobuf/any.proto&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>ErrorStatus</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#204a87;font-weight:700>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>google.protobuf.Any</span> <span style=color:#000>details</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In our generated code, the getter for the <code>details</code> field returns an instance of
<code>com.google.protobuf.Any</code>. This provides the following special methods to pack
and unpack the <code>Any</code>&rsquo;s values:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>/// Unpacks the message in [value] into [instance].
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>///
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>/// Throws a [InvalidProtocolBufferException] if [typeUrl] does not correspond
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>/// to the type of [instance].
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>///
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>/// A typical usage would be `any.unpackInto(new Message())`.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>///
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>/// Returns [instance].
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>T</span> <span style=color:#000>unpackInto</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>T</span> <span style=color:#204a87;font-weight:700>extends</span> <span style=color:#000>GeneratedMessage</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>T</span> <span style=color:#000>instance</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span><span style=color:#000>ExtensionRegistry</span> <span style=color:#000>extensionRegistry</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>ExtensionRegistry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>EMPTY</span><span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>/// Returns `true` if the encoded message matches the type of [instance].
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>///
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>/// Can be used with a default instance:
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>/// `any.canUnpackInto(Message.getDefault())`
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>canUnpackInto</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GeneratedMessage</span> <span style=color:#000>instance</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>/// Creates a new [Any] encoding [message].
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>///
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>/// The [typeUrl] will be [typeUrlPrefix]/`fullName` where `fullName` is
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>/// the fully qualified name of the type of [message].
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>static</span> <span style=color:#000>Any</span> <span style=color:#000>pack</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GeneratedMessage</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span><span style=color:#204a87;font-weight:700>String</span> <span style=color:#000>typeUrlPrefix</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;type.googleapis.com&#39;</span><span style=color:#000;font-weight:700>});</span>
</span></span></code></pre></div><h2 id=oneof>Oneof</h2><p>Given a <a href=/programming-guides/proto3#oneof><code>oneof</code></a> definition like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>test</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>SubMessage</span> <span style=color:#000>sub_message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following Dart enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span> <span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Foo_Test</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>subMessage</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>notSet</span> <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In addition, it will generate these methods:</p><ul><li><code>Foo_Test whichTest()</code>: Returns the enum indicating which field is set.
Returns <code>Foo_Test.notSet</code> if none of them is set.</li><li><code>void clearTest()</code>: Clears the value of the oneof field which is currently
set (if any), and sets the oneof case to <code>Foo_Test.notSet</code>.</li></ul><p>For each field inside the oneof definition the regular field accessor methods
are generated. For instance for <code>name</code>:</p><ul><li><code>String get name</code>: Returns the current value of the field if the oneof case
is <code>Foo_Test.name</code>. Otherwise, returns the default value.</li><li><code>set name(String value)</code>: Sets the value of the field and sets the oneof
case to <code>Foo_Test.name</code>. After calling this, <code>get name</code> will return <code>value</code>
and <code>whichTest()</code> will return <code>Foo_Test.name</code>.</li><li><code>void clearName()</code>: Nothing will be changed if the oneof case is not
<code>Foo_Test.name</code>. Otherwise, clears the value of the field. After calling
this, <code>get name</code> will return the default value and <code>whichTest()</code> will return
<code>Foo_Test.notSet</code>.</li></ul><h2 id=enum>Enumerations</h2><p>Given an enum definition like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Color</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>RED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>GREEN</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BLUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate a class called <code>Color</code>, which extends
the <code>ProtobufEnum</code> class. The class will include a <code>static const Color</code> for each
of the three values defined as well as a <code>static const List&lt;Color></code> containing
all the three values. It will also include the following method:</p><ul><li><code>static Color valueOf(int value)</code>: Returns the <code>Color</code> corresponding to the
given numeric value.</li></ul><p>Each value will have the following properties:</p><ul><li><code>name</code>: The enum&rsquo;s name, as specified in the .proto file.</li><li><code>value</code>: The enum&rsquo;s integer value, as specified in the .proto file.</li></ul><p>Note that the <code>.proto</code> language allows multiple enum symbols to have the same
numeric value. Symbols with the same numeric value are synonyms. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAZ</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, <code>BAZ</code> is a synonym for <code>BAR</code> and will be defined like so:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Foo</span> <span style=color:#000>BAZ</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>BAR</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p>An enum can be defined nested within a message type. For instance, given an enum
definition like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Color</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>RED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>GREEN</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>BLUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate a class called <code>Bar</code>, which extends
<code>GeneratedMessage</code>, and a class called <code>Bar_Color</code>, which extends
<code>ProtobufEnum</code>.</p><h2 id=extension>Extensions (proto2 only)</h2><p>Given a file <code>foo_test.proto</code> including a message with an
<a href=/programming-guides/proto#extensions>extension range</a> and a top-level
extension definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extensions</span> <span style=color:#0000cf;font-weight:700>100</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#0000cf;font-weight:700>199</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>101</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate, in addition to the <code>Foo</code> class, a
class <code>Foo_test</code> which will contain a <code>static Extension</code> for each extension
field in the file along with a method for registering all the exensions in an
<code>ExtensionRegistry</code> :</p><ul><li><code>static final Extension bar</code></li><li><code>static void registerAllExtensions(ExtensionRegistry registry)</code> : Registers
all the defined extensions in the given registry.</li></ul><p>The extension accessors of <code>Foo</code> can be used as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo_test</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>hasExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo_test</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo_test</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>))</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>Extensions can also be declared nested inside of another message:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>124</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, the extension <code>bar</code> is instead declared as a static member of the
<code>Baz</code> class.</p><p>When parsing a message that might have extensions, you must provide an
<code>ExtensionRegistry</code> in which you have registered any extensions that you want to
be able to parse. Otherwise, those extensions will just be treated like unknown
fields. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#000>ExtensionRegistry</span> <span style=color:#000>registry</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>ExtensionRegistry</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>registry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Baz</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>fromBuffer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>input</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>registry</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>If you already have a parsed message with unknown fields, you can use
<code>reparseMessage</code> on an <code>ExtensionRegistry</code> to reparse the message. If the set of
unknown fields contains extensions that are present in the registry, these
extensions are parsed and removed from the unknown field set. Extensions already
present in the message are preserved.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dart data-lang=dart><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>fromBuffer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>input</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>ExtensionRegistry</span> <span style=color:#000>registry</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>ExtensionRegistry</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>registry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Baz</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>reparsed</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>registry</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>reparseMessage</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>Be aware that this method to retrieve extensions is more expensive overall.
Where possible we recommend using <code>ExtensionRegistry</code> with all the needed
extensions when doing <code>GeneratedMessage.fromBuffer</code>.</p><h2 id=service>Services</h2><p>Given a service definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>service</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FooRequest</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FooResponse</span><span style=color:#000;font-weight:700>);</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler can be invoked with the `grpc` option (e.g.
<code>--dart_out=grpc:output_folder</code>), in which case it will generate code to support
<a href=//www.grpc.io/>gRPC</a>. See the
<a href=https://grpc.io/docs/quickstart/dart.html>gRPC Dart Quickstart guide</a>
for more details.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-a0939a1d7ee066dcccbd0b90ecc803a5>3.2 - Dart API</h1></div><div class=td-content style=page-break-before:always><h1 id=pg-58efac6e9f71f7b1059f42b772bc0ed9>4 - Go Reference</h1><div class=lead>This section contains reference documentation for working with protocol buffer classes in Go</div><ul><li><p><a href=/reference/go/go-generated>Go Generated Code Guide</a></p></li><li><p><a href=https://pkg.go.dev/google.golang.org/protobuf/proto>Go API (godoc)</a></p></li><li><p><a href=/reference/go/faq>Go FAQ</a></p></li></ul></div><div class=td-content><h1 id=pg-6bcd6bf4ea08bfaf106c75c33f1776ba>4.1 - Go Generated Code Guide</h1><div class=lead>This topic describes exactly what Go code the protocol buffer compiler generates for any given protocol definition.</div><p>This page describes exactly what Go code the protocol buffer compiler generates
for any given protocol definition. Any differences between proto2 and proto3
generated code are highlighted - note that these differences are in the
generated code as described in this document, not the base API, which are the
same in both versions. You should read the
<a href=/programming-guides/proto>proto2 language guide</a> and/or the
<a href=/programming-guides/proto3>proto3 language guide</a> before reading this
document.</p><h2 id=invocation>Compiler Invocation</h2><p>The protocol buffer compiler requires a plugin to generate Go code. Install it
using Go 1.16 or higher by running:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>go install google.golang.org/protobuf/cmd/protoc-gen-go@latest
</span></span></code></pre></div><p>This will install a <code>protoc-gen-go</code> binary in <code>$GOBIN</code>. Set the <code>$GOBIN</code>
environment variable to change the installation location. It must be in your
<code>$PATH</code> for the protocol buffer compiler to find it.</p><p>The protocol buffer compiler produces Go output when invoked with the <code>go_out</code>
flag. The argument to the <code>go_out</code> flag is the directory where you want the
compiler to write your Go output. The compiler creates a single source file for
each <code>.proto</code> file input. The name of the output file is created by replacing
the <code>.proto</code> extension with <code>.pb.go</code>.</p><p>Where in the output directory the generated <code>.pb.go</code> file is placed depends on
the compiler flags. There are several output modes:</p><ul><li>If the <code>paths=import</code> flag is specified, the output file is placed in a
directory named after the Go package&rsquo;s import path. For example, an input
file <code>protos/buzz.proto</code> with a Go import path of
<code>example.com/project/protos/fizz</code> results in an output file at
<code>example.com/project/protos/fizz/buzz.pb.go</code>. This is the default output
mode if a <code>paths</code> flag is not specified.</li><li>If the <code>module=$PREFIX</code> flag is specified, the output file is placed in a
directory named after the Go package&rsquo;s import path, but with the specified
directory prefix removed from the output filename. For example, an input
file <code>protos/buzz.proto</code> with a Go import path of
<code>example.com/project/protos/fizz</code> and <code>example.com/project</code> specified as the
<code>module</code> prefix results in an output file at <code>protos/fizz/buzz.pb.go</code>.
Generating any Go packages outside the module path results in an error. This
mode is useful for outputting generated files directly into a Go module.</li><li>If the <code>paths=source_relative</code> flag is specified, the output file is placed
in the same relative directory as the input file. For example, an input file
<code>protos/buzz.proto</code> results in an output file at <code>protos/buzz.pb.go</code>.</li></ul><p>Flags specific to <code>protoc-gen-go</code> are provided by passing a <code>go_opt</code> flag when
invoking <code>protoc</code>. Multiple <code>go_opt</code> flags may be passed. For example, when
running:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --go_out<span style=color:#ce5c00;font-weight:700>=</span>out --go_opt<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>paths</span><span style=color:#ce5c00;font-weight:700>=</span>source_relative foo.proto bar/baz.proto
</span></span></code></pre></div><p>the compiler will read input files <code>foo.proto</code> and <code>bar/baz.proto</code> from within
the <code>src</code> directory, and write output files <code>foo.pb.go</code> and <code>bar/baz.pb.go</code> to
the <code>out</code> directory. The compiler automatically creates nested output
sub-directories if necessary, but will not create the output directory itself.</p><h2 id=package>Packages</h2><p>In order to generate Go code, the Go package&rsquo;s import path must be provided for
every <code>.proto</code> file (including those transitively depended upon by the <code>.proto</code>
files being generated). There are two ways to specify the Go import path:</p><ul><li>by declaring it within the <code>.proto</code> file, or</li><li>by declaring it on the command line when invoking <code>protoc</code>.</li></ul><p>We recommend declaring it within the <code>.proto</code> file so that the Go packages for
<code>.proto</code> files can be centrally identified with the <code>.proto</code> files themselves
and to simplify the set of flags passed when invoking <code>protoc</code>. If the Go import
path for a given <code>.proto</code> file is provided by both the <code>.proto</code> file itself and
on the command line, then the latter takes precedence over the former.</p><p>The Go import path is locally specified in a <code>.proto</code> file by declaring a
<code>go_package</code> option with the full import path of the Go package. Example usage:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>go_package</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;example.com/project/protos/fizz&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The Go import path may be specified on the command line when invoking the
compiler, by passing one or more <code>M${PROTO_FILE}=${GO_IMPORT_PATH}</code> flags.
Example usage:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --go_opt<span style=color:#ce5c00;font-weight:700>=</span>Mprotos/buzz.proto<span style=color:#ce5c00;font-weight:700>=</span>example.com/project/protos/fizz <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --go_opt<span style=color:#ce5c00;font-weight:700>=</span>Mprotos/bar.proto<span style=color:#ce5c00;font-weight:700>=</span>example.com/project/protos/foo <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  protos/buzz.proto protos/bar.proto
</span></span></code></pre></div><p>Since the mapping of all <code>.proto</code> files to their Go import paths can be quite
large, this mode of specifying the Go import paths is generally performed by
some build tool (e.g., <a href=https://bazel.build/>Bazel</a>) that has
control over the entire dependency tree. If there are duplicate entries for a
given <code>.proto</code> file, then the last one specified takes precedence.</p><p>For both the <code>go_package</code> option and the <code>M</code> flag, the value may include an
explicit package name separated from the import path by a semicolon. For
example: <code>"example.com/protos/foo;package_name"</code>. This usage is discouraged
since the package name will be derived by default from the import path in a
reasonable manner.</p><p>The import path is used to determine which import statements must be generated
when one <code>.proto</code> file imports another <code>.proto</code> file. For example, if <code>a.proto</code>
imports <code>b.proto</code>, then the generated <code>a.pb.go</code> file needs to import the Go
package which contains the generated <code>b.pb.go</code> file (unless both files are in
the same package). The import path is also used to construct output filenames.
See the "Compiler Invocation" section above for details.</p><p>There is no correlation between the Go import path and the
<a href=/programming-guides/proto3#packages><code>package</code> specifier</a> in the <code>.proto</code>
file. The latter is only relevant to the protobuf namespace, while the former is
only relevant to the Go namespace. Also, there is no correlation between the Go
import path and the <code>.proto</code> import path.</p><h2 id=message>Messages</h2><p>Given a simple message declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>the protocol buffer compiler generates a struct called <code>Foo</code>. A <code>*Foo</code>
implements the
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc#Message"><code>proto.Message</code></a>
interface.</p><p>The
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc"><code>proto</code> package</a>
provides functions which operate on messages, including conversion to and from
binary format.</p><p>The <code>proto.Message</code> interface defines a <code>ProtoReflect</code> method. This method
returns a
<a href="https://pkg.go.dev/google.golang.org/protobuf/reflect/protoreflect?tab=doc#Message"><code>protoreflect.Message</code></a>
which provides a reflection-based view of the message.</p><p>The <code>optimize_for</code> option does not affect the output of the Go code generator.</p><h3 id=nested-types>Nested Types</h3><p>A message can be declared inside another message. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, the compiler generates two structs: <code>Foo</code> and <code>Foo_Bar</code>.</p><h2 id=fields>Fields</h2><p>The protocol buffer compiler generates a struct field for each field defined
within a message. The exact nature of this field depends on its type and whether
it is a singular, repeated, map, or oneof field.</p><p>Note that the generated Go field names always use camel-case naming, even if the
field name in the <code>.proto</code> file uses lower-case with underscores
(<a href=/programming-guides/style>as it should</a>). The case-conversion works as
follows:</p><ol><li>The first letter is capitalized for export. If the first character is an
underscore, it is removed and a capital X is prepended.</li><li>If an interior underscore is followed by a lower-case letter, the underscore
is removed, and the following letter is capitalized.</li></ol><p>Thus, the proto field <code>foo_bar_baz</code> becomes <code>FooBarBaz</code> in Go, and
<code>_my_field_name_2</code> becomes <code>XMyFieldName_2</code>.</p><h3 id=singular-scalar-proto2>Singular Scalar Fields (proto2)</h3><p>For either of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>the compiler generates a struct with an <code>*int32</code> field named <code>Foo</code> and an
accessor method <code>GetFoo()</code> which returns the <code>int32</code> value in <code>Foo</code> or the
default value if the field is unset. If the default is not explicitly set, the
<a href=https://golang.org/ref/spec#The_zero_value>zero value</a> of that type
is used instead (<code>0</code> for numbers, the empty string for strings).</p><p>For other scalar field types (including <code>bool</code>, <code>bytes</code>, and <code>string</code>), <code>*int32</code>
is replaced with the corresponding Go type according to the
<a href=/programming-guides/proto#scalar>scalar value types table</a>.</p><h3 id=singular-scalar-proto3>Singular Scalar Fields (proto3)</h3><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate a struct with an <code>int32</code> field named <code>Foo</code> and an
accessor method <code>GetFoo()</code> which returns the <code>int32</code> value in <code>Foo</code> or the
<a href=https://golang.org/ref/spec#The_zero_value>zero value</a> of that type
if the field is unset (<code>0</code> for numbers, the empty string for strings).</p><p>For other scalar field types (including <code>bool</code>, <code>bytes</code>, and <code>string</code>), <code>int32</code>
is replaced with the corresponding Go type according to the
<a href=/programming-guides/proto3#scalar>scalar value types table</a>. Unset values
in the proto will be represented as the
<a href=https://golang.org/ref/spec#The_zero_value>zero value</a> of that type
(<code>0</code> for numbers, the empty string for strings).</p><h3 id=singular-message>Singular Message Fields</h3><p>Given the message type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For a message with a <code>Bar</code> field:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// proto2
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#8f5902;font-style:italic>// The generated code is the same result if required instead of optional.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902;font-style:italic>// proto3
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate a Go struct</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Baz</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Foo</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Bar</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Message fields can be set to <code>nil</code>, which means that the field is unset,
effectively clearing the field. This is not equivalent to setting the value to
an "empty" instance of the message struct.</p><p>The compiler also generates a <code>func (m *Baz) GetFoo() *Bar</code> helper function.
This function returns a <code>nil</code> <code>*Bar</code> if <code>m</code> is nil or <code>foo</code> is unset. This makes
it possible to chain get calls without intermediate <code>nil</code> checks.</p><h3 id=repeated>Repeated Fields</h3><p>Each repeated field generates a slice of <code>T</code> field in the struct in Go, where
<code>T</code> is the field&rsquo;s element type. For this message with a repeated field:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>the compiler generates the Go struct:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Baz</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Foo</span>  <span style=color:#000;font-weight:700>[]</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Bar</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Likewise, for the field definition <code>repeated bytes foo = 1;</code> the compiler will
generate a Go struct with a <code>[][]byte</code> field named <code>Foo</code>. For a repeated
<a href=#enum>enumeration</a> <code>repeated MyEnum bar = 2;</code>, the compiler generates a struct
with a <code>[]MyEnum</code> field called <code>Bar</code>.</p><p>The following example shows how to set the field:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>baz</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>Baz</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Bar</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{},</span> <span style=color:#8f5902;font-style:italic>// First element.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000;font-weight:700>{},</span> <span style=color:#8f5902;font-style:italic>// Second element.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>To access the field, you can do the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>baz</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetFoo</span><span style=color:#000;font-weight:700>()</span> <span style=color:#8f5902;font-style:italic>// foo type is []*Bar.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>b1</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]</span> <span style=color:#8f5902;font-style:italic>// b1 type is *Bar, the first element in foo.
</span></span></span></code></pre></div><h3 id=map>Map Fields</h3><p>Each map field generates a field in the struct of type <code>map[TKey]TValue</code> where
<code>TKey</code> is the field&rsquo;s key type and <code>TValue</code> is the field&rsquo;s value type. For this
message with a map field:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>the compiler generates the Go struct:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Baz</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Foo</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Bar</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=oneof>Oneof Fields</h3><p>For a oneof field, the protobuf compiler generates a single field with an
interface type <code>isMessageName_MyField</code>. It also generates a struct for each of
the <a href=#singular-scalar-proto2>singular fields</a> within the oneof. These all
implement this <code>isMessageName_MyField</code> interface.</p><p>For this message with a oneof field:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>account</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Profile</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>avatar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>image_url</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>image_data</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>the compiler generates the structs:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Profile</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Types that are valid to be assigned to Avatar:
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>//  *Profile_ImageUrl
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>//  *Profile_ImageData
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>Avatar</span> <span style=color:#000>isProfile_Avatar</span> <span style=color:#4e9a06>`protobuf_oneof:&#34;avatar&#34;`</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Profile_ImageUrl</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>ImageUrl</span> <span style=color:#204a87;font-weight:700>string</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Profile_ImageData</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>ImageData</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>byte</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Both <code>*Profile_ImageUrl</code> and <code>*Profile_ImageData</code> implement <code>isProfile_Avatar</code>
by providing an empty <code>isProfile_Avatar()</code> method.</p><p>The following example shows how to set the field:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>p1</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>account</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Profile</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Avatar</span><span style=color:#000;font-weight:700>:</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>account</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Profile_ImageUrl</span><span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;http://example.com/image.png&#34;</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// imageData is []byte
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>imageData</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>getImageData</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>p2</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>account</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Profile</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Avatar</span><span style=color:#000;font-weight:700>:</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>account</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Profile_ImageData</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>imageData</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>To access the field, you can use a type switch on the value to handle the
different message types.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>switch</span> <span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>m</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Avatar</span><span style=color:#000;font-weight:700>.(</span><span style=color:#204a87;font-weight:700>type</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>case</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>account</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Profile_ImageUrl</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Load profile image based on URL
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>// using x.ImageUrl
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>case</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>account</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Profile_ImageData</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Load profile image based on bytes
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>// using x.ImageData
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>case</span> <span style=color:#204a87;font-weight:700>nil</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// The field is not set.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>default</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Profile.Avatar has unexpected type %T&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The compiler also generates get methods <code>func (m *Profile) GetImageUrl() string</code>
and <code>func (m *Profile) GetImageData() []byte</code>. Each get function returns the
value for that field or the zero value if it is not set.</p><h2 id=enum>Enumerations</h2><p>Given an enumeration like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>SearchRequest</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Corpus</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>UNIVERSAL</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>WEB</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>IMAGES</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>LOCAL</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>NEWS</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>PRODUCTS</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VIDEO</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>Corpus</span> <span style=color:#000>corpus</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>the protocol buffer compiler generates a type and a series of constants with
that type.</p><p>For enums within a message (like the one above), the type name begins with the
message name:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>SearchRequest_Corpus</span> <span style=color:#204a87;font-weight:700>int32</span>
</span></span></code></pre></div><p>For a package-level enum:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>DEFAULT_BAR</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_BELLS</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_B_CUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>the Go type name is unmodified from the proto enum name:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Foo</span> <span style=color:#204a87;font-weight:700>int32</span>
</span></span></code></pre></div><p>This type has a <code>String()</code> method that returns the name of a given value.</p><p>The <code>Enum()</code> method initializes freshly allocated memory with a given value and
returns the corresponding pointer:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Enum</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Foo</span>
</span></span></code></pre></div><p>The protocol buffer compiler generates a constant for each value in the enum.
For enums within a message, the constants begin with the enclosing message&rsquo;s
name:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>SearchRequest_UNIVERSAL</span> <span style=color:#000>SearchRequest_Corpus</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>    <span style=color:#000>SearchRequest_WEB</span>       <span style=color:#000>SearchRequest_Corpus</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span>    <span style=color:#000>SearchRequest_IMAGES</span>    <span style=color:#000>SearchRequest_Corpus</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span>
</span></span><span style=display:flex><span>    <span style=color:#000>SearchRequest_LOCAL</span>     <span style=color:#000>SearchRequest_Corpus</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span>
</span></span><span style=display:flex><span>    <span style=color:#000>SearchRequest_NEWS</span>      <span style=color:#000>SearchRequest_Corpus</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span>
</span></span><span style=display:flex><span>    <span style=color:#000>SearchRequest_PRODUCTS</span>  <span style=color:#000>SearchRequest_Corpus</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span>
</span></span><span style=display:flex><span>    <span style=color:#000>SearchRequest_VIDEO</span>     <span style=color:#000>SearchRequest_Corpus</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>6</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>For a package-level enum, the constants begin with the enum name instead:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Foo_DEFAULT_BAR</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Foo_BAR_BELLS</span>   <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Foo_BAR_B_CUE</span>   <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>The protobuf compiler also generates a map from integer values to the string
names and a map from the names to the values:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>Foo_name</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;DEFAULT_BAR&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;BAR_BELLS&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;BAR_B_CUE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>Foo_value</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;DEFAULT_BAR&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;BAR_BELLS&#34;</span><span style=color:#000;font-weight:700>:</span>   <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;BAR_B_CUE&#34;</span><span style=color:#000;font-weight:700>:</span>   <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Note that the <code>.proto</code> language allows multiple enum symbols to have the same
numeric value. Symbols with the same numeric value are synonyms. These are
represented in Go in exactly the same way, with multiple names corresponding to
the same numeric value. The reverse mapping contains a single entry for the
numeric value to the name which appears first in the .proto file.</p><h2 id=extensions>Extensions (proto2)</h2><p>Given an extension definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>123</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate a
<a href="https://pkg.go.dev/google.golang.org/protobuf/reflect/protoreflect?tab=doc#ExtensionType"><code>protoreflect.ExtensionType</code></a>
value named <code>E_Bar</code>. This value may be used with the
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc#GetExtension"><code>proto.GetExtension</code></a>,
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc#SetExtension"><code>proto.SetExtension</code></a>,
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc#HasExtension"><code>proto.HasExtension</code></a>,
and
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc#ClearExtension"><code>proto.ClearExtension</code></a>
functions to access an extension in a message. The <code>GetExtension</code> function and
<code>SetExtension</code> functions respectively accept and return an <code>interface{}</code> value
containing the extension value type.</p><p>For singular scalar extension fields, the extension value type is the
corresponding Go type from the
<a href=/programming-guides/proto3#scalar>scalar value types table</a>.</p><p>For singular embedded message extension fields, the extension value type is
<code>*M</code>, where <code>M</code> is the field message type.</p><p>For repeated extension fields, the extension value type is a slice of the
singular type.</p><p>For example, given the following definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>singular_int32</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>repeated_string</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>singular_message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>Extension values may be accessed as:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>m</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>somepb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Foo</span><span style=color:#000;font-weight:700>{}</span>
</span></span><span style=display:flex><span><span style=color:#000>proto</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>E_SingularInt32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>int32</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span><span style=color:#000>proto</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>E_RepeatedString</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;a&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;b&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;c&#34;</span><span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span><span style=color:#000>proto</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>E_SingularMessage</span><span style=color:#000;font-weight:700>,</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Bar</span><span style=color:#000;font-weight:700>{})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>v1</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>proto</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>E_SingularInt32</span><span style=color:#000;font-weight:700>).(</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>v2</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>proto</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>E_RepeatedString</span><span style=color:#000;font-weight:700>).([][]</span><span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>v3</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>proto</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>E_SingularMessage</span><span style=color:#000;font-weight:700>).(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Bar</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Extensions can be declared nested inside of another type. For example, a common
pattern is to do something like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Baz</span> <span style=color:#000>foo_ext</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>124</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, the <code>ExtensionType</code> value is named <code>E_Baz_Foo</code>.</p><h2 id=service>Services</h2><p>The Go code generator does not produce output for services by default. If you
enable the <a href=https://www.grpc.io/>gRPC</a> plugin (see the
<a href=https://github.com/grpc/grpc-go/tree/master/examples>gRPC Go Quickstart guide</a>)
then code will be generated to support gRPC.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-b308d39fa92ddbafc45777b9e304fffa>4.2 - Go FAQ</h1><div class=lead>This topic has a list of frequently asked questions about implementing protocol buffers in Go, with answer for each.</div><h2 id=versions>Versions</h2><h3 id=modules>What&rsquo;s the difference between <code>github.com/golang/protobuf</code> and <code>google.golang.org/protobuf</code>?</h3><p>The
<a href="https://pkg.go.dev/github.com/golang/protobuf?tab=overview"><code>github.com/golang/protobuf</code></a>
module is the original Go protocol buffer API.</p><p>The
<a href="https://pkg.go.dev/google.golang.org/protobuf?tab=overview"><code>google.golang.org/protobuf</code></a>
module is an updated version of this API designed for simplicity, ease of use,
and safety. The flagship features of the updated API are support for reflection
and a separation of the user-facing API from the underlying implementation.</p><p>We recommend that you use <code>google.golang.org/protobuf</code> in new code.</p><p>Version <code>v1.4.0</code> and higher of <code>github.com/golang/protobuf</code> wrap the new
implementation and permit programs to adopt the new API incrementally. For
example, the well-known types defined in <code>github.com/golang/protobuf/ptypes</code> are
simply aliases of those defined in the newer module. Thus,
<a href=https://pkg.go.dev/google.golang.org/protobuf/types/known/emptypb><code>google.golang.org/protobuf/types/known/emptypb</code></a>
and
<a href=https://pkg.go.dev/github.com/golang/protobuf/ptypes/empty><code>github.com/golang/protobuf/ptypes/empty</code></a>
may be used interchangeably.</p><h3 id=proto-versions>What are <code>proto1</code>, <code>proto2</code>, and <code>proto3</code>?</h3><p>These are revisions of the protocol buffer <em>language</em>. It is different from the
Go <em>implementation</em> of protobufs.</p><ul><li><p><code>proto3</code> is the current version of the language. This is the most commonly
used version of the language. We encourage new code to use proto3.</p></li><li><p><code>proto2</code> is an older version of the language. Despite being superseded by
proto3, proto2 is still fully supported.</p></li><li><p><code>proto1</code> is an obsolete version of the language. It was never released as
open source.</p></li></ul><h3 id=message-types>There are several different <code>Message</code> types. Which should I use?</h3><ul><li><p><a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc#Message"><code>"google.golang.org/protobuf/proto".Message</code></a>
is an interface type implemented by all messages generated by the current
version of the protocol buffer compiler. Functions that operate on arbitrary
messages, such as
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc#Marshal"><code>proto.Marshal</code></a>
or
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc#Clone"><code>proto.Clone</code></a>,
accept or return this type.</p></li><li><p><a href="https://pkg.go.dev/google.golang.org/protobuf/reflect/protoreflect?tab=doc#Message"><code>"google.golang.org/protobuf/reflect/protoreflect".Message</code></a>
is an interface type describing a reflection view of a message.</p><p>Call the <code>ProtoReflect</code> method on a <code>proto.Message</code> to get a
<code>protoreflect.Message</code>.</p></li><li><p><a href="https://pkg.go.dev/google.golang.org/protobuf/reflect/protoreflect?tab=doc#ProtoMessage"><code>"google.golang.org/protobuf/reflect/protoreflect".ProtoMessage</code></a>
is an alias of <code>"google.golang.org/protobuf/proto".Message</code>. The two types
are interchangeable.</p></li><li><p><a href="https://pkg.go.dev/github.com/golang/protobuf/proto?tab=doc#Message"><code>"github.com/golang/protobuf/proto".Message</code></a>
is an interface type defined by the legacy Go protocol buffer API. All
generated message types implement this interface, but the interface does not
describe the behavior expected from these messages. New code should avoid
using this type.</p></li></ul><h2 id=common-problems>Common problems</h2><h3 id=working-directory>&ldquo;<code>go install</code>&rdquo;: <code>working directory is not part of a module</code></h3><p>On Go 1.15 and below, you have set the environment variable <code>GO111MODULE=on</code> and
are running the <code>go install</code> command outside of a module directory. Set
<code>GO111MODULE=auto</code>, or unset the environment variable.</p><p>On Go 1.16 and above, <code>go install</code> can be invoked outside of a module by
specifying an explicit version: <code>go install google.golang.org/protobuf/cmd/protoc-gen-go@latest</code></p><h3 id=enforce-version><code>constant -1 overflows protoimpl.EnforceVersion</code></h3><p>You are using a generated <code>.pb.go</code> file which requires a newer version of the
<code>"google.golang.org/protobuf"</code> module.</p><p>Update to a newer version with:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>go get -u google.golang.org/protobuf/proto
</span></span></code></pre></div><h3 id=enforce-version-apiv1><code>undefined: "github.com/golang/protobuf/proto".ProtoPackageIsVersion4</code></h3><p>You are using a generated <code>.pb.go</code> file which requires a newer version of the
<code>"github.com/golang/protobuf"</code> module.</p><p>Update to a newer version with:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>go get -u github.com/golang/protobuf/proto
</span></span></code></pre></div><h3 id=namespace-conflict>What is a protocol buffer namespace conflict?</h3><p>All protocol buffers declarations linked into a Go binary are inserted into a
global registry.</p><p>Every protobuf declaration (for example, enums, enum values, or messages) has an
absolute name, which is the concatenation of the
<a href=/programming-guides/proto#packages>package name</a> with
the relative name of the declaration in the <code>.proto</code> source file (for example,
<code>my.proto.package.MyMessage.NestedMessage</code>). The protobuf language assumes that
all declarations are universally unique.</p><p>If two protobuf declarations linked into a Go binary have the same name, then
this leads to a namespace conflict, and it is impossible for the registry to
properly resolve that declaration by name. Depending on which version of Go
protobufs is being used, this will either panic at init-time or silently drop
the conflict and lead to a potential bug later during runtime.</p><h3 id=fix-namespace-conflict>How do I fix a protocol buffer namespace conflict?</h3><p>The way to best fix a namespace conflict depends on the reason why a conflict is
occurring.</p><p>Common ways that namespace conflicts occur:</p><ul><li><p><strong>Vendored .proto files.</strong> When a single <code>.proto</code> file is generated into two
or more Go packages and linked into the same Go binary, it conflicts on
every protobuf declaration in the generated Go packages. This typically
occurs when a <code>.proto</code> file is vendored and a Go package is generated from
it, or the generated Go package itself is vendored. Users should avoid
vendoring and instead depend on a centralized Go package for that <code>.proto</code>
file.</p><ul><li>If a <code>.proto</code> file is owned by an external party and is lacking a
<code>go_package</code> option, then you should coordinate with the owner of that
<code>.proto</code> file to specify a centralized Go package that a plurality of
users can all depend on.</li></ul></li><li><p><strong>Missing or generic proto package names.</strong> If a <code>.proto</code> file does not
specify a package name or uses an overly generic package name (for example,
&ldquo;my_service&rdquo;), then there is a high probability that declarations within
that file will conflict with other declarations elsewhere in the universe.
We recommend that every <code>.proto</code> file have a package name that is
deliberately chosen to be universally unique (for example, prefixed with the
name of a company).</p><ul><li>Warning: Retroactively changing the package name on a <code>.proto</code> file can
potentially cause the use of extension fields or messages stored in
<code>google.protobuf.Any</code> to stop working properly.</li></ul></li></ul><p>Starting with v1.26.0 of the <code>google.golang.org/protobuf</code> module, a hard error
will be reported when a Go program starts up that has multiple conflicting
protobuf names linked into it. While it is preferable that the source of the
conflict be fixed, the fatal error can be immediately worked around in one of
two ways:</p><ol><li><p><strong>At compile time.</strong> The default behavior for handling conflicts can be
specified at compile time with a linker-initialized variable: <code>go build -ldflags "-X google.golang.org/protobuf/reflect/protoregistry.conflictPolicy=warn"</code></p></li><li><p><strong>At program execution.</strong> The behavior for handling conflicts when executing
a particular Go binary can be set with an environment variable:
<code>GOLANG_PROTOBUF_REGISTRATION_CONFLICT=warn ./main</code></p></li></ol><h3 id=deepequal>Why does <code>reflect.DeepEqual</code> behave unexpectedly with protobuf messages?</h3><p>Generated protocol buffer message types include internal state which can vary
even between equivalent messages.</p><p>In addition, the <code>reflect.DeepEqual</code> function is not aware of the semantics of
protocol buffer messages, and can report differences where none exist. For
example, a map field containing a <code>nil</code> map and one containing a zero-length,
non-<code>nil</code> map are semantically equivalent, but will be reported as unequal by
<code>reflect.DeepEqual</code>.</p><p>Use the
<a href=https://pkg.go.dev/google.golang.org/protobuf/proto#Equal><code>proto.Equal</code></a>
function to compare message values.</p><p>In tests, you can also use the
<a href="https://pkg.go.dev/github.com/google/go-cmp/cmp?tab=doc"><code>"github.com/google/go-cmp/cmp"</code></a>
package with the
<a href=https://pkg.go.dev/google.golang.org/protobuf/testing/protocmp#Transform><code>protocmp.Transform()</code></a>
option. The <code>cmp</code> package can compare arbitrary data structures, and
<a href=https://pkg.go.dev/github.com/google/go-cmp/cmp#Diff><code>cmp.Diff</code></a> produces
human-readable reports of the differences between values.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>diff</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>cmp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Diff</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>b</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>protocmp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Transform</span><span style=color:#000;font-weight:700>());</span> <span style=color:#000>diff</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#4e9a06>&#34;&#34;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;unexpected difference:\n%v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>diff</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=hyrums-law>Hyrum&rsquo;s Law</h2><h3 id=hyrums-law>What is Hyrum&rsquo;s Law, and why is it in this FAQ?</h3><p><a href=https://www.hyrumslaw.com/>Hyrum&rsquo;s Law</a> states:</p><blockquote><p>With a sufficient number of users of an API, it does not matter what you
promise in the contract: all observable behaviors of your system will be
depended on by somebody.</p></blockquote><p>A design goal of the latest version of the Go protocol buffer API is to avoid,
where possible, providing observable behaviors that we cannot promise to keep
stable in the future. It is our philosophy that deliberate instability in areas
where we make no promises is better than giving the illusion of stability, only
for that to change in the future after a project has potentially been long
depending on that false assumption.</p><h3 id=unstable-errors>Why does the text of errors keep changing?</h3><p>Tests depending on the exact text of errors are brittle and break often when
that text changes. To discourage unsafe use of error text in tests, the text of
errors produced by this module is deliberately unstable.</p><p>If you need to identify whether an error is produced by the
<a href=https://pkg.go.dev/mod/google.golang.org/protobuf><code>protobuf</code></a> module, we
guarantee that all errors will match
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc#Error"><code>proto.Error</code></a>
according to <a href="https://pkg.go.dev/errors?tab=doc#Is"><code>errors.Is</code></a>.</p><h3 id=unstable-json>Why does the output of <a href=https://pkg.go.dev/google.golang.org/protobuf/encoding/protojson><code>protojson</code></a> keep changing?</h3><p>We make no promises about the long-term stability of Go&rsquo;s implementation of the
<a href=/programming-guides/proto3#json>JSON format for protocol buffers</a>.
The specification only specifies what is valid JSON, but provides no
specification for a <em>canonical</em> format for how a marshaler ought to <em>exactly</em>
format a given message. To avoid giving the illusion that the output is stable,
we deliberately introduce minor differences so that byte-for-byte comparisons
are likely to fail.</p><p>To gain some degree of output stability, we recommend running the output through
a JSON formatter.</p><h3 id=unstable-text>Why does the output of <a href=https://pkg.go.dev/google.golang.org/protobuf/encoding/prototext><code>prototext</code></a> keep changing?</h3><p>We make no promises about the long-term stability of Go&rsquo;s implementation of the
text format. There is no canonical specification of the protobuf text format,
and we would like to preserve the ability to make improvements in the
<code>prototext</code> package output in the future. Since we don&rsquo;t promise stability in
the package&rsquo;s output, we&rsquo;ve deliberately introduced instability to discourage
users from depending on it.</p><p>To obtain some degree of stability, we recommend passing the output of
<code>prototext</code> through the
<a href=https://github.com/protocolbuffers/txtpbfmt><code>txtpbfmt</code></a> program. The formatter
can be directly invoked in Go using
<a href="https://pkg.go.dev/github.com/protocolbuffers/txtpbfmt/parser?tab=doc#Format"><code>parser.Format</code></a>.</p><h2 id=miscellaneous>Miscellaneous</h2><h3 id=hash>How do I use a protocol buffer message as a hash key?</h3><p>You need canonical serialization, where the marshaled output of a protocol
buffer message is guaranteed to be stable over time. Unfortunately, no
specification for canonical serialization exists at this time. You&rsquo;ll need to
write your own or find a way to avoid needing one.</p><h3 id=new-feature>Can I add a new feature to the Go protocol buffer implementation?</h3><p>Maybe. We always like suggestions, but we&rsquo;re very cautious about adding new
things.</p><p>The Go implementation of protocol buffers strives to be consistent with the
other language implementations. As such, we tend to shy away from feature that
are overly specialized to just Go. Go-specific features hinder the goal of
protocol buffers being a language-neutral data interchange format.</p><p>Unless your idea is specific to the Go implementation, you should join the
<a href=http://groups.google.com/group/protobuf>protobuf discussion group</a> and suggest
it there.</p><p>If you have an idea for the Go implementation, file an issue on our issue
tracker:
<a href=https://github.com/golang/protobuf/issues>https://github.com/golang/protobuf/issues</a></p><h3 id=new-marshal-option>Can I add an option to <code>Marshal</code> or <code>Unmarshal</code> to customize it?</h3><p>Only if that option exists in other implementations (e.g., C++, Java). The
encoding of protocol buffers (binary, JSON, and text) must be consistent across
implementations, so a program written in one language is able to read messages
written by another one.</p><p>We will not add any options to the Go implementation that affect the data output
by <code>Marshal</code> functions or read by <code>Unmarshal</code> functions unless an equivalent
option exist in at least one other supported implementation.</p><h3 id=custom-code>Can I customize the code generated by <code>protoc-gen-go</code>?</h3><p>In general, no. Protocol buffers are intended to be a language-agnostic data
interchange format, and implementation-specific customizations run counter to
that intent.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-639e5cf8cb099a7e10c83b371a06eedd>4.3 - Go API</h1></div><div class=td-content style=page-break-before:always><h1 id=pg-28c7eaf38d058969936417f71239a7c9>5 - Java Reference</h1><div class=lead>This section contains reference documentation for working with protocol buffer classes in Java</div><ul><li><a href=/reference/java/java-generated>Java Generated Code Guide</a></li><li><a href=/reference/java/java-proto-names>Java Proto Names</a></li><li><a href=/reference/java/api-docs/overview-summary.html>Java API (Javadoc)</a></li></ul></div><div class=td-content><h1 id=pg-a5bf97db26af6372d3a2d88a7c8784cd>5.1 - Java Generated Code Guide</h1><div class=lead>This topic describes exactly what Java code the protocol buffer compiler generates for any given protocol definition.</div><p>This page describes exactly what Java code the protocol buffer compiler
generates for any given protocol definition. Any differences between proto2 and
proto3 generated code are highlighted—note that these differences are in
the generated code as described in this document, not the base message
classes/interfaces, which are the same in both versions. You should read the
<a href=/programming-guides/proto>proto2 language guide</a> and/or
<a href=/programming-guides/proto3>proto3 language guide</a> before reading this
document.</p><p>Note that no Java protocol buffer methods accept or return nulls unless
otherwise specified.</p><h2 id=invocation>Compiler Invocation</h2><p>The protocol buffer compiler produces Java output when invoked with the
<code>--java_out=</code> command-line flag. The parameter to the <code>--java_out=</code> option is
the directory where you want the compiler to write your Java output. For each
<code>.proto</code> file input, the compiler creates a wrapper <code>.java</code> file containing a
Java class which represents the <code>.proto</code> file itself.</p><p>If the <code>.proto</code> file contains a line like the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>java_multiple_files</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>Then the compiler will also create separate <code>.java</code> files for each of the
classes/enums which it will generate for each top-level message, enumeration,
and service declared in the <code>.proto</code> file.</p><p>Otherwise (i.e. when the <code>java_multiple_files</code> option is disabled; which is the
default), the aforementioned wrapper class will also be used as an outer class,
and the generated classes/enums for each top-level message, enumeration, and
service declared in the <code>.proto</code> file will all be nested within the outer
wrapper class. Thus the compiler will only generate a single <code>.java</code> file for
the entire <code>.proto</code> file.</p><p>The wrapper class&rsquo;s name is chosen as follows: If the <code>.proto</code> file contains a
line like the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>java_outer_classname</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Foo&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>Then the wrapper class name will be <code>Foo</code>. Otherwise, the wrapper class name is
determined by converting the <code>.proto</code> file base name to camel case. For example,
<code>foo_bar.proto</code> will generate a class name of <code>FooBar</code>. If there&rsquo;s a service,
enum, or message (including nested types) in the file with the same name,
&ldquo;OuterClass&rdquo; will be appended to the wrapper class&rsquo;s name. Examples:</p><ul><li>If <code>foo_bar.proto</code> contains a message called <code>FooBar</code>, the wrapper class
will generate a class name of <code>FooBarOuterClass</code>.</li><li>If <code>foo_bar.proto</code> contains a service called <code>FooService</code>, and
<code>java_outer_classname</code> is also set to the string <code>FooService</code>, then the
wrapper class will generate a class name of <code>FooServiceOuterClass</code>.</li></ul><p>In addition to any nested classes, the wrapper class itself will have the
following API (assuming the wrapper class is named <code>Foo</code> and was generated from
<code>foo.proto</code>):</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>final</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Foo</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>{}</span>  <span style=color:#8f5902;font-style:italic>// Not instantiable.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>/** Returns a FileDescriptor message describing the contents of {@code foo.proto}. */</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#000>com</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>google</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>protobuf</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>Descriptors</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>FileDescriptor</span> <span style=color:#000>getDescriptor</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>/** Adds all extensions defined in {@code foo.proto} to the given registry. */</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>registerAllExtensions</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>com</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>google</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>protobuf</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>ExtensionRegistry</span> <span style=color:#000>registry</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>registerAllExtensions</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>com</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>google</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>protobuf</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>ExtensionRegistryLite</span> <span style=color:#000>registry</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// (Nested classes omitted)
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div><p>The Java package name is chosen as described under <a href=#package>Packages</a>, below.</p><p>The output file is chosen by concatenating the parameter to <code>--java_out=</code>, the
package name (with <code>.</code>s replaced with <code>/</code>s), and the <code>.java</code> file name.</p><p>So, for example, let&rsquo;s say you invoke the compiler as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --java_out<span style=color:#ce5c00;font-weight:700>=</span>build/gen src/foo.proto
</span></span></code></pre></div><p>If <code>foo.proto</code>&rsquo;s Java package is <code>com.example</code> and it doesn&rsquo;t enable
<code>java_multiple_files</code> and its outer classname is <code>FooProtos</code>, then the protocol
buffer compiler will generate the file <code>build/gen/com/example/FooProtos.java</code>.
The protocol buffer compiler will automatically create the <code>build/gen/com</code> and
<code>build/gen/com/example</code> directories if needed. However, it will not create
<code>build/gen</code> or <code>build</code>; they must already exist. You can specify multiple
<code>.proto</code> files in a single invocation; all output files will be generated at
once.</p><p>When outputting Java code, the protocol buffer compiler&rsquo;s ability to output
directly to JAR archives is particularly convenient, as many Java tools are able
to read source code directly from JAR files. To output to a JAR file, simply
provide an output location ending in <code>.jar</code>. Note that only the Java source code
is placed in the archive; you must still compile it separately to produce Java
class files.</p><h2 id=package>Packages</h2><p>The generated class is placed in a Java package based on the <code>java_package</code>
option. If the option is omitted, the <code>package</code> declaration is used instead.</p><p>For example, if the <code>.proto</code> file contains:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>Then the resulting Java class will be placed in Java package <code>foo.bar</code>. However,
if the <code>.proto</code> file also contains a <code>java_package</code> option, like so:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>java_package</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;com.example.foo.bar&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>Then the class is placed in the <code>com.example.foo.bar</code> package instead. The
<code>java_package</code> option is provided because normal <code>.proto</code> <code>package</code> declarations
are not expected to start with a backwards domain name.</p><h2 id=message>Messages</h2><p>Given a simple message declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates a class called <code>Foo</code>, which implements
the <code>Message</code> interface. The class is declared <code>final</code>; no further subclassing
is allowed. <code>Foo</code> extends <code>GeneratedMessage</code>, but this should be considered an
implementation detail. By default, <code>Foo</code> overrides many methods of
<code>GeneratedMessage</code> with specialized versions for maximum speed. However, if the
<code>.proto</code> file contains the line:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>optimize_for</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>CODE_SIZE</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>then <code>Foo</code> will override only the minimum set of methods necessary to function
and rely on <code>GeneratedMessage</code>&rsquo;s reflection-based implementations of the rest.
This significantly reduces the size of the generated code, but also reduces
performance. Alternatively, if the <code>.proto</code> file contains:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>optimize_for</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>LITE_RUNTIME</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>then <code>Foo</code> will include fast implementations of all methods, but will implement
the <code>MessageLite</code> interface, which only contains a subset of the methods of
<code>Message</code>. In particular, it does not support descriptors or reflection.
However, in this mode, the generated code only needs to link against
<code>libprotobuf-lite.jar</code> instead of <code>libprotobuf.jar</code>. The &ldquo;lite&rdquo; library is
much smaller than the full library, and is more appropriate for
resource-constrained systems such as mobile phones.</p><p>The <code>Message</code> interface defines methods that let you check, manipulate, read, or
write the entire message. In addition to these methods, the <code>Foo</code> class defines
the following static methods:</p><ul><li><code>static Foo getDefaultInstance()</code>: Returns the <em>singleton</em> instance of
<code>Foo</code>. This instance&rsquo;s contents are identical to what you&rsquo;d get if you
called <code>Foo.newBuilder().build()</code> (so all singular fields are unset and all
repeated fields are empty). Note that the default instance of a message can
be used as a factory by calling its <code>newBuilderForType()</code> method.</li><li><code>static Descriptor getDescriptor()</code>: Returns the type&rsquo;s descriptor. This
contains information about the type, including what fields it has and what
their types are. This can be used with the reflection methods of the
<code>Message</code>, such as <code>getField()</code>.</li><li><code>static Foo parseFrom(...)</code>: Parses a message of type <code>Foo</code> from the given
source and returns it. There is one <code>parseFrom</code> method corresponding to each
variant of <code>mergeFrom()</code> in the <code>Message.Builder</code> interface. Note that
<code>parseFrom()</code> never throws <code>UninitializedMessageException</code>; it throws
<code>InvalidProtocolBufferException</code> if the parsed message is missing required
fields. This makes it subtly different from calling
<code>Foo.newBuilder().mergeFrom(...).build()</code>.</li><li><code>static Parser parser()</code>: Returns an instance of the <code>Parser</code>, which
implements various <code>parseFrom()</code> methods.</li><li><code>Foo.Builder newBuilder()</code>: Creates a new builder (described below).</li><li><code>Foo.Builder newBuilder(Foo prototype)</code>: Creates a new builder with all
fields initialized to the same values that they have in <code>prototype</code>. Since
embedded message and string objects are immutable, they are shared between
the original and the copy.</li></ul><h3 id=builders>Builders</h3><p>Message objects—such as instances of the <code>Foo</code> class described
above—are immutable, just like a Java <code>String</code>. To construct a message
object, you need to use a <em>builder</em>. Each message class has its own builder
class—so in our <code>Foo</code> example, the protocol buffer compiler generates a
nested class <code>Foo.Builder</code> which can be used to build a <code>Foo</code>. <code>Foo.Builder</code>
implements the <code>Message.Builder</code> interface. It extends the
<code>GeneratedMessage.Builder</code> class, but, again, this should be considered an
implementation detail. Like <code>Foo</code>, <code>Foo.Builder</code> may rely on generic method
implementations in <code>GeneratedMessage.Builder</code> or, when the <code>optimize_for</code> option
is used, generated custom code that is much faster.</p><p><code>Foo.Builder</code> does not define any static methods. Its interface is exactly as
defined by the <code>Message.Builder</code> interface, with the exception that return types
are more specific: methods of <code>Foo.Builder</code> that modify the builder return type
<code>Foo.Builder</code>, and <code>build()</code> returns type <code>Foo</code>.</p><p>Methods that modify the contents of a builder—including field
setters—always return a reference to the builder (i.e. they &ldquo;<code>return this;</code>&rdquo;). This allows multiple method calls to be chained together in one line.
For example: <code>builder.mergeFrom(obj).setFoo(1).setBar("abc").clearBaz();</code></p><p>Note that builders are not thread-safe, so Java synchronization should be used
whenever it is necessary for multiple different threads to be modifying the
contents of a single builder.</p><h3 id=sub-builders>Sub-Builders</h3><p>For messages containing sub-messages, the compiler also generates sub-builders.
This allows you to repeatedly modify deep-nested sub-messages without rebuilding
them. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>val</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#8f5902;font-style:italic>// some other fields.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Foo</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#8f5902;font-style:italic>// some other fields.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#8f5902;font-style:italic>// some other fields.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>If you have a <code>Baz</code> message already, and want to change the deeply nested <code>val</code>
in <code>Foo</code>. Instead of:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>baz</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>baz</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>toBuilder</span><span style=color:#ce5c00;font-weight:700>().</span><span style=color:#c4a000>setBar</span><span style=color:#ce5c00;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>baz</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>getBar</span><span style=color:#ce5c00;font-weight:700>().</span><span style=color:#c4a000>toBuilder</span><span style=color:#ce5c00;font-weight:700>().</span><span style=color:#c4a000>setFoo</span><span style=color:#ce5c00;font-weight:700>(</span>
</span></span><span style=display:flex><span>        <span style=color:#000>baz</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>getBar</span><span style=color:#ce5c00;font-weight:700>().</span><span style=color:#c4a000>getFoo</span><span style=color:#ce5c00;font-weight:700>().</span><span style=color:#c4a000>toBuilder</span><span style=color:#ce5c00;font-weight:700>().</span><span style=color:#c4a000>setVal</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#ce5c00;font-weight:700>).</span><span style=color:#c4a000>build</span><span style=color:#ce5c00;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>).</span><span style=color:#c4a000>build</span><span style=color:#ce5c00;font-weight:700>()).</span><span style=color:#c4a000>build</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span></code></pre></div><p>You can write:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>Builder</span> <span style=color:#000>builder</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>baz</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>toBuilder</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>builder</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>getBarBuilder</span><span style=color:#ce5c00;font-weight:700>().</span><span style=color:#c4a000>getFooBuilder</span><span style=color:#ce5c00;font-weight:700>().</span><span style=color:#c4a000>setVal</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>baz</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>builder</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>build</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span></code></pre></div><h3 id=nested-types>Nested Types</h3><p>A message can be declared inside another message. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, the compiler simply generates <code>Bar</code> as an inner class nested
inside <code>Foo</code>.</p><h2 id=fields>Fields</h2><p>In addition to the methods described in the previous section, the protocol
buffer compiler generates a set of accessor methods for each field defined
within the message in the <code>.proto</code> file. The methods that read the field value
are defined both in the message class and its corresponding builder; the methods
that modify the value are defined in the builder only.</p><p>Note that method names always use camel-case naming, even if the field name in
the <code>.proto</code> file uses lower-case with underscores
(<a href=/programming-guides/style>as it should</a>). The case-conversion works
as follows:</p><ol><li>For each underscore in the name, the underscore is removed, and the
following letter is capitalized.</li><li>If the name will have a prefix attached (e.g. &ldquo;get&rdquo;), the first letter is
capitalized. Otherwise, it is lower-cased.</li></ol><p>Thus, the field <code>foo_bar_baz</code> becomes <code>fooBarBaz</code>. If prefixed with <code>get</code>, it
would be <code>getFooBarBaz</code>.</p><p>As well as accessor methods, the compiler generates an integer constant for each
field containing its field number. The constant name is the field name converted
to upper-case followed by <code>_FIELD_NUMBER</code>. For example, given the field
<code>optional int32 foo_bar = 5;</code>, the compiler will generate the constant <code>public static final int FOO_BAR_FIELD_NUMBER = 5;</code>.</p><h3 id=singular-fields-proto2>Singular Fields (proto2)</h3><p>For any of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods in both the message
class and its builder:</p><ul><li><code>boolean hasFoo()</code>: Returns <code>true</code> if the field is set.</li><li><code>int getFoo()</code>: Returns the current value of the field. If the field is not
set, returns the default value.</li></ul><p>The compiler will generate the following methods only in the message&rsquo;s builder:</p><ul><li><code>Builder setFoo(int value)</code>: Sets the value of the field. After calling
this, <code>hasFoo()</code> will return <code>true</code> and <code>getFoo()</code> will return <code>value</code>.</li><li><code>Builder clearFoo()</code>: Clears the value of the field. After calling this,
<code>hasFoo()</code> will return <code>false</code> and <code>getFoo()</code> will return the default value.</li></ul><p>For other simple field types, the corresponding Java type is chosen according to
the <a href=/programming-guides/proto#scalar>scalar value types table</a>.
For message and enum types, the value type is replaced with the message or enum
class.</p><h4 id=embedded-message-fields>Embedded Message Fields</h4><p>For message types, <code>setFoo()</code> also accepts an instance of the message&rsquo;s builder
type as the parameter. This is just a shortcut which is equivalent to calling
<code>.build()</code> on the builder and passing the result to the method.</p><p>If the field is not set, <code>getFoo()</code> will return a Foo instance with none of its
fields set (possibly the instance returned by <code>Foo.getDefaultInstance()</code>).</p><p>In addition, the compiler generates two accessor methods that allow you to
access the relevant sub-builders for message types. The following method is
generated in both the message class and its builder:</p><ul><li><code>FooOrBuilder getFooOrBuilder()</code>: Returns the builder for the field, if it
already exists, or the message if not. Calling this method on builders will
not create a sub-builder for the field.</li></ul><p>The compiler generates the following method only in the message&rsquo;s builder.</p><ul><li><code>Builder getFooBuilder()</code>: Returns the builder for the field.</li></ul><h3 id=singular-fields-proto3>Singular Fields (proto3)</h3><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor method in both the message
class and its builder:</p><ul><li><code>int getFoo()</code>: Returns the current value of the field. If the field is not
set, returns the default value for the field&rsquo;s type.</li></ul><p>The compiler will generate the following methods only in the message&rsquo;s builder:</p><ul><li><code>Builder setFoo(int value)</code>: Sets the value of the field. After calling
this, <code>getFoo()</code> will return <code>value</code>.</li><li><code>Builder clearFoo()</code>: Clears the value of the field. After calling this,
<code>getFoo()</code> will return the default value for the field&rsquo;s type.</li></ul><p>For other simple field types, the corresponding Java type is chosen according to
the <a href=/programming-guides/proto#scalar>scalar value types table</a>.
For message and enum types, the value type is replaced with the message or enum
class.</p><h4 id=embedded-message-fields-1>Embedded Message Fields</h4><p>For message field types, an additional accessor method is generated in both the
message class and its builder:</p><ul><li><code>boolean hasFoo()</code>: Returns <code>true</code> if the field has been set.</li></ul><p><code>setFoo()</code> also accepts an instance of the message&rsquo;s builder type as the
parameter. This is just a shortcut which is equivalent to calling <code>.build()</code> on
the builder and passing the result to the method.</p><p>If the field is not set, <code>getFoo()</code> will return a Foo instance with none of its
fields set (possibly the instance returned by <code>Foo.getDefaultInstance()</code>).</p><p>In addition, the compiler generates two accessor methods that allow you to
access the relevant sub-builders for message types. The following method is
generated in both the message class and its builder:</p><ul><li><code>FooOrBuilder getFooOrBuilder()</code>: Returns the builder for the field, if it
already exists, or the message if not. Calling this method on builders will
not create a sub-builder for the field.</li></ul><p>The compiler generates the following method only in the message&rsquo;s builder.</p><ul><li><code>Builder getFooBuilder()</code>: Returns the builder for the field.</li></ul><h4 id=enum-fields>Enum Fields</h4><p>For enum field types, an additional accessor method is generated in both the
message class and its builder:</p><ul><li><code>int getFooValue()</code>: Returns the integer value of the enum.</li></ul><p>The compiler will generate the following additional method only in the message&rsquo;s
builder:</p><ul><li><code>Builder setFooValue(int value)</code>: Sets the integer value of the enum.</li></ul><p>In addition, <code>getFoo()</code> will return <code>UNRECOGNIZED</code> if the enum value is
unknown—this is a special additional value added by the proto3 compiler to
the generated <a href=#enum>enum type</a>.</p><h3 id=repeated-fields>Repeated Fields</h3><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods in both the message
class and its builder:</p><ul><li><code>int getFooCount()</code>: Returns the number of elements currently in the field.</li><li><code>String getFoo(int index)</code>: Returns the element at the given zero-based
index.</li><li><code>ProtocolStringList getFooList()</code>: Returns the entire field as a
<code>ProtocolStringList</code>. If the field is not set, returns an empty list.</li></ul><p>The compiler will generate the following methods only in the message&rsquo;s builder:</p><ul><li><code>Builder setFoo(int index, String value)</code>: Sets the value of the element at
the given zero-based index.</li><li><code>Builder addFoo(String value)</code>: Appends a new element to the field with the
given value.</li><li><code>Builder addAllFoo(Iterable&lt;? extends String> value)</code>: Appends all elements
in the given <code>Iterable</code> to the field.</li><li><code>Builder clearFoo()</code>: Removes all elements from the field. After calling
this, <code>getFooCount()</code> will return zero.</li></ul><p>For other simple field types, the corresponding Java type is chosen according to
the <a href=/programming-guides/proto#scalar>scalar value types table</a>.
For message and enum types, the type is the message or enum class.</p><h4 id=repeated-embedded-message-fields>Repeated Embedded Message Fields</h4><p>For message types, <code>setFoo()</code> and <code>addFoo()</code> also accept an instance of the
message&rsquo;s builder type as the parameter. This is just a shortcut which is
equivalent to calling <code>.build()</code> on the builder and passing the result to the
method. There is also an additional generated method:</p><ul><li><code>Builder addFoo(int index, Field value)</code>: Inserts a new element at the given
zero-based index. Shifts the element currently at that position (if any) and
any subsequent elements to the right (adds one to their indices).</li></ul><p>In addition, the compiler generates the following additional accessor methods in
both the message class and its builder for message types, allowing you to access
the relevant sub-builders:</p><ul><li><code>FooOrBuilder getFooOrBuilder(int index)</code>: Returns the builder for the
specified element, if it already exists, or throws
<code>IndexOutOfBoundsException</code> if not. If this is called from a message class,
it will always return a message (or throw an exception) rather than a
builder. Calling this method on builders will not create a sub-builder for
the field.</li><li><code>List&lt;FooOrBuilder> getFooOrBuilderList()</code>: Returns the entire field as an
unmodifiable list of builders (if available) or messages if not. If this is
called from a message class, it will always return an immutable list of
messages rather than an unmodifiable list of builders.</li></ul><p>The compiler will generate the following methods only in the message&rsquo;s builder:</p><ul><li><code>Builder getFooBuilder(int index)</code>: Returns the builder for the element at
the specified index, or throws <code>IndexOutOfBoundsException</code> if the index is
out of bounds.</li><li><code>Builder addFooBuilder(int index)</code>: Inserts and returns a builder for a
default message instance at the specified index. The existing entries are
shifted to higher indices to make room for the inserted builder.</li><li><code>Builder addFooBuilder()</code>: Appends and returns a builder for a default
message instance.</li><li><code>Builder removeFoo(int index)</code>: Removes the element at the given zero-based
index.</li><li><code>List&lt;Builder> getFooBuilderList()</code>: Returns the entire field as an
unmodifiable list of builders.</li></ul><h4 id=repeated-enum-fields-proto3-only>Repeated Enum Fields (proto3 only)</h4><p>The compiler will generate the following additional methods in both the message
class and its builder:</p><ul><li><code>int getFooValue(int index)</code>: Returns the integer value of the enum at the
specified index.</li><li><code>List&lt;java.lang.Integer> getFooValueList()</code>: Returns the entire field as a
list of Integers.</li></ul><p>The compiler will generate the following additional method only in the message&rsquo;s
builder:</p><ul><li><code>Builder setFooValue(int index, int value)</code>: Sets the integer value of the
enum at the specified index.</li></ul><h4 id=name-conflicts>Name Conflicts</h4><p>If another non-repeated field has a name that conflicts with one of the repeated
field&rsquo;s generated methods, then both field names will have their protobuf field
number appended to the end.</p><p>For these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo_count</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will first rename them to the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo_count_1</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo_2</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The accessor methods will subsequently be generated as described above.</p><h3 id=oneof-fields>Oneof Fields</h3><p>For this oneof field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods in both the message
class and its builder:</p><ul><li><code>boolean hasFoo()</code> (proto2 only): Returns <code>true</code> if the oneof case is <code>FOO</code>.</li><li><code>int getFoo()</code>: Returns the current value of <code>example_name</code> if the oneof
case is <code>FOO</code>. Otherwise, returns the default value of this field.</li></ul><p>The compiler will generate the following methods only in the message&rsquo;s builder:</p><ul><li><code>Builder setFoo(int value)</code>: Sets <code>example_name</code> to this value and sets the
oneof case to <code>FOO</code>. After calling this, <code>hasFoo()</code> will return <code>true</code>,
<code>getFoo()</code> will return <code>value</code> and <code>getExampleNameCase()</code> will return <code>FOO</code>.</li><li><code>Builder clearFoo()</code>:<ul><li>Nothing will be changed if the oneof case is not <code>FOO</code>.</li><li>If the oneof case is <code>FOO</code>, sets <code>example_name</code> to null and the oneof
case to <code>EXAMPLENAME_NOT_SET</code>. After calling this, <code>hasFoo()</code> will
return <code>false</code>, <code>getFoo()</code> will return the default value and
<code>getExampleNameCase()</code> will return <code>EXAMPLENAME_NOT_SET</code>.</li></ul></li></ul><p>For other simple field types, the corresponding Java type is chosen according to
the <a href=/programming-guides/proto#scalar>scalar value types table</a>.
For message and enum types, the value type is replaced with the message or enum
class.</p><h3 id=map-fields>Map Fields</h3><p>For this map field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>weight</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods in both the message
class and its builder:</p><ul><li><code>Map&lt;Integer, Integer> getWeightMap();</code>: Returns an unmodifiable <code>Map</code>.</li><li><code>int getWeightOrDefault(int key, int default);</code>: Returns the value for key
or the default value if not present.</li><li><code>int getWeightOrThrow(int key);</code>: Returns the value for key or throws
IllegalArgumentException if not present.</li><li><code>boolean containsWeight(int key);</code>: Indicates if the key is present in this
field.</li><li><code>int getWeightCount();</code>: Returns the number of elements in the map.</li></ul><p>The compiler will generate the following methods only in the message&rsquo;s builder:</p><ul><li><code>Builder putWeight(int key, int value);</code>: Add the weight to this field.</li><li><code>Builder putAllWeight(Map&lt;Integer, Integer> value);</code>: Adds all entries in
the given map to this field.</li><li><code>Builder removeWeight(int key);</code>: Removes the weight from this field.</li><li><code>Builder clearWeight();</code>: Removes all weights from this field.</li><li><code>@Deprecated Map&lt;Integer, Integer> getMutableWeight();</code>: Returns a mutable
<code>Map</code>. Note that multiple calls to this method may return different map
instances. The returned map reference may be invalidated by any subsequent
method calls to the Builder.</li></ul><h2 id=any>Any</h2><p>Given an <a href=/programming-guides/proto3#any><code>Any</code></a> field like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#4e9a06>&#34;google/protobuf/any.proto&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>ErrorStatus</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#204a87;font-weight:700>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>google.protobuf.Any</span> <span style=color:#000>details</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In our generated code, the getter for the <code>details</code> field returns an instance of
<code>com.google.protobuf.Any</code>. This provides the following special methods to pack
and unpack the <code>Any</code>&rsquo;s values:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Any</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Packs the given message into an Any using the default type URL
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// prefix “type.googleapis.com”.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#000>Any</span> <span style=color:#000>pack</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Message</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Packs the given message into an Any using the given type URL
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// prefix.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#000>Any</span> <span style=color:#000>pack</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Message</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>,</span>
</span></span><span style=display:flex><span>                         <span style=color:#000>String</span> <span style=color:#000>typeUrlPrefix</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Checks whether this Any message’s payload is the given type.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>T</span> <span style=color:#204a87;font-weight:700>extends</span> <span style=color:#000>Message</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#204a87;font-weight:700>boolean</span> <span style=color:#000>is</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>class</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>clazz</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Unpacks Any into the given message type. Throws exception if
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// the type doesn’t match or parsing the payload has failed.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>T</span> <span style=color:#204a87;font-weight:700>extends</span> <span style=color:#000>Message</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>T</span> <span style=color:#000>unpack</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>class</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>clazz</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>throws</span> <span style=color:#000>InvalidProtocolBufferException</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=oneof>Oneofs</h2><p>Given a oneof definition like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo_int</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo_string</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>All the fields in the <code>example_name</code> oneof will use a single private field for
their value. In addition, the protocol buffer compiler will generate a Java enum
type for the oneof case, as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>ExampleNameCase</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>implements</span> <span style=color:#000>com</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>google</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>protobuf</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>Internal</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>EnumLite</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>FOO_INT</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#ce5c00;font-weight:700>),</span>
</span></span><span style=display:flex><span>      <span style=color:#000>FOO_STRING</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>9</span><span style=color:#ce5c00;font-weight:700>),</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span>      <span style=color:#000>EXAMPLENAME_NOT_SET</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>};</span>
</span></span></code></pre></div><p>The values of this enum type have the following special methods:</p><ul><li><code>int getNumber()</code>: Returns the object&rsquo;s numeric value as defined in the
.proto file.</li><li><code>static ExampleNameCase forNumber(int value)</code>: Returns the enum object
corresponding to the given numeric value (or <code>null</code> for other numeric
values).</li></ul><p>The compiler will also generate the following accessor method in both the
message class and its builder:</p><ul><li><code>ExampleNameCase getExampleNameCase()</code>: Returns the enum indicating which
field is set. Returns <code>EXAMPLENAME_NOT_SET</code> if none of them is set.</li></ul><p>The compiler will generate the following method only in the message&rsquo;s builder:</p><ul><li><code>Builder clearExampleName()</code>: Resets the oneof&rsquo;s private field to null, and
sets the oneof case to <code>EXAMPLENAME_NOT_SET</code>.</li></ul><h2 id=enum>Enumerations</h2><p>Given an enum definition like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_B</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_C</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1234</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate a Java enum type called <code>Foo</code> with
the same set of values. If you are using proto3, it also adds the special value
<code>UNRECOGNIZED</code> to the enum type. The values of the generated enum type have the
following special methods:</p><ul><li><code>int getNumber()</code>: Returns the object&rsquo;s numeric value as defined in the
<code>.proto</code> file.</li><li><code>EnumValueDescriptor getValueDescriptor()</code>: Returns the value&rsquo;s descriptor,
which contains information about the value&rsquo;s name, number, and type.</li><li><code>EnumDescriptor getDescriptorForType()</code>: Returns the enum type&rsquo;s descriptor,
which contains e.g. information about each defined value.</li></ul><p>Additionally, the <code>Foo</code> enum type contains the following static methods:</p><ul><li><code>static Foo forNumber(int value)</code>: Returns the enum object corresponding to
the given numeric value. Returns null when there is no corresponding enum
object.</li><li><code>static Foo valueOf(int value)</code>: Returns the enum object corresponding to
the given numeric value. This method is deprecated in favor of
<code>forNumber(int value)</code> and will be removed in an upcoming release.</li><li><code>static Foo valueOf(EnumValueDescriptor descriptor)</code>: Returns the enum
object corresponding to the given value descriptor. May be faster than
<code>valueOf(int)</code>. In proto3 returns <code>UNRECOGNIZED</code> if passed an unknown value
descriptor.</li><li><code>EnumDescriptor getDescriptor()</code>: Returns the enum type&rsquo;s descriptor, which
contains e.g. information about each defined value. (This differs from
<code>getDescriptorForType()</code> only in that it is a static method.)</li></ul><p>An integer constant is also generated with the suffix _VALUE for each enum
value.</p><p>Note that the <code>.proto</code> language allows multiple enum symbols to have the same
numeric value. Symbols with the same numeric value are synonyms. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAZ</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, <code>BAZ</code> is a synonym for <code>BAR</code>. In Java, <code>BAZ</code> will be defined as a
static final field like so:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>final</span> <span style=color:#000>Foo</span> <span style=color:#000>BAZ</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>BAR</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span></code></pre></div><p>Thus, <code>BAR</code> and <code>BAZ</code> compare equal, and <code>BAZ</code> should never appear in switch
statements. The compiler always chooses the first symbol defined with a given
numeric value to be the &ldquo;canonical&rdquo; version of that symbol; all subsequent
symbols with the same number are just aliases.</p><p>An enum can be defined nested within a message type. The compiler generates the
Java enum definition nested within that message type&rsquo;s class.</p><p><strong>Caution: when generating Java code, the maximum number of values in a protobuf
enum may be surprisingly low</strong>—in the worst case, the maximum is slightly
over 1,700 values. This limit is due to per-method size limits for Java
bytecode, and it varies across Java implementations, different versions of the
protobuf suite, and any options set on the enum in the <code>.proto</code> file.</p><h2 id=extension>Extensions (proto2 only)</h2><p>Given a message with an extension range:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extensions</span> <span style=color:#0000cf;font-weight:700>100</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#0000cf;font-weight:700>199</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will make <code>Foo</code> extend
<code>GeneratedMessage.ExtendableMessage</code> instead of the usual <code>GeneratedMessage</code>.
Similarly, <code>Foo</code>&rsquo;s builder will extend <code>GeneratedMessage.ExtendableBuilder</code>. You
should never refer to these base types by name (<code>GeneratedMessage</code> is considered
an implementation detail). However, these superclasses define a number of
additional methods that you can use to manipulate extensions.</p><p>In particular <code>Foo</code> and <code>Foo.Builder</code> will inherit the methods <code>hasExtension()</code>,
<code>getExtension()</code>, and <code>getExtensionCount()</code>. Additionally, <code>Foo.Builder</code> will
inherit methods <code>setExtension()</code> and <code>clearExtension()</code>. Each of these methods
takes, as its first parameter, an extension identifier (described below), which
identifies an extension field. The remaining parameters and the return value are
exactly the same as those for the corresponding accessor methods that would be
generated for a normal (non-extension) field of the same type as the extension
identifier.</p><p>Given an extension definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>123</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates an &ldquo;extension identifier&rdquo; called <code>bar</code>,
which you can use with <code>Foo</code>&rsquo;s extension accessors to access this extension,
like so:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>newBuilder</span><span style=color:#ce5c00;font-weight:700>()</span>
</span></span><span style=display:flex><span>     <span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>setExtension</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>     <span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>build</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>hasExtension</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>getExtension</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span></code></pre></div><p>(The exact implementation of extension identifiers is complicated and involves
magical use of generics—however, you don&rsquo;t need to worry about how
extension identifiers work to use them.)</p><p>Note that <code>bar</code> would be declared as a static field of the wrapper class for the
<code>.proto</code> file, as described above; we have omitted the wrapper class name in the
example.</p><p>Extensions can be declared inside the scope of another type to prefix their
generated symbol names. For example, a common pattern is to extend a message by
a field <em>inside</em> the declaration of the field&rsquo;s type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Baz</span> <span style=color:#000>foo_ext</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>124</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, an extension with identifier <code>foo_ext</code> and type <code>Baz</code> is declared
inside the declaration of <code>Baz</code>, and referring to <code>foo_ext</code> requires the
addition of a <code>Baz.</code> prefix:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>Baz</span> <span style=color:#000>baz</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>createMyBaz</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>newBuilder</span><span style=color:#ce5c00;font-weight:700>()</span>
</span></span><span style=display:flex><span>     <span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>setExtension</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>fooExt</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>baz</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>     <span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>build</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>hasExtension</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>fooExt</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>getExtension</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>fooExt</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>baz</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span></code></pre></div><p>When parsing a message that might have extensions, you must provide an
<a href=/reference/java/api-docs/com/google/protobuf/ExtensionRegistry.html><code>ExtensionRegistry</code></a>
in which you have registered any extensions that you want to be able to parse.
Otherwise, those extensions will be treated like unknown fields and the methods
observing extensions will behave as if they don&rsquo;t exist.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>ExtensionRegistry</span> <span style=color:#000>registry</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>ExtensionRegistry</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>newInstance</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>registry</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>add</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>fooExt</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>parseFrom</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>input</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>registry</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>hasExtension</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>fooExt</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>ExtensionRegistry</span> <span style=color:#000>registry</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>ExtensionRegistry</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>newInstance</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>parseFrom</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>input</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>registry</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>hasExtension</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>fooExt</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span></code></pre></div><h2 id=service>Services</h2><p>If the <code>.proto</code> file contains the following line:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>java_generic_services</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>Then the protocol buffer compiler will generate code based on the service
definitions found in the file as described in this section. However, the
generated code may be undesirable as it is not tied to any particular RPC
system, and thus requires more levels of indirection than code tailored to one
system. If you do NOT want this code to be generated, add this line to the file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>java_generic_services</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>If neither of the above lines are given, the option defaults to <code>false</code>, as
generic services are deprecated. (Note that prior to 2.4.0, the option defaults
to <code>true</code>)</p><p>RPC systems based on <code>.proto</code>-language service definitions should provide
<a href=/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb>plugins</a>
to generate code approriate for the system. These plugins are likely to require
that abstract services are disabled, so that they can generate their own classes
of the same names. Plugins are new in version 2.3.0 (January 2010).</p><p>The remainder of this section describes what the protocol buffer compiler
generates when abstract services are enabled.</p><h3 id=interface>Interface</h3><p>Given a service definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>service</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FooRequest</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FooResponse</span><span style=color:#000;font-weight:700>);</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate an abstract class <code>Foo</code> to represent
this service. <code>Foo</code> will have an abstract method for each method defined in the
service definition. In this case, the method <code>Bar</code> is defined as:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>abstract</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>RpcController</span> <span style=color:#000>controller</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>FooRequest</span> <span style=color:#000>request</span><span style=color:#ce5c00;font-weight:700>,</span>
</span></span><span style=display:flex><span>                  <span style=color:#000>RpcCallback</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>FooResponse</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>done</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><p>The parameters are equivalent to the parameters of <code>Service.CallMethod()</code>,
except that the <code>method</code> argument is implied and <code>request</code> and <code>done</code> specify
their exact type.</p><p><code>Foo</code> subclasses the <code>Service</code> interface. The protocol buffer compiler
automatically generates implementations of the methods of <code>Service</code> as follows:</p><ul><li><code>getDescriptorForType</code>: Returns the service&rsquo;s <code>ServiceDescriptor</code>.</li><li><code>callMethod</code>: Determines which method is being called based on the provided
method descriptor and calls it directly, down-casting the request message
and callback to the correct types.</li><li><code>getRequestPrototype</code> and <code>getResponsePrototype</code>: Returns the default
instance of the request or response of the correct type for the given
method.</li></ul><p>The following static method is also generated:</p><ul><li><code>static ServiceDescriptor getServiceDescriptor()</code>: Returns the type&rsquo;s
descriptor, which contains information about what methods this service has
and what their input and output types are.</li></ul><p><code>Foo</code> will also contain a nested interface <code>Foo.Interface</code>. This is a pure
interface that again contains methods corresponding to each method in your
service definition. However, this interface does not extend the <code>Service</code>
interface. This is a problem because RPC server implementations are usually
written to use abstract <code>Service</code> objects, not your particular service. To solve
this problem, if you have an object <code>impl</code> implementing <code>Foo.Interface</code>, you can
call <code>Foo.newReflectiveService(impl)</code> to construct an instance of <code>Foo</code> that
simply delegates to <code>impl</code>, and implements <code>Service</code>.</p><p>To recap, when implementing your own service, you have two options:</p><ul><li>Subclass <code>Foo</code> and implement its methods as appropriate, then hand instances
of your subclass directly to the RPC server implementation. This is usually
easiest, but some consider it less &ldquo;pure&rdquo;.</li><li>Implement <code>Foo.Interface</code> and use <code>Foo.newReflectiveService(Foo.Interface)</code>
to construct a <code>Service</code> wrapping it, then pass the wrapper to your RPC
implementation.</li></ul><h3 id=stub>Stub</h3><p>The protocol buffer compiler also generates a &ldquo;stub&rdquo; implementation of every
service interface, which is used by clients wishing to send requests to servers
implementing the service. For the <code>Foo</code> service (above), the stub implementation
<code>Foo.Stub</code> will be defined as a nested class.</p><p><code>Foo.Stub</code> is a subclass of <code>Foo</code> which also implements the following methods:</p><ul><li><code>Foo.Stub(RpcChannel channel)</code>: Constructs a new stub which sends requests
on the given channel.</li><li><code>RpcChannel getChannel()</code>: Returns this stub&rsquo;s channel, as passed to the
constructor.</li></ul><p>The stub additionally implements each of the service&rsquo;s methods as a wrapper
around the channel. Calling one of the methods simply calls
<code>channel.callMethod()</code>.</p><p>The Protocol Buffer library does not include an RPC implementation. However, it
includes all of the tools you need to hook up a generated service class to any
arbitrary RPC implementation of your choice. You need only provide
implementations of <code>RpcChannel</code> and <code>RpcController</code>.</p><h3 id=blocking-interfaces>Blocking Interfaces</h3><p>The RPC classes described above all have non-blocking semantics: when you call a
method, you provide a callback object which will be invoked once the method
completes. Often it is easier (though possibly less scalable) to write code
using blocking semantics, where the method simply doesn&rsquo;t return until it is
done. To accomodate this, the protocol buffer compiler also generates blocking
versions of your service class. <code>Foo.BlockingInterface</code> is equivalent to
<code>Foo.Interface</code> except that each method simply returns the result rather than
call a callback. So, for example, <code>bar</code> is defined as:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>abstract</span> <span style=color:#000>FooResponse</span> <span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>RpcController</span> <span style=color:#000>controller</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>FooRequest</span> <span style=color:#000>request</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>                         <span style=color:#204a87;font-weight:700>throws</span> <span style=color:#000>ServiceException</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span></code></pre></div><p>Analogous to non-blocking services,
<code>Foo.newReflectiveBlockingService(Foo.BlockingInterface)</code> returns a
<code>BlockingService</code> wrapping some <code>Foo.BlockingInterface</code>. Finally,
<code>Foo.BlockingStub</code> returns a stub implementation of <code>Foo.BlockingInterface</code> that
sends requests to a particular <code>BlockingRpcChannel</code>.</p><h2 id=plugins>Plugin Insertion Points</h2><p><a href=/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb>Code generator plugins</a>
that want to extend the output of the Java code generator may insert code of
the following types using the given insertion point names.</p><ul><li><code>outer_class_scope</code>: Member declarations that belong in the file&rsquo;s wrapper
class.</li><li><code>class_scope:TYPENAME</code>: Member declarations that belong in a message class.
<code>TYPENAME</code> is the full proto name, e.g. <code>package.MessageType</code>.</li><li><code>builder_scope:TYPENAME</code>: Member declarations that belong in a message&rsquo;s
builder class. <code>TYPENAME</code> is the full proto name, e.g.
<code>package.MessageType</code>.</li><li><code>enum_scope:TYPENAME</code>: Member declarations that belong in an enum class.
<code>TYPENAME</code> is the full proto enum name, e.g. <code>package.EnumType</code>.</li><li><code>message_implements:TYPENAME</code>: Class implementation declarations for a
message class. <code>TYPENAME</code> is the full proto name, e.g.
<code>package.MessageType</code>.</li><li><code>builder_implements:TYPENAME</code>: Class implementation declarations for a
builder class. <code>TYPENAME</code> is the full proto name, e.g.
<code>package.MessageType</code>.</li></ul><p>Generated code cannot contain import statements, as these are prone to conflict
with type names defined within the generated code itself. Instead, when
referring to an external class, you must always use its fully-qualified name.</p><p>The logic for determining output file names in the Java code generator is fairly
complicated. You should probably look at the <code>protoc</code> source code, particularly
<code>java_headers.cc</code>, to make sure you have covered all cases.</p><p>Do not generate code which relies on private class members declared by the
standard code generator, as these implementation details may change in future
versions of Protocol Buffers.</p><h2 id=utility-classes>Utility Classes</h2><p>Protocol buffer provides
<a href=/reference/java/api-docs/com/google/protobuf/util/package-summary.html>utility classes</a>
for message comparison, JSON conversion and working with
<a href=/reference/protobuf/google.protobuf>well-known types (predefined protocol buffer messages for common use-cases).</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-1be9e7e798e12c55873d38f2de7d9e57>5.2 - Java API</h1></div><div class=td-content style=page-break-before:always><h1 id=pg-466dfd484aa91ce51d28c85d71d3c5e1>5.3 -</h1><h1 id=java-proto-names>Java Proto Names</h1><h2 id=immutable-api-message-names>Immutable API Message Names</h2><p>The names for protos generated by the immutable API (<code>java_proto_library</code> BUILD
target) are listed in the following table.</p><table><thead><tr><th style=text-align:center>java_api_version</th><th style=text-align:center>java_multiple_files</th><th>java_alt_api_package</th><th>java_package</th><th>java_outer_classname</th><th>Generated full message name</th></tr></thead><tbody><tr><td style=text-align:center>1</td><td style=text-align:center>true</td><td>Defined</td><td>-</td><td></td><td><code>$java_alt_api_package.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>true</td><td>Not defined</td><td>Not defined</td><td></td><td><code>com.google.protos.$package.proto2api.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>true</td><td>Not defined</td><td>Defined</td><td></td><td><code>$java_package.proto2api.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>false</td><td>Defined</td><td>-</td><td>Not defined</td><td><code>$java_alt_api_package.$derived_outer_class.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>false</td><td>Defined</td><td>-</td><td>Defined</td><td><code>$java_alt_api_package.$java_outer_classname.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>false</td><td>Not defined</td><td>Not defined</td><td>Not defined</td><td><code>com.google.protos.$package.proto2api.$derived_outer_class.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>false</td><td>Not defined</td><td>Not defined</td><td>Defined</td><td><code>com.google.protos.$package.proto2api.$java_outer_classname.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>false</td><td>Not defined</td><td>Defined</td><td>Not defined</td><td><code>$java_package.proto2api.$derived_outer_class.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>false</td><td>Not defined</td><td>Defined</td><td>Defined</td><td><code>$java_package.proto2api.$java_outer_classname.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>true</td><td>-</td><td>Not defined</td><td>-</td><td><code>com.google.protos.$package.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>true</td><td>-</td><td>Defined</td><td>-</td><td><code>$java_package.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>false</td><td>-</td><td>Not defined</td><td>Not defined</td><td><code>com.google.protos.$package.$derived_outer_class.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>false</td><td>-</td><td>Not defined</td><td>Defined</td><td><code>com.google.protos.$package.$java_outer_classname.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>false</td><td>-</td><td>Defined</td><td>Not defined</td><td><code>$java_package.$derived_outer_class.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>false</td><td>-</td><td>Defined</td><td>Defined</td><td><code>$java_package.$java_outer_classname.$message</code></td></tr></tbody></table><p><strong>Legend</strong></p><ul><li><p>- means either setting or not setting the option will not change the
generated full message name.</p></li><li><p><code>$message</code> is the actual name of the proto message.</p></li><li><p><code>$package</code> is the name of the proto package. This is the name specified by
the <code>package</code> directive in the proto file, which is usually at the top of
the file.</p></li><li><p><code>$derived_outer_class</code> is a name generated from the proto file name.
Generally it&rsquo;s computed by removing punctuation from the file name and
converting it to CamelCase. For example, if the proto is <code>foo_bar.proto</code>,
the <code>$derived_outer_class</code> value is <code>FooBar</code>.</p><p>If the generated class name would be the same as one of the messages defined
in the proto file, <code>derived_outer_class</code> has <code>OuterClass</code> appended to it.
For example, if the proto is <code>foo_bar.proto</code> and contains a <code>FooBar</code>
message, the <code>$derived_outer_class</code> value is <code>FooBarOuterClass</code>.</p></li><li><p>All other <code>$names</code> are the values of the corresponding proto2 file options
defined in the proto file.</p></li></ul><p>The recommended set of options is:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>java_multiple_files</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>java_outer_classname</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;{UpperCamelCaseFilename}Proto&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=mutable-api-message-names>Mutable API Message Names</h2><p>The names for protos generated by the mutable API are outlined in the following
sections.</p><div class="alert alert-note" role=alert><h4 class=alert-heading>Note</h4>Java mutable API names will be generated only when the
<code>java_mutable_proto_library</code> target is built.</div><h3 id=generated-proto-api-version>Generated Proto API Version</h3><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>Java
proto1 is deprecated. Avoid any settings that will generate that version.</div><table><thead><tr><th>java_api_version</th><th>java_mutable_api</th><th>java_enable_dual_generate_mutable_api</th><th>API version</th></tr></thead><tbody><tr><td>-</td><td>-</td><td>true</td><td>proto1, proto2 mutable</td></tr><tr><td>1</td><td>-</td><td>false</td><td>proto1</td></tr><tr><td>2</td><td>true</td><td>false</td><td>proto2 mutable</td></tr><tr><td>2</td><td>false</td><td>false</td><td>proto1</td></tr></tbody></table><h3 id=proto2-message-names>Proto2 Message Names</h3><table><thead><tr><th style=text-align:center>java_api_version</th><th style=text-align:center>(java_multiple_files, java_multiple_files_mutable_package)</th><th>java_package</th><th>java_outer_classname</th><th>java_alt_api_package</th><th>Proto2 Mutable message name</th></tr></thead><tbody><tr><td style=text-align:center>-</td><td style=text-align:center>(true, defined)</td><td>-</td><td>-</td><td>-</td><td><code>$java_multiple_files_mutable_package.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>!(true, defined)</td><td>Undefined</td><td>Undefined</td><td>Undefined</td><td><code>com.google.protos.$package.proto2api.Mutable$Filename.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>!(true, defined)</td><td>Undefined</td><td>Undefined</td><td>Defined</td><td><code>$java_alt_api_package.Mutable$Filename.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>!(true, defined)</td><td>Undefined</td><td>Defined</td><td>Undefined</td><td><code>com.google.protos.$package.proto2api.Mutable$java_outer_classname.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>!(true, defined)</td><td>Undefined</td><td>Defined</td><td>Defined</td><td><code>$java_alt_api_package.Mutable$java_outer_classname.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>!(true, defined)</td><td>Defined</td><td>Undefined</td><td>Undefined</td><td><code>$java_package.proto2api.Mutable$Filename.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>!(true, defined)</td><td>Defined</td><td>Undefined</td><td>Defined</td><td><code>$java_alt_api_package.Mutable$Filename.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>!(true, defined)</td><td>Defined</td><td>Defined</td><td>Undefined</td><td><code>$java_package.proto2api.Mutable$java_outer_classname.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>!(true, defined)</td><td>Defined</td><td>Defined</td><td>Defined</td><td><code>$java_alt_api_package.Mutable$java_outer_classname.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>!(true, defined)</td><td>Undefined</td><td>Undefined</td><td>-</td><td><code>com.google.protos.$package.Mutable$Filename.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>!(true, defined)</td><td>Undefined</td><td>Defined</td><td>-</td><td><code>com.google.protos.$package..Mutable$java_outer_classname.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>!(true, defined)</td><td>Defined</td><td>Undefined</td><td>-</td><td><code>$java_package.Mutable$Filename.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>!(true, defined)</td><td>Defined</td><td>Defined</td><td>-</td><td><code>$java_package.Mutable$java_outer_classname.$message</code></td></tr></tbody></table><p><strong>Legend</strong></p><ul><li>- means either setting or not setting the option will not change the
generated full message name.</li><li><code>$message</code> is the actual name of the proto message.</li><li>All other <code>$names</code> are the values of the corresponding proto2 file options
defined in the proto file.</li></ul><h3 id=proto1-message-names>Proto1 Message Names</h3><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>Java
proto1 is deprecated. The following table is provided for informational purposes
only.</div><table><thead><tr><th style=text-align:center>java_api_version</th><th style=text-align:center>java_multiple_files</th><th>java_package</th><th>java_outer_classname</th><th>java_alt_api_package</th><th>Proto1 message name</th></tr></thead><tbody><tr><td style=text-align:center>1</td><td style=text-align:center>true</td><td>Undefined</td><td>-</td><td>-</td><td><code>com.google.protos.$package.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>true</td><td>Defined</td><td>-</td><td>-</td><td><code>$java_package.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>false</td><td>Undefined</td><td>Defined</td><td>-</td><td><code>com.google.protos.$package.$java_outer_class.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>false</td><td>Undefined</td><td>Undefined</td><td>-</td><td><code>com.google.protos.$package.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>false</td><td>Defined</td><td>Defined</td><td>-</td><td><code>$java_package.$java_outer_class.$message</code></td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>false</td><td>Defined</td><td>Undefined</td><td>-</td><td><code>$java_package.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>true</td><td>Undefined</td><td>-</td><td>Undefined</td><td><code>com.google.protos.$package.proto1api.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>true</td><td>Defined</td><td>-</td><td>Undefined</td><td><code>$java_package.proto1api.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>false</td><td>Undefined</td><td>Defined</td><td>Undefined</td><td><code>com.google.protos.$package.proto1api.$java_outer_class.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>false</td><td>Undefined</td><td>Undefined</td><td>Undefined</td><td><code>com.google.protos.$package.proto1api.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>false</td><td>Defined</td><td>Defined</td><td>Undefined</td><td><code>$java_package.proto1api.$java_outer_class.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>false</td><td>Defined</td><td>Undefined</td><td>Undefined</td><td><code>$java_package.proto1api.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>true</td><td>Undefined</td><td>-</td><td>Defined</td><td><code>com.google.protos.$package.$java_alt_api_package.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>true</td><td>Defined</td><td>-</td><td>Defined</td><td><code>$java_package.$java_alt_api_package.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>false</td><td>Undefined</td><td>Defined</td><td>Defined</td><td><code>com.google.protos.$package.$java_alt_api_package.$java_outer_class.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>false</td><td>Undefined</td><td>Undefined</td><td>Defined</td><td><code>com.google.protos.$package.$java_alt_api_package.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>false</td><td>Defined</td><td>Defined</td><td>Defined</td><td><code>$java_package.$java_alt_api_package.$java_outer_class.$message</code></td></tr><tr><td style=text-align:center>2</td><td style=text-align:center>false</td><td>Defined</td><td>Undefined</td><td>Defined</td><td><code>$java_package.$java_alt_api_package.$message</code></td></tr></tbody></table><p><strong>Legend</strong></p><ul><li>- means either setting or not setting the option will not change the
generated full message name.</li><li><code>$message</code> is the actual name of the proto message.</li><li>All other <code>$names</code> are the values of the corresponding proto2 file options
defined in the proto file.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-457ffcab25cb426d544c8c16c1664360>6 - Kotlin Reference</h1><div class=lead>This section contains reference documentation for working with protocol buffer classes in Kotlin</div><ul><li><a href=/reference/kotlin/kotlin-generated>Kotlin Generated Code Guide</a></li><li><a href=/reference/kotlin/api-docs>Kotlin API</a></li></ul></div><div class=td-content><h1 id=pg-7e110d38398f615e83ea116097ba8a9f>6.1 - Kotlin Generated Code Guide</h1><div class=lead>This topic describes exactly what Kotlin code the protocol buffer compiler generates for any given protocol definition,</div><p>This page describes exactly what Kotlin code the protocol buffer compiler
generates for any given protocol definition, in addition to the code generated
for <a href=/reference/java/java-generated>Java</a>. Any differences
between proto2 and proto3 generated code are highlighted—note that these
differences are in the generated code as described in this document, not the
base message classes/interfaces, which are the same in both versions. You should
read the <a href=/programming-guides/proto>proto2 language guide</a> and/or
<a href=/programming-guides/proto3>proto3 language guide</a> before reading this
document.</p><h2 id=invocation>Compiler Invocation</h2><p>The protocol buffer compiler produces Kotlin code that builds on top of Java
code. As a result, it must be invoked with two command-line flags, <code>--java_out=</code>
and <code>--kotlin_out=</code>. The parameter to the <code>--java_out=</code> option is the directory
where you want the compiler to write your Java output, and the same for the
<code>--kotlin_out=</code>. For each <code>.proto</code> file input, the compiler creates a wrapper
<code>.java</code> file containing a Java class which represents the <code>.proto</code> file itself.</p><p><strong>Regardless</strong> of whether or not your <code>.proto</code> file contains a line like the
following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>java_multiple_files</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will create separate <code>.kt</code> files for each of the classes and
factory methods which it will generate for each top-level message declared in
the <code>.proto</code> file.</p><p>The Java package name for each file is the same as that used by the generated
Java code as described in the
<a href=/reference/java/java-generated#package>Java generated code reference</a>.</p><p>The output file is chosen by concatenating the parameter to <code>--kotlin_out=</code>, the
package name (with <code>.</code>s replaced with <code>/</code>s), and the suffix <code>Kt.kt</code> file name.</p><p>So, for example, let&rsquo;s say you invoke the compiler as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --java_out<span style=color:#ce5c00;font-weight:700>=</span>build/gen/java --kotlin_out<span style=color:#ce5c00;font-weight:700>=</span>build/gen/kotlin src/foo.proto
</span></span></code></pre></div><p>If <code>foo.proto</code>&rsquo;s Java package is <code>com.example</code> and it contains a message named
<code>Bar</code>, then the protocol buffer compiler will generate the file
<code>build/gen/kotlin/com/example/BarKt.kt</code>. The protocol buffer compiler will
automatically create the <code>build/gen/kotlin/com</code> and
<code>build/gen/kotlin/com/example</code> directories if needed. However, it will not
create <code>build/gen/kotlin</code>, <code>build/gen</code>, or <code>build</code>; they must already exist. You
can specify multiple <code>.proto</code> files in a single invocation; all output files
will be generated at once.</p><h2 id=message>Messages</h2><p>Given a simple message declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>FooBar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates—in addition to the generated Java
code—an object called <code>FooBarKt</code>, as well as two top-level functions,
having the following structure:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#204a87;font-weight:700>object</span> <span style=color:#000>FooBarKt</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Dsl</span> <span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>constructor</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#ce5c00;font-weight:700>..</span><span style=color:#000;font-weight:700>.</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>inline</span> <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>fooBar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>FooBarKt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Dsl</span><span style=color:#000;font-weight:700>.()</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Unit</span><span style=color:#000;font-weight:700>):</span> <span style=color:#000>FooBar</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>inline</span> <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>FooBar</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>copy</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>FooBarKt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Dsl</span><span style=color:#000;font-weight:700>.()</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Unit</span><span style=color:#000;font-weight:700>):</span> <span style=color:#000>FooBar</span>
</span></span></code></pre></div><h3 id=nested-types>Nested Types</h3><p>A message can be declared inside another message. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, the compiler nests the <code>BarKt</code> object and the <code>bar</code> factory method
inside <code>FooKt</code>, though the <code>copy</code> method remains top-level:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#204a87;font-weight:700>object</span> <span style=color:#000>FooKt</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Dsl</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#ce5c00;font-weight:700>..</span><span style=color:#000;font-weight:700>.</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>object</span> <span style=color:#000>BarKt</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Dsl</span> <span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>constructor</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#ce5c00;font-weight:700>..</span><span style=color:#000;font-weight:700>.</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>inline</span> <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>FooKt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BarKt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Dsl</span><span style=color:#000;font-weight:700>.()</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Unit</span><span style=color:#000;font-weight:700>):</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Bar</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>inline</span> <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>FooKt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Dsl</span><span style=color:#000;font-weight:700>.()</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Unit</span><span style=color:#000;font-weight:700>):</span> <span style=color:#000>Foo</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>inline</span> <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>copy</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>FooKt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Dsl</span><span style=color:#000;font-weight:700>.()</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Unit</span><span style=color:#000;font-weight:700>):</span> <span style=color:#000>Foo</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>inline</span> <span style=color:#204a87;font-weight:700>fun</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Bar</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>copy</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>FooKt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BarKt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Dsl</span><span style=color:#000;font-weight:700>.()</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>Unit</span><span style=color:#000;font-weight:700>):</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Bar</span>
</span></span></code></pre></div><h2 id=fields>Fields</h2><p>In addition to the methods described in the previous section, the protocol
buffer compiler generates mutable properties in the DSL for each field defined
within the message in the <code>.proto</code> file. (Kotlin already infers read-only
properties on the message object from the getters generated by Java.)</p><p>Note that properties always use camel-case naming, even if the field name in the
<code>.proto</code> file uses lower-case with underscores
(<a href=/programming-guides/style>as it should</a>). The case-conversion works
as follows:</p><ol><li>For each underscore in the name, the underscore is removed, and the
following letter is capitalized.</li><li>If the name will have a prefix attached (for example, &ldquo;clear&rdquo;), the first
letter is capitalized. Otherwise, it is lower-cased.</li></ol><p>Thus, the field <code>foo_bar_baz</code> becomes <code>fooBarBaz</code>.</p><p>In a few special cases in which a field name conflicts with reserved words in
Kotlin or methods already defined in the protobuf library, an extra underscore
is appended. For instance, the clearer for a field named <code>in</code> is <code>clearIn_()</code>.</p><h3 id=singular-fields-proto2>Singular Fields (proto2)</h3><p>For any of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessors in the DSL:</p><ul><li><code>fun hasFoo(): Boolean</code>: Returns <code>true</code> if the field is set.</li><li><code>var foo: Int</code>: The current value of the field. If the field is not set,
returns the default value.</li><li><code>fun clearFoo()</code>: Clears the value of the field. After calling this,
<code>hasFoo()</code> will return <code>false</code> and <code>getFoo()</code> will return the default value.</li></ul><p>For other simple field types, the corresponding Java type is chosen according to
the <a href=/programming-guides/proto#scalar>scalar value types table</a>.
For message and enum types, the value type is replaced with the message or enum
class. As the message type is still defined in Java, unsigned types in the
message are represented using the standard corresponding signed types in the
DSL, for compatibility with Java and older versions of Kotlin.</p><h4 id=embedded-message-fields>Embedded Message Fields</h4><p>Note that there is no special handling of submessages. For example, if you have
a field</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Foo</span> <span style=color:#000>my_foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>you must write</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#000>myFoo</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>foo</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#ce5c00;font-weight:700>..</span><span style=color:#000;font-weight:700>.</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>In general, this is because the compiler does not know whether <code>Foo</code> has a
Kotlin DSL at all, or e.g. only has the Java APIs generated. This means that you
do not have to wait for messages you depend on to add Kotlin code generation.</p><h3 id=singular-fields-proto3>Singular Fields (proto3)</h3><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following property in the DSL:</p><ul><li><code>var foo: Int</code>: Returns the current value of the field. If the field is not
set, returns the default value for the field&rsquo;s type.</li><li><code>fun clearFoo()</code>: Clears the value of the field. After calling this,
<code>getFoo()</code> will return the default value for the field&rsquo;s type.</li></ul><p>For other simple field types, the corresponding Java type is chosen according to
the <a href=/programming-guides/proto#scalar>scalar value types table</a>.
For message and enum types, the value type is replaced with the message or enum
class. As the message type is still defined in Java, unsigned types in the
message are represented using the standard corresponding signed types in the
DSL, for compatibility with Java and older versions of Kotlin.</p><h4 id=embedded-message-fields-1>Embedded Message Fields</h4><p>For message field types, an additional accessor method is generated in the DSL:</p><ul><li><code>boolean hasFoo()</code>: Returns <code>true</code> if the field has been set.</li></ul><p>Note that there is no shortcut for setting a submessage based on a DSL. For
example, if you have a field</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>my_foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>you must write</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#000>myFoo</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>foo</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#ce5c00;font-weight:700>..</span><span style=color:#000;font-weight:700>.</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>In general, this is because the compiler does not know whether <code>Foo</code> has a
Kotlin DSL at all, or e.g. only has the Java APIs generated. This means that you
do not have to wait for messages you depend on to add Kotlin code generation.</p><h3 id=repeated>Repeated Fields</h3><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following members in the DSL:</p><ul><li><code>class FooProxy: DslProxy</code>, an unconstructable type used only in generics</li><li><code>val fooList: DslList&lt;String, FooProxy></code>, a read-only view of the list of
current elements in the repeated field</li><li><code>fun DslList&lt;String, FooProxy>.add(value: String)</code>, an extension function
allowing elements to be added to the repeated field</li><li><code>operator fun DslList&lt;String, FooProxy>.plusAssign(value: String)</code>, an alias
for <code>add</code></li><li><code>fun DslList&lt;String, FooProxy>.addAll(values: Iterable&lt;String>)</code>, an
extension function allowing an <code>Iterable</code> of elements to be added to the
repeated field</li><li><code>operator fun DslList&lt;String, FooProxy>.plusAssign(values: Iterable&lt;String>)</code>, an alias for <code>addAll</code></li><li><code>operator fun DslList&lt;String, FooProxy>.set(index: Int, value: String)</code>, an
extension function setting the value of the element at the given zero-based
inde</li><li><code>fun DslList&lt;String, FooProxy>.clear()</code>, an extension function clearing the
contents of the repeated field</li></ul><p>This unusual construction allows <code>fooList</code> to "behave like" a mutable list
within the scope of the DSL, supporting only the methods supported by the
underlying builder, while preventing mutability from "escaping" the DSL, which
could cause confusing side effects.</p><p>For other simple field types, the corresponding Java type is chosen according to
the <a href=/programming-guides/proto#scalar>scalar value types table</a>.
For message and enum types, the type is the message or enum class.</p><h3 id=oneof-fields>Oneof Fields</h3><p>For this oneof field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>oneof_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods in the DSL:</p><ul><li><code>val oneofNameCase: OneofNameCase</code>: gets which, if any, of the <code>oneof_name</code>
fields are set; see the
<a href=/reference/java/java-generated#oneof>Java code reference</a>
for the return type</li><li><code>fun hasFoo(): Boolean</code> (proto2 only): Returns <code>true</code> if the oneof case is
<code>FOO</code>.</li><li><code>val foo: Int</code>: Returns the current value of <code>oneof_name</code> if the oneof case
is <code>FOO</code>. Otherwise, returns the default value of this field.</li></ul><p>For other simple field types, the corresponding Java type is chosen according to
the <a href=/programming-guides/proto#scalar>scalar value types table</a>.
For message and enum types, the value type is replaced with the message or enum
class.</p><h3 id=map-fields>Map Fields</h3><p>For this map field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>weight</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following members in the DSL class:</p><ul><li><code>class WeightProxy private constructor(): DslProxy()</code>, an unconstructable
type used only in generics</li><li><code>val weight: DslMap&lt;Int, Int, WeightProxy></code>, a read-only view of the current
entries in the map field</li><li><code>fun DslMap&lt;Int, Int, WeightProxy>.put(key: Int, value: Int)</code>: add the entry
to this map field</li><li><code>operator fun DslMap&lt;Int, Int, WeightProxy>.put(key: Int, value: Int)</code>:
alias for <code>put</code> using operator syntax</li><li><code>fun DslMap&lt;Int, Int, WeightProxy>.remove(key: Int)</code>: removes the entry
associated with <code>key</code>, if present</li><li><code>fun DslMap&lt;Int, Int, WeightProxy>.putAll(map: Map&lt;Int, Int>)</code>: adds all
entries from the specified map to this map field, overwriting prior values
for already present keys</li><li><code>fun DslMap&lt;Int, Int, WeightProxy>.clear()</code>: clears all entries from this
map field</li></ul><h2 id=extension>Extensions (proto2 only)</h2><p>Given a message with an extension range:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extensions</span> <span style=color:#0000cf;font-weight:700>100</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#0000cf;font-weight:700>199</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will add the following methods to <code>FooKt.Dsl</code>:</p><ul><li><code>operator fun &lt;T> get(extension: ExtensionLite&lt;Foo, T>): T</code>: gets the
current value of the extension field in the DSL</li><li><code>operator fun &lt;T> get(extension: ExtensionLite&lt;Foo, List&lt;T>>): ExtensionList&lt;T, Foo></code>: gets the current value of the repeated extension
field in the DSL as a read-only <code>List</code></li><li><code>operator fun &lt;T : Comparable&lt;T>> set(extension: ExtensionLite&lt;Foo, T>)</code>:
sets the current value of the extension field in the DSL (for <code>Comparable</code>
field types)</li><li><code>operator fun &lt;T : MessageLite&lt;T>> set(extension: ExtensionLite&lt;Foo, T>)</code>:
sets the current value of the extension field in the DSL (for message field
types)</li><li><code>operator fun set(extension: ExtensionLite&lt;Foo, ByteString>)</code>: sets the
current value of the extension field in the DSL (for <code>bytes</code> fields)</li><li><code>operator fun contains(extension: ExtensionLite&lt;Foo, *>): Boolean</code>: returns
true if the extension field has a value</li><li><code>fun clear(extension: ExtensionLite&lt;Foo, *>)</code>: clears the extension field</li><li><code>fun &lt;E> ExtensionList&lt;Foo, E>.add(value: E)</code>: adds a value to the repeated
extension field</li><li><code>operator fun &lt;E> ExtensionList&lt;Foo, E>.plusAssign(value: E)</code>: alias for
<code>add</code> using operator syntax</li><li><code>operator fun &lt;E> ExtensionList&lt;Foo, E>.addAll(values: Iterable&lt;E>)</code>: adds
multiple values to the repeated extension field</li><li><code>operator fun &lt;E> ExtensionList&lt;Foo, E>.plusAssign(values: Iterable&lt;E>)</code>:
alias for <code>addAll</code> using operator syntax</li><li><code>operator fun &lt;E> ExtensionList&lt;Foo, E>.set(index: Int, value: E)</code>: sets the
element of the repeated extension field at the specified index</li><li><code>operator fun ExtensionList&lt;Foo, *>.clear()</code>: clears the elements of the
repeated extension field</li></ul><p>The generics here are complex, but the effect is that <code>this[extension] = value</code>
works for every extension type except repeated extensions, and repeated
extensions have "natural" list syntax that works similarly to
<a href=#repeated>non-extension repeated fields</a>.</p><p>Given an extension definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>123</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>Java generates the "extension identifier" <code>bar</code>, which is used to "key"
extension operations above.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-30a7dd609e38f9aaa46b6dcf4f65194c>6.2 - Kotlin API</h1><div class=lead>The API docs for Kotlin.</div><p>//<a href=./>protobuf-kotlin</a></p><h2 id=packages>Packages</h2><table><thead><tr><th>Name</th></tr></thead><tbody><tr><td><a name=com.google.protobuf.kotlin////PointingToDeclaration/></a><a href=protobuf-kotlin/com.google.protobuf.kotlin/>com.google.protobuf.kotlin</a></td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-a05834bb563b2f761de9f6cf06deb605>7 - Objective-C Reference</h1><div class=lead>This section contains reference documentation for working with protocol buffer classes in Objective-C</div><ul><li><a href=/reference/objective-c/objective-c-generated>Objective-C Generated Code Guide</a></li></ul></div><div class=td-content><h1 id=pg-46c52b55d88f482c71581816e5603708>7.1 - Objective-C Generated Code Guide</h1><div class=lead>This topic describes exactly what Objective-C code the protocol buffer compiler generates for any given protocol definition.</div><p>This page describes exactly what Objective-C code the protocol buffer compiler
generates for any given protocol definition. Any differences between proto2 and
proto3 generated code are highlighted. You should read the
<a href=/programming-guides/proto>proto2 language guide</a> and/or
<a href=/programming-guides/proto3>proto3 language guide</a> before reading this
document.</p><h2 id=invocation>Compiler invocation</h2><p>The protocol buffer compiler produces Objective-C output when invoked with the
<code>--objc_out=</code> command-line flag. The parameter to the <code>--objc_out=</code> option is
the directory where you want the compiler to write your Objective-C output. The
compiler creates a header file and an implementation file for each <code>.proto</code> file
input. The names of the output files are computed by taking the name of the
<code>.proto</code> file and making the following changes:</p><ul><li>The file name is determined by converting the <code>.proto</code> file base name to
camel case. For example, <code>foo_bar.proto</code> will become <code>FooBar</code>.</li><li>The extension (<code>.proto</code>) is replaced with either <code>pbobjc.h</code> or <code>pbobjc.m</code>
for the header or implementation file, respectively.</li><li>The proto path (specified with the <code>--proto_path=</code> or <code>-I</code> command-line
flag) is replaced with the output path (specified with the <code>--objc_out=</code>
flag).</li></ul><p>So, for example, if you invoke the compiler as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --objc_out<span style=color:#ce5c00;font-weight:700>=</span>build/gen src/foo.proto src/bar/baz.proto
</span></span></code></pre></div><p>The compiler will read the files <code>src/foo.proto</code> and <code>src/bar/baz.proto</code> and
produce four output files: <code>build/gen/Foo.pbobjc.h</code>, <code>build/gen/Foo.pbobjc.m</code>,
<code>build/gen/bar/Baz.pbobjc.h</code>, and <code>build/gen/bar/Baz.pbobjc.m</code>. The compiler
will automatically create the directory <code>build/gen/bar</code> if necessary, but it
will <em>not</em> create <code>build</code> or <code>build/gen</code>; they must already exist.</p><h2 id=package>Packages</h2><p>The Objective-C code generated by the protocol buffer compiler is completely
unaffected by the package name defined in the <code>.proto</code> file, as Objective-C has
no language-enforced namespacing. Instead, Objective-C class names are
distinguished using prefixes, which you can find out about in the next section.</p><h2 id=prefix>Class prefix</h2><p>Given the following
<a href=/programming-guides/proto3#options>file option</a>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>objc_class_prefix</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;CGOOP&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The specified string - in this case, <code>CGOOP</code> - is prefixed in front of all
Objective-C classes generated for this <code>.proto</code> file. Use prefixes that are 3 or
more characters as recommended by Apple. Note that all 2 letter prefixes are
reserved by Apple.</p><h2 id=case>Camel case conversion</h2><p>Idiomatic Objective-C uses camel case for all identifiers.</p><p>Messages will not have their names converted because the standard for proto
files is to name messages in camel case already. It is assumed that the user has
bypassed the convention for good reason, and the implementation will conform
with their intentions.</p><p>Methods generated from field names and <code>oneof</code>s, <code>enum</code> declarations, and
extension accessors will have their names camel cased. In general to convert
from a proto name to a camel cased Objective-C name:</p><ul><li>The first letter converted to uppercase (except for fields, which always
start with a lowercase letter).</li><li>For each underscore in the name, the underscore is removed, and the
following letter is capitalized.</li></ul><p>So, for example, the field <code>foo_bar_baz</code> becomes <code>fooBarBaz</code>. The field
<code>FOO_bar</code> becomes <code>fooBar</code>.</p><h2 id=message>Messages</h2><p>Given a simple message declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates a class called <code>Foo</code>. If you specify an
<a href=#prefix><code>objc_class_prefix</code> file option</a>, the value of this option is
prepended to the generated class name.</p><p>In the case of outer messages that have names matching any C/C++ or Objective-C
keywords:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>static</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>the generated interfaces are suffixed by <code>_Class</code>, as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>static_Class</span> <span style=color:#000;font-weight:700>{}</span>
</span></span></code></pre></div><p>Note that as per the <a href=#case>camel case conversion rules</a> the name <code>static</code> is
<em>not</em> converted. In the case of an inner message that has a camel cased name
that is <code>FieldNumber</code> or <code>OneOfCase</code>, the generated interface will be the camel
cased name suffixed by <code>_Class</code> to make sure that the generated names do not
conflict with the <code>FieldNumber</code> enumerations or <code>OneOfCase</code> enumerations.</p><p>A message can also be declared inside another message.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>This generates:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Foo_Bar</span> : <span style=color:#000>GPBMessage</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><p>As you can see, the generated nested message name is the name of the generated
containing message name (<code>Foo</code>) appended with underscore (<code>_</code>) and the nested
message name (<code>Bar</code>).</p><blockquote><p><strong>Note:</strong> While we have tried to ensure that conflicts are kept to a minimum,
there are still potential cases where message names may conflict due to the
conversion between underscores and camel case. As an example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>foo_bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>foo</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>bar</span> <span style=color:#000;font-weight:700>{}</span> <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>will both generate <code>@interface foo_bar</code> and will conflict. The most pragmatic
solution may be to rename the conflicting messages.</p></blockquote><h3 id=gpbmessage-interface><code>GPBMessage</code> interface</h3><p><code>GPBMessage</code> is the superclass of all generated message classes. It is required
to support a superset of the following interface:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>GPBMessage</span> : <span style=color:#000>NSObject</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><p>The behaviors for this interface are as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Will do a deep copy.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>id</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>copy</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Will perform a deep equality comparison.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>BOOL</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>isEqual:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>id</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><h3 id=unknown-fields-proto2-only>Unknown fields (proto2 only)</h3><p>If a message created with an
<a href=/programming-guides/proto#updating>older version</a> of your .proto
definition is parsed with code generated from a newer version (or vice versa),
the message may contain optional or repeated fields that the "new" code does
not recognize. In proto2 generated code, these fields are not discarded and are
stored in the message&rsquo;s <code>unknownFields</code> property.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>copy</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>nullable</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>GPBUnknownFieldSet</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>unknownFields</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p>You can use the <code>GPBUnknownFieldSet</code> interface to fetch these fields by number
or loop over them as an array.</p><p>In proto3, unknown fields are simply discarded when a message is parsed.</p><h2 id=fields>Fields</h2><p>The following sections describe the code generated by the protocol buffer
compiler for message fields.</p><h3 id=singular3>Singular fields (proto3)</h3><p>For every singular field the compiler generates a property to store data and an
integer constant containing the field number. Message type fields also get a
<code>has..</code> property that lets you check if the field is set in the encoded message.
So, for example, given the following message:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>int32_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Qux</span> <span style=color:#000;font-weight:700>{</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>int32_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>string_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>Bar</span> <span style=color:#000>message_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>Qux</span> <span style=color:#000>enum_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>bytes_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo_Bar_FieldNumber</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// The generated field number name is the enclosing message names delimited by
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// underscores followed by &#34;FieldNumber&#34;, followed by the field name
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// camel cased.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Foo_Bar_FieldNumber_Int32Value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Foo_Bar</span> : <span style=color:#000>GPBMessage</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>int32_t</span> <span style=color:#000>int32Value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo_FieldNumber</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_Int32Value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_StringValue</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_MessageValue</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_EnumValue</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_BytesValue</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo_Qux</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_Qux_GPBUnrecognizedEnumeratorValue</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>kGPBUnrecognizedEnumeratorValue</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>...</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Foo</span> : <span style=color:#000>GPBMessage</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Field names are camel cased.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>int32_t</span> <span style=color:#000>int32Value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>copy</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>null_resettable</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSString</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>stringValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#000>hasMessageValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>strong</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>null_resettable</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Foo_Bar</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>messageValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Foo_Qux</span> <span style=color:#000>enumValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>copy</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>null_resettable</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSData</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>bytesValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><h4 id=special-naming-cases>Special naming cases</h4><p>There are cases where the field name generation rules may result in name
conflicts and names will need to be "uniqued". Such conflicts are resolved by
appending <code>_p</code> to the end of the field (<code>_p</code> was selected because it&rsquo;s pretty
unique, and stands for "property").</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo_array</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>      <span style=color:#8f5902;font-style:italic>// Ends with Array
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>bar_OneOfCase</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span>  <span style=color:#8f5902;font-style:italic>// Ends with oneofcase
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>id</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span>             <span style=color:#8f5902;font-style:italic>// Is a C/C++/Objective-C keyword
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>generates:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo_FieldNumber</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// If a non-repeatable field name ends with &#34;Array&#34; it will be suffixed
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// with &#34;_p&#34; to keep the name distinct from repeated types.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Foo_FieldNumber_FooArray_p</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// If a field name ends with &#34;OneOfCase&#34; it will be suffixed with &#34;_p&#34; to
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// keep the name distinct from OneOfCase properties.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Foo_FieldNumber_BarOneOfCase_p</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// If a field name is a C/C++/ObjectiveC keyword it will be suffixed with
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// &#34;_p&#34; to allow it to compile.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Foo_FieldNumber_Id_p</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Foo</span> : <span style=color:#000>GPBMessage</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>int32_t</span> <span style=color:#000>fooArray_p</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>int32_t</span> <span style=color:#000>barOneOfCase_p</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>int32_t</span> <span style=color:#000>id_p</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><h4 id=default>Default values</h4><p>The <a href=/programming-guides/proto3#default>default value</a> for
numeric types is <code>0</code>.</p><p>The default value for strings is <code>@""</code>, and the default value for bytes is
<code>[NSData data]</code>.</p><p>Assigning <code>nil</code> to a string field will assert in debug, and set the field to
<code>@""</code> in release. Assigning <code>nil</code> to a bytes field will assert in debug and set
the field to <code>[NSData data]</code> in release. To test whether a bytes or string field
is set requires testing its length property and comparing it to 0.</p><p>The default "empty" value for a message is an instance of the default message.
To clear a message value it should be set to <code>nil</code>. Accessing a cleared message
will return an instance of the default message and the <code>hasFoo</code> method will
return false.</p><p>The default message returned for a field is a local instance. The reason behind
returning a default message instead of <code>nil</code> is that in the case of:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>     <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>b</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>Bar</span> <span style=color:#000>a</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The implementation will support:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[[</span><span style=color:#000>Foo</span> <span style=color:#000>alloc</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000>init</span><span style=color:#000;font-weight:700>];</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>b</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p>where <code>a</code> will be automatically created via the accessors if necessary. If
<code>foo.a</code> returned <code>nil</code>, the <code>foo.a.b</code> setter pattern would not work.</p><h3 id=singular2>Singular fields (proto2)</h3><p>For every singular field the compiler generates a property to store data, an
integer constant containing the field number, and a <code>has..</code> property that lets
you check if the field is set in the encoded message. So, for example, given the
following message:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>int32_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Qux</span> <span style=color:#000;font-weight:700>{</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>int32_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>string_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>message_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Qux</span> <span style=color:#000>enum_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>bytes_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Enum Foo_Qux
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo_Qux</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_Qux_Flupple</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>GPBEnumDescriptor</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Foo_Qux_EnumDescriptor</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#000>Foo_Qux_IsValidValue</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>int32_t</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Message Foo
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo_FieldNumber</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_Int32Value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_MessageValue</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_EnumValue</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_BytesValue</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_StringValue</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Foo</span> : <span style=color:#000>GPBMessage</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#000>hasInt32Value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>int32_t</span> <span style=color:#000>int32Value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#000>hasStringValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>copy</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>null_resettable</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSString</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>stringValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#000>hasMessageValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>strong</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>null_resettable</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Foo_Bar</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>messageValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#000>hasEnumValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Foo_Qux</span> <span style=color:#000>enumValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#000>hasBytesValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>copy</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>null_resettable</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSData</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>bytesValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Message Foo_Bar
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo_Bar_FieldNumber</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_Bar_FieldNumber_Int32Value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Foo_Bar</span> : <span style=color:#000>GPBMessage</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#000>hasInt32Value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>int32_t</span> <span style=color:#000>int32Value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><h4 id=special-naming-cases-1>Special naming cases</h4><p>There are cases where the field name generation rules may result in name
conflicts and names will need to be "uniqued". Such conflicts are resolved by
appending <code>_p</code> to the end of the field (<code>_p</code> was selected because it&rsquo;s pretty
unique, and stands for "property").</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo_array</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>      <span style=color:#8f5902;font-style:italic>// Ends with Array
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>bar_OneOfCase</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span>  <span style=color:#8f5902;font-style:italic>// Ends with oneofcase
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>id</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span>             <span style=color:#8f5902;font-style:italic>// Is a C/C++/Objective-C keyword
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>generates:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo_FieldNumber</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// If a non-repeatable field name ends with &#34;Array&#34; it will be suffixed
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// with &#34;_p&#34; to keep the name distinct from repeated types.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Foo_FieldNumber_FooArray_p</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// If a field name ends with &#34;OneOfCase&#34; it will be suffixed with &#34;_p&#34; to
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// keep the name distinct from OneOfCase properties.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Foo_FieldNumber_BarOneOfCase_p</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// If a field name is a C/C++/ObjectiveC keyword it will be suffixed with
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// &#34;_p&#34; to allow it to compile.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Foo_FieldNumber_Id_p</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Foo</span> : <span style=color:#000>GPBMessage</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>int32_t</span> <span style=color:#000>fooArray_p</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>int32_t</span> <span style=color:#000>barOneOfCase_p</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>int32_t</span> <span style=color:#000>id_p</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><h4 id=default>Default values (optional fields only)</h4><p>The <a href=/programming-guides/proto#optional>default value</a> for
numeric types, if no explicit default was specified by the user, is <code>0</code>.</p><p>The default value for strings is <code>@""</code>, and the default value for bytes is
<code>[NSData data]</code>.</p><p>Assigning <code>nil</code> to a string field will assert in debug, and set the field to
<code>@""</code> in release. Assigning <code>nil</code> to a bytes field will assert in debug and set
the field to <code>[NSData data]</code> in release. To test whether a bytes or string field
is set requires testing its length property and comparing it to 0.</p><p>The default "empty" value for a message is an instance of the default message.
To clear a message value it should be set to <code>nil</code>. Accessing a cleared message
will return an instance of the default message and the <code>hasFoo</code> method will
return false.</p><p>The default message returned for a field is a local instance. The reason behind
returning a default message instead of <code>nil</code> is that in the case of:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>     <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>b</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>Bar</span> <span style=color:#000>a</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The implementation will support:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[[</span><span style=color:#000>Foo</span> <span style=color:#000>alloc</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000>init</span><span style=color:#000;font-weight:700>];</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>b</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p>where <code>a</code> will be automatically created via the accessors if necessary. If
<code>foo.a</code> returned <code>nil</code>, the <code>foo.a.b</code> setter pattern would not work.</p><h3 id=repeated>Repeated fields</h3><p>Like singular fields(<a href=#singular2>proto2</a> <a href=#singular3>proto3</a>), the protocol
buffer compiler generates one data property for each repeated field. This data
property is a <code>GPB&lt;VALUE>Array</code> depending on the field type where <code>&lt;VALUE></code> can
be one of <code>UInt32</code>, <code>Int32</code>, <code>UInt64</code>, <code>Int64</code>, <code>Bool</code>, <code>Float</code>, <code>Double</code>, or
<code>Enum</code>. <code>NSMutableArray</code> will be used for <code>string</code>, <code>bytes</code> and <code>message</code> types.
Field names for repeated types have <code>Array</code> appended to them. The reason for
appending <code>Array</code> in the Objective-C interface is to make the code more
readable. Repeated fields in proto files tend to have singular names which do
not read well in standard Objective-C usage. Making the singular names plural
would be more idiomatic Objective-C, however pluralization rules are too complex
to support in the compiler.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Qux</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>int32_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>string_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Bar</span> <span style=color:#000>message_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Qux</span> <span style=color:#000>enum_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>generates:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo_FieldNumber</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_Int32ValueArray</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_StringValueArray</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_MessageValueArray</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_EnumValueArray</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Foo</span> : <span style=color:#000>GPBMessage</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Field names for repeated types are the camel case name with
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// &#34;Array&#34; suffixed.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>strong</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>null_resettable</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span> <span style=color:#000>GPBInt32Array</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>int32ValueArray</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readonly</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>int32ValueArray_Count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>strong</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>null_resettable</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span> <span style=color:#000>NSMutableArray</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>stringValueArray</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readonly</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>stringValueArray_Count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>strong</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>null_resettable</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span> <span style=color:#000>NSMutableArray</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>messageValueArray</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readonly</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>messageValueArray_Count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>strong</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>null_resettable</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span> <span style=color:#000>GPBEnumArray</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>enumValueArray</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readonly</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>enumValueArray_Count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><p>For string, bytes and message fields, elements of the array are <code>NSString*</code>,
<code>NSData*</code> and pointers to subclasses of <code>GPBMessage</code> respectively.</p><h4 id=repeateddefault>Default values</h4><p>The <a href=/programming-guides/proto3#default>default value</a> for a
repeated field is to be empty. In Objective-C generated code, this is an empty
<code>GPB&lt;VALUE>Array</code>. If you access an empty repeated field, you&rsquo;ll get back an
empty array that you can update like any other repeated field array.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>myFoo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[[</span><span style=color:#000>Foo</span> <span style=color:#000>alloc</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000>init</span><span style=color:#000;font-weight:700>];</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>myFoo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>stringValueArray</span> <span style=color:#f57900>addObject</span><span style=color:#000;font-weight:700>:</span><span style=color:#4e9a06>@&#34;A string&#34;</span><span style=color:#000;font-weight:700>]</span>
</span></span></code></pre></div><p>You can also use the provided <code>&lt;field>Array_Count</code> property to check if the
array for a particular repeated field is empty without having to create the
array:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>myFoo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>messageValueArray_Count</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// There is something in the array...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=gpbvaluearray-interface><code>GPB&lt;VALUE>Array</code> interface</h4><p><code>GPB&lt;VALUE>Array</code>s (aside from <code>GPBEnumArray</code>, which we&rsquo;ll look at below) have
the following interface:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>GPBArray</span> : <span style=color:#000>NSObject</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readonly</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>array</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>arrayWithValue:</span><span style=color:#000;font-weight:700>()</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>arrayWithValueArray:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPBArray</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>array</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>arrayWithCapacity:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Initializes the array, copying the values.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithValueArray:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPBArray</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>array</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithValues:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span>  <span style=color:#000;font-weight:700>[])</span><span style=color:#000>values</span>
</span></span><span style=display:flex><span>                         <span style=color:#000>count:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span> <span style=color:#000>NS_DESIGNATED_INITIALIZER</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithCapacity:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>()</span><span style=color:#000>valueAtIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>index</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>enumerateValuesWithBlock:</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>^</span><span style=color:#000;font-weight:700>)(</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>idx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>stop</span><span style=color:#000;font-weight:700>))</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>enumerateValuesWithOptions:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSEnumerationOptions</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>opts</span>
</span></span><span style=display:flex><span>    <span style=color:#000>usingBlock:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>^</span><span style=color:#000;font-weight:700>)(</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>idx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>stop</span><span style=color:#000;font-weight:700>))</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>addValue:</span><span style=color:#000;font-weight:700>()</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>addValues:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span>  <span style=color:#000;font-weight:700>[])</span><span style=color:#000>values</span> <span style=color:#000>count:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>addValuesFromArray:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPBArray</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>array</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>removeValueAtIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>removeAll</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>exchangeValueAtIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>idx1</span>
</span></span><span style=display:flex><span>            <span style=color:#000>withValueAtIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>idx2</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>insertValue:</span><span style=color:#000;font-weight:700>()</span><span style=color:#000>value</span> <span style=color:#000>atIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>replaceValueAtIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>index</span> <span style=color:#000>withValue:</span><span style=color:#000;font-weight:700>()</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><p><code>GPBEnumArray</code> has a slightly different interface to handle the validation
function and to access raw values.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>GPBEnumArray</span> : <span style=color:#000>NSObject</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readonly</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readonly</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>GPBEnumValidationFunc</span> <span style=color:#000>validationFunc</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>array</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>arrayWithValidationFunction:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>GPBEnumValidationFunc</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>func</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>arrayWithValidationFunction:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>GPBEnumValidationFunc</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>func</span>
</span></span><span style=display:flex><span>                                   <span style=color:#000>rawValue:</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>arrayWithValueArray:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPBEnumArray</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>array</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>arrayWithValidationFunction:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>GPBEnumValidationFunc</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>func</span>
</span></span><span style=display:flex><span>                                   <span style=color:#000>capacity:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithValidationFunction:</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>GPBEnumValidationFunc</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>func</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Initializes the array, copying the values.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithValueArray:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPBEnumArray</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>array</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithValidationFunction:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>GPBEnumValidationFunc</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>func</span>
</span></span><span style=display:flex><span>    <span style=color:#000>values:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>int32_t</span> <span style=color:#000;font-weight:700>[])</span><span style=color:#000>values</span>
</span></span><span style=display:flex><span>    <span style=color:#000>count:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span> <span style=color:#000>NS_DESIGNATED_INITIALIZER</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithValidationFunction:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>GPBEnumValidationFunc</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>func</span>
</span></span><span style=display:flex><span>                                  <span style=color:#000>capacity:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// These will return kGPBUnrecognizedEnumeratorValue if the value at index
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// is not a valid enumerator as defined by validationFunc. If the actual
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// value is desired, use the &#34;raw&#34; version of the method.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>int32_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>valueAtIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>index</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>enumerateValuesWithBlock:</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>^</span><span style=color:#000;font-weight:700>)(</span><span style=color:#000>int32_t</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>idx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>stop</span><span style=color:#000;font-weight:700>))</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>enumerateValuesWithOptions:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSEnumerationOptions</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>opts</span>
</span></span><span style=display:flex><span>    <span style=color:#000>usingBlock:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>^</span><span style=color:#000;font-weight:700>)(</span><span style=color:#000>int32_t</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>idx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>stop</span><span style=color:#000;font-weight:700>))</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// These methods bypass the validationFunc to provide access to values
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// that were not known at the time the binary was compiled.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>int32_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>rawValueAtIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>index</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>enumerateRawValuesWithBlock:</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>^</span><span style=color:#000;font-weight:700>)(</span><span style=color:#000>int32_t</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>idx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>stop</span><span style=color:#000;font-weight:700>))</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>enumerateRawValuesWithOptions:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSEnumerationOptions</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>opts</span>
</span></span><span style=display:flex><span>    <span style=color:#000>usingBlock:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>^</span><span style=color:#000;font-weight:700>)(</span><span style=color:#000>int32_t</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>idx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>stop</span><span style=color:#000;font-weight:700>))</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// If value is not a valid enumerator as defined by validationFunc, these
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// methods will assert in debug, and will log in release and assign the value
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// to the default value. Use the rawValue methods below to assign
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// non enumerator values.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>addValue:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>int32_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>addValues:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>int32_t</span> <span style=color:#000;font-weight:700>[])</span><span style=color:#000>values</span> <span style=color:#000>count:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>insertValue:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>int32_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>value</span> <span style=color:#000>atIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>replaceValueAtIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>index</span> <span style=color:#000>withValue:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>int32_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// These methods bypass the validationFunc to provide setting of values that
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// were not known at the time the binary was compiled.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>addRawValue:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>int32_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>rawValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>addRawValuesFromEnumArray:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPBEnumArray</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>array</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>addRawValues:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>int32_t</span> <span style=color:#000;font-weight:700>[])</span><span style=color:#000>values</span> <span style=color:#000>count:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>replaceValueAtIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>index</span> <span style=color:#000>withRawValue:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>int32_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>rawValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>insertRawValue:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>int32_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>value</span> <span style=color:#000>atIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// No validation applies to these methods.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>removeValueAtIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>removeAll</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>exchangeValueAtIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>idx1</span>
</span></span><span style=display:flex><span>            <span style=color:#000>withValueAtIndex:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>idx2</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><h3 id=oneof>Oneof fields</h3><p>Given a message with <a href=/programming-guides/proto3#oneof>oneof</a>
field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Order</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>OrderID</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>address</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>};</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>quantity</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>};</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Order_OrderID_OneOfCase</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Order_OrderID_OneOfCase_GPBUnsetOneOfCase</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Order_OrderID_OneOfCase_Name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Order_OrderID_OneOfCase_Address</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Order_FieldNumber</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Order_FieldNumber_Name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Order_FieldNumber_Address</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Order_FieldNumber_Quantity</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Order</span> : <span style=color:#000>GPBMessage</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Order_OrderID_OneOfCase</span> <span style=color:#000>orderIDOneOfCase</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>copy</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>null_resettable</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSString</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>int32_t</span> <span style=color:#000>address</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>int32_t</span> <span style=color:#000>quantity</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>Order_ClearOrderIDOneOfCase</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Order</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>Setting one of the oneof properties will clear all the other properties
associated with the oneof.</p><p><code>&lt;ONE_OF_NAME>_OneOfCase_GPBUnsetOneOfCase</code> will always be equivalent to 0 to
allow for easy testing to see if any field in the oneof is set.</p><h3 id=map-fields>Map Fields</h3><p>For this message definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>a_map</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>b_map</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>};</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler generates the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo_FieldNumber</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_AMap</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_FieldNumber_BMap</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Foo</span> : <span style=color:#000>GPBMessage</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Map names are the camel case version of the field name.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>strong</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>null_resettable</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>GPBInt32ObjectDictionary</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>aMap</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readonly</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>aMap_Count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>strong</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>null_resettable</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSMutableDictionary</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>bMap</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readonly</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>bMap_Count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><p>Cases where keys are strings and values are strings, bytes, or messages are
handled by <code>NSMutableDictionary</code>.</p><p>Other cases are:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#000>GBP</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;&lt;</span><span style=color:#000>VALUE</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>Dictionary</span>
</span></span></code></pre></div><p>where:</p><ul><li><code>&lt;KEY></code> is Uint32, Int32, UInt64, Int64, Bool or String.</li><li><code>&lt;VALUE></code> is UInt32, Int32, UInt64, Int64, Bool, Float, Double, Enum, or
Object. <code>Object</code> is used for values of type <code>string</code> <code>bytes</code> or <code>message</code> to
cut down on the number of classes and is in line with how Objective-C works
with <code>NSMutableDictionary</code>.</li></ul><h4 id=repeateddefault>Default values</h4><p>The <a href=/programming-guides/proto3#default>default value</a> for a map
field is empty. In Objective-C generated code, this is an empty
<code>GBP&lt;KEY>&lt;VALUE>Dictionary</code>. If you access an empty map field, you&rsquo;ll get back
an empty dictionary that you can update like any other map field.</p><p>You can also use the provided <code>&lt;mapField>_Count</code> property to check if a
particular map is empty:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>myFoo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>myMap_Count</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// There is something in the map...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=gbpkeyvaluedictionary-interface><code>GBP&lt;KEY>&lt;VALUE>Dictionary</code> interface</h4><p>The <code>GBP&lt;KEY>&lt;VALUE>Dictionary</code> (apart from <code>GBP&lt;KEY>ObjectDictionary</code> and
<code>GBP&lt;KEY>EnumDictionary</code>) interface is as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>GPB</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f57900>Dictionary</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#000>NSObject</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readonly</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionary</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionaryWithValue:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000;font-weight:700>)</span><span style=color:#000>value</span>
</span></span><span style=display:flex><span>                             <span style=color:#000>forKey:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionaryWithValues:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span>  <span style=color:#000;font-weight:700>[])</span><span style=color:#000>values</span>
</span></span><span style=display:flex><span>                             <span style=color:#000>forKeys:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>[])</span><span style=color:#000>keys</span>
</span></span><span style=display:flex><span>                               <span style=color:#000>count:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionaryWithDictionary:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPB</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>Dictionary</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionary</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionaryWithCapacity:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>numItems</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithValues:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span>  <span style=color:#000;font-weight:700>[])</span><span style=color:#000>values</span>
</span></span><span style=display:flex><span>                       <span style=color:#000>forKeys:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>[])</span><span style=color:#000>keys</span>
</span></span><span style=display:flex><span>                         <span style=color:#000>count:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span> <span style=color:#000>NS_DESIGNATED_INITIALIZER</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithDictionary:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPB</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>Dictionary</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionary</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithCapacity:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>numItems</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>BOOL</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>valueForKey:</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>key</span> <span style=color:#000>value:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>VALUE</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>enumerateKeysAndValuesUsingBlock:</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>^</span><span style=color:#000;font-weight:700>)(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span>  <span style=color:#000>value</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>stop</span><span style=color:#000;font-weight:700>))</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>removeValueForKey:</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>aKey</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>removeAll</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>setValue:</span><span style=color:#000;font-weight:700>()</span><span style=color:#000>value</span> <span style=color:#000>forKey:</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>addEntriesFromDictionary:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPB</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>Dictionary</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>otherDictionary</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><p>The <code>GBP&lt;KEY>ObjectDictionary</code> interface is:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>GPB</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f57900>ObjectDictionary</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#000>NSObject</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readonly</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionary</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionaryWithObject:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>id</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>object</span>
</span></span><span style=display:flex><span>                             <span style=color:#000>forKey:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>  <span style=color:#000>dictionaryWithObjects:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#204a87;font-weight:700>id</span> <span style=color:#000>GPB_UNSAFE_UNRETAINED</span> <span style=color:#000;font-weight:700>[])</span><span style=color:#000>objects</span>
</span></span><span style=display:flex><span>                <span style=color:#000>forKeys:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>[])</span><span style=color:#000>keys</span>
</span></span><span style=display:flex><span>                  <span style=color:#000>count:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionaryWithDictionary:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPB</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>ObjectDictionary</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionary</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionaryWithCapacity:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>numItems</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithObjects:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#204a87;font-weight:700>id</span> <span style=color:#000>GPB_UNSAFE_UNRETAINED</span> <span style=color:#000;font-weight:700>[])</span><span style=color:#000>objects</span>
</span></span><span style=display:flex><span>                        <span style=color:#000>forKeys:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>[])</span><span style=color:#000>keys</span>
</span></span><span style=display:flex><span>                          <span style=color:#000>count:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span> <span style=color:#000>NS_DESIGNATED_INITIALIZER</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithDictionary:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPB</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>ObjectDictionary</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionary</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithCapacity:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>numItems</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>id</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>objectForKey:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>uint32_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>enumerateKeysAndObjectsUsingBlock:</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>^</span><span style=color:#000;font-weight:700>)(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>id</span> <span style=color:#000>object</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>stop</span><span style=color:#000;font-weight:700>))</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>removeObjectForKey:</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>aKey</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>removeAll</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>setObject:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>id</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>object</span> <span style=color:#000>forKey:</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>addEntriesFromDictionary:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPB</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>ObjectDictionary</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>otherDictionary</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><p><code>GBP&lt;KEY>EnumDictionary</code> has a slightly different interface to handle the
validation function and to access raw values.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>GPB</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f57900>EnumDictionary</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#000>NSObject</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readonly</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSUInteger</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readonly</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>GPBEnumValidationFunc</span> <span style=color:#000>validationFunc</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionary</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionaryWithValidationFunction:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>GPBEnumValidationFunc</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>func</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionaryWithValidationFunction:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>GPBEnumValidationFunc</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>func</span>
</span></span><span style=display:flex><span>                                        <span style=color:#000>rawValue:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>int32_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>rawValue</span>
</span></span><span style=display:flex><span>                                          <span style=color:#000>forKey:</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionaryWithValidationFunction:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>GPBEnumValidationFunc</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>func</span>
</span></span><span style=display:flex><span>                                       <span style=color:#000>rawValues:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>int32_t</span> <span style=color:#000;font-weight:700>[])</span><span style=color:#000>values</span>
</span></span><span style=display:flex><span>                                         <span style=color:#000>forKeys:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>_t</span> <span style=color:#000;font-weight:700>[])</span><span style=color:#000>keys</span>
</span></span><span style=display:flex><span>                                           <span style=color:#000>count:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionaryWithDictionary:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPB</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>EnumDictionary</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionary</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionaryWithValidationFunction:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>GPBEnumValidationFunc</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>func</span>
</span></span><span style=display:flex><span>                                        <span style=color:#000>capacity:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>numItems</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithValidationFunction:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>GPBEnumValidationFunc</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>func</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithValidationFunction:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>GPBEnumValidationFunc</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>func</span>
</span></span><span style=display:flex><span>                                 <span style=color:#000>rawValues:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>int32_t</span> <span style=color:#000;font-weight:700>[])</span><span style=color:#000>values</span>
</span></span><span style=display:flex><span>                                   <span style=color:#000>forKeys:</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>_t</span> <span style=color:#000;font-weight:700>[])</span><span style=color:#000>keys</span>
</span></span><span style=display:flex><span>                                     <span style=color:#000>count:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>count</span> <span style=color:#000>NS_DESIGNATED_INITIALIZER</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithDictionary:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPB</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>EnumDictionary</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>dictionary</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithValidationFunction:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>GPBEnumValidationFunc</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>func</span>
</span></span><span style=display:flex><span>                                  <span style=color:#000>capacity:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSUInteger</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>numItems</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// These will return kGPBUnrecognizedEnumeratorValue if the value for the key
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// is not a valid enumerator as defined by validationFunc. If the actual value is
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// desired, use &#34;raw&#34; version of the method.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>BOOL</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>valueForKey:</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>key</span> <span style=color:#000>value:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>int32_t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>enumerateKeysAndValuesUsingBlock:</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>^</span><span style=color:#000;font-weight:700>)(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>_t</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>int32_t</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>stop</span><span style=color:#000;font-weight:700>))</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// These methods bypass the validationFunc to provide access to values that were not
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// known at the time the binary was compiled.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>BOOL</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>valueForKey:</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>key</span> <span style=color:#000>rawValue:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>nullable</span> <span style=color:#000>int32_t</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>rawValue</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>enumerateKeysAndRawValuesUsingBlock:</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>^</span><span style=color:#000;font-weight:700>)(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>_t</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>int32_t</span> <span style=color:#000>rawValue</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>stop</span><span style=color:#000;font-weight:700>))</span><span style=color:#000>block</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>addRawEntriesFromDictionary:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GPB</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>EnumDictionary</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>otherDictionary</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// If value is not a valid enumerator as defined by validationFunc, these
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// methods will assert in debug, and will log in release and assign the value
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// to the default value. Use the rawValue methods below to assign non enumerator
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// values.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>setValue:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>int32_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>value</span> <span style=color:#000>forKey:</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// This method bypass the validationFunc to provide setting of values that were not
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// known at the time the binary was compiled.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>setRawValue:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>int32_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>rawValue</span> <span style=color:#000>forKey:</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// No validation applies to these methods.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>removeValueForKey:</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>KEY</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000>_t</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>aKey</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>void</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>removeAll</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><h2 id=enum>Enumerations</h2><p>Given an enum definition like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_B</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_C</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>the generated code will be:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// The generated enum value name will be the enumeration name followed by
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// an underscore and then the enumerator name converted to camel case.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// GPB_ENUM is a macro defined in the Objective-C Protocol Buffer headers
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// that enforces all enum values to be int32 and aids in Swift Enumeration
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// support.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_GPBUnrecognizedEnumeratorValue</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>kGPBUnrecognizedEnumeratorValue</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic>//proto3 only
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Foo_ValueA</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_ValueB</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_ValueC</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Returns information about what values this enum type defines.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>GPBEnumDescriptor</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Foo_EnumDescriptor</span><span style=color:#000;font-weight:700>();</span>
</span></span></code></pre></div><p>Each enumeration has a validation function declared for it:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Returns YES if the given numeric value matches one of Foo&#39;s
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// defined values (0, 1, 5).
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#000>Foo_IsValidValue</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>int32_t</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>and an enumeration descriptor accessor function declared for it:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// GPBEnumDescriptor is defined in the runtime and contains information
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// about the enum definition, such as the enum name, enum value and enum value
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// validation function.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPBEnumDescriptor</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>GPBEnumDescriptorAccessorFunc</span><span style=color:#000;font-weight:700>)();</span>
</span></span></code></pre></div><p>The enum descriptor accessor functions are C functions, as opposed to methods on
the enumeration class, because they are rarely used by client software. This
will cut down on the amount of Objective-C runtime information generated, and
potentially allow the linker to deadstrip them.</p><p>In the case of outer enums that have names matching any C/C++ or Objective-C
keywords, such as:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>method</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>the generated interfaces are suffixed with <code>_Enum</code>, as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// The generated enumeration name is the keyword suffixed by _Enum.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Method_Enum</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{}</span>
</span></span></code></pre></div><p>An enum can also be declared inside another message. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_B</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_C</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>Bar</span> <span style=color:#000>aBar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>Bar</span> <span style=color:#000>aDifferentBar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Bar</span> <span style=color:#000>aRepeatedBar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>generates:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo_Bar</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_Bar_GPBUnrecognizedEnumeratorValue</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>kGPBUnrecognizedEnumeratorValue</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic>//proto3 only
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Foo_Bar_ValueA</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_Bar_ValueB</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_Bar_ValueC</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>GPBEnumDescriptor</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Foo_Bar_EnumDescriptor</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>BOOL</span> <span style=color:#000>Foo_Bar_IsValidValue</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>int32_t</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Foo</span> : <span style=color:#000>GPBMessage</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Foo_Bar</span> <span style=color:#000>aBar</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Foo_Bar</span> <span style=color:#000>aDifferentBar</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>strong</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>null_resettable</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span> <span style=color:#000>GPBEnumArray</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>aRepeatedBarArray</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// proto3 only Every message that has an enum field will have an accessor function to get
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// the value of that enum as an integer. This allows clients to deal with
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// raw values if they need to.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>int32_t</span> <span style=color:#000>Foo_ABar_RawValue</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>SetFoo_ABar_RawValue</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>int32_t</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>int32_t</span> <span style=color:#000>Foo_ADifferentBar_RawValue</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>SetFoo_ADifferentBar_RawValue</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>int32_t</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>All enumeration fields have the ability to access the value as a typed
enumerator (<code>Foo_Bar</code> in the example above), or, if using proto3, as a raw
<code>int32_t</code> value (using the accessor functions in the example above). This is to
support the case where the server returns values that the client may not
recognize due to the client and server being compiled with different versions of
the proto file.</p><p>Unrecognized enum values are treated differently depending on which protocol
buffers version you are using. In proto3, <code>kGPBUnrecognizedEnumeratorValue</code> is
returned for the typed enumerator value if the enumerator value in the parsed
message data is not one that the code reading it was compiled to support. If the
actual value is desired, use the raw value accessors to get the value as an
<code>int32_t</code>. If you are using proto2, unrecognized enum values are treated as
unknown fields.</p><p><code>kGPBUnrecognizedEnumeratorValue</code> is defined as <code>0xFBADBEEF</code>, and it will be an
error if any enumerator in an enumeration has this value. Attempting to set any
enumeration field to this value is a runtime error. Similarly, attempting to set
any enumeration field to an enumerator not defined by its enumeration type using
the typed accessors is a runtime error. In both error cases, debug builds will
cause an assertion and release builds will log and set the field to its default
value (<code>0</code>).</p><p>The raw value accessors are defined as C functions instead of as Objective-C
methods because they are not used in most cases. Declaring them as C functions
cuts down on wasted Objective-C runtime information and allows the linker to
potentially dead strip them.</p><h3 id=swift-enumeration-support>Swift Enumeration Support</h3><p>Apple documents how they import Objective-C enumerations to Swift enumerations
in
<a href=https://developer.apple.com/library/ios/documentation/Swift/Conceptual/BuildingCocoaApps/InteractingWithCAPIs.html#//apple_ref/doc/uid/TP40014216-CH8-XID_11>Interacting with C APIs</a>.
Protocol buffer-generated enumerations support Objective-C to Swift conversions.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Proto
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>generates:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Objective-C
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>GPB_ENUM</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_GPBUnrecognizedEnumeratorValue</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>kGPBUnrecognizedEnumeratorValue</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Foo_ValueA</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span></code></pre></div><p>which in Swift code will allow:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Swift</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>let</span> <span style=color:#000>aValue</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ValueA</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>let</span> <span style=color:#000>anotherValue</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>.</span><span style=color:#000>GPBUnrecognizedEnumeratorValue</span>
</span></span></code></pre></div><h2 id=wellknown>Well-known types (proto3 only)</h2><p>If you use any of the message types provided with proto3, they will in general
just use their proto definitions in generated Objective-C code, though we supply
some basic conversion methods in categories to make using them simpler. Note
that we do not have special APIs for all well-known types yet, including
<a href=/programming-guides/proto3#any><code>Any</code></a> (there is currently no
helper method to convert an <code>Any</code>&rsquo;s message value into a message of the
appropriate type).</p><h3 id=time-stamps>Time Stamps</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>GPBTimeStamp</span> <span style=color:#f57900>(GPBWellKnownTypes)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>strong</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSDate</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>date</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSTimeInterval</span> <span style=color:#000>timeIntervalSince1970</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithDate:</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>NSDate</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>date</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithTimeIntervalSince1970:</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>(</span><span style=color:#000>NSTimeInterval</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>timeIntervalSince1970</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><h3 id=duration>Duration</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>GPBDuration</span> <span style=color:#f57900>(GPBWellKnownTypes)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@property</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>nonatomic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>readwrite</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>NSTimeInterval</span> <span style=color:#000>timeIntervalSince1970</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>-</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>instancetype</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>initWithTimeIntervalSince1970:</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>(</span><span style=color:#000>NSTimeInterval</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>timeIntervalSince1970</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><h2 id=extensions>Extensions (proto2 only)</h2><p>Given a message with an
<a href=/programming-guides/proto#extensions>extension range</a>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extensions</span> <span style=color:#0000cf;font-weight:700>100</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#0000cf;font-weight:700>199</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>101</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>repeated_foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>102</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>103</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>repeated_bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>104</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler generates the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#8f5902;font-style:italic># File Test2Root
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Test2Root</span> : <span style=color:#000>GPBRootObject</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// The base class provides:
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//   + (GPBExtensionRegistry *)extensionRegistry;
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// which is an GPBExtensionRegistry that includes all the extensions defined by
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// this file and all files that it depends on.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Test2Root</span> <span style=color:#f57900>(DynamicMethods)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>GPBExtensionDescriptor</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>GPBExtensionDescriptor</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>repeatedFoo</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Message Foo
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Foo</span> : <span style=color:#000>GPBMessage</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Message Bar
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Bar</span> : <span style=color:#000>GPBMessage</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@interface</span> <span style=color:#000>Bar</span> <span style=color:#f57900>(DynamicMethods)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>GPBExtensionDescriptor</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>+</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>GPBExtensionDescriptor</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>repeatedBar</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>@end</span>
</span></span></code></pre></div><p>To get and set these extension fields, you use the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>fooMsg</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[[</span><span style=color:#000>Foo</span> <span style=color:#000>alloc</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000>init</span><span style=color:#000;font-weight:700>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Set the single field extensions
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>[</span><span style=color:#000>fooMsg</span> <span style=color:#f57900>setExtension</span><span style=color:#000;font-weight:700>:[</span><span style=color:#000>Test2Root</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>]</span> <span style=color:#f57900>value</span><span style=color:#000;font-weight:700>:</span><span style=color:#0000cf;font-weight:700>@5</span><span style=color:#000;font-weight:700>];</span>
</span></span><span style=display:flex><span><span style=color:#000>NSAssert</span><span style=color:#000;font-weight:700>([</span><span style=color:#000>fooMsg</span> <span style=color:#f57900>hasExtension</span><span style=color:#000;font-weight:700>:[</span><span style=color:#000>Test2Root</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>]]);</span>
</span></span><span style=display:flex><span><span style=color:#000>NSAssert</span><span style=color:#000;font-weight:700>([[</span><span style=color:#000>fooMsg</span> <span style=color:#f57900>getExtension</span><span style=color:#000;font-weight:700>:[</span><span style=color:#000>Test2Root</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>]]</span> <span style=color:#000>intValue</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Add two things to the repeated extension:
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>[</span><span style=color:#000>fooMsg</span> <span style=color:#f57900>addExtension</span><span style=color:#000;font-weight:700>:[</span><span style=color:#000>Test2Root</span> <span style=color:#000>repeatedFoo</span><span style=color:#000;font-weight:700>]</span> <span style=color:#f57900>value</span><span style=color:#000;font-weight:700>:</span><span style=color:#0000cf;font-weight:700>@1</span><span style=color:#000;font-weight:700>];</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>fooMsg</span> <span style=color:#f57900>addExtension</span><span style=color:#000;font-weight:700>:[</span><span style=color:#000>Test2Root</span> <span style=color:#000>repeatedFoo</span><span style=color:#000;font-weight:700>]</span> <span style=color:#f57900>value</span><span style=color:#000;font-weight:700>:</span><span style=color:#0000cf;font-weight:700>@2</span><span style=color:#000;font-weight:700>];</span>
</span></span><span style=display:flex><span><span style=color:#000>NSAssert</span><span style=color:#000;font-weight:700>([</span><span style=color:#000>fooMsg</span> <span style=color:#f57900>hasExtension</span><span style=color:#000;font-weight:700>:[</span><span style=color:#000>Test2Root</span> <span style=color:#000>repeatedFoo</span><span style=color:#000;font-weight:700>]]);</span>
</span></span><span style=display:flex><span><span style=color:#000>NSAssert</span><span style=color:#000;font-weight:700>([[</span><span style=color:#000>fooMsg</span> <span style=color:#f57900>getExtension</span><span style=color:#000;font-weight:700>:[</span><span style=color:#000>Test2Root</span> <span style=color:#000>repeatedFoo</span><span style=color:#000;font-weight:700>]]</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Clearing
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>[</span><span style=color:#000>fooMsg</span> <span style=color:#f57900>clearExtension</span><span style=color:#000;font-weight:700>:[</span><span style=color:#000>Test2Root</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>]];</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>fooMsg</span> <span style=color:#f57900>clearExtension</span><span style=color:#000;font-weight:700>:[</span><span style=color:#000>Test2Root</span> <span style=color:#000>repeatedFoo</span><span style=color:#000;font-weight:700>]];</span>
</span></span><span style=display:flex><span><span style=color:#000>NSAssert</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>fooMsg</span> <span style=color:#f57900>hasExtension</span><span style=color:#000;font-weight:700>:[</span><span style=color:#000>Test2Root</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>]]);</span>
</span></span><span style=display:flex><span><span style=color:#000>NSAssert</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>fooMsg</span> <span style=color:#f57900>hasExtension</span><span style=color:#000;font-weight:700>:[</span><span style=color:#000>Test2Root</span> <span style=color:#000>repeatedFoo</span><span style=color:#000;font-weight:700>]]);</span>
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-1156093dbcd1013f75c0f61bde112ef9>8 - PHP Reference</h1><div class=lead>This section contains reference documentation for working with protocol buffer classes in PHP</div><ul><li><a href=/reference/php/php-generated>PHP Generated Code Guide</a></li></ul></div><div class=td-content><h1 id=pg-163abb538cd7a7251d32693651de18dc>8.1 - PHP Generated Code Guide</h1><div class=lead>This topic describes the PHP code that the protocol buffer compiler generates for any given protocol definition.</div><p>This page describes the PHP code that the protocol buffer compiler generates for
any given protocol definition. You should read the
<a href=/programming-guides/proto3>proto3 language guide</a> before reading this
document. Note that the protocol buffer compiler currently only supports proto3
code generation for PHP.</p><h2 id=invocation>Compiler Invocation</h2><p>The protocol buffer compiler produces PHP output when invoked with the
<code>--php_out=</code> command-line flag. The parameter to the <code>--php_out=</code> option is the
directory where you want the compiler to write your PHP output. In order to
conform to PSR-4, the compiler creates a sub-directory corresponding to the
package defined in the proto file. In addition, for each message in the proto
file input the compiler creates a separate file in the package&rsquo;s subdirectory.
The names of the output files of messages are composed of three parts:</p><ul><li>Base directory: The proto path (specified with the <code>--proto_path=</code> or <code>-I</code>
command-line flag) is replaced with the output path (specified with the
<code>--php_out=</code> flag).</li><li>Sub-directory: <code>.</code> in the package name are replaced by the operating system
directory separator. Each package name component is capitalized.</li><li>File: The message name is appended by <code>.php</code>.</li></ul><p>So, for example, let&rsquo;s say you invoke the compiler as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --php_out<span style=color:#ce5c00;font-weight:700>=</span>build/gen src/example.proto
</span></span></code></pre></div><p>And <code>src/example.proto</code> is defined as:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MyMessage</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will read the files <code>src/foo.proto</code> and produce the output file:
<code>build/gen/Foo/Bar/MyMessage.php</code>. The compiler will automatically create the
directory <code>build/gen/Foo/Bar</code> if necessary, but it will <em>not</em> create <code>build</code> or
<code>build/gen</code>; they must already exist.</p><h2 id=package>Packages</h2><p>The package name defined in the <code>.proto</code> file is used to generate a module
structure for the generated PHP classes. Given a file like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MyMessage</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol compiler generates an output class with the name
<code>Foo\Bar\MyMessage</code>.</p><h2 id=message>Messages</h2><p>Given a simple message declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates a PHP class called <code>Foo</code>. This class
inherits from a common base class, <code>Google\Protobuf\Internal\Message</code>, which
provides methods for encoding and decoding your message types, as shown in the
following example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#000>$from</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>$from</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setInt32</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>$from</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setString</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;a&#39;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>$from</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>getRepeatedInt32</span><span style=color:#000;font-weight:700>()[]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>$from</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>getMapInt32Int32</span><span style=color:#000;font-weight:700>()[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>$data</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>$from</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>serializeToString</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>try</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>$to</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>mergeFromString</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>$data</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Exception</span> <span style=color:#000>$e</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Handle parsing error from invalid data.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>You should <em>not</em> create your own <code>Foo</code> subclasses. Generated classes are not
designed for subclassing and may lead to "fragile base class" problems.</p><p>Nested messages result in a PHP class of the same name prefixed by their
containing message and separated by underscores, as PHP doesn&rsquo;t support nested
classes. So, for example, if you have this in your <code>.proto</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>TestMessage</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>NestedMessage</span> <span style=color:#000;font-weight:700>{</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following classes:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>TestMessage</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>a</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// PHP doesn’t support nested classes.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>TestMessage_NestedMessage</span> <span style=color:#000;font-weight:700>{</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>If the message class name is reserved (for example, <code>Empty</code>), the prefix <code>PB</code> is
prepended to the class name:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>PBEmpty</span> <span style=color:#000;font-weight:700>{</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>We have also provided the file level option <code>php_class_prefix</code>. If this is
specified, it is prepended to all generated message classes.</p><h2 id=fields>Fields</h2><p>For each field in a message type, there are accessor methods to set and get the
field. So given a field <code>x</code> you can write:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#000>$m</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>MyMessage</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setX</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>$val</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>getX</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>$a</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setX</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>$a</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>Whenever you set a field, the value is type-checked against the declared type of
that field. If the value is of the wrong type (or out of range), an exception
will be raised. By default type conversions (for example, when assigning a value
to a field or adding an element to a repeated field) are permitted to and from
integer, float, and numeric strings. Conversions that are not permitted include
all conversions to/from arrays or objects. Float to integer overflow conversions
are undefined.</p><p>You can see the corresponding PHP type for each scalar protocol buffers type in
the <a href=/programming-guides/proto3#scalar>scalar value types table</a>.</p><h3 id=embedded_message>Singular Message Fields</h3><p>A field with a message type defaults to nil, and is not automatically created
when the field is accessed. Thus you need to explicitly create sub messages, as
in the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#000>$m</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>MyMessage</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setZ</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SubMessage</span><span style=color:#000;font-weight:700>());</span>
</span></span><span style=display:flex><span><span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>getZ</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setFoo</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>42</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>$m2</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>MyMessage</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>$m2</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>getZ</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setFoo</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>42</span><span style=color:#000;font-weight:700>);</span>  <span style=color:#8f5902;font-style:italic>// FAILS with an exception
</span></span></span></code></pre></div><p>You can assign any instance to a message field, even if the instance is also
held elsewhere (for example, as a field value on another message).</p><h3 id=repeated-fields>Repeated Fields</h3><p>The protocol buffer compiler generates a special <code>RepeatedField</code> for each
repeated field. So, for example, given the following field:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The generated code lets you do this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>getFoo</span><span style=color:#000;font-weight:700>()[]</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setFoo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>$array</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h3 id=map-fields>Map Fields</h3><p>The protocol buffer compiler generates a <code>MapField</code> for each map field. So given
this field:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>weight</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>You can do the following with the generated code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>getWeight</span><span style=color:#000;font-weight:700>()[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><h2 id=enum>Enumerations</h2><p>PHP doesn&rsquo;t have native enums, so instead the protocol buffer compiler generates
a PHP class for each enum type in your <code>.proto</code> file, just like for
<a href=#message>messages</a>, with constants defined for each value. So, given this
enum:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>TestEnum</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>Default</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler generates the following class:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>TestEnum</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>DEFAULT</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Also as with messages, a nested enum will result in a PHP class of the same name
prefixed by its containing message(s) and separated with underscores, as PHP
does not support nested classes.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>TestMessage_NestedEnum</span> <span style=color:#000;font-weight:700>{</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>If an enum class or value name is reserved (for example, <code>Empty</code>), the prefix
<code>PB</code> is prepended to the class or value name:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>PBEmpty</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>PBECHO</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>We have also provided the file level option <code>php_class_prefix</code>. If this is
specified, it is prepended to all generated enum classes.</p><h2 id=oneof>Oneof</h2><p>For a <a href=/programming-guides/proto3#oneof>oneof</a>s, the protocol
buffer compiler generates the same code as it would for regular singular fields,
but also adds a special accessor method that lets you find out which oneof field
(if any) is set. So, given this message:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>TestMessage</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>test_oneof</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>oneof_int32</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int64</span> <span style=color:#000>oneof_int64</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler generates the following fields and special method:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>TestMessage</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>oneof_int32</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>oneof_int64</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>getOneofInt32</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>setOneofInt32</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>$var</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>getOneofInt64</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>setOneofInt64</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>$var</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>getTestOneof</span><span style=color:#000;font-weight:700>();</span>  <span style=color:#8f5902;font-style:italic>// Return field name
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The accessor method&rsquo;s name is based on the oneof&rsquo;s name, and returns an enum
value representing the field in the oneof that is currently set.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-705861be22bcb7cf448391d047869b3c>9 - Python Reference</h1><div class=lead>This section contains reference documentation for working with protocol buffer classes in Python</div><ul><li><a href=/reference/python/python-generated>Python Generated Code Guide</a></li><li><a href=https://googleapis.dev/python/protobuf/latest/>Python API (Sphinx)</a></li></ul></div><div class=td-content><h1 id=pg-91d39e69529213fd60e1904b57fb7cee>9.1 - Python Generated Code Guide</h1><div class=lead>This topic describes exactly what Python definitions the protocol buffer compiler generates for any given protocol definition.</div><p>This page describes exactly what Python definitions the protocol buffer compiler
generates for any given protocol definition. Any differences between proto2 and
proto3 generated code are highlighted - note that these differences are in the
generated code as described in this document, not the base message
classes/interfaces, which are the same in both versions. You should read the
<a href=/programming-guides/proto>proto2 language guide</a> and/or
<a href=/programming-guides/proto3>proto3 language guide</a>
before reading this document.</p><p>The Python Protocol Buffers implementation is a little different from C++ and
Java. In Python, the compiler only outputs code to build descriptors for the
generated classes, and a
<a href=https://docs.python.org/2.7/reference/datamodel#metaclasses>Python metaclass</a>
does the real work. This document describes what you get <em>after</em> the metaclass
has been applied.</p><h2 id=invocation>Compiler Invocation</h2><p>The protocol buffer compiler produces Python output when invoked with the
<code>--python_out=</code> command-line flag. The parameter to the <code>--python_out=</code> option
is the directory where you want the compiler to write your Python output. The
compiler creates a <code>.py</code> file for each <code>.proto</code> file input. The names of the
output files are computed by taking the name of the <code>.proto</code> file and making two
changes:</p><ul><li>The extension (<code>.proto</code>) is replaced with <code>_pb2.py</code>.</li><li>The proto path (specified with the <code>--proto_path=</code> or <code>-I</code> command-line
flag) is replaced with the output path (specified with the <code>--python_out=</code>
flag).</li></ul><p>So, for example, let&rsquo;s say you invoke the compiler as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --python_out<span style=color:#ce5c00;font-weight:700>=</span>build/gen src/foo.proto src/bar/baz.proto
</span></span></code></pre></div><p>The compiler will read the files <code>src/foo.proto</code> and <code>src/bar/baz.proto</code> and
produce two output files: <code>build/gen/foo_pb2.py</code> and <code>build/gen/bar/baz_pb2.py</code>.
The compiler will automatically create the directory <code>build/gen/bar</code> if
necessary, but it will <em>not</em> create <code>build</code> or <code>build/gen</code>; they must already
exist.</p><p>Note that if the <code>.proto</code> file or its path contains any characters which cannot
be used in Python module names (for example, hyphens), they will be replaced
with underscores. So, the file <code>foo-bar.proto</code> becomes the Python file
<code>foo_bar_pb2.py</code>.</p><div class="alert alert-note" role=alert><h4 class=alert-heading>Tip</h4>When
outputting Python code, the protocol buffer compiler&rsquo;s ability to output
directly to ZIP archives is particularly convenient, as the Python interpreter
is able to read directly from these archives if placed in the <code>PYTHONPATH</code>. To
output to a ZIP file, simply provide an output location ending in <code>.zip</code>.</div><div class="alert alert-note" role=alert><h4 class=alert-heading>Note</h4>The number 2 in the extension <code>_pb2.py</code> designates version 2 of Protocol
Buffers. Version 1 was used primarily inside Google, though you might be able to
find parts of it included in other Python code that was released before Protocol
Buffers. Since version 2 of Python Protocol Buffers has a completely different
interface, and since Python does not have compile-time type checking to catch
mistakes, we chose to make the version number be a prominent part of generated
Python file names. Currently both proto2 and proto3 use <code>_pb2.py</code> for their
generated files.</div><h2 id=package>Packages</h2><p>The Python code generated by the protocol buffer compiler is completely
unaffected by the package name defined in the <code>.proto</code> file. Instead, Python
packages are identified by directory structure.</p><h2 id=message>Messages</h2><p>Given a simple message declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates a class called <code>Foo</code>, which subclasses
<code>google.protobuf.Message</code>. The class is a concrete class; no abstract methods
are left unimplemented. Unlike C++ and Java, Python generated code is unaffected
by the <code>optimize_for</code> option in the <code>.proto</code> file; in effect, all Python code is
optimized for code size.</p><p>If the message&rsquo;s name is a Python keyword, then its class will only be
accessible via <code>getattr()</code>, as described in the
<a href=#keyword-conflicts><em>Names which conflict with Python keywords</em></a> section.</p><p>You should <em>not</em> create your own <code>Foo</code> subclasses. Generated classes are not
designed for subclassing and may lead to "fragile base class" problems.
Besides, implementation inheritance is bad design.</p><p>Python message classes have no particular public members other than those
defined by the <code>Message</code> interface and those generated for nested fields,
messages, and enum types (described below). <code>Message</code> provides methods you can
use to check, manipulate, read, or write the entire message, including parsing
from and serializing to binary strings. In addition to these methods, the <code>Foo</code>
class defines the following static methods:</p><ul><li><code>FromString(s)</code>: Returns a new message instance deserialized from the given
string.</li></ul><p>Note that you can also use the
<a href=https://googleapis.dev/python/protobuf/latest/google/protobuf/text_format.html><code>text_format</code></a>
module to work with protocol messages in text format: for example, the <code>Merge()</code>
method lets you merge an ASCII representation of a message into an existing
message.</p><h3 id=nested-types>Nested Types</h3><p>A message can be declared inside another message. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, the <code>Bar</code> class is declared as a static member of <code>Foo</code>, so you
can refer to it as <code>Foo.Bar</code>.</p><h2 id=wkt>Well Known Types</h2><p>Protocol buffers provides a number of
<a href=/reference/protobuf/google.protobuf>well-known types</a> that you
can use in your .proto files along with your own message types. Some WKT
messages have special methods in addition to the usual protocol buffer message
methods, as they subclass both
<a href=https://googleapis.dev/python/protobuf/latest/google/protobuf/message.html#google.protobuf.message.Message><code>google.protobuf.Message</code></a>
and a WKT class.</p><h3 id=any>Any</h3><p>For Any messages, you can call <code>Pack()</code> to pack a specified message into the
current Any message, or <code>Unpack()</code> to unpack the current Any message into a
specified message. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>any_message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Pack</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>any_message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Unpack</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p><code>Unpack()</code> also checks the descriptor of the passed-in message object against
the stored one and returns <code>False</code> if they don&rsquo;t match and does not attempt any
unpacking; <code>True</code> otherwise.</p><p>You can also call the <code>Is()</code> method to check if the Any message represents the
given protocol buffer type. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>any_message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Is</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>DESCRIPTOR</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h3 id=timestamp>Timestamp</h3><p>Timestamp messages can be converted to/from RFC 3339 date string format (JSON
string) using the <code>ToJsonString()</code>/<code>FromJsonString()</code> methods. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>timestamp_message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>FromJsonString</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;1970-01-01T00:00:00Z&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>timestamp_message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>ToJsonString</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;1970-01-01T00:00:00Z&#34;</span>
</span></span></code></pre></div><p>You can also call <code>GetCurrentTime()</code> to fill the Timestamp message with current
time:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>timestamp_message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>GetCurrentTime</span><span style=color:#000;font-weight:700>()</span>
</span></span></code></pre></div><p>To convert between other time units since epoch, you can call <code>ToNanoseconds(), FromNanoseconds(), ToMicroseconds(), FromMicroseconds(), ToMilliseconds(), FromMilliseconds(), ToSeconds()</code>, or <code>FromSeconds()</code>. The generated code also
has <code>ToDatetime()</code> and <code>FromDatetime()</code> methods to convert between Python
datetime objects and Timestamps. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>timestamp_message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>FromMicroseconds</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>timestamp_message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>ToMicroseconds</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span><span style=color:#000>dt</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>datetime</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>2016</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>timestamp_message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>FromDatetime</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>dt</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>assertEqual</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>dt</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>timestamp_message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>ToDatetime</span><span style=color:#000;font-weight:700>())</span>
</span></span></code></pre></div><h3 id=duration>Duration</h3><p>Duration messages have the same methods as Timestamp to convert between JSON
string and other time units. To convert between timedelta and Duration, you can
call <code>ToTimedelta()</code> or <code>FromTimedelta</code>. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>duration_message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>FromNanoseconds</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1999999999</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>td</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>duration_message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>ToTimedelta</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>td</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>seconds</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>td</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>microseconds</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>999999</span>
</span></span></code></pre></div><h3 id=fieldmask>FieldMask</h3><p>FieldMask messages can be converted to/from JSON string using the
<code>ToJsonString()</code>/<code>FromJsonString()</code> methods. In addition, a FieldMask message
has the following methods:</p><ul><li><code>IsValidForDescriptor</code>: Checks whether the FieldMask is valid for Message
Descriptor.</li><li><code>AllFieldsFromDescriptor</code>: Gets all direct fields of Message Descriptor to
FieldMask.</li><li><code>CanonicalFormFromMask</code>: Converts a FieldMask to the canonical form.</li><li><code>Union</code>: Merges two FieldMasks into this FieldMask.</li><li><code>Intersect</code>: Intersects two FieldMasks into this FieldMask.</li><li><code>MergeMessage</code>: Merges fields specified in FieldMask from source to
destination.</li></ul><h3 id=struct>Struct</h3><p>Struct messages let you get and set the items directly. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>struct_message</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;key1&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span>
</span></span><span style=display:flex><span><span style=color:#000>struct_message</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;key2&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;abc&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>struct_message</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;key3&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>True</span>
</span></span></code></pre></div><p>To get or create a list/struct, you can call
<code>get_or_create_list()</code>/<code>get_or_create_struct()</code>. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>struct</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get_or_create_struct</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;key4&#34;</span><span style=color:#000;font-weight:700>)[</span><span style=color:#4e9a06>&#34;subkey&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>11.0</span>
</span></span><span style=display:flex><span><span style=color:#000>struct</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get_or_create_list</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;key5&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h3 id=listvalue>ListValue</h3><p>A ListValue message acts like a Python sequence that lets you do the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>list_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>struct_message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get_or_create_list</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;key&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>list_value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>extend</span><span style=color:#000;font-weight:700>([</span><span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;seven&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>True</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>None</span><span style=color:#000;font-weight:700>])</span>
</span></span><span style=display:flex><span><span style=color:#000>list_value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>False</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>list_value</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>5</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>list_value</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>6</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>list_value</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;seven&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>list_value</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#204a87;font-weight:700>True</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>list_value</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#204a87;font-weight:700>None</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>list_Value</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#204a87;font-weight:700>False</span>
</span></span></code></pre></div><p>To add a ListValue/Struct, call <code>add_list()</code>/<code>add_struct()</code>. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>list_value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>add_struct</span><span style=color:#000;font-weight:700>()[</span><span style=color:#4e9a06>&#34;key&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span><span style=color:#000>list_value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>add_list</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>extend</span><span style=color:#000;font-weight:700>([</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;two&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>True</span><span style=color:#000;font-weight:700>])</span>
</span></span></code></pre></div><h2 id=fields>Fields</h2><p>For each field in a message type, the corresponding class has a property with
the same name as the field. How you can manipulate the property depends on its
type.</p><p>As well as a property, the compiler generates an integer constant for each field
containing its field number. The constant name is the field name converted to
upper-case followed by <code>_FIELD_NUMBER</code>. For example, given the field <code>optional int32 foo_bar = 5;</code>, the compiler will generate the constant
<code>FOO_BAR_FIELD_NUMBER = 5</code>.</p><p>If the field&rsquo;s name is a Python keyword, then its property will only be
accessible via <code>getattr()</code> and <code>setattr()</code>, as described in the
<a href=#keyword-conflicts><em>Names which conflict with Python keywords</em></a> section.</p><h3 id=singular-fields-proto2>Singular Fields (proto2)</h3><p>If you have a singular (optional or required) field <code>foo</code> of any non-message
type, you can manipulate the field <code>foo</code> as if it were a regular field. For
example, if <code>foo</code>&rsquo;s type is <code>int32</code>, you can say:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>123</span>
</span></span><span style=display:flex><span><span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Note that setting <code>foo</code> to a value of the wrong type will raise a <code>TypeError</code>.</p><p>If <code>foo</code> is read when it is not set, its value is the default value for that
field. To check if <code>foo</code> is set, or to clear the value of <code>foo</code>, you must call
the <code>HasField()</code> or <code>ClearField()</code> methods of the
<a href=https://googleapis.dev/python/protobuf/latest/google/protobuf/message.html#google.protobuf.message.Message><code>Message</code></a>
interface. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;foo&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>123</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;foo&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>ClearField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;foo&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;foo&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h3 id=singular-fields-proto3>Singular Fields (proto3)</h3><p>If you have a singular field <code>foo</code> of any non-message type, you can manipulate
the field <code>foo</code> as if it were a regular field. For example, if <code>foo</code>&rsquo;s type is
<code>int32</code>, you can say:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>123</span>
</span></span><span style=display:flex><span><span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Note that setting <code>foo</code> to a value of the wrong type will raise a <code>TypeError</code>.</p><p>If <code>foo</code> is read when it is not set, its value is the default value for that
field. To clear the value of <code>foo</code> and reset it to the default value for its
type, you call the <code>ClearField()</code> method of the
<a href=https://googleapis.dev/python/protobuf/latest/google/protobuf/message.html#google.protobuf.message.Message><code>Message</code></a>
interface. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>123</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>ClearField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;foo&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><div class="alert alert-note" role=alert><h4 class=alert-heading>Note</h4>Unlike in proto2, you cannot call <code>HasField()</code> for a singular non-message field
in proto3, and the library will throw an exception if you try to do this.</div><h3 id=embedded_message>Singular Message Fields</h3><p>Message types work slightly differently. You cannot assign a value to an
embedded message field. Instead, assigning a value to any field within the child
message implies setting the message field in the parent. In proto3, you can also
use the parent message&rsquo;s <code>HasField()</code> method to check if a message type field
value has been set, which you can&rsquo;t do with other types of proto3 singular
field.</p><p>So, for example, let&rsquo;s say you have the following <code>.proto</code> definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>You <em>cannot</em> do the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>()</span>  <span style=color:#8f5902;font-style:italic># WRONG!</span>
</span></span></code></pre></div><p>Instead, to set <code>bar</code>, you simply assign a value directly to a field within
<code>bar</code>, and - presto! - <code>foo</code> has a <code>bar</code> field:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;bar&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;bar&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>ClearField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;bar&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;bar&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span>  <span style=color:#8f5902;font-style:italic># Default value</span>
</span></span></code></pre></div><p>Similarly, you can set <code>bar</code> using the
<a href=https://googleapis.dev/python/protobuf/latest/google/protobuf/message.html#google.protobuf.message.Message><code>Message</code></a>
interface&rsquo;s <code>CopyFrom()</code> method. This copies all the values from another message
of the same type as <code>bar</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>CopyFrom</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>baz</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Note that simply reading a field inside <code>bar</code> does <em>not</em> set the field:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;bar&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#8f5902;font-style:italic># Print i&#39;s default value</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;bar&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>If you need the "has" bit on a message that does not have any fields you can
or want to set, you may use the <code>SetInParent()</code> method.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;bar&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>SetInParent</span><span style=color:#000;font-weight:700>()</span>  <span style=color:#8f5902;font-style:italic># Set Foo.bar to a default Bar message</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;bar&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h3 id=repeated-fields>Repeated Fields</h3><p>Repeated fields are represented as an object that acts like a Python sequence.
As with embedded messages, you cannot assign the field directly, but you can
manipulate it. For example, given this message definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>nums</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>You can do the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>nums</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#000;font-weight:700>)</span>        <span style=color:#8f5902;font-style:italic># Appends one value</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>nums</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>extend</span><span style=color:#000;font-weight:700>([</span><span style=color:#0000cf;font-weight:700>32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>47</span><span style=color:#000;font-weight:700>])</span>  <span style=color:#8f5902;font-style:italic># Appends an entire list</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>nums</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>3</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>nums</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>15</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>nums</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>32</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>nums</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>47</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>nums</span><span style=color:#000;font-weight:700>[:]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>33</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>48</span><span style=color:#000;font-weight:700>]</span>     <span style=color:#8f5902;font-style:italic># Assigns an entire list</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>nums</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>33</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>48</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>nums</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>56</span>    <span style=color:#8f5902;font-style:italic># Reassigns a value</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>nums</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>56</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>i</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>nums</span><span style=color:#000;font-weight:700>:</span>  <span style=color:#8f5902;font-style:italic># Loops and print</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>del</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>nums</span><span style=color:#000;font-weight:700>[:]</span>     <span style=color:#8f5902;font-style:italic># Clears list (works just like in a Python list)</span>
</span></span></code></pre></div><p>The <code>ClearField()</code> method of the
<a href=https://googleapis.dev/python/protobuf/latest/google/protobuf/message.html#google.protobuf.message.Message><code>Message</code></a>
interface works in addition to using Python <code>del</code>.</p><h3 id=repeated-message-fields>Repeated Message Fields</h3><p>Repeated message fields work similar to repeated scalar fields. However, the
corresponding Python object also has an <code>add()</code> method that creates a new
message object, appends it to the list, and returns it for the caller to fill
in. Also, the object&rsquo;s <code>append()</code> method makes a <strong>copy</strong> of the given message
and appends that copy to the list. This is done so that messages are always
owned by the parent message to avoid circular references and other confusion
that can happen when a mutable data structure has multiple owners. Similarly,
the object&rsquo;s <code>extend()</code> method appends an entire list of messages, but makes a
<strong>copy</strong> of every message in the list.</p><p>For example, given this message definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Bar</span> <span style=color:#000>bars</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>j</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>You can do the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>add</span><span style=color:#000;font-weight:700>()</span>        <span style=color:#8f5902;font-style:italic># Adds a Bar then modify</span>
</span></span><span style=display:flex><span><span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>15</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>add</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>32</span>       <span style=color:#8f5902;font-style:italic># Adds and modify at the same time</span>
</span></span><span style=display:flex><span><span style=color:#000>new_bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>new_bar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>40</span>
</span></span><span style=display:flex><span><span style=color:#000>another_bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>another_bar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>57</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>new_bar</span><span style=color:#000;font-weight:700>)</span>        <span style=color:#8f5902;font-style:italic># Uses append() to copy</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>extend</span><span style=color:#000;font-weight:700>([</span><span style=color:#000>another_bar</span><span style=color:#000;font-weight:700>])</span>  <span style=color:#8f5902;font-style:italic># Uses extend() to copy</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>4</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>15</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>32</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>40</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>new_bar</span>      <span style=color:#8f5902;font-style:italic># The appended message is equal,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>]</span> <span style=color:#204a87;font-weight:700>is</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>new_bar</span>  <span style=color:#8f5902;font-style:italic># but it is a copy!</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>57</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>another_bar</span>      <span style=color:#8f5902;font-style:italic># The extended message is equal,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>]</span> <span style=color:#204a87;font-weight:700>is</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>another_bar</span>  <span style=color:#8f5902;font-style:italic># but it is a copy!</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>56</span>    <span style=color:#8f5902;font-style:italic># Modifies a single element</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>56</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>bar</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>:</span>  <span style=color:#8f5902;font-style:italic># Loops and print</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>del</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[:]</span>       <span style=color:#8f5902;font-style:italic># Clears list</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># add() also forwards keyword arguments to the concrete class.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># For example, you can do:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>12</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>j</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>13</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Initializers forward keyword arguments to a concrete class too.</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># For example:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>(</span>             <span style=color:#8f5902;font-style:italic># Creates Foo</span>
</span></span><span style=display:flex><span>  <span style=color:#000>bars</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>[</span>               <span style=color:#8f5902;font-style:italic># with its field bars set to a list</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>j</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>17</span><span style=color:#000;font-weight:700>),</span>   <span style=color:#8f5902;font-style:italic># where each list member is also initialized during creation.</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>32</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>47</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>j</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>77</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>3</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>15</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>j</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>17</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>32</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>47</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>j</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>77</span>
</span></span></code></pre></div><p>Unlike repeated scalar fields, repeated message fields <strong>don&rsquo;t</strong> support item
assignment (i.e.
<a href=https://docs.python.org/3/reference/datamodel#object.__setitem__><code>__setitem__</code></a>).
For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># WRONG!</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#8f5902;font-style:italic># Raises an exception</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># WRONG!</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bars</span><span style=color:#000;font-weight:700>[:]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>15</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>i</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>17</span><span style=color:#000;font-weight:700>)]</span>  <span style=color:#8f5902;font-style:italic># Also raises an exception</span>
</span></span></code></pre></div><h3 id=groups-proto2>Groups (proto2)</h3><p><strong>Note that groups are deprecated and should not be used when creating new
message types &ndash; use nested message types instead.</strong></p><p>A group combines a nested message type and a field into a single declaration,
and uses a different
<a href=/programming-guides/encoding>wire format</a> for the
message. The generated message has the same name as the group. The generated
field&rsquo;s name is the <strong>lowercased</strong> name of the group.</p><p>For example, except for wire format, the following two message definitions are
equivalent:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>//</span> <span style=color:#000>Version</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Using</span> <span style=color:#000>groups</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span> <span style=color:#000>SearchResponse</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>repeated</span> <span style=color:#000>group</span> <span style=color:#000>SearchResult</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>required</span> <span style=color:#000>string</span> <span style=color:#000>url</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>//</span> <span style=color:#000>Version</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Not</span> <span style=color:#000>using</span> <span style=color:#000>groups</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span> <span style=color:#000>SearchResponse</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>message</span> <span style=color:#000>SearchResult</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>required</span> <span style=color:#000>string</span> <span style=color:#000>url</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000>repeated</span> <span style=color:#000>SearchResult</span> <span style=color:#000>searchresult</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>A group is either <code>required</code>, <code>optional</code>, or <code>repeated</code>. A required or optional
group is manipulated using the same API as a regular singular message field. A
repeated group is manipulated using the same API as a regular repeated message
field.</p><p>For example, given the above <code>SearchResponse</code> definition, you can do the
following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>resp</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>SearchResponse</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>resp</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>searchresult</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>url</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;https://blog.google&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>resp</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>searchresult</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>url</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;https://blog.google&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>resp</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>searchresult</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>SearchResponse</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>SearchResult</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>url</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;https://blog.google&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h3 id=map-fields>Map Fields</h3><p>Given this message definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MyMessage</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>mapfield</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The generated Python API for the map field is just like a Python <code>dict</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Assign value to map</span>
</span></span><span style=display:flex><span><span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>mapfield</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>10</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Read value from map</span>
</span></span><span style=display:flex><span><span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>mapfield</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Iterate over map keys</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>key</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>mapfield</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>mapfield</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>])</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Test whether key is in map:</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#0000cf;font-weight:700>5</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>mapfield</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#a40000>“</span><span style=color:#000>Found</span><span style=color:#a40000>!”</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Delete key from map.</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>del</span> <span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>mapfield</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>]</span>
</span></span></code></pre></div><p>As with <a href=#embedded_message>embedded message fields</a>, messages cannot be
directly assigned into a map value. Instead, to add a message as a map value you
reference an <a href=#undefined>undefined key</a>, which constructs and returns a new
submessage:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>message_map</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>submessage_field</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>10</span>
</span></span></code></pre></div><p>You can find out more about undefined keys in the next section.</p><h4 id=undefined>Referencing undefined keys</h4><p>The semantics of Protocol Buffer maps behave slightly differently to Python
<code>dict</code>s when it comes to undefined keys. In a regular Python <code>dict</code>, referencing
an undefined key raises a KeyError exception:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{}</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000>Traceback</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>most</span> <span style=color:#000>recent</span> <span style=color:#000>call</span> <span style=color:#000>last</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>  <span style=color:#000>File</span> <span style=color:#4e9a06>&#34;&lt;stdin&gt;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>line</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>module</span><span style=color:#ce5c00;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#c00;font-weight:700>KeyError</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>5</span>
</span></span></code></pre></div><p>However, in Protocol Buffers maps, referencing an undefined key creates the key
in the map with a zero/false/empty value. This behavior is more like the Python
standard library <code>defaultdict</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87>dict</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>mapfield</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{}</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>mapfield</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87>dict</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>mapfield</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>This behavior is especially convenient for maps with message type values,
because you can directly update the fields of the returned message.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>message_map</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span>
</span></span></code></pre></div><p>Note that even if you don&rsquo;t assign any values to message fields, the submessage
is still created in the map:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>message_map</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>test_pb2</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>M2</span> <span style=color:#204a87>object</span> <span style=color:#000>at</span> <span style=color:#0000cf;font-weight:700>0x7fb022af28c0</span><span style=color:#ce5c00;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87>dict</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>message_map</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{</span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>:</span> <span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>test_pb2</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>M2</span> <span style=color:#204a87>object</span> <span style=color:#000>at</span> <span style=color:#0000cf;font-weight:700>0x7fb022af28c0</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>This is <strong>different</strong> from regular <a href=#embedded_message>embedded message fields</a>,
where the message itself is only created once you assign a value to one of its
fields.</p><p>As it may not be immediately obvious to anyone reading your code that
<code>m.message_map[10]</code> alone, for example, may create a submessage, we also provide
a <code>get_or_create()</code> method that does the same thing but whose name makes the
possible message creation more explicit:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Equivalent to:</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#   m.message_map[10]</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># but more explicit that the statement might be creating a new</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># empty message in the map.</span>
</span></span><span style=display:flex><span><span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>message_map</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get_or_create</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h2 id=enum>Enumerations</h2><p>In Python, enums are just integers. A set of integral constants are defined
corresponding to the enum&rsquo;s defined values. For example, given:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>SomeEnum</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_B</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_C</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1234</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>SomeEnum</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The constants <code>VALUE_A</code>, <code>VALUE_B</code>, and <code>VALUE_C</code> are defined with values 0, 5,
and 1234, respectively. You can access <code>SomeEnum</code> if desired. If an enum is
defined in the outer scope, the values are module constants; if it is defined
within a message (like above), they become static members of that message class.</p><p>For example, you can access the values in the three following ways for the
following enum in a proto:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>SomeEnum</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_B</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_C</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1234</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>value_a</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>myproto_pb2</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>SomeEnum</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>VALUE_A</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># or</span>
</span></span><span style=display:flex><span><span style=color:#000>myproto_pb2</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>VALUE_A</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># or</span>
</span></span><span style=display:flex><span><span style=color:#000>myproto_pb2</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>SomeEnum</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Value</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;VALUE_A&#39;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>An enum field works just like a scalar field.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>VALUE_A</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>VALUE_A</span>
</span></span></code></pre></div><p>If the enum&rsquo;s name (or an enum value) is a Python keyword, then its object (or
the enum value&rsquo;s property) will only be accessible via <code>getattr()</code>, as described
in the <a href=#keyword-conflicts><em>Names which conflict with Python keywords</em></a>
section.</p><p>The values you can set in an enum depend on your protocol buffers version:</p><ul><li>In <strong>proto2</strong>, an enum cannot contain a numeric value other than those
defined for the enum type. If you assign a value that is not in the enum,
the generated code will throw an exception.</li><li><strong>proto3</strong> uses open enum semantics: enum fields can contain any <code>int32</code>
value.</li></ul><p>Enums have a number of utility methods for getting field names from values and
vice versa, lists of fields, and so on - these are defined in
<a href=https://github.com/protocolbuffers/protobuf/blob/master/python/google/protobuf/internal/enum_type_wrapper.py><code>enum_type_wrapper.EnumTypeWrapper</code></a>
(the base class for generated enum classes). So, for example, if you have the
following standalone enum in <code>myproto.proto</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>SomeEnum</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_B</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_C</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1234</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>&mldr;you can do this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>assertEqual</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;VALUE_A&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>myproto_pb2</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>SomeEnum</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Name</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>myproto_pb2</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>VALUE_A</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span><span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>assertEqual</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>myproto_pb2</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>SomeEnum</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Value</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;VALUE_B&#39;</span><span style=color:#000;font-weight:700>))</span>
</span></span></code></pre></div><p>For an enum declared within a protocol message, such as Foo above, the syntax is
similar:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>assertEqual</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;VALUE_A&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>myproto_pb2</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>SomeEnum</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Name</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>myproto_pb2</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>VALUE_A</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span><span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>assertEqual</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>myproto_pb2</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>SomeEnum</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Value</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;VALUE_B&#39;</span><span style=color:#000;font-weight:700>))</span>
</span></span></code></pre></div><p>If multiple enum constants have the same value (aliases), the first constant
defined is returned.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>SomeEnum</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>allow_alias</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_B</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_C</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1234</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_B_ALIAS</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In the above example, <code>myproto_pb2.SomeEnum.Name(5)</code> returns <code>"VALUE_B"</code>.</p><h2 id=oneof>Oneof</h2><p>Given a message with a oneof:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>test_oneof</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>     <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>     <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>serial_number</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The Python class corresponding to <code>Foo</code> will have properties called <code>name</code> and
<code>serial_number</code> just like regular <a href=#fields>fields</a>. However, unlike regular
fields, at most one of the fields in a oneof can be set at a time, which is
ensured by the runtime. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Bender&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>serial_number</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2716057</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;serial_number&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>The message class also has a <code>WhichOneof</code> method that lets you find out which
field (if any) in the oneof has been set. This method returns the name of the
field that is set, or <code>None</code> if nothing has been set:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>WhichOneof</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;test_oneof&#34;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>is</span> <span style=color:#204a87;font-weight:700>None</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Bender&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>WhichOneof</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;test_oneof&#34;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;name&#34;</span>
</span></span></code></pre></div><p><code>HasField</code> and <code>ClearField</code> also accept oneof names in addition to field names:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;test_oneof&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Bender&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;test_oneof&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>serial_number</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2716057</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;test_oneof&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>ClearField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;test_oneof&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;test_oneof&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>HasField</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;serial_number&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Note that calling <code>ClearField</code> on a oneof just clears the currently set field.</p><h2 id=keyword-conflicts>Names which conflict with Python keywords</h2><p>If the name of a message, field, enum, or enum value is a
<a href=https://docs.python.org/3/reference/lexical_analysis#keywords>Python keyword</a>,
then the name of its corresponding class or property will be the same, but
you&rsquo;ll only be able to access it using Python&rsquo;s
<a href=https://docs.python.org/3/library/functions#getattr><code>getattr()</code></a>
and
<a href=https://docs.python.org/3/library/functions#setattr><code>setattr()</code></a>
built-in functions, and not via Python&rsquo;s normal attribute reference syntax (i.e.
the dot operator).</p><p>For example, if you have the following <code>.proto</code> definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>from</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>in</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>You would access those fields like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>baz</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Baz</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#204a87>setattr</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>baz</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;from&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>99</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87>getattr</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>baz</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;from&#34;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>99</span>
</span></span><span style=display:flex><span><span style=color:#204a87>getattr</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>baz</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;in&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>42</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87>getattr</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>baz</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;in&#34;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>42</span><span style=color:#000;font-weight:700>]</span>
</span></span></code></pre></div><p>By contrast, trying to use <code>obj.attr</code> syntax to access these fields results in
Python raising syntax errors when parsing your code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#8f5902;font-style:italic># WRONG!</span>
</span></span><span style=display:flex><span><span style=color:#000>baz</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#204a87;font-weight:700>in</span>  <span style=color:#8f5902;font-style:italic># SyntaxError: invalid syntax</span>
</span></span><span style=display:flex><span><span style=color:#000>baz</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#204a87;font-weight:700>from</span>  <span style=color:#8f5902;font-style:italic># SyntaxError: invalid syntax</span>
</span></span></code></pre></div><h2 id=extension>Extensions (proto2 only)</h2><p>Given a message with an extension range:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extensions</span> <span style=color:#0000cf;font-weight:700>100</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#0000cf;font-weight:700>199</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The Python class corresponding to <code>Foo</code> will have a member called <code>Extensions</code>,
which is a dictionary mapping extension identifiers to their current values.</p><p>Given an extension definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>123</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates an "extension identifier" called <code>bar</code>.
The identifier acts as a key to the <code>Extensions</code> dictionary. The result of
looking up a value in this dictionary is exactly the same as if you accessed a
normal field of the same type. So, given the above example, you could do:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Extensions</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>proto_file_pb2</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Extensions</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>proto_file_pb2</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>2</span>
</span></span></code></pre></div><p>Note that you need to specify the extension identifier constant, not just a
string name: this is because it&rsquo;s possible for multiple extensions with the same
name to be specified in different scopes.</p><p>Analogous to normal fields, <code>Extensions[...]</code> returns a message object for
singular messages and a sequence for repeated fields.</p><p>The
<a href=https://googleapis.dev/python/protobuf/latest/google/protobuf/message.html#google.protobuf.message.Message><code>Message</code></a>
interface&rsquo;s <code>HasField()</code> and <code>ClearField()</code> methods do not work with extensions;
you must use <code>HasExtension()</code> and <code>ClearExtension()</code> instead.</p><h2 id=service>Services</h2><p>If the <code>.proto</code> file contains the following line:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>py_generic_services</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>Then the protocol buffer compiler will generate code based on the service
definitions found in the file as described in this section. However, the
generated code may be undesirable as it is not tied to any particular RPC
system, and thus requires more levels of indirection that code tailored to one
system. If you do NOT want this code to be generated, add this line to the file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>py_generic_services</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>If neither of the above lines are given, the option defaults to <code>false</code>, as
generic services are deprecated. (Note that prior to 2.4.0, the option defaults
to <code>true</code>)</p><p>RPC systems based on <code>.proto</code>-language service definitions should provide
<a href=/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb>plugins</a>
to generate code appropriate for the system. These plugins are likely to require
that abstract services are disabled, so that they can generate their own classes
of the same names. Plugins are new in version 2.3.0 (January 2010).</p><p>The remainder of this section describes what the protocol buffer compiler
generates when abstract services are enabled.</p><h3 id=interface>Interface</h3><p>Given a service definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>service</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FooRequest</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FooResponse</span><span style=color:#000;font-weight:700>);</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate a class <code>Foo</code> to represent this
service. <code>Foo</code> will have a method for each method defined in the service
definition. In this case, the method <code>Bar</code> is defined as:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>rpc_controller</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>done</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>The parameters are equivalent to the parameters of
<a href=https://googleapis.dev/python/protobuf/latest/google/protobuf/service.html#google.protobuf.service.Service.CallMethod><code>Service.CallMethod()</code></a>,
except that the <code>method_descriptor</code> argument is implied.</p><p>These generated methods are intended to be overridden by subclasses. The default
implementations simply call
<a href=https://googleapis.dev/python/protobuf/latest/google/protobuf/service.html#google.protobuf.service.RpcController.SetFailed><code>controller.SetFailed()</code></a>
with an error message indicating that the method is unimplemented, then invoke
the <code>done</code> callback. When implementing your own service, you must subclass this
generated service and implement its methods as appropriate.</p><p><code>Foo</code> subclasses the <code>Service</code> interface. The protocol buffer compiler
automatically generates implementations of the methods of <code>Service</code> as follows:</p><ul><li><code>GetDescriptor</code>: Returns the service&rsquo;s
<a href=https://googleapis.dev/python/protobuf/latest/google/protobuf/descriptor.html#google.protobuf.descriptor.ServiceDescriptor><code>ServiceDescriptor</code></a>.</li><li><code>CallMethod</code>: Determines which method is being called based on the provided
method descriptor and calls it directly.</li><li><code>GetRequestClass</code> and <code>GetResponseClass</code>: Returns the class of the request
or response of the correct type for the given method.</li></ul><h3 id=stub>Stub</h3><p>The protocol buffer compiler also generates a "stub" implementation of every
service interface, which is used by clients wishing to send requests to servers
implementing the service. For the <code>Foo</code> service (above), the stub implementation
<code>Foo_Stub</code> will be defined.</p><p><code>Foo_Stub</code> is a subclass of <code>Foo</code>. Its constructor takes an
<a href=https://googleapis.dev/python/protobuf/latest/google/protobuf/service.html#google.protobuf.service.RpcChannel><code>RpcChannel</code></a>
as a parameter. The stub then implements each of the service&rsquo;s methods by
calling the channel&rsquo;s <code>CallMethod()</code> method.</p><p>The Protocol Buffer library does not include an RPC implementation. However, it
includes all of the tools you need to hook up a generated service class to any
arbitrary RPC implementation of your choice. You need only provide
implementations of <code>RpcChannel</code> and
<a href=https://googleapis.dev/python/protobuf/latest/google/protobuf/service.html#google.protobuf.service.RpcController><code>RpcController</code></a>.</p><h2 id=plugins>Plugin Insertion Points</h2><p><a href=/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb>Code generator plugins</a>
which want to extend the output of the Python code generator may insert code of
the following types using the given insertion point names.</p><ul><li><code>imports</code>: Import statements.</li><li><code>module_scope</code>: Top-level declarations.</li></ul><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>Do not
generate code which relies on private class members declared by the standard
code generator, as these implementation details may change in future versions of
Protocol Buffers.</div><h2 id=sharing-messages>Sharing Messages Between Python and C++</h2><p>Prior to Python 4.21.0, Python apps could share messages with C++ using a native
extension. Starting in Python 4.21.0, sharing messages between Python and C++ is
not supported by the default install. To enable this capability when working
with 4.x and later versions of the Python API, define the environment variable,
<code>PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=cpp</code>, and ensure that the Python/C++
extension is installed.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-dcbd664920bfa9546fe0aca6a2f9b7e0>9.2 - Python API</h1></div><div class=td-content style=page-break-before:always><h1 id=pg-aaf97f2c1025775bad6bb11125832a10>10 - Ruby Reference</h1><div class=lead>This section contains reference documentation for working with protocol buffer classes in Ruby</div><ul><li><a href=/reference/ruby/ruby-generated>Ruby Generated Code Guide</a></li></ul></div><div class=td-content><h1 id=pg-62c6350857401037054f0197c5dfe99f>10.1 - Ruby Generated Code Guide</h1><div class=lead>This topic describes the API of message objects that the protocol buffer compiler generates for any given protocol definition.</div><p>This page describes the API of message objects that the protocol buffer compiler
generates for any given protocol definition. You should read the language guides
for <a href=/programming-guides/proto>proto2</a> or
<a href=/programming-guides/proto3>proto3</a> before reading this document.</p><p>The protocol compiler for Ruby emits Ruby source files that use a DSL to define
the message schema. However the DSL is still subject to change. In this guide we
only describe the API of the generated messages, and not the DSL.</p><h2 id=invocation>Compiler Invocation</h2><p>The protocol buffer compiler produces Ruby output when invoked with the
<code>--ruby_out=</code> command-line flag. The parameter to the <code>--ruby_out=</code> option is
the directory where you want the compiler to write your Ruby output. The
compiler creates a <code>.rb</code> file for each <code>.proto</code> file input. The names of the
output files are computed by taking the name of the <code>.proto</code> file and making two
changes:</p><ul><li>The extension (<code>.proto</code>) is replaced with <code>_pb.rb</code>.</li><li>The proto path (specified with the <code>--proto_path=</code> or <code>-I</code> command-line
flag) is replaced with the output path (specified with the <code>--ruby_out=</code>
flag).</li></ul><p>So, for example, let&rsquo;s say you invoke the compiler as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --ruby_out<span style=color:#ce5c00;font-weight:700>=</span>build/gen src/foo.proto src/bar/baz.proto
</span></span></code></pre></div><p>The compiler will read the files <code>src/foo.proto</code> and <code>src/bar/baz.proto</code> and
produce two output files: <code>build/gen/foo_pb.rb</code> and <code>build/gen/bar/baz_pb.rb</code>.
The compiler will automatically create the directory <code>build/gen/bar</code> if
necessary, but it will <em>not</em> create <code>build</code> or <code>build/gen</code>; they must already
exist.</p><h2 id=package>Packages</h2><p>The package name defined in the <code>.proto</code> file is used to generate a module
structure for the generated messages. Given a file like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>foo_bar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>baz</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MyMessage</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol compiler generates an output message with the name
<code>FooBar::Baz::MyMessage</code>.</p><h2 id=message>Messages</h2><p>Given a simple message declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates a class called <code>Foo</code>. The generated class
derives from the Ruby <code>Object</code> class (protos have no common base class). Unlike
C++ and Java, Ruby generated code is unaffected by the <code>optimize_for</code> option in
the <code>.proto</code> file; in effect, all Ruby code is optimized for code size.</p><p>You should <em>not</em> create your own <code>Foo</code> subclasses. Generated classes are not
designed for subclassing and may lead to "fragile base class" problems.</p><p>Ruby message classes define accessors for each field, and also provide the
following standard methods:</p><ul><li><code>Message#dup</code>, <code>Message#clone</code>: Performs a shallow copy of this message and
returns the new copy.</li><li><code>Message#==</code>: Performs a deep equality comparison between two messages.</li><li><code>Message#hash</code>: Computes a shallow hash of the message&rsquo;s value.</li><li><code>Message#to_hash</code>, <code>Message#to_h</code>: Converts the object to a ruby <code>Hash</code>
object. Only the top-level message is converted.</li><li><code>Message#inspect</code>: Returns a human-readable string representing this
message.</li><li><code>Message#[]</code>, <code>Message#[]=</code>: Gets or sets a field by string name. In the
future this will probably also be used to get/set extensions.</li></ul><p>The message classes also define the following methods as static. (In general we
prefer static methods, since regular methods can conflict with field names you
defined in your .proto file.)</p><ul><li><code>Message.decode(str)</code>: Decodes a binary protobuf for this message and
returns it in a new instance.</li><li><code>Message.encode(proto)</code>: Serializes a message object of this class to a
binary string.</li><li><code>Message.decode_json(str)</code>: Decodes a JSON text string for this message and
returns it in a new instance.</li><li><code>Message.encode_json(proto)</code>: Serializes a message object of this class to a
JSON text string.</li><li><code>Message.descriptor</code>: Returns the <code>Google::Protobuf::Descriptor</code> object for
this message.</li></ul><p>When you create a message, you can conveniently initialize fields in the
constructor. Here is an example of constructing and using a message:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#000>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>MyMessage</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>:int_field</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                        <span style=color:#4e9a06>:string_field</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#4e9a06>&#34;String&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                        <span style=color:#4e9a06>:repeated_int_field</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#ce5c00;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#ce5c00;font-weight:700>]</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                        <span style=color:#4e9a06>:submessage_field</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#000>SubMessage</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>:foo</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#0000cf;font-weight:700>42</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span><span style=color:#000>serialized</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>MyMessage</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>encode</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>message2</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>MyMessage</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>decode</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>serialized</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message2</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>int_field</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span></code></pre></div><h3 id=nested-types>Nested Types</h3><p>A message can be declared inside another message. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, the <code>Bar</code> class is declared as a class inside of <code>Foo</code>, so you can
refer to it as <code>Foo::Bar</code>.</p><h2 id=fields>Fields</h2><p>For each field in a message type, there are accessor methods to set and get the
field. So given a field <code>foo</code> you can write:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>get_value</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#204a87>print</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>foo</span>
</span></span></code></pre></div><p>Whenever you set a field, the value is type-checked against the declared type of
that field. If the value is of the wrong type (or out of range), an exception
will be raised.</p><h3 id=singular-fields>Singular Fields</h3><p>For singular primitive fields (numbers, strings, and boolean), the value you
assign to the field should be of the correct type and must be in the appropriate
range:</p><ul><li><strong>Number types</strong>: the value should be a <code>Fixnum</code>, <code>Bignum</code>, or <code>Float</code>. The
value you assign must be exactly representable in the target type. So
assigning <code>1.0</code> to an int32 field is ok, but assigning <code>1.2</code> is not.</li><li><strong>Boolean fields</strong>: the value must be <code>true</code> or <code>false</code>. No other values
will implicitly convert to true/false.</li><li><strong>Bytes fields</strong>: the assigned value must be a <code>String</code> object. The protobuf
library will duplicate the string, convert it to ASCII-8BIT encoding, and
freeze it.</li><li><strong>String fields</strong>: the assigned value must be a <code>String</code> object. The
protobuf library will duplicate the string, convert it to UTF-8 encoding,
and freeze it.</li></ul><p>No automatic <code>#to_s</code>, <code>#to_i</code>, etc. calls will happen to perform automatic
conversion. You should convert values yourself first, if necessary.</p><h4 id=checking-presence>Checking Presence</h4><p>When using <code>optional</code> fields, field presence is checked by calling a generated
<code>has_...?</code> method. Setting any value—even the default value—marks
the field as present. Fields can be cleared by calling a different generated
<code>clear_...</code> method. For example, for a message <code>MyMessage</code> with an int32 field
<code>foo</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#000>m</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>MyMessage</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>new</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>has_foo?</span>
</span></span><span style=display:flex><span><span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>has_foo?</span>
</span></span><span style=display:flex><span><span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>clear_foo</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>has_foo?</span>
</span></span></code></pre></div><h3 id=embedded_message>Singular Message Fields</h3><p>For submessages, unset fields will return <code>nil</code>, so you can always tell if the
message was explicitly set or not. To clear a submessage field, set its value
explicitly to <code>nil</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>submessage_field</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>nil?</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87>puts</span> <span style=color:#4e9a06>&#34;Submessage field is unset.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>else</span>
</span></span><span style=display:flex><span>  <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>submessage_field</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87>puts</span> <span style=color:#4e9a06>&#34;Cleared submessage field.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>end</span>
</span></span></code></pre></div><p>In addition to comparing and assigning <code>nil</code>, generated messages have <code>has_...</code>
and <code>clear_...</code> methods, which behave the same as for basic types:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>has_submessage_field?</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>submessage_field</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87>puts</span> <span style=color:#4e9a06>&#34;Submessage field is unset.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>else</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>submessage_field</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>  <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>clear_submessage_field</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>submessage_field</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87>puts</span> <span style=color:#4e9a06>&#34;Cleared submessage field.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>end</span>
</span></span></code></pre></div><p>When you assign a submessage, it must be a generated message object of the
correct type.</p><p>It is possible to create message cycles when you assign submessages. For
example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// foo.proto
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>RecursiveMessage</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>RecursiveMessage</span> <span style=color:#000>submessage</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>#</span> <span style=color:#000>test.rb</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000>require</span> <span style=color:#4e9a06>&#39;foo&#39;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>RecursiveSubmessage.new</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000>message.submessage</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>message</span>
</span></span></code></pre></div><p>If you try to serialize this, the library will detect the cycle and fail to
serialize.</p><h3 id=repeated-fields>Repeated Fields</h3><p>Repeated fields are represented using a custom class
<code>Google::Protobuf::RepeatedField</code>. This class acts like a Ruby <code>Array</code> and mixes
in <code>Enumerable</code>. Unlike a regular Ruby array, <code>RepeatedField</code> is constructed
with a specific type and expects all of the array members to have the correct
type. The types and ranges are checked just like message fields.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#000>int_repeatedfield</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>RepeatedField</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>:int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#ce5c00;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#ce5c00;font-weight:700>]</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>int_repeatedfield</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>empty?</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Raises TypeError.</span>
</span></span><span style=display:flex><span><span style=color:#000>int_repeatedfield</span><span style=color:#ce5c00;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;not an int32&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Raises RangeError</span>
</span></span><span style=display:flex><span><span style=color:#000>int_repeatedfield</span><span style=color:#ce5c00;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#ce5c00;font-weight:700>**</span><span style=color:#0000cf;font-weight:700>33</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>int32_repeated_field</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>int_repeatedfield</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This isn&#39;t allowed; the regular Ruby array doesn&#39;t enforce types like we need.</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>int32_repeated_field</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#ce5c00;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># This is fine, since the elements are copied into the type-safe array.</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>int32_repeated_field</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#ce5c00;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># The elements can be cleared without reassigning.</span>
</span></span><span style=display:flex><span><span style=color:#000>int_repeatedfield</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>clear</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>int_repeatedfield</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>empty?</span>
</span></span></code></pre></div><p>The <code>RepeatedField</code> type supports all of the same methods as a regular Ruby
<code>Array</code>. You can convert it to a regular Ruby Array with <code>repeated_field.to_a</code>.</p><p>Unlike singular fields, <code>has_...?</code> methods are never generated for repeated
fields.</p><h3 id=map-fields>Map Fields</h3><p>Map fields are represented using a special class that acts like a Ruby <code>Hash</code>
(<code>Google::Protobuf::Map</code>). Unlike a regular Ruby hash, <code>Map</code> is constructed with
a specific type for the key and value and expects all of the map&rsquo;s keys and
values to have the correct type. The types and ranges are checked just like
message fields and <code>RepeatedField</code> elements.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#000>int_string_map</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>:int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>:string</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Returns nil; items is not in the map.</span>
</span></span><span style=display:flex><span><span style=color:#204a87>print</span> <span style=color:#000>int_string_map</span><span style=color:#ce5c00;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Raises TypeError, value should be a string</span>
</span></span><span style=display:flex><span><span style=color:#000>int_string_map</span><span style=color:#ce5c00;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>11</span><span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>200</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Ok.</span>
</span></span><span style=display:flex><span><span style=color:#000>int_string_map</span><span style=color:#ce5c00;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>123</span><span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;abc&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>int32_string_map_field</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>int_string_map</span>
</span></span></code></pre></div><h2 id=enum>Enumerations</h2><p>Since Ruby does not have native enums, we create a module for each enum with
constants to define the values. Given the <code>.proto</code> file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>SomeEnum</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_B</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>VALUE_C</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1234</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>SomeEnum</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>You can refer to enum values like so:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#204a87>print</span> <span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>SomeEnum</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>VALUE_A</span>  <span style=color:#8f5902;font-style:italic># =&gt; 0</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>SomeEnum</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>VALUE_A</span>
</span></span></code></pre></div><p>You may assign either a number or a symbol to an enum field. When reading the
value back, it will be a symbol if the enum value is known, or a number if it is
unknown. Since <strong>proto3</strong> uses open enum semantics, any number may be assigned
to an enum field, even if it was not defined in the enum.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#204a87>puts</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>inspect</span>  <span style=color:#8f5902;font-style:italic># =&gt; :VALUE_A</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>:VALUE_B</span>
</span></span><span style=display:flex><span><span style=color:#204a87>puts</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>inspect</span>  <span style=color:#8f5902;font-style:italic># =&gt; :VALUE_B</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>999</span>
</span></span><span style=display:flex><span><span style=color:#204a87>puts</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>inspect</span>  <span style=color:#8f5902;font-style:italic># =&gt; 999</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Raises: RangeError: Unknown symbol value for enum field.</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>:UNDEFINED_VALUE</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Switching on an enum value is convenient.</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>case</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>:VALUE_A</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic># ...</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>:VALUE_B</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic># ...</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>:VALUE_C</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic># ...</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>else</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic># ...</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>end</span>
</span></span></code></pre></div><p>An enum module also defines the following utility methods:</p><ul><li><code>Enum#lookup(number)</code>: Looks up the given number and returns its name, or
<code>nil</code> if none was found. If more than one name has this number, returns the
first that was defined.</li><li><code>Enum#resolve(symbol)</code>: Returns the number for this enum name, or <code>nil</code> if
none was found.</li><li><code>Enum#descriptor</code>: Returns the descriptor for this enum.</li></ul><h2 id=oneof>Oneof</h2><p>Given a message with a oneof:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>test_oneof</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>     <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>     <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>serial_number</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The Ruby class corresponding to <code>Foo</code> will have members called <code>name</code> and
<code>serial_number</code> with accessor methods just like regular <a href=#fields>fields</a>.
However, unlike regular fields, at most one of the fields in a oneof can be set
at a time, so setting one field will clear the others.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#000>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>new</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Fields have their defaults.</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>serial_number</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>test_oneof</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Bender&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;Bender&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>serial_number</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>test_oneof</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>:name</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Setting serial_number clears name.</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>serial_number</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2716057</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>test_oneof</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>:serial_number</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Setting serial_number to nil clears the oneof.</span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>serial_number</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>test_oneof</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span></code></pre></div><p>For proto2 messages, oneof members have individual <code>has_...?</code> methods as well:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#000>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>new</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>has_test_oneof?</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>has_name?</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>has_serial_number?</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>has_test_oneof?</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Bender&#34;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>has_test_oneof?</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>has_name?</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>has_serial_number?</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>raise</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>has_test_oneof?</span>
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-1b6de288e18f35faabf2c314511ad471>11 - Protocol Buffers Reference</h1><div class=lead>This section contains language-agnostic information about how to use protocol buffers.</div><ul><li><a href=/reference/protobuf/proto2-spec>Protocol Buffers Version 2 Language Specification</a></li><li><a href=/reference/protobuf/proto3-spec>Protocol Buffers Version 3 Language Specification</a></li><li><a href=/reference/protobuf/textformat-spec>Text Format Language Specification</a></li></ul></div><div class=td-content><h1 id=pg-bd5cf9afb7032681b1013fa716294a84>11.1 - Protocol Buffers Version 2 Language Specification</h1><div class=lead>This topic is a language specification reference for version 2 of the Protocol Buffers language (proto2).</div><p>This is a language specification reference for version 2 of the Protocol Buffers
language (proto2). The syntax is specified using
<a href=https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form>Extended Backus-Naur Form (EBNF)</a>:</p><pre tabindex=0><code>|   alternation
()  grouping
[]  option (zero or one time)
{}  repetition (any number of times)
</code></pre><p>For more information about using proto2, see the
<a href=/programming-guides/proto>language guide</a>.</p><h2 id=lexical_elements>Lexical Elements</h2><h3 id=letters_and_digits>Letters and Digits</h3><pre tabindex=0><code>letter = &#34;A&#34; … &#34;Z&#34; | &#34;a&#34; … &#34;z&#34;
capitalLetter =  &#34;A&#34; … &#34;Z&#34;
decimalDigit = &#34;0&#34; … &#34;9&#34;
octalDigit   = &#34;0&#34; … &#34;7&#34;
hexDigit     = &#34;0&#34; … &#34;9&#34; | &#34;A&#34; … &#34;F&#34; | &#34;a&#34; … &#34;f&#34;
</code></pre><h3 id=identifiers>Identifiers</h3><pre tabindex=0><code>ident = letter { letter | decimalDigit | &#34;_&#34; }
fullIdent = ident { &#34;.&#34; ident }
messageName = ident
enumName = ident
fieldName = ident
oneofName = ident
mapName = ident
serviceName = ident
rpcName = ident
streamName = ident
messageType = [ &#34;.&#34; ] { ident &#34;.&#34; } messageName
enumType = [ &#34;.&#34; ] { ident &#34;.&#34; } enumName
groupName = capitalLetter { letter | decimalDigit | &#34;_&#34; }
</code></pre><h3 id=integer_literals>Integer Literals</h3><pre tabindex=0><code>intLit     = decimalLit | octalLit | hexLit
decimalLit = ( &#34;1&#34; … &#34;9&#34; ) { decimalDigit }
octalLit   = &#34;0&#34; { octalDigit }
hexLit     = &#34;0&#34; ( &#34;x&#34; | &#34;X&#34; ) hexDigit { hexDigit }
</code></pre><h3 id=floating-point-literals>Floating-point Literals</h3><pre tabindex=0><code>floatLit = ( decimals &#34;.&#34; [ decimals ] [ exponent ] | decimals exponent | &#34;.&#34;decimals [ exponent ] ) | &#34;inf&#34; | &#34;nan&#34;
decimals  = decimalDigit { decimalDigit }
exponent  = ( &#34;e&#34; | &#34;E&#34; ) [ &#34;+&#34; | &#34;-&#34; ] decimals
</code></pre><h3 id=boolean>Boolean</h3><pre tabindex=0><code>boolLit = &#34;true&#34; | &#34;false&#34;
</code></pre><h3 id=string_literals>String Literals</h3><pre tabindex=0><code>strLit = ( &#34;&#39;&#34; { charValue } &#34;&#39;&#34; ) | ( &#39;&#34;&#39; { charValue } &#39;&#34;&#39; )
charValue = hexEscape | octEscape | charEscape | /[^\0\n\\]/
hexEscape = &#39;\&#39; ( &#34;x&#34; | &#34;X&#34; ) hexDigit hexDigit
octEscape = &#39;\&#39; octalDigit octalDigit octalDigit
charEscape = &#39;\&#39; ( &#34;a&#34; | &#34;b&#34; | &#34;f&#34; | &#34;n&#34; | &#34;r&#34; | &#34;t&#34; | &#34;v&#34; | &#39;\&#39; | &#34;&#39;&#34; | &#39;&#34;&#39; )
</code></pre><h3 id=emptystatement>EmptyStatement</h3><pre tabindex=0><code>emptyStatement = &#34;;&#34;
</code></pre><h3 id=constant>Constant</h3><pre tabindex=0><code>constant = fullIdent | ( [ &#34;-&#34; | &#34;+&#34; ] intLit ) | ( [ &#34;-&#34; | &#34;+&#34; ] floatLit ) |
                strLit | boolLit
</code></pre><h2 id=syntax>Syntax</h2><p>The syntax statement is used to define the protobuf version.</p><pre tabindex=0><code>syntax = &#34;syntax&#34; &#34;=&#34; (&#34;&#39;&#34; &#34;proto2&#34; &#34;&#39;&#34; | &#39;&#34;&#39; &#34;proto2&#34; &#39;&#34;&#39;) &#34;;&#34;
</code></pre><h2 id=import_statement>Import Statement</h2><p>The import statement is used to import another .proto&rsquo;s definitions.</p><pre tabindex=0><code>import = &#34;import&#34; [ &#34;weak&#34; | &#34;public&#34; ] strLit &#34;;&#34;
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>public</span> <span style=color:#4e9a06>&#34;other.proto&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=package>Package</h2><p>The package specifier can be used to prevent name clashes between protocol
message types.</p><pre tabindex=0><code>package = &#34;package&#34; fullIdent &#34;;&#34;
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=option>Option</h2><p>Options can be used in proto files, messages, enums and services. An option can
be a protobuf defined option or a custom option. For more information, see
<a href=/programming-guides/proto#options>Options</a> in the language guide.</p><pre tabindex=0><code>option = &#34;option&#34; optionName  &#34;=&#34; constant &#34;;&#34;
optionName = ( ident | &#34;(&#34; fullIdent &#34;)&#34; ) { &#34;.&#34; ident }
</code></pre><p>For examples:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>java_package</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;com.example.foo&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=fields>Fields</h2><p>Fields are the basic elements of a protocol buffer message. Fields can be normal
fields, group fields, oneof fields, or map fields. A field has a label, type and
field number.</p><pre tabindex=0><code>label = &#34;required&#34; | &#34;optional&#34; | &#34;repeated&#34;
type = &#34;double&#34; | &#34;float&#34; | &#34;int32&#34; | &#34;int64&#34; | &#34;uint32&#34; | &#34;uint64&#34;
      | &#34;sint32&#34; | &#34;sint64&#34; | &#34;fixed32&#34; | &#34;fixed64&#34; | &#34;sfixed32&#34; | &#34;sfixed64&#34;
      | &#34;bool&#34; | &#34;string&#34; | &#34;bytes&#34; | messageType | enumType
fieldNumber = intLit;
</code></pre><h3 id=normal_field>Normal field</h3><p>Each field has label, type, name and field number. It may have field options.</p><pre tabindex=0><code>field = label type fieldName &#34;=&#34; fieldNumber [ &#34;[&#34; fieldOptions &#34;]&#34; ] &#34;;&#34;
fieldOptions = fieldOption { &#34;,&#34;  fieldOption }
fieldOption = optionName &#34;=&#34; constant
</code></pre><p>Examples:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>foo.bar</span> <span style=color:#000>nested_message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>samples</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span> <span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>packed</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>];</span><span style=color:#a40000>
</span></span></span></code></pre></div><h3 id=group_field>Group field</h3><p><strong>Note that this feature is deprecated and should not be used when creating new
message types &ndash; use nested message types instead.</strong></p><p>Groups are one way to nest information in message definitions. The group name
must begin with capital letter.</p><pre tabindex=0><code>group = label &#34;group&#34; groupName &#34;=&#34; fieldNumber messageBody
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>group</span> <span style=color:#000>Result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>url</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>title</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>snippets</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><h3 id=oneof_and_oneof_field>Oneof and oneof field</h3><p>A oneof consists of oneof fields and a oneof name. Oneof fields do not have
labels.</p><pre tabindex=0><code>oneof = &#34;oneof&#34; oneofName &#34;{&#34; { option | oneofField | emptyStatement } &#34;}&#34;
oneofField = type fieldName &#34;=&#34; fieldNumber [ &#34;[&#34; fieldOptions &#34;]&#34; ] &#34;;&#34;
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>SubMessage</span> <span style=color:#000>sub_message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><h3 id=map_field>Map field</h3><p>A map field has a key type, value type, name, and field number. The key type can
be any integral or string type. Note, the key type may not be an enum.</p><pre tabindex=0><code>mapField = &#34;map&#34; &#34;&lt;&#34; keyType &#34;,&#34; type &#34;&gt;&#34; mapName &#34;=&#34; fieldNumber [ &#34;[&#34; fieldOptions &#34;]&#34; ] &#34;;&#34;
keyType = &#34;int32&#34; | &#34;int64&#34; | &#34;uint32&#34; | &#34;uint64&#34; | &#34;sint32&#34; | &#34;sint64&#34; |
          &#34;fixed32&#34; | &#34;fixed64&#34; | &#34;sfixed32&#34; | &#34;sfixed64&#34; | &#34;bool&#34; | &#34;string&#34;
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Project</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>projects</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=extensions_and_reserved>Extensions and Reserved</h2><p>Extensions and reserved are message elements that declare a range of field
numbers or field names.</p><h3 id=extensions>Extensions</h3><p>Extensions declare that a range of field numbers in a message are available for
third-party extensions. Other people can declare new fields for your message
type with those numeric tags in their own .proto files without having to edit
the original file.</p><pre tabindex=0><code>extensions = &#34;extensions&#34; ranges &#34;;&#34;
ranges = range { &#34;,&#34; range }
range =  intLit [ &#34;to&#34; ( intLit | &#34;max&#34; ) ]
</code></pre><p>Examples:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>extensions</span> <span style=color:#0000cf;font-weight:700>100</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#0000cf;font-weight:700>199</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>extensions</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>20</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#204a87;font-weight:700>max</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h3 id=reserved>Reserved</h3><p>Reserved declares a range of field numbers or field names in a message that can
not be used.</p><pre tabindex=0><code>reserved = &#34;reserved&#34; ( ranges | strFieldNames ) &#34;;&#34;
strFieldNames = strFieldName { &#34;,&#34; strFieldName }
strFieldName = &#34;&#39;&#34; fieldName &#34;&#39;&#34; | &#39;&#34;&#39; fieldName &#39;&#34;&#39;
</code></pre><p>Examples:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>reserved</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>15</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>9</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#0000cf;font-weight:700>11</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000>reserved</span> <span style=color:#4e9a06>&#34;foo&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;bar&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=top_level_definitions>Top Level definitions</h2><h3 id=enum_definition>Enum definition</h3><p>The enum definition consists of a name and an enum body. The enum body can have
options, enum fields, and reserved statements.</p><pre tabindex=0><code>enum = &#34;enum&#34; enumName enumBody
enumBody = &#34;{&#34; { option | enumField | emptyStatement | reserved } &#34;}&#34;
enumField = ident &#34;=&#34; [ &#34;-&#34; ] intLit [ &#34;[&#34; enumValueOption { &#34;,&#34;  enumValueOption } &#34;]&#34; ]&#34;;&#34;
enumValueOption = optionName &#34;=&#34; constant
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>EnumAllowingAlias</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>allow_alias</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EAA_UNSPECIFIED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EAA_STARTED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EAA_RUNNING</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span> <span style=color:#000;font-weight:700>[(</span><span style=color:#000>custom_option</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;hello world&#34;</span><span style=color:#000;font-weight:700>];</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><h3 id=message_definition>Message definition</h3><p>A message consists of a message name and a message body. The message body can
have fields, nested enum definitions, nested message definitions, extend
statements, extensions, groups, options, oneofs, map fields, and reserved
statements.</p><pre tabindex=0><code>message = &#34;message&#34; messageName messageBody
messageBody = &#34;{&#34; { field | enum | message | extend | extensions | group |
option | oneof | mapField | reserved | emptyStatement } &#34;}&#34;
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Outer</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>option</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>my_option</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Inner</span> <span style=color:#000;font-weight:700>{</span>   <span style=color:#8f5902;font-style:italic>// Level 2
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>int64</span> <span style=color:#000>ival</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>my_map</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extensions</span> <span style=color:#0000cf;font-weight:700>20</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#0000cf;font-weight:700>30</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><h3 id=extend>Extend</h3><p>If a message in the same or imported .proto file has reserved a range for
extensions, the message can be extended.</p><pre tabindex=0><code>extend = &#34;extend&#34; messageType &#34;{&#34; {field | group | emptyStatement} &#34;}&#34;
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>126</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><h3 id=service_definition>Service definition</h3><pre tabindex=0><code>service = &#34;service&#34; serviceName &#34;{&#34; { option | rpc | stream | emptyStatement } &#34;}&#34;
rpc = &#34;rpc&#34; rpcName &#34;(&#34; [ &#34;stream&#34; ] messageType &#34;)&#34; &#34;returns&#34; &#34;(&#34; [ &#34;stream&#34; ]
messageType &#34;)&#34; (( &#34;{&#34; { option | emptyStatement } &#34;}&#34; ) | &#34;;&#34; )
stream = &#34;stream&#34; streamName &#34;(&#34; messageType &#34;,&#34; messageType &#34;)&#34; (( &#34;{&#34;
{ option | emptyStatement } &#34;}&#34;) | &#34;;&#34; )
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>service</span> <span style=color:#000>SearchService</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>Search</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>SearchRequest</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>SearchResponse</span><span style=color:#000;font-weight:700>);</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=proto_file>Proto file</h2><pre tabindex=0><code>proto = syntax { import | package | option | topLevelDef | emptyStatement }
topLevelDef = message | enum | extend | service
</code></pre><p>An example .proto file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>syntax</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;proto2&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>public</span> <span style=color:#4e9a06>&#34;other.proto&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>java_package</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;com.example.foo&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>EnumAllowingAlias</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>allow_alias</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EAA_UNSPECIFIED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EAA_STARTED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EAA_RUNNING</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EAA_FINISHED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span> <span style=color:#000;font-weight:700>[(</span><span style=color:#000>custom_option</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;hello world&#34;</span><span style=color:#000;font-weight:700>];</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Outer</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>option</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>my_option</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Inner</span> <span style=color:#000;font-weight:700>{</span>   <span style=color:#8f5902;font-style:italic>// Level 2
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>int64</span> <span style=color:#000>ival</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Inner</span> <span style=color:#000>inner_message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>EnumAllowingAlias</span> <span style=color:#000>enum_field</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>my_map</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extensions</span> <span style=color:#0000cf;font-weight:700>20</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#0000cf;font-weight:700>30</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>group</span> <span style=color:#000>GroupMessage</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-67ec6daa4d66ca77c5baea07fe45ad0a>11.2 - Protocol Buffers Version 3 Language Specification</h1><div class=lead>This topic is a language specification reference for version 3 of the Protocol Buffers language (proto3).</div><p>This is a language specification reference for version 3 of the Protocol Buffers
language (proto3). The syntax is specified using
<a href=https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form>Extended Backus-Naur Form (EBNF)</a>:</p><pre tabindex=0><code>|   alternation
()  grouping
[]  option (zero or one time)
{}  repetition (any number of times)
</code></pre><p>For more information about using proto3, see the
<a href=/programming-guides/proto3>language guide</a>.</p><h2 id=lexical_elements>Lexical Elements</h2><h3 id=letters_and_digits>Letters and Digits</h3><pre tabindex=0><code>letter = &#34;A&#34; … &#34;Z&#34; | &#34;a&#34; … &#34;z&#34;
decimalDigit = &#34;0&#34; … &#34;9&#34;
octalDigit   = &#34;0&#34; … &#34;7&#34;
hexDigit     = &#34;0&#34; … &#34;9&#34; | &#34;A&#34; … &#34;F&#34; | &#34;a&#34; … &#34;f&#34;
</code></pre><h3 id=identifiers>Identifiers</h3><pre tabindex=0><code>ident = letter { letter | decimalDigit | &#34;_&#34; }
fullIdent = ident { &#34;.&#34; ident }
messageName = ident
enumName = ident
fieldName = ident
oneofName = ident
mapName = ident
serviceName = ident
rpcName = ident
messageType = [ &#34;.&#34; ] { ident &#34;.&#34; } messageName
enumType = [ &#34;.&#34; ] { ident &#34;.&#34; } enumName
</code></pre><h3 id=integer_literals>Integer Literals</h3><pre tabindex=0><code>intLit     = decimalLit | octalLit | hexLit
decimalLit = ( &#34;1&#34; … &#34;9&#34; ) { decimalDigit }
octalLit   = &#34;0&#34; { octalDigit }
hexLit     = &#34;0&#34; ( &#34;x&#34; | &#34;X&#34; ) hexDigit { hexDigit }
</code></pre><h3 id=floating-point-literals>Floating-point Literals</h3><pre tabindex=0><code>floatLit = ( decimals &#34;.&#34; [ decimals ] [ exponent ] | decimals exponent | &#34;.&#34;decimals [ exponent ] ) | &#34;inf&#34; | &#34;nan&#34;
decimals  = decimalDigit { decimalDigit }
exponent  = ( &#34;e&#34; | &#34;E&#34; ) [ &#34;+&#34; | &#34;-&#34; ] decimals
</code></pre><h3 id=boolean>Boolean</h3><pre tabindex=0><code>boolLit = &#34;true&#34; | &#34;false&#34;
</code></pre><h3 id=string_literals>String Literals</h3><pre tabindex=0><code>strLit = ( &#34;&#39;&#34; { charValue } &#34;&#39;&#34; ) |  ( &#39;&#34;&#39; { charValue } &#39;&#34;&#39; )
charValue = hexEscape | octEscape | charEscape | /[^\0\n\\]/
hexEscape = &#39;\&#39; ( &#34;x&#34; | &#34;X&#34; ) hexDigit hexDigit
octEscape = &#39;\&#39; octalDigit octalDigit octalDigit
charEscape = &#39;\&#39; ( &#34;a&#34; | &#34;b&#34; | &#34;f&#34; | &#34;n&#34; | &#34;r&#34; | &#34;t&#34; | &#34;v&#34; | &#39;\&#39; | &#34;&#39;&#34; | &#39;&#34;&#39; )
</code></pre><h3 id=emptystatement>EmptyStatement</h3><pre tabindex=0><code>emptyStatement = &#34;;&#34;
</code></pre><h3 id=constant>Constant</h3><pre tabindex=0><code>constant = fullIdent | ( [ &#34;-&#34; | &#34;+&#34; ] intLit ) | ( [ &#34;-&#34; | &#34;+&#34; ] floatLit ) | strLit | boolLit
</code></pre><h2 id=syntax>Syntax</h2><p>The syntax statement is used to define the protobuf version.</p><pre tabindex=0><code>syntax = &#34;syntax&#34; &#34;=&#34; (&#34;&#39;&#34; &#34;proto3&#34; &#34;&#39;&#34; | &#39;&#34;&#39; &#34;proto3&#34; &#39;&#34;&#39;) &#34;;&#34;
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>syntax</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;proto3&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=import_statement>Import Statement</h2><p>The import statement is used to import another .proto&rsquo;s definitions.</p><pre tabindex=0><code>import = &#34;import&#34; [ &#34;weak&#34; | &#34;public&#34; ] strLit &#34;;&#34;
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>public</span> <span style=color:#4e9a06>&#34;other.proto&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=package>Package</h2><p>The package specifier can be used to prevent name clashes between protocol
message types.</p><pre tabindex=0><code>package = &#34;package&#34; fullIdent &#34;;&#34;
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=option>Option</h2><p>Options can be used in proto files, messages, enums and services. An option can
be a protobuf defined option or a custom option. For more information, see
<a href=/programming-guides/proto3#options>Options</a> in the language guide.</p><pre tabindex=0><code>option = &#34;option&#34; optionName  &#34;=&#34; constant &#34;;&#34;
optionName = ( ident | &#34;(&#34; fullIdent &#34;)&#34; ) { &#34;.&#34; ident }
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>java_package</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;com.example.foo&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=fields>Fields</h2><p>Fields are the basic elements of a protocol buffer message. Fields can be normal
fields, oneof fields, or map fields. A field has a type and field number.</p><pre tabindex=0><code>type = &#34;double&#34; | &#34;float&#34; | &#34;int32&#34; | &#34;int64&#34; | &#34;uint32&#34; | &#34;uint64&#34;
      | &#34;sint32&#34; | &#34;sint64&#34; | &#34;fixed32&#34; | &#34;fixed64&#34; | &#34;sfixed32&#34; | &#34;sfixed64&#34;
      | &#34;bool&#34; | &#34;string&#34; | &#34;bytes&#34; | messageType | enumType
fieldNumber = intLit;
</code></pre><h3 id=normal_field>Normal Field</h3><p>Each field has type, name and field number. It may have field options.</p><pre tabindex=0><code>field = [ &#34;repeated&#34; ] type fieldName &#34;=&#34; fieldNumber [ &#34;[&#34; fieldOptions &#34;]&#34; ] &#34;;&#34;
fieldOptions = fieldOption { &#34;,&#34;  fieldOption }
fieldOption = optionName &#34;=&#34; constant
</code></pre><p>Examples:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>foo.Bar</span> <span style=color:#000>nested_message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>samples</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span> <span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>packed</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>];</span><span style=color:#a40000>
</span></span></span></code></pre></div><h3 id=oneof_and_oneof_field>Oneof and Oneof Field</h3><p>A oneof consists of oneof fields and a oneof name.</p><pre tabindex=0><code>oneof = &#34;oneof&#34; oneofName &#34;{&#34; { option | oneofField | emptyStatement } &#34;}&#34;
oneofField = type fieldName &#34;=&#34; fieldNumber [ &#34;[&#34; fieldOptions &#34;]&#34; ] &#34;;&#34;
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>SubMessage</span> <span style=color:#000>sub_message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><h3 id=map_field>Map Field</h3><p>A map field has a key type, value type, name, and field number. The key type can
be any integral or string type.</p><pre tabindex=0><code>mapField = &#34;map&#34; &#34;&lt;&#34; keyType &#34;,&#34; type &#34;&gt;&#34; mapName &#34;=&#34; fieldNumber [ &#34;[&#34; fieldOptions &#34;]&#34; ] &#34;;&#34;
keyType = &#34;int32&#34; | &#34;int64&#34; | &#34;uint32&#34; | &#34;uint64&#34; | &#34;sint32&#34; | &#34;sint64&#34; |
          &#34;fixed32&#34; | &#34;fixed64&#34; | &#34;sfixed32&#34; | &#34;sfixed64&#34; | &#34;bool&#34; | &#34;string&#34;
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Project</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>projects</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=reserved>Reserved</h2><p>Reserved statements declare a range of field numbers or field names that cannot
be used in this message.</p><pre tabindex=0><code>reserved = &#34;reserved&#34; ( ranges | strFieldNames ) &#34;;&#34;
ranges = range { &#34;,&#34; range }
range =  intLit [ &#34;to&#34; ( intLit | &#34;max&#34; ) ]
strFieldNames = strFieldName { &#34;,&#34; strFieldName }
strFieldName = &#34;&#39;&#34; fieldName &#34;&#39;&#34; | &#39;&#34;&#39; fieldName &#39;&#34;&#39;
</code></pre><p>Examples:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>reserved</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>15</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>9</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#0000cf;font-weight:700>11</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000>reserved</span> <span style=color:#4e9a06>&#34;foo&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;bar&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=top_level_definitions>Top Level Definitions</h2><h3 id=enum_definition>Enum Definition</h3><p>The enum definition consists of a name and an enum body. The enum body can have
options, enum fields, and reserved statements.</p><pre tabindex=0><code>enum = &#34;enum&#34; enumName enumBody
enumBody = &#34;{&#34; { option | enumField | emptyStatement | reserved } &#34;}&#34;
enumField = ident &#34;=&#34; [ &#34;-&#34; ] intLit [ &#34;[&#34; enumValueOption { &#34;,&#34;  enumValueOption } &#34;]&#34; ]&#34;;&#34;
enumValueOption = optionName &#34;=&#34; constant
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>EnumAllowingAlias</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>allow_alias</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EAA_UNSPECIFIED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EAA_STARTED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EAA_RUNNING</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span> <span style=color:#000;font-weight:700>[(</span><span style=color:#000>custom_option</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;hello world&#34;</span><span style=color:#000;font-weight:700>];</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><h3 id=message_definition>Message Definition</h3><p>A message consists of a message name and a message body. The message body can
have fields, nested enum definitions, nested message definitions, options,
oneofs, map fields, and reserved statements.</p><pre tabindex=0><code>message = &#34;message&#34; messageName messageBody
messageBody = &#34;{&#34; { field | enum | message | option | oneof | mapField |
reserved | emptyStatement } &#34;}&#34;
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Outer</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>option</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>my_option</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Inner</span> <span style=color:#000;font-weight:700>{</span>   <span style=color:#8f5902;font-style:italic>// Level 2
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>int64</span> <span style=color:#000>ival</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>my_map</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><h3 id=service_definition>Service Definition</h3><pre tabindex=0><code>service = &#34;service&#34; serviceName &#34;{&#34; { option | rpc | emptyStatement } &#34;}&#34;
rpc = &#34;rpc&#34; rpcName &#34;(&#34; [ &#34;stream&#34; ] messageType &#34;)&#34; &#34;returns&#34; &#34;(&#34; [ &#34;stream&#34; ]
messageType &#34;)&#34; (( &#34;{&#34; {option | emptyStatement } &#34;}&#34; ) | &#34;;&#34;)
</code></pre><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>service</span> <span style=color:#000>SearchService</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>Search</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>SearchRequest</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>SearchResponse</span><span style=color:#000;font-weight:700>);</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><h2 id=proto_file>Proto File</h2><pre tabindex=0><code>proto = syntax { import | package | option | topLevelDef | emptyStatement }
topLevelDef = message | enum | service
</code></pre><p>An example .proto file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>syntax</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;proto3&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>public</span> <span style=color:#4e9a06>&#34;other.proto&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>java_package</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;com.example.foo&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>EnumAllowingAlias</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>allow_alias</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EAA_UNSPECIFIED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EAA_STARTED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EAA_RUNNING</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EAA_FINISHED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span> <span style=color:#000;font-weight:700>[(</span><span style=color:#000>custom_option</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;hello world&#34;</span><span style=color:#000;font-weight:700>];</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Outer</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>option</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>my_option</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Inner</span> <span style=color:#000;font-weight:700>{</span>   <span style=color:#8f5902;font-style:italic>// Level 2
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>int64</span> <span style=color:#000>ival</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Inner</span> <span style=color:#000>inner_message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>EnumAllowingAlias</span> <span style=color:#000>enum_field</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>my_map</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-572aca8c8fca2c6bacb68792f40c6454>11.3 - Text Format Language Specification</h1><div class=lead>The protocol buffer Text Format Language specifies a syntax for representation of protobuf data in text form, which is often useful for configurations or tests.</div><p>The protocol buffer Text Format Language specifies a syntax for representation
of protobuf <em>data</em> in text form, which is often useful for configurations or
tests. This format is distinct from the format of text within a <code>.proto</code> schema,
for example. This document contains reference documentation using the syntax
specified in
<a href=https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form>ISO/IEC 14977 EBNF</a>.</p><div class="alert alert-note" role=alert><h4 class=alert-heading>Note</h4>This is a draft spec reverse-engineered from the C++ text format
<a href=https://github.com/protocolbuffers/protobuf/blob/master/src/google/protobuf/text_format.cc>implementation</a>
and may change based on further discussion and review. While an effort has been
made to keep text formats consistent across supported languages,
incompatibilities are likely to exist.</div><h2 id=parsing>Parsing Overview</h2><p>The language elements in this spec are split into lexical and syntactic
categories. Lexical elements must match the input text exactly as described, but
syntactic elements may be separated by optional <code>WHITESPACE</code> and <code>COMMENT</code>
tokens.</p><p>For example, a signed floating point value comprises two syntactic elements: the
sign (<code>-</code>) and the <code>FLOAT</code> literal. Optional whitespace and comments may exist
between the sign and the number, but not within the number. Example:</p><pre tabindex=0><code class=language-textproto data-lang=textproto>value: -2.0   # Valid: no additional whitespace.
value: - 2.0  # Valid: whitespace between &#39;-&#39; and &#39;2.0&#39;.
value: -
  # comment
  2.0         # Valid: whitespace and comments between &#39;-&#39; and &#39;2.0&#39;.
value: 2 . 0  # Invalid: the floating point period is part of the lexical
              # element, so no additional whitespace is allowed.
</code></pre><p>There is one edge case that requires special attention: a number token (<code>FLOAT</code>,
<code>DEC_INT</code>, <code>OCT_INT</code>, or <code>HEX_INT</code>) may not be immediately followed by an
<code>IDENT</code> token. Example:</p><pre tabindex=0><code class=language-textproto data-lang=textproto>foo: 10 bar: 20           # Valid: whitespace separates &#39;10&#39; and &#39;bar&#39;
foo: 10,bar: 20           # Valid: &#39;,&#39; separates &#39;10&#39; and &#39;bar&#39;
foo: 10[com.foo.ext]: 20  # Valid: &#39;10&#39; is followed immediately by &#39;[&#39;, which is
                          # not an identifier.
foo: 10bar: 20            # Invalid: no space between &#39;10&#39; and identifier &#39;bar&#39;.
</code></pre><h2 id=lexical>Lexical Elements</h2><p>The lexical elements described below fall into two categories: uppercase primary
elements and lowercase fragments. Only primary elements are included in the
output stream of tokens used during syntactic analysis; fragments exist only to
simplify construction of primary elements.</p><p>When parsing input text, the longest matching primary element wins. Example:</p><pre tabindex=0><code class=language-textproto data-lang=textproto>value: 10   # &#39;10&#39; is parsed as a DEC_INT token.
value: 10f  # &#39;10f&#39; is parsed as a FLOAT token, despite containing &#39;10&#39; which
            # would also match DEC_INT. In this case, FLOAT matches a longer
            # subsequence of the input.
</code></pre><h3 id=characters>Characters</h3><pre tabindex=0><code>char    = ? Any non-NUL unicode character ? ;
newline = ? ASCII #10 (line feed) ? ;

letter = &#34;A&#34; | &#34;B&#34; | &#34;C&#34; | &#34;D&#34; | &#34;E&#34; | &#34;F&#34; | &#34;G&#34; | &#34;H&#34; | &#34;I&#34; | &#34;J&#34; | &#34;K&#34; | &#34;L&#34; | &#34;M&#34;
       | &#34;N&#34; | &#34;O&#34; | &#34;P&#34; | &#34;Q&#34; | &#34;R&#34; | &#34;S&#34; | &#34;T&#34; | &#34;U&#34; | &#34;V&#34; | &#34;W&#34; | &#34;X&#34; | &#34;Y&#34; | &#34;Z&#34;
       | &#34;a&#34; | &#34;b&#34; | &#34;c&#34; | &#34;d&#34; | &#34;e&#34; | &#34;f&#34; | &#34;g&#34; | &#34;h&#34; | &#34;i&#34; | &#34;j&#34; | &#34;k&#34; | &#34;l&#34; | &#34;m&#34;
       | &#34;n&#34; | &#34;o&#34; | &#34;p&#34; | &#34;q&#34; | &#34;r&#34; | &#34;s&#34; | &#34;t&#34; | &#34;u&#34; | &#34;v&#34; | &#34;w&#34; | &#34;x&#34; | &#34;y&#34; | &#34;z&#34;
       | &#34;_&#34; ;

oct = &#34;0&#34; | &#34;1&#34; | &#34;2&#34; | &#34;3&#34; | &#34;4&#34; | &#34;5&#34; | &#34;6&#34; | &#34;7&#34; ;
dec = &#34;0&#34; | &#34;1&#34; | &#34;2&#34; | &#34;3&#34; | &#34;4&#34; | &#34;5&#34; | &#34;6&#34; | &#34;7&#34; | &#34;8&#34; | &#34;9&#34; ;
hex = &#34;0&#34; | &#34;1&#34; | &#34;2&#34; | &#34;3&#34; | &#34;4&#34; | &#34;5&#34; | &#34;6&#34; | &#34;7&#34; | &#34;8&#34; | &#34;9&#34;
    | &#34;A&#34; | &#34;B&#34; | &#34;C&#34; | &#34;D&#34; | &#34;E&#34; | &#34;F&#34;
    | &#34;a&#34; | &#34;b&#34; | &#34;c&#34; | &#34;d&#34; | &#34;e&#34; | &#34;f&#34; ;
</code></pre><h3 id=whitespace>Whitespace and Comments</h3><pre tabindex=0><code>COMMENT    = &#34;#&#34;, { char - newline }, [ newline ] ;
WHITESPACE = &#34; &#34;
           | newline
           | ? ASCII #9  (horizontal tab) ?
           | ? ASCII #11 (vertical tab) ?
           | ? ASCII #12 (form feed) ?
           | ? ASCII #13 (carriage return) ? ;
</code></pre><h3 id=identifiers>Identifiers</h3><pre tabindex=0><code>IDENT = letter, { letter | dec } ;
</code></pre><h3 id=numeric>Numeric Literals</h3><pre tabindex=0><code>dec_lit   = &#34;0&#34;
          | ( dec - &#34;0&#34; ), { dec } ;
float_lit = &#34;.&#34;, dec, { dec }, [ exp ]
          | dec_lit, &#34;.&#34;, { dec }, [ exp ]
          | dec_lit, exp ;
exp       = ( &#34;E&#34; | &#34;e&#34; ), [ &#34;+&#34; | &#34;-&#34; ], dec, { dec } ;

DEC_INT   = dec_lit
OCT_INT   = &#34;0&#34;, oct, { oct } ;
HEX_INT   = &#34;0&#34;, ( &#34;X&#34; | &#34;x&#34; ), hex, { hex } ;
FLOAT     = float_lit, [ &#34;F&#34; | &#34;f&#34; ]
          | dec_lit,   ( &#34;F&#34; | &#34;f&#34; ) ;
</code></pre><p>Decimal integers can be cast as floating-point values by using the <code>F</code> and <code>f</code>
suffixes. Example:</p><pre tabindex=0><code class=language-textproto data-lang=textproto>foo: 10    # This is an integer value.
foo: 10f   # This is a floating-point value.
foo: 1.0f  # Also optional for floating-point literals.
</code></pre><h3 id=string>String Literals</h3><pre tabindex=0><code>STRING = single_string | double_string ;
single_string = &#34;&#39;&#34;, { escape | char - &#34;&#39;&#34; - newline - &#34;\&#34; }, &#34;&#39;&#34; ;
double_string = &#39;&#34;&#39;, { escape | char - &#39;&#34;&#39; - newline - &#34;\&#34; }, &#39;&#34;&#39; ;

escape = &#34;\a&#34;                        (* ASCII #7  (bell)                 *)
       | &#34;\b&#34;                        (* ASCII #8  (backspace)            *)
       | &#34;\f&#34;                        (* ASCII #12 (form feed)            *)
       | &#34;\n&#34;                        (* ASCII #10 (line feed)            *)
       | &#34;\r&#34;                        (* ASCII #13 (carriage return)      *)
       | &#34;\t&#34;                        (* ASCII #9  (horizontal tab)       *)
       | &#34;\v&#34;                        (* ASCII #11 (vertical tab)         *)
       | &#34;\?&#34;                        (* ASCII #63 (question mark)        *)
       | &#34;\\&#34;                        (* ASCII #92 (backslash)            *)
       | &#34;\&#39;&#34;                        (* ASCII #39 (apostrophe)           *)
       | &#39;\&#34;&#39;                        (* ASCII #34 (quote)                *)
       | &#34;\&#34;, oct, [ oct, [ oct ] ]  (* UTF-8 byte in octal              *)
       | &#34;\x&#34;, hex, [ hex ]          (* UTF-8 byte in hexadecimal        *)
       | &#34;\u&#34;, hex, hex, hex, hex    (* Unicode code point up to 0xffff  *)
       | &#34;\U000&#34;,
         hex, hex, hex, hex, hex     (* Unicode code point up to 0xfffff *)
       | &#34;\U0010&#34;,
         hex, hex, hex, hex ;        (* Unicode code point between 0x100000 and 0x10ffff *)
</code></pre><p>Longer strings can be broken into several quoted strings on successive lines.
For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span>  <span style=color:#000>quote</span><span style=color:#ce5c00;font-weight:700>:</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>      <span style=color:#4e9a06>&#34;When we got into office, the thing that surprised me most was to find &#34;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>      <span style=color:#4e9a06>&#34;that things were just as bad as we&#39;d been saying they were.\n\n&#34;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>      <span style=color:#4e9a06>&#34;  -- John F. Kennedy&#34;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>Unicode code points are interpreted per
<a href="https://www.unicode.org/versions/Unicode13.0.0/appA.pdf#page=5">Unicode 13 Table A-1 Extended BNF</a>
and are encoded as UTF-8.</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>The C++ implementation currently interprets escaped high-surrogate
code points as UTF-16 code units, and expects a <code>\uHHHH</code> low-surrogate code
point to immediately follow, without any split across separate quoted strings.
In addition, unpaired surrogates will be rendered directly into also-invalid
UTF-8. These are both non-conforming behaviors[^surrogates] and should not be
relied on.</div><h2 id=syntax>Syntax Elements</h2><h3 id=message>Message</h3><p>A message is a collection of fields. A text format file is a single Message.</p><pre tabindex=0><code>Message = { Field } ;
</code></pre><h3 id=literals>Literals</h3><p>Field literal values can be numbers, strings, or identifiers such as <code>true</code> or
enum values.</p><pre tabindex=0><code>String             = STRING, { STRING } ;
Float              = [ &#34;-&#34; ], FLOAT ;
Identifier         = IDENT ;
SignedIdentifier   = &#34;-&#34;, IDENT ;   (* For example, &#34;-inf&#34; *)
DecSignedInteger   = &#34;-&#34;, DEC_INT ;
OctSignedInteger   = &#34;-&#34;, OCT_INT ;
HexSignedInteger   = &#34;-&#34;, HEX_INT ;
DecUnsignedInteger = DEC_INT ;
OctUnsignedInteger = OCT_INT ;
HexUnsignedInteger = HEX_INT ;
</code></pre><p>A single string value can comprise multiple quoted parts separated by optional
whitespace. Example:</p><pre tabindex=0><code class=language-textproto data-lang=textproto>a_string: &#34;first part&#34; &#39;second part&#39;
          &#34;third part&#34;
no_whitespace: &#34;first&#34;&#34;second&#34;&#39;third&#39;&#39;fourth&#39;
</code></pre><h3 id=field-names>Field Names</h3><p>Fields that are part of the containing message use simple <code>Identifiers</code> as
names.
<a href=/programming-guides/proto#extensions><code>Extension</code></a> and
<a href=/programming-guides/proto3#any><code>Any</code></a> field names are
wrapped in square brackets and fully-qualified. <code>Any</code> field names are prefixed
with a qualifying domain name, such as <code>type.googleapis.com/</code>.</p><pre tabindex=0><code>FieldName     = ExtensionName | AnyName | IDENT ;
ExtensionName = &#34;[&#34;, TypeName, &#34;]&#34; ;
AnyName       = &#34;[&#34;, Domain, &#34;/&#34;, TypeName, &#34;]&#34; ;
TypeName      = IDENT, { &#34;.&#34;, IDENT } ;
Domain        = IDENT, { &#34;.&#34;, IDENT } ;
</code></pre><p>Regular fields and extension fields can have scalar or message values. <code>Any</code>
fields are always messages. Example:</p><pre tabindex=0><code class=language-textproto data-lang=textproto>reg_scalar: 10
reg_message { foo: &#34;bar&#34; }

[com.foo.ext.scalar]​: 10
[com.foo.ext.message] { foo: &#34;bar&#34; }

any_value {
  [type.googleapis.com/com.foo.any] { foo: &#34;bar&#34; }
}
</code></pre><h3 id=fields>Fields</h3><p>Field values can be literals (strings, numbers, or identifiers), or nested
messages.</p><pre tabindex=0><code>Field        = ScalarField | MessageField ;
MessageField = FieldName, [ &#34;:&#34; ], ( MessageValue | MessageList ) [ &#34;;&#34; | &#34;,&#34; ];
ScalarField  = FieldName, &#34;:&#34;,     ( ScalarValue  | ScalarList  ) [ &#34;;&#34; | &#34;,&#34; ];
MessageList  = &#34;[&#34;, [ MessageValue, { &#34;,&#34;, MessageValue } ], &#34;]&#34; ;
ScalarList   = &#34;[&#34;, [ ScalarValue,  { &#34;,&#34;, ScalarValue  } ], &#34;]&#34; ;
MessageValue = &#34;{&#34;, Message, &#34;}&#34; | &#34;&lt;&#34;, Message, &#34;&gt;&#34; ;
ScalarValue  = String
             | Float
             | Identifier
             | SignedIdentifier
             | DecSignedInteger
             | OctSignedInteger
             | HexSignedInteger
             | DecUnsignedInteger
             | OctUnsignedInteger
             | HexUnsignedInteger ;
</code></pre><p>The <code>:</code> delimiter between the field name and value is required for scalar fields
but optional for message fields (including lists). Example:</p><pre tabindex=0><code class=language-textproto data-lang=textproto>scalar: 10          # Valid
scalar  10          # Invalid
scalars: [1, 2, 3]  # Valid
scalars  [1, 2, 3]  # Invalid
message: {}         # Valid
message  {}         # Valid
messages: [{}, {}]  # Valid
messages  [{}, {}]  # Valid
</code></pre><p>Values of message fields can be surrounded by curly brackets
or angle brackets:</p><pre tabindex=0><code class=language-textproto data-lang=textproto>message: { foo: &#34;bar&#34; }
message: &lt; foo: &#34;bar&#34; &gt;
</code></pre><p>Fields marked <code>repeated</code> can have multiple values specified by repeating the
field, using the special <code>[]</code> list syntax, or some combination of both. The
order of values is maintained. Example:</p><pre tabindex=0><code class=language-textproto data-lang=textproto>repeated_field: 1
repeated_field: 2
repeated_field: [3, 4, 5]
repeated_field: 6
repeated_field: [7, 8, 9]
</code></pre><p>Non-<code>repeated</code> fields cannot use the list syntax. For example, <code>[0]</code> is not
valid for <code>optional</code> or <code>required</code> fields. Fields marked <code>optional</code> can be
omitted or specified once. Fields marked <code>required</code> must be specified exactly
once.</p><p>Fields not specified in the associated <em>.proto</em> message are not allowed unless
the field name is present in the message&rsquo;s <code>reserved</code> field list. <code>reserved</code>
fields, if present in any form (scalar, list, message), are simply ignored by
text format.</p><h2 id=value>Value Types</h2><p>When a field&rsquo;s associated <em>.proto</em> value type is known, the following value
descriptions and constraints apply. For the purposes of this section, we declare
the following container elements:</p><pre tabindex=0><code>signedInteger   = DecSignedInteger | OctSignedInteger | HexSignedInteger ;
unsignedInteger = DecUnsignedInteger | OctUnsignedInteger | HexUnsignedInteger ;
integer         = signedInteger | unsignedInteger ;
</code></pre><table><thead><tr><th style=text-align:center><strong>.proto Type</strong></th><th style=text-align:center><strong>Values</strong></th></tr></thead><tbody><tr><td style=text-align:center><code>float</code>, <code>double</code></td><td style=text-align:left>A <code>Float</code>, <code>DecSignedInteger</code>, or
<code>DecUnsignedInteger</code> element, or an <code>Identifier</code>
or <code>SignedIdentifier</code> element whose <code>IDENT</code>
portion is equal to <em>"inf"</em>, <em>"infinity"</em>, or
<em>"nan"</em> (case-insensitive). Overflows are treated as infinity or
-infinity. Octal and hexadecimal values are not valid.<p>Note: <em>"nan"</em> should be interpreted as <a href=https://en.wikipedia.org/wiki/NaN#Quiet_NaN>Quiet NaN</a></p></td></tr><tr><td style=text-align:center><code>int32</code>, <code>sint32</code>, <code>sfixed32</code></td><td style=text-align:left>Any of the <code>integer</code> elements in the range
<em>-0x80000000</em> to <em>0x7FFFFFFF</em>.</td></tr><tr><td style=text-align:center><code>int64</code>, <code>sint64</code>, <code>sfixed64</code></td><td style=text-align:left>Any of the <code>integer</code> elements in the range
<em>-0x8000000000000000</em> to <em>0x7FFFFFFFFFFFFFFF</em>.</td></tr><tr><td style=text-align:center><code>uint32</code>, <code>fixed32</code></td><td style=text-align:left>Any of the <code>unsignedInteger</code> elements in the range
<em>0</em> to <em>0xFFFFFFFF</em>. Note that signed values
(<em>-0</em>) are not valid.</td></tr><tr><td style=text-align:center><code>uint64</code>, <code>fixed64</code></td><td style=text-align:left>Any of the <code>unsignedInteger</code> elements in the range
<em>0</em> to <em>0xFFFFFFFFFFFFFFFF</em>. Note that signed
values (<em>-0</em>) are not valid.</td></tr><tr><td style=text-align:center><code>string</code></td><td style=text-align:left>A <code>String</code> element containing valid UTF-8 data. Any escape
sequences must form valid UTF-8 byte sequences when unescaped.</td></tr><tr><td style=text-align:center><code>bytes</code></td><td style=text-align:left>A <code>String</code> element, possibly including invalid UTF-8 escape
sequences.</td></tr><tr><td style=text-align:center><code>bool</code></td><td style=text-align:left>An <code>Identifier</code> element or any of the
<code>unsignedInteger</code> elements matching one of the following
values.<br><strong>True values:</strong> <em>"True"</em>, <em>"true"</em>,
<em>"t"</em>, <em>1</em><br><strong>False values:</strong> <em>"False"</em>, <em>"false"</em>,
<em>"f"</em>, <em>0</em><br>Any unsigned integer representation of <em>0</em> or <em>1</em>
is permitted: <em>00</em>, <em>0x0</em>, <em>01</em>,
<em>0x1</em>, etc.</td></tr><tr><td style=text-align:center><em>enum values</em></td><td style=text-align:left>An <code>Identifier</code> element containing an enum value name, or any
of the <code>integer</code> elements in the range
<em>-0x80000000</em> to <em>0x7FFFFFFF</em> containing an enum
value number. It is not valid to specify a name that is not a
member of the field's <code>enum</code> type definition. Depending on
the particular protobuf runtime implementation, it may or may not be
valid to specify a number that is not a member of the field's
<code>enum</code> type definition. Text format processors not tied to a
particular runtime implementation (such as IDE support) may choose to
issue a warning when a provided number value is not a valid member. Note
that certain names that are valid keywords in other contexts, such as
<em>"true"</em> or <em>"infinity"</em>, are also valid enum value names.</td></tr><tr><td style=text-align:center><em>message values</em></td><td style=text-align:left>A <code>MessageValue</code> element.</td></tr></tbody></table><h2 id=extension>Extension Fields</h2><p>Extension fields are specified using their qualified names. Example:</p><pre tabindex=0><code class=language-textproto data-lang=textproto>local_field: 10
[com.example.ext_field]​: 20
</code></pre><p>Extension fields are generally defined in other <em>.proto</em> files. The text format
language does not provide a mechanism for specifying the locations of files that
define extension fields; instead, the parser must have prior knowledge of their
locations.</p><h2 id=any><code>Any</code> Fields</h2><p>Text format supports an expanded form of the
<a href=/programming-guides/proto3#any><code>google.protobuf.Any</code></a>
well-known type using a special syntax resembling extension fields. Example:</p><pre tabindex=0><code class=language-textproto data-lang=textproto>local_field: 10

# An Any value using regular fields.
any_value {
  type_url: &#34;type.googleapis.com/com.example.SomeType&#34;
  value: &#34;\x0a\x05hello&#34;  # serialized bytes of com.example.SomeType
}

# The same value using Any expansion
any_value {
  [type.googleapis.com/com.example.SomeType] {
    field1: &#34;hello&#34;
  }
}
</code></pre><p>In this example, <code>any_value</code> is a field of type <code>google.protobuf.Any</code>, and it
stores a serialized <code>com.example.SomeType</code> message containing <code>field1: hello</code>.</p><h2 id=group><code>group</code> Fields</h2><p>In text format, a <code>group</code> field uses a normal <code>MessageValue</code> element as its
value, but is specified using the capitalized group name rather than the
implicit lowercased field name. Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MessageWithGroup</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>group</span> <span style=color:#000>MyGroup</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>my_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>With the above <em>.proto</em> definition, the following text format is a valid
<code>MessageWithGroup</code>:</p><pre tabindex=0><code class=language-textproto data-lang=textproto>MyGroup {
  my_value: 1
}
</code></pre><p>Similar to Message fields, the <code>:</code> delimiter between the group name and value is
optional.</p><h2 id=map><code>map</code> Fields</h2><p>Text format does not provide a custom syntax for specifying map field entries.
When a <a href=/programming-guides/proto#maps><code>map</code></a> field is
defined in a <em>.proto</em> file, an implicit <code>Entry</code> message is defined containing
<code>key</code> and <code>value</code> fields. Map fields are always repeated, accepting multiple
key/value entries. Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MessageWithMap</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>my_map</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>With the above <em>.proto</em> definition, the following text format is a valid
<code>MessageWithMap</code>:</p><pre tabindex=0><code class=language-textproto data-lang=textproto>my_map { key: &#34;entry1&#34;, value: 1 }
my_map { key: &#34;entry2&#34;, value: 2 }

# Alternatively the list syntax may be used.
my_map: [
  { key: &#34;entry3&#34;, value: 3 },
  { key: &#34;entry4&#34;, value: 4 }
]
</code></pre><p>Both the <code>key</code> and <code>value</code> fields are optional and default to the zero value of
their respective types if unspecified. If a key is duplicated, only the
last-specified value will be retained in a parsed map.</p><h2 id=oneof><code>oneof</code> Fields</h2><p>While there is no special syntax related to <code>oneof</code> fields in text format, only
one <code>oneof</code> member may be specified at a time. Specifying multiple members
concurrently is not valid. Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>OneofExample</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MessageWithOneof</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>not_part_of_oneof</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>Example</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>      <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>first_oneof_field</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>      <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>second_oneof_field</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>MessageWithOneof</span> <span style=color:#204a87;font-weight:700>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The above <em>.proto</em> definition results in the following text format behavior:</p><pre tabindex=0><code class=language-textproto data-lang=textproto># Valid: only one field from the Example oneof is set.
message {
  not_part_of_oneof: &#34;always valid&#34;
  first_oneof_field: &#34;valid by itself&#34;
}

# Valid: the other oneof field is set.
message {
  not_part_of_oneof: &#34;always valid&#34;
  second_oneof_field: &#34;valid by itself&#34;
}

# Invalid: multiple fields from the Example oneof are set.
message {
  not_part_of_oneof: &#34;always valid&#34;
  first_oneof_field: &#34;not valid&#34;
  second_oneof_field: &#34;not valid&#34;
}
</code></pre><h2 id=text-format-files>Text Format Files</h2><p>A text format file uses the <code>.textproto</code> filename suffix and contains a single
<code>Message</code>. Text format files are UTF-8 encoded. An example textproto file is
provided below.</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Important</h4><code>.textproto</code> is the canonical text format file extension and should be preferred
to the alternatives, although some tools also recognize the legacy extensions
<code>.textpb</code> and <code>.pbtxt</code> (METADATA files are also an exception). All other
extensions are <strong>strongly</strong> discouraged; in particular, extensions such as
<code>.protoascii</code> wrongly imply that text format is ascii-only, and others like
<code>.pb.txt</code> are not recognized by common tooling.</div><pre tabindex=0><code class=language-textproto data-lang=textproto># This is an example of Protocol Buffer&#39;s text format.
# Unlike .proto files, only shell-style line comments are supported.

name: &#34;John Smith&#34;

pet {
  kind: DOG
  name: &#34;Fluffy&#34;
  tail_wagginess: 0.65f
}

pet &lt;
  kind: LIZARD
  name: &#34;Lizzy&#34;
  legs: 4
&gt;

string_value_with_escape: &#34;valid \n escape&#34;
repeated_values: [ &#34;one&#34;, &#34;two&#34;, &#34;three&#34; ]
</code></pre><h3 id=header>Header</h3><p>The header comments <code>proto-file</code> and <code>proto-message</code> inform developer tools of
the schema, so they may provide various features.</p><pre tabindex=0><code class=language-textproto data-lang=textproto># proto-file: some/proto/my_file.proto
# proto-message: MyMessage
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-281d1fb28dfbb5675ee4516a455438d4>11.4 - Protocol Buffers Well-Known Types</h1><div class=lead>API documentation for the google.protobuf package.</div><h2 id=index>Index</h2><ul><li><a href=#any><code>Any</code></a> (message)</li><li><a href=#api><code>Api</code></a> (message)</li><li><a href=#bool-value><code>BoolValue</code></a> (message)</li><li><a href=#bytes-value><code>BytesValue</code></a> (message)</li><li><a href=#double-value><code>DoubleValue</code></a> (message)</li><li><a href=#duration><code>Duration</code></a> (message)</li><li><a href=#empty><code>Empty</code></a> (message)</li><li><a href=#enum><code>Enum</code></a> (message)</li><li><a href=#enum-value><code>EnumValue</code></a> (message)</li><li><a href=#field><code>Field</code></a> (message)</li><li><a href=#field-cardinality><code>Field.Cardinality</code></a> (enum)</li><li><a href=#field-kind><code>Field.Kind</code></a> (enum)</li><li><a href=#field-mask><code>FieldMask</code></a> (message)</li><li><a href=#float-value><code>FloatValue</code></a> (message)</li><li><a href=#int32-value><code>Int32Value</code></a> (message)</li><li><a href=#int64-value><code>Int64Value</code></a> (message)</li><li><a href=#list-value><code>ListValue</code></a> (message)</li><li><a href=#method><code>Method</code></a> (message)</li><li><a href=#mixin><code>Mixin</code></a> (message)</li><li><a href=#null-value><code>NullValue</code></a> (enum)</li><li><a href=#option><code>Option</code></a> (message)</li><li><a href=#source-context><code>SourceContext</code></a> (message)</li><li><a href=#string-value><code>StringValue</code></a> (message)</li><li><a href=#struct><code>Struct</code></a> (message)</li><li><a href=#syntax><code>Syntax</code></a> (enum)</li><li><a href=#timestamp><code>Timestamp</code></a> (message)</li><li><a href=#type><code>Type</code></a> (message)</li><li><a href=#uint32-value><code>UInt32Value</code></a> (message)</li><li><a href=#uint64-value><code>UInt64Value</code></a> (message)</li><li><a href=#value><code>Value</code></a> (message)</li></ul><h2 id=any>Any</h2><p><code>Any</code> contains an arbitrary serialized message along with a URL that describes
the type of the serialized message.</p><h4 id=json>JSON</h4><p>The JSON representation of an <code>Any</code> value uses the regular representation of the
deserialized, embedded message, with an additional field <code>@type</code> which contains
the type URL. Example:</p><pre tabindex=0><code>package google.profile;
message Person {
  string first_name = 1;
  string last_name = 2;
}

{
  &#34;@type&#34;: &#34;type.googleapis.com/google.profile.Person&#34;,
  &#34;firstName&#34;: &lt;string&gt;,
  &#34;lastName&#34;: &lt;string&gt;
}
</code></pre><p>If the embedded message type is well-known and has a custom JSON representation,
that representation will be embedded adding a field <code>value</code> which holds the
custom JSON in addition to the <code>@type</code> field. Example (for message
<code>google.protobuf.Duration</code>):</p><pre tabindex=0><code>{
  &#34;@type&#34;: &#34;type.googleapis.com/google.protobuf.Duration&#34;,
  &#34;value&#34;: &#34;1.212s&#34;
}
</code></pre><table id=google.protobuf.Any.FIELDS><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>type_url</code></td><td><code class=apitype>string</code></td><td><p>A URL/resource name whose content describes the type of the serialized message.</p><p>For URLs which use the schema <code>http</code>, <code>https</code>, or no schema, the following restrictions and interpretations apply:</p><ul><li>If no schema is provided, <code>https</code> is assumed.</li><li>The last segment of the URL's path must represent the fully qualified name of the type (as in <code>path/google.protobuf.Duration</code>).</li><li>An HTTP GET on the URL must yield a <code><a href=#type>google.protobuf.Type</a></code> value in binary format, or produce an error.</li><li>Applications are allowed to cache lookup results based on the URL, or have them precompiled into a binary to avoid any lookup. Therefore, binary compatibility needs to be preserved on changes to types. (Use versioned type names to manage breaking changes.)</li></ul><p>Schemas other than <code>http</code>, <code>https</code> (or the empty schema) might be used with implementation specific semantics.</p></td></tr><tr><td><code>value</code></td><td><code class=apitype>bytes</code></td><td>Must be valid serialized data of the above specified type.</td></tr></tbody></table><h2 id=api>Api</h2><p>Api is a light-weight descriptor for a protocol buffer service.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td><code>string</code></td><td>The fully qualified name of this api, including package name followed by
the api's simple name.</td></tr><tr><td><code>methods</code></td><td><code><a href=#method>Method</a></code></td><td>The methods of this api, in unspecified order.</td></tr><tr><td><code>options</code></td><td><code><a href=#option>Option</a></code></td><td>Any metadata attached to the API.</td></tr><tr><td><code>version</code></td><td><code>string</code></td><td><p>A version string for this api. If specified, must have the form
<code>major-version.minor-version</code>, as in <code>1.10</code>. If
the minor version is omitted, it defaults to zero. If the entire
version field is empty, the major version is derived from the package
name, as outlined below. If the field is not empty, the version in the
package name will be verified to be consistent with what is provided
here.</p><p>The versioning schema uses
<a href=http://semver.org>semantic versioning</a> where the major
version number indicates a breaking change and the minor version an
additive, non-breaking change. Both version numbers are signals to
users what to expect from different versions, and should be carefully
chosen based on the product plan.</p><p>The major version is also reflected in the package name of the API,
which must end in <code>v&lt;major-version></code>, as in
<code>google.feature.v1</code>. For major versions 0 and 1, the suffix
can be omitted. Zero major versions must only be used for
experimental, none-GA apis.</p></td></tr><tr><td><code>source_context</code></td><td><code><code><a href=#source-context>SourceContext</a></code></code></td><td>Source context for the protocol buffer service represented by this
message.</td></tr><tr><td><code>mixins</code></td><td><code><code><a href=#mixin>Mixin</a></code></code></td><td>Included APIs. See
<code><a href=#mixin>Mixin</a></code>.</td></tr><tr><td><code>syntax</code></td><td><code><a href=#syntax>Syntax</a></code></td><td>The source syntax of the service.</td></tr></tbody></table><h2 id=bool-value>BoolValue</h2><p>Wrapper message for <code>bool</code>.</p><p>The JSON representation for <code>BoolValue</code> is JSON <code>true</code> and <code>false</code>.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>value</code></td><td><code class=apitype>bool</code></td><td>The bool value.</td></tr></tbody></table><h2 id=bytes-value>BytesValue</h2><p>Wrapper message for <code>bytes</code>.</p><p>The JSON representation for <code>BytesValue</code> is JSON string.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>value</code></td><td><code>bytes</code></td><td>The bytes value.</td></tr></tbody></table><h2 id=double-value>DoubleValue</h2><p>Wrapper message for <code>double</code>.</p><p>The JSON representation for <code>DoubleValue</code> is JSON number.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>value</code></td><td><code>double</code></td><td>The double value.</td></tr></tbody></table><h2 id=duration>Duration</h2><p>A Duration represents a signed, fixed-length span of time represented as a count
of seconds and fractions of seconds at nanosecond resolution. It is independent
of any calendar and concepts like "day" or "month". It is related to
Timestamp in that the difference between two Timestamp values is a Duration and
it can be added or subtracted from a Timestamp. Range is approximately +-10,000
years.</p><p>Example 1: Compute Duration from two Timestamps in pseudo code.</p><pre tabindex=0><code>Timestamp start = ...;
Timestamp end = ...;
Duration duration = ...;

duration.seconds = end.seconds - start.seconds;
duration.nanos = end.nanos - start.nanos;

if (duration.seconds &lt; 0 &amp;&amp; duration.nanos &gt; 0) {
  duration.seconds += 1;
  duration.nanos -= 1000000000;
} else if (duration.seconds &gt; 0 &amp;&amp; duration.nanos &lt; 0) {
  duration.seconds -= 1;
  duration.nanos += 1000000000;
}
</code></pre><p>Example 2: Compute Timestamp from Timestamp + Duration in pseudo code.</p><pre tabindex=0><code>Timestamp start = ...;
Duration duration = ...;
Timestamp end = ...;

end.seconds = start.seconds + duration.seconds;
end.nanos = start.nanos + duration.nanos;

if (end.nanos &lt; 0) {
  end.seconds -= 1;
  end.nanos += 1000000000;
} else if (end.nanos &gt;= 1000000000) {
  end.seconds += 1;
  end.nanos -= 1000000000;
}
</code></pre><p>The JSON representation for <code>Duration</code> is a <code>String</code> that ends in <code>s</code> to
indicate seconds and is preceded by the number of seconds, with nanoseconds
expressed as fractional seconds.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>seconds</code></td><td><code>int64</code></td><td>Signed seconds of the span of time. Must be from -315,576,000,000 to
+315,576,000,000 inclusive.</td></tr><tr><td><code>nanos</code></td><td><code>int32</code></td><td>Signed fractions of a second at nanosecond resolution of the span of
time. Durations less than one second are represented with a 0
<code>seconds</code> field and a positive or negative
<code>nanos</code> field. For durations of one second or more, a
non-zero value for the <code>nanos</code> field must be of the same sign
as the <code>seconds</code> field. Must be from -999,999,999 to
+999,999,999 inclusive.</td></tr></tbody></table><h2 id=empty>Empty</h2><p>A generic empty message that you can re-use to avoid defining duplicated empty
messages in your APIs. A typical example is to use it as the request or the
response type of an API method. For instance:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>service</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>google.protobuf.Empty</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>google.protobuf.Empty</span><span style=color:#000;font-weight:700>);</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The JSON representation for <code>Empty</code> is empty JSON object <code>{}</code>.</p><h2 id=enum>Enum</h2><p>Enum type definition</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td><code>string</code></td><td>Enum type name.</td></tr><tr><td><code>enumvalue</code></td><td><code><a href=#enum-value>EnumValue</a></code></td><td>Enum value definitions.</td></tr><tr><td><code>options</code></td><td><code><a href=#option>Option</a></code></td><td>Protocol buffer options.</td></tr><tr><td><code>source_context</code></td><td><code><a href=#source-context>SourceContext</a></code></td><td>The source context.</td></tr><tr><td><code>syntax</code></td><td><code><a href=#syntax>Syntax</a></code></td><td>The source syntax.</td></tr></tbody></table><h2 id=enum-value>EnumValue</h2><p>Enum value definition.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td><code>string</code></td><td>Enum value name.</td></tr><tr><td><code>number</code></td><td><code>int32</code></td><td>Enum value number.</td></tr><tr><td><code>options</code></td><td><code><a href=#option>Option</a></code></td><td>Protocol buffer options.</td></tr></tbody></table><h2 id=field>Field</h2><p>A single field of a message type.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>kind</code></td><td><code><a href=#field-kind>Kind</a></code></td><td>The field type.</td></tr><tr><td><code>cardinality</code></td><td><code><a href=#field-cardinality>Cardinality</a></code></td><td>The field cardinality.</td></tr><tr><td><code>number</code></td><td><code>int32</code></td><td>The field number.</td></tr><tr><td><code>name</code></td><td><code>string</code></td><td>The field name.</td></tr><tr><td><code>type_url</code></td><td><code>string</code></td><td>The field type URL, without the scheme, for message or enumeration
types. Example:
<code>"type.googleapis.com/google.protobuf.Timestamp"</code>.</td></tr><tr><td><code>oneof_index</code></td><td><code>int32</code></td><td>The index of the field type in <code>Type.oneofs</code>, for message or
enumeration types. The first type has index 1; zero means the type is
not in the list.</td></tr><tr><td><code>packed</code></td><td><code>bool</code></td><td>Whether to use alternative packed wire representation.</td></tr><tr><td><code>options</code></td><td><code><a href=#option>Option</a></code></td><td>The protocol buffer options.</td></tr><tr><td><code>json_name</code></td><td><code>string</code></td><td>The field JSON name.</td></tr><tr><td><code>default_value</code></td><td><code>string</code></td><td>The string value of the default value of this field. Proto2 syntax only.</td></tr></tbody></table><h2 id=field-cardinality>Cardinality</h2><p>Whether a field is optional, required, or repeated.</p><table><thead><tr><th>Enum value</th><th>Description</th></tr></thead><tbody><tr><td><code>CARDINALITY_UNKNOWN</code></td><td>For fields with unknown cardinality.</td></tr><tr><td><code>CARDINALITY_OPTIONAL</code></td><td>For optional fields.</td></tr><tr><td><code>CARDINALITY_REQUIRED</code></td><td>For required fields. Proto2 syntax only.</td></tr><tr><td><code>CARDINALITY_REPEATED</code></td><td>For repeated fields.</td></tr></tbody></table><h2 id=field-kind>Kind</h2><p>Basic field types.</p><table class=matchpre><thead><tr><th>Enum value</th><th>Description</th></tr></thead><tbody><tr><td><code>TYPE_UNKNOWN</code></td><td>Field type unknown.</td></tr><tr><td><code>TYPE_DOUBLE</code></td><td>Field type double.</td></tr><tr><td><code>TYPE_FLOAT</code></td><td>Field type float.</td></tr><tr><td><code>TYPE_INT64</code></td><td>Field type int64.</td></tr><tr><td><code>TYPE_UINT64</code></td><td>Field type uint64.</td></tr><tr><td><code>TYPE_INT32</code></td><td>Field type int32.</td></tr><tr><td><code>TYPE_FIXED64</code></td><td>Field type fixed64.</td></tr><tr><td><code>TYPE_FIXED32</code></td><td>Field type fixed32.</td></tr><tr><td><code>TYPE_BOOL</code></td><td>Field type bool.</td></tr><tr><td><code>TYPE_STRING</code></td><td>Field type string.</td></tr><tr><td><code>TYPE_GROUP</code></td><td>Field type group. Proto2 syntax only, and deprecated.</td></tr><tr><td><code>TYPE_MESSAGE</code></td><td>Field type message.</td></tr><tr><td><code>TYPE_BYTES</code></td><td>Field type bytes.</td></tr><tr><td><code>TYPE_UINT32</code></td><td>Field type uint32.</td></tr><tr><td><code>TYPE_ENUM</code></td><td>Field type enum.</td></tr><tr><td><code>TYPE_SFIXED32</code></td><td>Field type sfixed32.</td></tr><tr><td><code>TYPE_SFIXED64</code></td><td>Field type sfixed64.</td></tr><tr><td><code>TYPE_SINT32</code></td><td>Field type sint32.</td></tr><tr><td><code>TYPE_SINT64</code></td><td>Field type sint64.</td></tr></tbody></table><h2 id=field-mask>FieldMask</h2><p><code>FieldMask</code> represents a set of symbolic field paths, for example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>paths</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;f.a&#34;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000>paths</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;f.b.d&#34;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>Here <code>f</code> represents a field in some root message, <code>a</code> and <code>b</code> fields in the
message found in <code>f</code>, and <code>d</code> a field found in the message in <code>f.b</code>.</p><p>Field masks are used to specify a subset of fields that should be returned by a
get operation (a <em>projection</em>), or modified by an update operation. Field masks
also have a custom JSON encoding (see below).</p><h4 id=field-masks-projections>Field Masks in Projections</h4><p>When a <code>FieldMask</code> specifies a <em>projection</em>, the API will filter the response
message (or sub-message) to contain only those fields specified in the mask. For
example, consider this "pre-masking" response message:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>f</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>22</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>b</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>d</span> <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>y</span> <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>13</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000>z</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>8</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>After applying the mask in the previous example, the API response will not
contain specific values for fields x, y, or z (their value will be set to the
default, and omitted in proto text output):</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>f</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>22</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>b</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>d</span> <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>A repeated field is not allowed except at the last position of a field mask.</p><p>If a <code>FieldMask</code> object is not present in a get operation, the operation applies
to all fields (as if a FieldMask of all fields had been specified).</p><p>Note that a field mask does not necessarily apply to the top-level response
message. In case of a REST get operation, the field mask applies directly to the
response, but in case of a REST list operation, the mask instead applies to each
individual message in the returned resource list. In case of a REST custom
method, other definitions may be used. Where the mask applies will be clearly
documented together with its declaration in the API. In any case, the effect on
the returned resource/resources is required behavior for APIs.</p><h4 id=field-masks-updates>Field Masks in Update Operations</h4><p>A field mask in update operations specifies which fields of the targeted
resource are going to be updated. The API is required to only change the values
of the fields as specified in the mask and leave the others untouched. If a
resource is passed in to describe the updated values, the API ignores the values
of all fields not covered by the mask.</p><p>In order to reset a field&rsquo;s value to the default, the field must be in the mask
and set to the default value in the provided resource. Hence, in order to reset
all fields of a resource, provide a default instance of the resource and set all
fields in the mask, or do not provide a mask as described below.</p><p>If a field mask is not present on update, the operation applies to all fields
(as if a field mask of all fields has been specified). Note that in the presence
of schema evolution, this may mean that fields the client does not know and has
therefore not filled into the request will be reset to their default. If this is
unwanted behavior, a specific service may require a client to always specify a
field mask, producing an error if not.</p><p>As with get operations, the location of the resource which describes the updated
values in the request message depends on the operation kind. In any case, the
effect of the field mask is required to be honored by the API.</p><h5 id=http-rest>Considerations for HTTP REST</h5><p>The HTTP kind of an update operation which uses a field mask must be set to
PATCH instead of PUT in order to satisfy HTTP semantics (PUT must only be used
for full updates).</p><h4 id=json-encoding-field-masks>JSON Encoding of Field Masks</h4><p>In JSON, a field mask is encoded as a single string where paths are separated by
a comma. Fields name in each path are converted to/from lower-camel naming
conventions.</p><p>As an example, consider the following message declarations:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Profile</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>User</span> <span style=color:#000>user</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>Photo</span> <span style=color:#000>photo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>User</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>display_name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>address</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In proto a field mask for <code>Profile</code> may look as such:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>mask</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>paths</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;user.display_name&#34;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>paths</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;photo&#34;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In JSON, the same mask is represented as below:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#a40000>mask:</span> <span style=color:#204a87;font-weight:700>&#34;user.displayName,photo&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>paths</code></td><td><code>string</code></td><td>The set of field mask paths.</td></tr></tbody></table><h2 id=float-value>FloatValue</h2><p>Wrapper message for <code>float</code>.</p><p>The JSON representation for <code>FloatValue</code> is JSON number.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>value</code></td><td><code>float</code></td><td>The float value.</td></tr></tbody></table><h2 id=int32-value>Int32Value</h2><p>Wrapper message for <code>int32</code>.</p><p>The JSON representation for <code>Int32Value</code> is JSON number.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>value</code></td><td><code>int32</code></td><td>The int32 value.</td></tr></tbody></table><h2 id=int64-value>Int64Value</h2><p>Wrapper message for <code>int64</code>.</p><p>The JSON representation for <code>Int64Value</code> is JSON string.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>value</code></td><td><code>int64</code></td><td>The int64 value.</td></tr></tbody></table><h2 id=list-value>ListValue</h2><p><code>ListValue</code> is a wrapper around a repeated field of values.</p><p>The JSON representation for <code>ListValue</code> is JSON array.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>values</code></td><td><code><a href=#value>Value</a></code></td><td>Repeated field of dynamically typed values.</td></tr></tbody></table><h2 id=method>Method</h2><p>Method represents a method of an api.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td><code>string</code></td><td>The simple name of this method.</td></tr><tr><td><code>request_type_url</code></td><td><code>string</code></td><td>A URL of the input message type.</td></tr><tr><td><code>request_streaming</code></td><td><code>bool</code></td><td>If true, the request is streamed.</td></tr><tr><td><code>response_type_url</code></td><td><code>string</code></td><td>The URL of the output message type.</td></tr><tr><td><code>response_streaming</code></td><td><code>bool</code></td><td>If true, the response is streamed.</td></tr><tr><td><code>options</code></td><td><code><a href=#option>Option</a></code></td><td>Any metadata attached to the method.</td></tr><tr><td><code>syntax</code></td><td><code><a href=#syntax>Syntax</a></code></td><td>The source syntax of this method.</td></tr></tbody></table><h2 id=mixin>Mixin</h2><p>Declares an API to be included in this API. The including API must redeclare all
the methods from the included API, but documentation and options are inherited
as follows:</p><ul><li><p>If after comment and whitespace stripping, the documentation string of the
redeclared method is empty, it will be inherited from the original method.</p></li><li><p>Each annotation belonging to the service config (http, visibility) which is
not set in the redeclared method will be inherited.</p></li><li><p>If an http annotation is inherited, the path pattern will be modified as
follows. Any version prefix will be replaced by the version of the including
API plus the <code>root</code> path if specified.</p></li></ul><p>Example of a simple mixin:</p><pre tabindex=0><code>package google.acl.v1;
service AccessControl {
  // Get the underlying ACL object.
  rpc GetAcl(GetAclRequest) returns (Acl) {
    option (google.api.http).get = &#34;/v1/{resource=**}:getAcl&#34;;
  }
}

package google.storage.v2;
service Storage {
  //       rpc GetAcl(GetAclRequest) returns (Acl);

  // Get a data record.
  rpc GetData(GetDataRequest) returns (Data) {
    option (google.api.http).get = &#34;/v2/{resource=**}&#34;;
  }
}
</code></pre><p>Example of a mixin configuration:</p><pre tabindex=0><code>apis:
- name: google.storage.v2.Storage
  mixins:
  - name: google.acl.v1.AccessControl
</code></pre><p>The mixin construct implies that all methods in <code>AccessControl</code> are also
declared with same name and request/response types in <code>Storage</code>. A documentation
generator or annotation processor will see the effective <code>Storage.GetAcl</code> method
after inherting documentation and annotations as follows:</p><pre tabindex=0><code>service Storage {
  // Get the underlying ACL object.
  rpc GetAcl(GetAclRequest) returns (Acl) {
    option (google.api.http).get = &#34;/v2/{resource=**}:getAcl&#34;;
  }
  ...
}
</code></pre><p>Note how the version in the path pattern changed from <code>v1</code> to <code>v2</code>.</p><p>If the <code>root</code> field in the mixin is specified, it should be a relative path
under which inherited HTTP paths are placed. Example:</p><pre tabindex=0><code>apis:
- name: google.storage.v2.Storage
  mixins:
  - name: google.acl.v1.AccessControl
    root: acls
</code></pre><p>This implies the following inherited HTTP annotation:</p><pre tabindex=0><code>service Storage {
  // Get the underlying ACL object.
  rpc GetAcl(GetAclRequest) returns (Acl) {
    option (google.api.http).get = &#34;/v2/acls/{resource=**}:getAcl&#34;;
  }
  ...
}
</code></pre><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td><code>string</code></td><td>The fully qualified name of the API which is included.</td></tr><tr><td><code>root</code></td><td><code>string</code></td><td>If non-empty specifies a path under which inherited HTTP paths are
rooted.</td></tr></tbody></table><h2 id=null-value>NullValue</h2><p><code>NullValue</code> is a singleton enumeration to represent the null value for the
<code>Value</code> type union.</p><p>The JSON representation for <code>NullValue</code> is JSON <code>null</code>.</p><table><thead><tr><th>Enum value</th><th>Description</th></tr></thead><tbody><tr><td><code>NULL_VALUE</code></td><td>Null value.</td></tr></tbody></table><h2 id=option>Option</h2><p>A protocol buffer option, which can be attached to a message, field,
enumeration, etc.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td><code>string</code></td><td>The option's name. For example, <code>"java_package"</code>.</td></tr><tr><td><code>value</code></td><td><code><a href=#any>Any</a></code></td><td>The option's value. For example,
<code>"com.google.protobuf"</code>.</td></tr></tbody></table><h2 id=source-context>SourceContext</h2><p><code>SourceContext</code> represents information about the source of a protobuf element,
like the file in which it is defined.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>file_name</code></td><td><code>string</code></td><td>The path-qualified name of the .proto file that contained the associated
protobuf element. For example:
<code>"google/protobuf/source.proto"</code>.</td></tr></tbody></table><h2 id=string-value>StringValue</h2><p>Wrapper message for <code>string</code>.</p><p>The JSON representation for <code>StringValue</code> is JSON string.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>value</code></td><td><code>string</code></td><td>The string value.</td></tr></tbody></table><h2 id=struct>Struct</h2><p><code>Struct</code> represents a structured data value, consisting of fields which map to
dynamically typed values. In some languages, <code>Struct</code> might be supported by a
native representation. For example, in scripting languages like JS a struct is
represented as an object. The details of that representation are described
together with the proto support for the language.</p><p>The JSON representation for <code>Struct</code> is JSON object.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>fields</code></td><td><code>map&lt;string, <a href=#value>Value</a>></code></td><td>Map of dynamically typed values.</td></tr></tbody></table><h2 id=syntax>Syntax</h2><p>The syntax in which a protocol buffer element is defined.</p><table><thead><tr><th>Enum value</th><th>Description</th></tr></thead><tbody><tr><td><code>SYNTAX_PROTO2</code></td><td>Syntax <code>proto2</code>.</td></tr><tr><td><code>SYNTAX_PROTO3</code></td><td>Syntax <code>proto3</code>.</td></tr></tbody></table><h2 id=timestamp>Timestamp</h2><p>A Timestamp represents a point in time independent of any time zone or calendar,
represented as seconds and fractions of seconds at nanosecond resolution in UTC
Epoch time. It is encoded using the Proleptic Gregorian Calendar which extends
the Gregorian calendar backwards to year one. It is encoded assuming all minutes
are 60 seconds long, i.e. leap seconds are "smeared" so that no leap second
table is needed for interpretation. Range is from 0001-01-01T00:00:00Z to
9999-12-31T23:59:59.999999999Z. By restricting to that range, we ensure that we
can convert to and from RFC 3339 date strings. See
<a href=https://www.ietf.org/rfc/rfc3339.txt>https://www.ietf.org/rfc/rfc3339.txt</a>.</p><p>Example 1: Compute Timestamp from POSIX <code>time()</code>.</p><pre tabindex=0><code>Timestamp timestamp;
timestamp.set_seconds(time(NULL));
timestamp.set_nanos(0);
</code></pre><p>Example 2: Compute Timestamp from POSIX <code>gettimeofday()</code>.</p><pre tabindex=0><code>struct timeval tv;
gettimeofday(&amp;tv, NULL);

Timestamp timestamp;
timestamp.set_seconds(tv.tv_sec);
timestamp.set_nanos(tv.tv_usec * 1000);
</code></pre><p>Example 3: Compute Timestamp from Win32 <code>GetSystemTimeAsFileTime()</code>.</p><pre tabindex=0><code>FILETIME ft;
GetSystemTimeAsFileTime(&amp;ft);
UINT64 ticks = (((UINT64)ft.dwHighDateTime) &lt;&lt; 32) | ft.dwLowDateTime;

// A Windows tick is 100 nanoseconds. Windows epoch 1601-01-01T00:00:00Z
// is 11644473600 seconds before Unix epoch 1970-01-01T00:00:00Z.
Timestamp timestamp;
timestamp.set_seconds((INT64) ((ticks / 10000000) - 11644473600LL));
timestamp.set_nanos((INT32) ((ticks % 10000000) * 100));
</code></pre><p>Example 4: Compute Timestamp from Java <code>System.currentTimeMillis()</code>.</p><pre tabindex=0><code>long millis = System.currentTimeMillis();

Timestamp timestamp = Timestamp.newBuilder().setSeconds(millis / 1000)
    .setNanos((int) ((millis % 1000) * 1000000)).build();
</code></pre><p>Example 5: Compute Timestamp from current time in Python.</p><pre tabindex=0><code>now = time.time()
seconds = int(now)
nanos = int((now - seconds) * 10**9)
timestamp = Timestamp(seconds=seconds, nanos=nanos)
</code></pre><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>seconds</code></td><td><code>int64</code></td><td>Represents seconds of UTC time since Unix epoch 1970-01-01T00:00:00Z.
Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.</td></tr><tr><td><code>nanos</code></td><td><code>int32</code></td><td>Non-negative fractions of a second at nanosecond resolution. Negative
second values with fractions must still have non-negative nanos values
that count forward in time. Must be from 0 to 999,999,999 inclusive.</td></tr></tbody></table><h2 id=type>Type</h2><p>A protocol buffer message type.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td><code>string</code></td><td>The fully qualified message name.</td></tr><tr><td><code>fields</code></td><td><code><a href=#field>Field</a></code></td><td>The list of fields.</td></tr><tr><td><code>oneofs</code></td><td><code>string</code></td><td>The list of types appearing in <code>oneof</code> definitions in this
type.</td></tr><tr><td><code>options</code></td><td><code><a href=#option>Option</a></code></td><td>The protocol buffer options.</td></tr><tr><td><code>source_context</code></td><td><code><a href=#source-context>SourceContext</a></code></td><td>The source context.</td></tr><tr><td><code>syntax</code></td><td><code><a href=#syntax>Syntax</a></code></td><td>The source syntax.</td></tr></tbody></table><h2 id=uint32-value>UInt32Value</h2><p>Wrapper message for <code>uint32</code>.</p><p>The JSON representation for <code>UInt32Value</code> is JSON number.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>value</code></td><td><code>uint32</code></td><td>The uint32 value.</td></tr></tbody></table><h2 id=uint64-value>UInt64Value</h2><p>Wrapper message for <code>uint64</code>.</p><p>The JSON representation for <code>UInt64Value</code> is JSON string.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>value</code></td><td><code>uint64</code></td><td>The uint64 value.</td></tr></tbody></table><h2 id=value>Value</h2><p><code>Value</code> represents a dynamically typed value which can be either null, a number,
a string, a boolean, a recursive struct value, or a list of values. A producer
of value is expected to set one of that variants, absence of any variant
indicates an error.</p><p>The JSON representation for <code>Value</code> is JSON value.</p><table><thead><tr><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td colspan=3>Union field, only one of the following:</td></tr><tr><td><code>null_value</code></td><td><code><a href=#null-value>NullValue</a></code></td><td>Represents a null value.</td></tr><tr><td><code>number_value</code></td><td><code>double</code></td><td>Represents a double value. Note that attempting to serialize NaN or
Infinity results in error. (We can't serialize these as string "NaN" or
"Infinity" values like we do for regular fields, because they would
parse as string_value, not number_value).</td></tr><tr><td><code>string_value</code></td><td><code>string</code></td><td>Represents a string value.</td></tr><tr><td><code>bool_value</code></td><td><code>bool</code></td><td>Represents a boolean value.</td></tr><tr><td><code>struct_value</code></td><td><code><a href=#struct>Struct</a></code></td><td>Represents a structured value.</td></tr><tr><td><code>list_value</code></td><td><code><a href=#list-value>ListValue</a></code></td><td>Represents a repeated <code>Value</code>.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-a58d836551ff2c9e14168532f6699643>12 - Other Languages</h1><div class=lead>protoc, the Protocol Buffers Compiler, can be extended to support new languages via plugins.</div><p>While the current release includes compilers and APIs for C++, Java, Go, Ruby,
C#, and Python, the compiler code is designed so that it&rsquo;s easy to add support
for other languages. There are several ongoing projects to add new language
implementations to Protocol Buffers, including C, Haskell, Perl, Rust, and more.</p><p>For a list of links to projects we know about, see the
<a href=https://github.com/protocolbuffers/protobuf/blob/main/docs/third_party.md>third-party add-ons wiki page</a>.</p><h2 id=plugins>Compiler Plugins</h2><p><code>protoc</code>, the Protocol Buffers Compiler, can be extended to support new
languages via plugins. A plugin is just a program which reads a
<code>CodeGeneratorRequest</code> protocol buffer from standard input and then writes a
<code>CodeGeneratorResponse</code> protocol buffer to standard output. These message types
are defined in
<a href=/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb><code>plugin.proto</code></a>.
We recommend that all third-party code generators be written as plugins, as this
allows all generators to provide a consistent interface and share a single
parser implementation.</p><p>Additionally, plugins are able to insert code into the files generated by other
code generators. See the comments about "insertion points" in <code>plugin.proto</code>
for more on this. This could be used, for example, to write a plugin which
generates RPC service code that is tailored for a particular RPC system. See the
documentation for the generated code in each language to find out what insertion
points they provide.</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/protocol-buffers aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=40px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#fff data-fg=#000 data-position=bottom data-padding=16px data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/protocolbuffers/protobuf aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/g/protobuf aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=40px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#fff data-fg=#000 data-position=bottom data-padding=16px data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 Google LLC All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small>
<span class=text-white>Hosted by GitHub Pages.</span> <a href=https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement target=_blank>GitHub Privacy Statement</a></div></div></div></footer></div><script src=/js/main.min.48a7d138dd257f31c8ab8ac8a2922a6911189eae9f353439163ad3316421ea99.js integrity="sha256-SKfRON0lfzHIq4rIopIqaREYnq6fNTQ5FjrTMWQh6pk=" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script></body></html>