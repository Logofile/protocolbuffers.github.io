<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.107.0"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>C++ Generated Code Guide | Protocol Buffers Documentation</title><meta name=description content="This topic describes exactly what C++ code the protocol buffer compiler generates for any given protocol definition. "><meta property="og:title" content="C++ Generated Code Guide"><meta property="og:description" content="This topic describes exactly what C++ code the protocol buffer compiler generates for any given protocol definition. "><meta property="og:type" content="article"><meta property="og:url" content="/reference/cpp/cpp-generated/"><meta property="article:section" content="reference"><meta property="og:site_name" content="Protocol Buffers Documentation"><meta itemprop=name content="C++ Generated Code Guide"><meta itemprop=description content="This topic describes exactly what C++ code the protocol buffer compiler generates for any given protocol definition. "><meta itemprop=wordCount content="6850"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="C++ Generated Code Guide"><meta name=twitter:description content="This topic describes exactly what C++ code the protocol buffer compiler generates for any given protocol definition. "><link rel=preload href=/scss/main.min.def2cdda5cfcd95d9660c969a68946395435ad5fc75402be473d9995c7e926b3.css as=style><link href=/scss/main.min.def2cdda5cfcd95d9660c969a68946395435ad5fc75402be473d9995c7e926b3.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5L8P8GRN4Y"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5L8P8GRN4Y")}</script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class=navbar-brand__name>Protocol Buffers Documentation</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"></ul></div><div class="navbar-nav d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m--li><a href=/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-><span>Protocol Buffers</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-overview-li><a href=/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-overview><span>Overview</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-news-li><a href=/news/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-news><span>News</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-programming-guides-li><a href=/programming-guides/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-programming-guides><span>Programming Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesproto-li><a href=/programming-guides/proto/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesproto><span>Language Guide (proto 2)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesproto3-li><a href=/programming-guides/proto3/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesproto3><span>Language Guide (proto 3)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesstyle-li><a href=/programming-guides/style/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesstyle><span>Style Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesencoding-li><a href=/programming-guides/encoding/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesencoding><span>Encoding</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidestechniques-li><a href=/programming-guides/techniques/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidestechniques><span>Techniques</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesaddons-li><a href=/programming-guides/addons/ title="Third-party Add-ons" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesaddons><span>Add-ons</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesfield_presence-li><a href=/programming-guides/field_presence/ title="Application Note: Field Presence" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesfield_presence><span>Field Presence</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesdos-donts-li><a href=/programming-guides/dos-donts/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesdos-donts><span>Proto Best Practices</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-programming-guidesapi-li><a href=/programming-guides/api/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-programming-guidesapi><span>API Best Practices</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-getting-started-li><a href=/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-getting-started><span>Tutorials</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedcpptutorial-li><a href=/getting-started/cpptutorial/ title="Protocol Buffer Basics: C++" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedcpptutorial><span>C++</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedcsharptutorial-li><a href=/getting-started/csharptutorial/ title="Protocol Buffer Basics: C#" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedcsharptutorial><span>C#</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-starteddarttutorial-li><a href=/getting-started/darttutorial/ title="Protocol Buffer Basics: Dart" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-getting-starteddarttutorial><span>Dart</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedgotutorial-li><a href=/getting-started/gotutorial/ title="Protocol Buffer Basics: Go" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedgotutorial><span>Go</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedjavatutorial-li><a href=/getting-started/javatutorial/ title="Protocol Buffer Basics: Java" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedjavatutorial><span>Java</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedkotlintutorial-li><a href=/getting-started/kotlintutorial/ title="Protocol Buffer Basics: Kotlin" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedkotlintutorial><span>Kotlin</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedpythontutorial-li><a href=/getting-started/pythontutorial/ title="Protocol Buffer Basics: Python" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedpythontutorial><span>Python</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-reference-li><a href=/reference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-reference><span>Reference Guides</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-referencecpp-li><a href=/reference/cpp/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-referencecpp><span>C++ Reference</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-referencecppcpp-generated-li><a href=/reference/cpp/cpp-generated/ title="C++ Generated Code Guide" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-referencecppcpp-generated><span class=td-sidebar-nav-active-item>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecpparenas-li><a href=/reference/cpp/arenas/ title="C++ Arena Allocation Guide" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencecpparenas><span>Arena Allocation Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecppapi-docs-link-li><a href=/reference/cpp/api-docs/ target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencecppapi-docs-link><span>C++ API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencecsharp-li><a href=/reference/csharp/ title="C# Reference" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-referencecsharp><span>C#</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecsharpcsharp-generated-li><a href=/reference/csharp/csharp-generated/ title="C# Generated Code Guide" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencecsharpcsharp-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencecsharpapi-docs-link-li><a href=/reference/csharp/api-docs target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencecsharpapi-docs-link><span>C# API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencedart-li><a href=/reference/dart/ title="Dart Reference" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-referencedart><span>Dart</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencedartdart-generated-li><a href=/reference/dart/dart-generated/ title="Dart Generated Code Guide" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencedartdart-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencedartapi-docs-link-li><a href=https://pub.dartlang.org/documentation/protobuf target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencedartapi-docs-link><span>Dart API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencego-li><a href=/reference/go/ title="Go Reference" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-referencego><span>Go</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegogo-generated-li><a href=/reference/go/go-generated/ title="Go Generated Code Guide" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencegogo-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegofaq-li><a href=/reference/go/faq/ title="Go FAQ" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencegofaq><span>FAQ</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencegoapi-docs-link-li><a href=https://pkg.go.dev/google.golang.org/protobuf/proto target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencegoapi-docs-link><span>Go API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencejava-li><a href=/reference/java/ title="Java Reference" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-referencejava><span>Java</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencejavajava-generated-li><a href=/reference/java/java-generated/ title="Java Generated Code Guide" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencejavajava-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencejavaapi-docs-link-li><a href=/reference/java/api-docs/overview-summary.html target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencejavaapi-docs-link><span>Java API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencejavajava-proto-names-li><a href=/reference/java/java-proto-names/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencejavajava-proto-names><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencekotlin-li><a href=/reference/kotlin/ title="Kotlin Reference" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-referencekotlin><span>Kotlin</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencekotlinkotlin-generated-li><a href=/reference/kotlin/kotlin-generated/ title="Kotlin Generated Code Guide" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencekotlinkotlin-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencekotlinapi-docs-li><a href=/reference/kotlin/api-docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-referencekotlinapi-docs><span>Kotlin API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referenceobjective-c-li><a href=/reference/objective-c/ title="Objective-C Reference" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-referenceobjective-c><span>Objective-C</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceobjective-cobjective-c-generated-li><a href=/reference/objective-c/objective-c-generated/ title="Objective-C Generated Code Guide" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referenceobjective-cobjective-c-generated><span>Generated Code Guide</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencephp-li><a href=/reference/php/ title="PHP Reference" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-referencephp><span>PHP</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencephpphp-generated-li><a href=/reference/php/php-generated/ title="PHP Generated Code Guide" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencephpphp-generated><span>Generated Code Guide</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencepython-li><a href=/reference/python/ title="Python Reference" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-referencepython><span>Python</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencepythonpython-generated-li><a href=/reference/python/python-generated/ title="Python Generated Code Guide" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencepythonpython-generated><span>Generated Code Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencepythonapi-docs-link-li><a href=https://googleapis.dev/python/protobuf/latest/ target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencepythonapi-docs-link><span>Python API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referenceruby-li><a href=/reference/ruby/ title="Ruby Reference" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-referenceruby><span>Ruby</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencerubyruby-generated-li><a href=/reference/ruby/ruby-generated/ title="Ruby Generated Code Guide" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referencerubyruby-generated><span>Generated Code Guide</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referenceprotobuf-li><a href=/reference/protobuf/ title="Protocol Buffers Reference" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-referenceprotobuf><span>Protocol Buffers</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceprotobufproto2-spec-li><a href=/reference/protobuf/proto2-spec/ title="Protocol Buffers Version 2 Language Specification" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referenceprotobufproto2-spec><span>Version 2 Language Specification</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceprotobufproto3-spec-li><a href=/reference/protobuf/proto3-spec/ title="Protocol Buffers Version 3 Language Specification" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referenceprotobufproto3-spec><span>Version 3 Language Specification</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceprotobuftextformat-spec-li><a href=/reference/protobuf/textformat-spec/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referenceprotobuftextformat-spec><span>Text Format Language Specification</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceprotobufgoogleprotobuf-li><a href=/reference/protobuf/google.protobuf/ title="Protocol Buffers Well-Known Types" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referenceprotobufgoogleprotobuf><span>Well-Known Types</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referenceother-li><a href=/reference/other/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-referenceother><span>Other Languages</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-downloads-li><a href=/downloads/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-downloads><span>Downloads</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-history-li><a href=/history/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-history><span>History</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-forum-link-li><a href=https://groups.google.com/g/protobuf target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-forum-link><span>Forum</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-navbar-li><a href=/navbar/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-navbar><span></span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/protocolbuffers/protocolbuffers.github.io/tree/main//docs/content/en/reference/cpp/cpp-generated.md class=td-page-meta--view target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/protocolbuffers/protocolbuffers.github.io/edit/main//docs/content/en/reference/cpp/cpp-generated.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a href="https://github.com/protocolbuffers/protocolbuffers.github.io/new/main//docs/content/en/reference/cpp/cpp-generated.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a href="https://github.com/protocolbuffers/protocolbuffers.github.io/issues/new?title=C++%20Generated%20Code%20Guide" class=td-page-meta--issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/protocolbuffers/protobuf/issues/new class=td-page-meta--project-issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
<a id=print href=/reference/cpp/_print/><i class="fa-solid fa-print fa-fw"></i> Print entire section</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#invocation>Compiler Invocation</a></li><li><a href=#package>Packages</a></li><li><a href=#message>Messages</a><ul><li><a href=#nested-types>Nested Types</a></li></ul></li><li><a href=#fields>Fields</a><ul><li><a href=#singular-numeric-fields-proto2>Singular Numeric Fields (proto2)</a></li><li><a href=#singular-numeric-fields-proto3>Singular Numeric Fields (proto3)</a></li><li><a href=#string>Singular String Fields (proto2)</a></li><li><a href=#proto3_string>Singular String Fields (proto3)</a></li><li><a href=#enum_field>Singular Enum Fields (proto2)</a></li><li><a href=#singular-enum-fields-proto3>Singular Enum Fields (proto3)</a></li><li><a href=#embeddedmessage>Singular Embedded Message Fields</a></li><li><a href=#repeatednumeric>Repeated Numeric Fields</a></li><li><a href=#repeatedstring>Repeated String Fields</a></li><li><a href=#repeated_enum>Repeated Enum Fields</a></li><li><a href=#repeatedmessage>Repeated Embedded Message Fields</a></li><li><a href=#oneof-numeric-fields>Oneof Numeric Fields</a></li><li><a href=#oneof-string-fields>Oneof String Fields</a></li><li><a href=#oneof-enum-fields>Oneof Enum Fields</a></li><li><a href=#oneof-embedded-message-fields>Oneof Embedded Message Fields</a></li><li><a href=#map-fields>Map Fields</a></li></ul></li><li><a href=#any>Any</a></li><li><a href=#oneof>Oneof</a></li><li><a href=#enum>Enumerations</a></li><li><a href=#extension>Extensions (proto2 only)</a></li><li><a href=#arena>Arena Allocation</a></li><li><a href=#service>Services</a><ul><li><a href=#interface>Interface</a></li><li><a href=#stub>Stub</a></li></ul></li><li><a href=#plugins>Plugin Insertion Points</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/reference/>Reference Guides</a></li><li class=breadcrumb-item><a href=/reference/cpp/>C++ Reference</a></li><li class="breadcrumb-item active" aria-current=page><a href=/reference/cpp/cpp-generated/ aria-disabled=true class="btn-link disabled">Generated Code Guide</a></li></ol></nav><div class=td-content><h1>C++ Generated Code Guide</h1><div class=lead>This topic describes exactly what C++ code the protocol buffer compiler generates for any given protocol definition.</div><header class=article-meta></header><p>This page describes exactly what C++ code the protocol buffer compiler generates
for any given protocol definition. Any differences between proto2 and proto3
generated code are highlighted - note that these differences are in the
generated code as described in this document, not the base message
classes/interfaces, which are the same in both versions. You should read the
<a href=/programming-guides/proto>proto2 language guide</a> and/or
<a href=/programming-guides/proto3>proto3 language guide</a> before reading this
document.</p><h2 id=invocation>Compiler Invocation</h2><p>The protocol buffer compiler produces C++ output when invoked with the
<code>--cpp_out=</code> command-line flag. The parameter to the <code>--cpp_out=</code> option is the
directory where you want the compiler to write your C++ output. The compiler
creates a header file and an implementation file for each <code>.proto</code> file input.
The names of the output files are computed by taking the name of the <code>.proto</code>
file and making two changes:</p><ul><li>The extension (<code>.proto</code>) is replaced with either <code>.pb.h</code> or <code>.pb.cc</code> for the
header or implementation file, respectively.</li><li>The proto path (specified with the <code>--proto_path=</code> or <code>-I</code> command-line
flag) is replaced with the output path (specified with the <code>--cpp_out=</code>
flag).</li></ul><p>So, for example, let&rsquo;s say you invoke the compiler as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --cpp_out<span style=color:#ce5c00;font-weight:700>=</span>build/gen src/foo.proto src/bar/baz.proto
</span></span></code></pre></div><p>The compiler will read the files <code>src/foo.proto</code> and <code>src/bar/baz.proto</code> and
produce four output files: <code>build/gen/foo.pb.h</code>, <code>build/gen/foo.pb.cc</code>,
<code>build/gen/bar/baz.pb.h</code>, <code>build/gen/bar/baz.pb.cc</code>. The compiler will
automatically create the directory <code>build/gen/bar</code> if necessary, but it will
<em>not</em> create <code>build</code> or <code>build/gen</code>; they must already exist.</p><h2 id=package>Packages</h2><p>If a <code>.proto</code> file contains a <code>package</code> declaration, the entire contents of the
file will be placed in a corresponding C++ namespace. For example, given the
<code>package</code> declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>All declarations in the file will reside in the <code>foo::bar</code> namespace.</p><h2 id=message>Messages</h2><p>Given a simple message declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates a class called <code>Foo</code>, which publicly
derives from <code>google::protobuf::Message</code>. The class is a concrete class; no
pure-virtual methods are left unimplemented. Methods that are virtual in
<code>Message</code> but not pure-virtual may or may not be overridden by <code>Foo</code>, depending
on the optimization mode. By default, <code>Foo</code> implements specialized versions of
all methods for maximum speed. However, if the <code>.proto</code> file contains the line:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>optimize_for</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>CODE_SIZE</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>then <code>Foo</code> will override only the minimum set of methods necessary to function
and rely on reflection-based implementations of the rest. This significantly
reduces the size of the generated code, but also reduces performance.
Alternatively, if the <code>.proto</code> file contains:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>optimize_for</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>LITE_RUNTIME</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>then <code>Foo</code> will include fast implementations of all methods, but will implement
the <code>google::protobuf::MessageLite</code> interface, which only contains a subset of
the methods of <code>Message</code>. In particular, it does not support descriptors or
reflection. However, in this mode, the generated code only needs to link against
<code>libprotobuf-lite.so</code> (<code>libprotobuf-lite.lib</code> on Windows) instead of
<code>libprotobuf.so</code> (<code>libprotobuf.lib</code>). The &ldquo;lite&rdquo; library is much smaller than
the full library, and is more appropriate for resource-constrained systems such
as mobile phones.</p><p>You should <em>not</em> create your own <code>Foo</code> subclasses. If you subclass this class
and override a virtual method, the override may be ignored, as many generated
method calls are de-virtualized to improve performance.</p><p>The <code>Message</code> interface defines methods that let you check, manipulate, read, or
write the entire message, including parsing from and serializing to binary
strings.</p><ul><li><code>bool ParseFromString(const string& data)</code>: Parse the message from the given
serialized binary string (also known as wire format).</li><li><code>bool SerializeToString(string* output) const</code>: Serialize the given message
to a binary string.</li><li><code>string DebugString()</code>: Return a string giving the <code>text_format</code>
representation of the proto (should only be used for debugging).</li></ul><p>In addition to these methods, the <code>Foo</code> class defines the following methods:</p><ul><li><code>Foo()</code>: Default constructor.</li><li><code>~Foo()</code>: Default destructor.</li><li><code>Foo(const Foo& other)</code>: Copy constructor.</li><li><code>Foo(Foo&& other)</code>: Move constructor.</li><li><code>Foo& operator=(const Foo& other)</code>: Assignment operator.</li><li><code>Foo& operator=(Foo&& other)</code>: Move-assignment operator.</li><li><code>void Swap(Foo* other)</code>: Swap content with another message.</li><li><code>const UnknownFieldSet& unknown_fields() const</code>: Returns the set of unknown
fields encountered while parsing this message.</li><li><code>UnknownFieldSet* mutable_unknown_fields()</code>: Returns a pointer to the
mutable set of unknown fields encountered while parsing this message.</li></ul><p>The class also defines the following static methods:</p><ul><li><code>static const Descriptor* descriptor()</code>: Returns the type&rsquo;s descriptor. This
contains information about the type, including what fields it has and what
their types are. This can be used with
<a href=/reference/cpp/api-docs/google.protobuf.message#Reflection>reflection</a>
to inspect fields programmatically.</li><li><code>static const Foo& default_instance()</code>: Returns a const singleton instance
of <code>Foo</code> which is identical to a newly-constructed instance of <code>Foo</code> (so all
singular fields are unset and all repeated fields are empty). Note that the
default instance of a message can be used as a factory by calling its
<code>New()</code> method.</li></ul><h3 id=nested-types>Nested Types</h3><p>A message can be declared inside another message. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, the compiler generates two classes: <code>Foo</code> and <code>Foo_Bar</code>. In
addition, the compiler generates a typedef inside <code>Foo</code> as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>Foo_Bar</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p>This means that you can use the nested type&rsquo;s class as if it was the nested
class <code>Foo::Bar</code>. However, note that C++ does not allow nested types to be
forward-declared. If you want to forward-declare <code>Bar</code> in another file and use
that declaration, you must identify it as <code>Foo_Bar</code>.</p><h2 id=fields>Fields</h2><p>In addition to the methods described in the previous section, the protocol
buffer compiler generates a set of accessor methods for each field defined
within the message in the <code>.proto</code> file. These methods are in
lower-case/snake-case, such as <code>has_foo()</code> and <code>clear_foo()</code>.</p><p>As well as accessor methods, the compiler generates an integer constant for each
field containing its field number. The constant name is the letter <code>k</code>, followed
by the field name converted to camel-case, followed by <code>FieldNumber</code>. For
example, given the field <code>optional int32 foo_bar = 5;</code>, the compiler will
generate the constant <code>static const int kFooBarFieldNumber = 5;</code>.</p><p>For field accessors returning a <code>const</code> reference, that reference may be
invalidated when the next modifying access is made to the message. This includes
calling any non-<code>const</code> accessor of any field, calling any non-<code>const</code> method
inherited from <code>Message</code> or modifying the message through other ways (for
example, by using the message as the argument of <code>Swap()</code>). Correspondingly, the
address of the returned reference is only guaranteed to be the same across
different invocations of the accessor if no modifying access was made to the
message in the meantime.</p><p>For field accessors returning a pointer, that pointer may be invalidated when
the next modifying or non-modifying access is made to the message. This
includes, regardless of constness, calling any accessor of any field, calling
any method inherited from <code>Message</code> or accessing the message through other ways
(for example, by copying the message using the copy constructor).
Correspondingly, the value of the returned pointer is never guaranteed to be the
same across two different invocations of the accessor.</p><h3 id=singular-numeric-fields-proto2>Singular Numeric Fields (proto2)</h3><p>For either of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns <code>true</code> if the field is set.</li><li><code>int32 foo() const</code>: Returns the current value of the field. If the field is
not set, returns the default value.</li><li><code>void set_foo(int32 value)</code>: Sets the value of the field. After calling
this, <code>has_foo()</code> will return <code>true</code> and <code>foo()</code> will return <code>value</code>.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>has_foo()</code> will return <code>false</code> and <code>foo()</code> will return the default value.</li></ul><p>For other numeric field types (including <code>bool</code>), <code>int32</code> is replaced with the
corresponding C++ type according to the
<a href=/programming-guides/proto3#scalar>scalar value types table</a>.</p><h3 id=singular-numeric-fields-proto3>Singular Numeric Fields (proto3)</h3><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int32 foo() const</code>: Returns the current value of the field. If the field is
not set, returns 0.</li><li><code>void set_foo(int32 value)</code>: Sets the value of the field. After calling
this, <code>foo()</code> will return <code>value</code>.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>foo()</code> will return 0.</li></ul><p>For other numeric field types (including <code>bool</code>), <code>int32</code> is replaced with the
corresponding C++ type according to the
<a href=/programming-guides/proto3#scalar>scalar value types table</a>.</p><h3 id=string>Singular String Fields (proto2)</h3><p>For any of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns <code>true</code> if the field is set.</li><li><code>const string& foo() const</code>: Returns the current value of the field. If the
field is not set, returns the default value.</li><li><code>void set_foo(const string& value)</code>: Sets the value of the field. After
calling this, <code>has_foo()</code> will return <code>true</code> and <code>foo()</code> will return a copy
of <code>value</code>.</li><li><code>void set_foo(string&& value)</code> (C++11 and beyond): Sets the value of the
field, moving from the passed string. After calling this, <code>has_foo()</code> will
return <code>true</code> and <code>foo()</code> will return a copy of <code>value</code>.</li><li><code>void set_foo(const char* value)</code>: Sets the value of the field using a
C-style null-terminated string. After calling this, <code>has_foo()</code> will return
<code>true</code> and <code>foo()</code> will return a copy of <code>value</code>.</li><li><code>void set_foo(const char* value, int size)</code>: Like above, but the string size
is given explicitly rather than determined by looking for a null-terminator
byte.</li><li><code>string* mutable_foo()</code>: Returns a pointer to the mutable <code>string</code> object
that stores the field&rsquo;s value. If the field was not set prior to the call,
then the returned string will be empty (<em>not</em> the default value). After
calling this, <code>has_foo()</code> will return <code>true</code> and <code>foo()</code> will return
whatever value is written into the given string.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>has_foo()</code> will return <code>false</code> and <code>foo()</code> will return the default value.</li><li><code>void set_allocated_foo(string* value)</code>: Sets the <code>string</code> object to the
field and frees the previous field value if it exists. If the <code>string</code>
pointer is not <code>NULL</code>, the message takes ownership of the allocated <code>string</code>
object and <code>has_foo()</code> will return <code>true</code>. The message is free to delete the
allocated <code>string</code> object at any time, so references to the object may be
invalidated. Otherwise, if the <code>value</code> is <code>NULL</code>, the behavior is the same
as calling <code>clear_foo()</code>.</li><li><code>string* release_foo()</code>: Releases the ownership of the field and returns the
pointer of the <code>string</code> object. After calling this, caller takes the
ownership of the allocated <code>string</code> object, <code>has_foo()</code> will return <code>false</code>,
and <code>foo()</code> will return the default value.</li></ul><h3 id=proto3_string>Singular String Fields (proto3)</h3><p>For any of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>const string& foo() const</code>: Returns the current value of the field. If the
field is not set, returns the empty string/empty bytes.</li><li><code>void set_foo(const string& value)</code>: Sets the value of the field. After
calling this, <code>foo()</code> will return a copy of <code>value</code>.</li><li><code>void set_foo(string&& value)</code> (C++11 and beyond): Sets the value of the
field, moving from the passed string. After calling this, <code>foo()</code> will
return a copy of <code>value</code>.</li><li><code>void set_foo(const char* value)</code>: Sets the value of the field using a
C-style null-terminated string. After calling this, <code>foo()</code> will return a
copy of <code>value</code>.</li><li><code>void set_foo(const char* value, int size)</code>: Like above, but the string size
is given explicitly rather than determined by looking for a null-terminator
byte.</li><li><code>string* mutable_foo()</code>: Returns a pointer to the mutable <code>string</code> object
that stores the field&rsquo;s value. If the field was not set prior to the call,
then the returned string will be empty. After calling this, <code>foo()</code> will
return whatever value is written into the given string.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>foo()</code> will return the empty string/empty bytes.</li><li><code>void set_allocated_foo(string* value)</code>: Sets the <code>string</code> object to the
field and frees the previous field value if it exists. If the <code>string</code>
pointer is not <code>NULL</code>, the message takes ownership of the allocated <code>string</code>
object. The message is free to delete the allocated <code>string</code> object at any
time, so references to the object may be invalidated. Otherwise, if the
<code>value</code> is <code>NULL</code>, the behavior is the same as calling <code>clear_foo()</code>.</li><li><code>string* release_foo()</code>: Releases the ownership of the field and returns the
pointer of the <code>string</code> object. After calling this, caller takes the
ownership of the allocated <code>string</code> object and <code>foo()</code> will return the empty
string/empty bytes.</li></ul><h3 id=enum_field>Singular Enum Fields (proto2)</h3><p>Given the enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For either of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns <code>true</code> if the field is set.</li><li><code>Bar foo() const</code>: Returns the current value of the field. If the field is
not set, returns the default value.</li><li><code>void set_foo(Bar value)</code>: Sets the value of the field. After calling this,
<code>has_foo()</code> will return <code>true</code> and <code>foo()</code> will return <code>value</code>. In debug
mode (i.e. NDEBUG is not defined), if <code>value</code> does not match any of the
values defined for <code>Bar</code>, this method will abort the process.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>has_foo()</code> will return <code>false</code> and <code>foo()</code> will return the default value.</li></ul><h3 id=singular-enum-fields-proto3>Singular Enum Fields (proto3)</h3><p>Given the enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For this field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>Bar foo() const</code>: Returns the current value of the field. If the field is
not set, returns the default value (0).</li><li><code>void set_foo(Bar value)</code>: Sets the value of the field. After calling this,
<code>foo()</code> will return <code>value</code>.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>foo()</code> will return the default value.</li></ul><h3 id=embeddedmessage>Singular Embedded Message Fields</h3><p>Given the message type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For any of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//proto2
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902;font-style:italic>//proto3
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns <code>true</code> if the field is set.</li><li><code>const Bar& foo() const</code>: Returns the current value of the field. If the
field is not set, returns a <code>Bar</code> with none of its fields set (possibly
<code>Bar::default_instance()</code>).</li><li><code>Bar* mutable_foo()</code>: Returns a pointer to the mutable <code>Bar</code> object that
stores the field&rsquo;s value. If the field was not set prior to the call, then
the returned <code>Bar</code> will have none of its fields set (i.e. it will be
identical to a newly-allocated <code>Bar</code>). After calling this, <code>has_foo()</code> will
return <code>true</code> and <code>foo()</code> will return a reference to the same instance of
<code>Bar</code>.</li><li><code>void clear_foo()</code>: Clears the value of the field. After calling this,
<code>has_foo()</code> will return <code>false</code> and <code>foo()</code> will return the default value.</li><li><code>void set_allocated_foo(Bar* bar)</code>: Sets the <code>Bar</code> object to the field and
frees the previous field value if it exists. If the <code>Bar</code> pointer is not
<code>NULL</code>, the message takes ownership of the allocated <code>Bar</code> object and
<code>has_foo()</code> will return <code>true</code>. Otherwise, if the <code>Bar</code> is <code>NULL</code>, the
behavior is the same as calling <code>clear_foo()</code>.</li><li><code>Bar* release_foo()</code>: Releases the ownership of the field and returns the
pointer of the <code>Bar</code> object. After calling this, caller takes the ownership
of the allocated <code>Bar</code> object, <code>has_foo()</code> will return <code>false</code>, and <code>foo()</code>
will return the default value.</li></ul><h3 id=repeatednumeric>Repeated Numeric Fields</h3><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int foo_size() const</code>: Returns the number of elements currently in the
field.</li><li><code>int32 foo(int index) const</code>: Returns the element at the given zero-based
index. Calling this method with index outside of [0, foo_size()) yields
undefined behavior.</li><li><code>void set_foo(int index, int32 value)</code>: Sets the value of the element at the
given zero-based index.</li><li><code>void add_foo(int32 value)</code>: Appends a new element to the end of the field
with the given value.</li><li><code>void clear_foo()</code>: Removes all elements from the field. After calling this,
<code>foo_size()</code> will return zero.</li><li><code>const RepeatedField&lt;int32>& foo() const</code>: Returns the underlying
<code>RepeatedField</code> that stores the field&rsquo;s elements. This container class
provides STL-like iterators and other methods.</li><li><code>RepeatedField&lt;int32>* mutable_foo()</code>: Returns a pointer to the underlying
mutable <code>RepeatedField</code> that stores the field&rsquo;s elements. This container
class provides STL-like iterators and other methods.</li></ul><p>For other numeric field types (including <code>bool</code>), <code>int32</code> is replaced with the
corresponding C++ type according to the
<a href=/programming-guides/proto#scalar>scalar value types table</a>.</p><h3 id=repeatedstring>Repeated String Fields</h3><p>For either of these field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int foo_size() const</code>: Returns the number of elements currently in the
field.</li><li><code>const string& foo(int index) const</code>: Returns the element at the given
zero-based index. Calling this method with index outside of [0, foo_size()-1]
yields undefined behavior.</li><li><code>void set_foo(int index, const string& value)</code>: Sets the value of the
element at the given zero-based index.</li><li><code>void set_foo(int index, const char* value)</code>: Sets the value of the element
at the given zero-based index using a C-style null-terminated string.</li><li><code>void set_foo(int index, const char* value, int size)</code>: Like above, but the
string size is given explicitly rather than determined by looking for a
null-terminator byte.</li><li><code>string* mutable_foo(int index)</code>: Returns a pointer to the mutable <code>string</code>
object that stores the value of the element at the given zero-based index.
Calling this method with index outside of [0, foo_size()) yields undefined
behavior.</li><li><code>void add_foo(const string& value)</code>: Appends a new element to the end of the
field with the given value.</li><li><code>void add_foo(const char* value)</code>: Appends a new element to the end of the
field using a C-style null-terminated string.</li><li><code>void add_foo(const char* value, int size)</code>: Like above, but the string size
is given explicitly rather than determined by looking for a null-terminator
byte.</li><li><code>string* add_foo()</code>: Adds a new empty string element to the end of the field
and returns a pointer to it.</li><li><code>void clear_foo()</code>: Removes all elements from the field. After calling this,
<code>foo_size()</code> will return zero.</li><li><code>const RepeatedPtrField&lt;string>& foo() const</code>: Returns the underlying
<code>RepeatedPtrField</code> that stores the field&rsquo;s elements. This container class
provides STL-like iterators and other methods.</li><li><code>RepeatedPtrField&lt;string>* mutable_foo()</code>: Returns a pointer to the
underlying mutable <code>RepeatedPtrField</code> that stores the field&rsquo;s elements. This
container class provides STL-like iterators and other methods.</li></ul><h3 id=repeated_enum>Repeated Enum Fields</h3><p>Given the enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For this field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int foo_size() const</code>: Returns the number of elements currently in the
field.</li><li><code>Bar foo(int index) const</code>: Returns the element at the given zero-based
index. Calling this method with index outside of [0, foo_size()) yields
undefined behavior.</li><li><code>void set_foo(int index, Bar value)</code>: Sets the value of the element at the
given zero-based index. In debug mode (i.e. NDEBUG is not defined), if
<code>value</code> does not match any of the values defined for <code>Bar</code>, this method will
abort the process.</li><li><code>void add_foo(Bar value)</code>: Appends a new element to the end of the field
with the given value. In debug mode (i.e. NDEBUG is not defined), if <code>value</code>
does not match any of the values defined for <code>Bar</code>, this method will abort
the process.</li><li><code>void clear_foo()</code>: Removes all elements from the field. After calling this,
<code>foo_size()</code> will return zero.</li><li><code>const RepeatedField&lt;int>& foo() const</code>: Returns the underlying
<code>RepeatedField</code> that stores the field&rsquo;s elements. This container class
provides STL-like iterators and other methods.</li><li><code>RepeatedField&lt;int>* mutable_foo()</code>: Returns a pointer to the underlying
mutable <code>RepeatedField</code> that stores the field&rsquo;s elements. This container
class provides STL-like iterators and other methods.</li></ul><h3 id=repeatedmessage>Repeated Embedded Message Fields</h3><p>Given the message type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For this field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>int foo_size() const</code>: Returns the number of elements currently in the
field.</li><li><code>const Bar& foo(int index) const</code>: Returns the element at the given
zero-based index. Calling this method with index outside of [0, foo_size())
yields undefined behavior.</li><li><code>Bar* mutable_foo(int index)</code>: Returns a pointer to the mutable <code>Bar</code> object
that stores the value of the element at the given zero-based index. Calling
this method with index outside of [0, foo_size()) yields undefined behavior.</li><li><code>Bar* add_foo()</code>: Adds a new element to the end of the field and returns a
pointer to it. The returned <code>Bar</code> is mutable and will have none of its
fields set (i.e. it will be identical to a newly-allocated <code>Bar</code>).</li><li><code>void clear_foo()</code>: Removes all elements from the field. After calling this,
<code>foo_size()</code> will return zero.</li><li><code>const RepeatedPtrField&lt;Bar>& foo() const</code>: Returns the underlying
<code>RepeatedPtrField</code> that stores the field&rsquo;s elements. This container class
provides STL-like iterators and other methods.</li><li><code>RepeatedPtrField&lt;Bar>* mutable_foo()</code>: Returns a pointer to the underlying
mutable <code>RepeatedPtrField</code> that stores the field&rsquo;s elements. This container
class provides STL-like iterators and other methods.</li></ul><h3 id=oneof-numeric-fields>Oneof Numeric Fields</h3><p>For this <a href=#oneof>oneof</a> field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code> (proto2 only): Returns <code>true</code> if oneof case is
<code>kFoo</code>.</li><li><code>int32 foo() const</code>: Returns the current value of the field if oneof case is
<code>kFoo</code>. Otherwise, returns the default value.</li><li><code>void set_foo(int32 value)</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the value of this field and sets the oneof case to <code>kFoo</code>.</li><li><code>has_foo()</code> (proto2 only) will return true, <code>foo()</code> will return <code>value</code>,
and <code>example_name_case()</code> will return <code>kFoo</code>.</li></ul></li><li><code>void clear_foo()</code>:<ul><li>Nothing will be changed if oneof case is not <code>kFoo</code>.</li><li>If oneof case is <code>kFoo</code>, clears the value of the field and oneof case.
<code>has_foo()</code> (proto2 only) will return <code>false</code>, <code>foo()</code> will return the
default value and <code>example_name_case()</code> will return
<code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li></ul><p>For other numeric field types (including <code>bool</code>),<code>int32</code> is replaced with the
corresponding C++ type according to the
<a href=/programming-guides/proto3#scalar>scalar value types table</a>.</p><h3 id=oneof-string-fields>Oneof String Fields</h3><p>For any of these <a href=#oneof>oneof</a> field definitions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#a40000>…
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#a40000>…</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns <code>true</code> if the oneof case is <code>kFoo</code>.</li><li><code>const string& foo() const</code>: Returns the current value of the field if the
oneof case is <code>kFoo</code>. Otherwise, returns the default value.</li><li><code>void set_foo(const string& value)</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the value of this field and sets the oneof case to <code>kFoo</code>.</li><li><code>has_foo()</code> will return <code>true</code>, <code>foo()</code> will return a copy of <code>value</code>
and <code>example_name_case()</code> will return <code>kFoo</code>.</li></ul></li><li><code>void set_foo(const char* value)</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the value of the field using a C-style null-terminated string and
set the oneof case to <code>kFoo</code>.</li><li><code>has_foo()</code> will return <code>true</code>, <code>foo()</code> will return a copy of <code>value</code>
and <code>example_name_case()</code> will return <code>kFoo</code>.</li></ul></li><li><code>void set_foo(const char* value, int size)</code>: Like above, but the string size
is given explicitly rather than determined by looking for a null-terminator
byte.</li><li><code>string* mutable_foo()</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the oneof case to <code>kFoo</code> and returns a pointer to the mutable
string object that stores the field&rsquo;s value. If the oneof case was not
<code>kFoo</code> prior to the call, then the returned string will be empty (not
the default value).</li><li><code>has_foo()</code> will return <code>true</code>, <code>foo()</code> will return whatever value is
written into the given string and <code>example_name_case()</code> will return
<code>kFoo</code>.</li></ul></li><li><code>void clear_foo()</code>:<ul><li>If the oneof case is not <code>kFoo</code>, nothing will be changed .</li><li>If the oneof case is <code>kFoo</code>, frees the field and clears the oneof case .
<code>has_foo()</code> will return <code>false</code>, <code>foo()</code> will return the default value,
and <code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li><li><code>void set_allocated_foo(string* value)</code>:<ul><li>Calls <code>clear_example_name()</code>.</li><li>If the string pointer is not <code>NULL</code>: Sets the string object to the field
and sets the oneof case to <code>kFoo</code>. The message takes ownership of the
allocated string object, <code>has_foo()</code> will return <code>true</code> and
<code>example_name_case()</code> will return <code>kFoo</code>.</li><li>If the string pointer is <code>NULL</code>, <code>has_foo()</code> will return <code>false</code> and
<code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li><li><code>string* release_foo()</code>:<ul><li>Returns <code>NULL</code> if oneof case is not <code>kFoo</code>.</li><li>Clears the oneof case, releases the ownership of the field and returns
the pointer of the string object. After calling this, caller takes the
ownership of the allocated string object, <code>has_foo()</code> will return false,
<code>foo()</code> will return the default value, and <code>example_name_case()</code> will
return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li></ul><h3 id=oneof-enum-fields>Oneof Enum Fields</h3><p>Given the enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For the <a href=#oneof>oneof</a> field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code> (proto2 only): Returns <code>true</code> if oneof case is
<code>kFoo</code>.</li><li><code>Bar foo() const</code>: Returns the current value of the field if oneof case is
<code>kFoo</code>. Otherwise, returns the default value.</li><li><code>void set_foo(Bar value)</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the value of this field and sets the oneof case to <code>kFoo</code>.</li><li><code>has_foo()</code> (proto2 only) will return <code>true</code>, <code>foo()</code> will return
<code>value</code> and <code>example_name_case()</code> will return <code>kFoo</code>.</li><li>In debug mode (i.e. NDEBUG is not defined), if <code>value</code> does not match
any of the values defined for <code>Bar</code>, this method will abort the process.</li></ul></li><li><code>void clear_foo()</code>:<ul><li>Nothing will be changed if the oneof case is not <code>kFoo</code>.</li><li>If the oneof case is <code>kFoo</code>, clears the value of the field and the oneof
case. <code>has_foo()</code> (proto2 only) will return <code>false</code>, <code>foo()</code> will return
the default value and <code>example_name_case()</code> will return
<code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li></ul><h3 id=oneof-embedded-message-fields>Oneof Embedded Message Fields</h3><p>Given the message type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For the <a href=#oneof>oneof</a> field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>bool has_foo() const</code>: Returns true if oneof case is <code>kFoo</code>.</li><li><code>const Bar& foo() const</code>: Returns the current value of the field if oneof
case is <code>kFoo</code>. Otherwise, returns <code>Bar::default_instance()</code>.</li><li><code>Bar* mutable_foo()</code>:<ul><li>If any other oneof field in the same oneof is set, calls
<code>clear_example_name()</code>.</li><li>Sets the oneof case to <code>kFoo</code> and returns a pointer to the mutable Bar
object that stores the field&rsquo;s value. If the oneof case was not <code>kFoo</code>
prior to the call, then the returned Bar will have none of its fields
set (i.e. it will be identical to a newly-allocated Bar).</li><li>After calling this, <code>has_foo()</code> will return <code>true</code>, <code>foo()</code> will return
a reference to the same instance of <code>Bar</code> and <code>example_name_case()</code> will
return <code>kFoo</code>.</li></ul></li><li><code>void clear_foo()</code>:<ul><li>Nothing will be changed if the oneof case is not <code>kFoo</code>.</li><li>If the oneof case equals <code>kFoo</code>, frees the field and clears the oneof
case. <code>has_foo()</code> will return <code>false</code>, <code>foo()</code> will return the default
value and <code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li><li><code>void set_allocated_foo(Bar* bar)</code>:<ul><li>Calls <code>clear_example_name()</code>.</li><li>If the <code>Bar</code> pointer is not <code>NULL</code>: Sets the <code>Bar</code> object to the field
and sets the oneof case to <code>kFoo</code>. The message takes ownership of the
allocated <code>Bar</code> object, has_foo() will return true and
<code>example_name_case()</code> will return <code>kFoo</code>.</li><li>If the pointer is <code>NULL</code>, <code>has_foo()</code> will return <code>false</code> and
<code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>. (The behavior
is like calling <code>clear_example_name()</code>)</li></ul></li><li><code>Bar* release_foo()</code>:<ul><li>Returns <code>NULL</code> if oneof case is not <code>kFoo</code>.</li><li>If the oneof case is <code>kFoo</code>, clears the oneof case, releases the
ownership of the field and returns the pointer of the <code>Bar</code> object.
After calling this, caller takes the ownership of the allocated <code>Bar</code>
object, <code>has_foo()</code> will return <code>false</code>, <code>foo()</code> will return the default
value and <code>example_name_case()</code> will return <code>EXAMPLE_NAME_NOT_SET</code>.</li></ul></li></ul><h3 id=map-fields>Map Fields</h3><p>For this map field definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>weight</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following accessor methods:</p><ul><li><code>const google::protobuf::Map&lt;int32, int32>& weight();</code>: Returns an immutable
<code>Map</code>.</li><li><code>google::protobuf::Map&lt;int32, int32>* mutable_weight();</code>: Returns a mutable
<code>Map</code>.</li></ul><p>A <code>google::protobuf::Map</code> is a special container type used in protocol buffers
to store map fields. As you can see from its interface below, it uses a
commonly-used subset of <code>std::map</code> and <code>std::unordered_map</code> methods.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>template</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>typename</span> <span style=color:#000>Key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>typename</span> <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Map</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Member types
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>Key</span> <span style=color:#000>key_type</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>T</span> <span style=color:#000>mapped_type</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>MapPair</span><span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>Key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>T</span> <span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>value_type</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Iterators
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>iterator</span> <span style=color:#000>begin</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>begin</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>cbegin</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>end</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>end</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>cend</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Capacity
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>size</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>empty</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Element access
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#204a87;font-weight:700>operator</span><span style=color:#000;font-weight:700>[](</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>at</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>at</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Lookup
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>find</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>find</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Modifiers
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>pair</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>iterator</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>bool</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>insert</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>value_type</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>template</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>InputIt</span><span style=color:#ce5c00;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>insert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>InputIt</span> <span style=color:#000>first</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>InputIt</span> <span style=color:#000>last</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>size_type</span> <span style=color:#000>erase</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>Key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>erase</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>const_iterator</span> <span style=color:#000>pos</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>erase</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>const_iterator</span> <span style=color:#000>first</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>const_iterator</span> <span style=color:#000>last</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>clear</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Copy
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Map</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>other</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#204a87;font-weight:700>operator</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>other</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The easiest way to add data is to use normal map syntax, for example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>unique_ptr</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>ProtoName</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>my_enclosing_proto</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ProtoName</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>my_enclosing_proto</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>mutable_weight</span><span style=color:#000;font-weight:700>())[</span><span style=color:#000>my_key</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>my_value</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p><code>pair&lt;iterator, bool> insert(const value_type& value)</code> will implicitly cause a
deep copy of the <code>value_type</code> instance. The most efficient way to insert a new
value into a <code>google::protobuf::Map</code> is as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#204a87;font-weight:700>operator</span><span style=color:#000;font-weight:700>[](</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>new_key</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>new_mapped</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><h4 id=using-googleprotobufmap-with-standard-maps>Using <code>google::protobuf::Map</code> with standard maps</h4><p><code>google::protobuf::Map</code> supports the same iterator API as <code>std::map</code> and
<code>std::unordered_map</code>. If you don&rsquo;t want to use <code>google::protobuf::Map</code> directly,
you can convert a <code>google::protobuf::Map</code> to a standard map by doing the
following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>int32</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>standard_map</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>weight</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>begin</span><span style=color:#000;font-weight:700>(),</span>
</span></span><span style=display:flex><span>                                    <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>weight</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>end</span><span style=color:#000;font-weight:700>());</span>
</span></span></code></pre></div><p>Note that this will make a deep copy of the entire map.</p><p>You can also construct a <code>google::protobuf::Map</code> from a standard map as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>int32</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>weight</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>standard_map</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>begin</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>standard_map</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>end</span><span style=color:#000;font-weight:700>());</span>
</span></span></code></pre></div><h4 id=parsing-unknown-values>Parsing unknown values</h4><p>On the wire, a .proto map is equivalent to a map entry message for each
key/value pair, while the map itself is a repeated field of map entries. Like
ordinary message types, it&rsquo;s possible for a parsed map entry message to have
unknown fields: for example a field of type <code>int64</code> in a map defined as
<code>map&lt;int32, string></code>.</p><p>If there are unknown fields in the wire format of a map entry message, they will
be discarded.</p><p>If there is an unknown enum value in the wire format of a map entry message,
it&rsquo;s handled differently in proto2 and proto3. In proto2, the whole map entry
message is put into the unknown field set of the containing message. In proto3,
it is put into a map field as if it is a known enum value.</p><h2 id=any>Any</h2><p>Given an <a href=/programming-guides/proto3#any><code>Any</code></a> field like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#4e9a06>&#34;google/protobuf/any.proto&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>ErrorStatus</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#204a87;font-weight:700>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>google.protobuf.Any</span> <span style=color:#000>details</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In our generated code, the getter for the <code>details</code> field returns an instance of
<code>google::protobuf::Any</code>. This provides the following special methods to pack and
unpack the <code>Any</code>&rsquo;s values:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Any</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span> <span style=color:#204a87;font-weight:700>public</span><span style=color:#ce5c00;font-weight:700>:</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Packs the given message into this Any using the default type URL
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// prefix “type.googleapis.com”. Returns false if serializing the message failed.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>PackFrom</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Message</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Packs the given message into this Any using the given type URL
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// prefix. Returns false if serializing the message failed.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>PackFrom</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Message</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>type_url_prefix</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Unpacks this Any to a Message. Returns false if this Any
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// represents a different protobuf type or parsing fails.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>UnpackTo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Message</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Returns true if this Any represents the given protobuf type.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>template</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>typename</span> <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>Is</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=oneof>Oneof</h2><p>Given a oneof definition like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo_int</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo_string</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following C++ enum type:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>ExampleNameCase</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>kFooInt</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>kFooString</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>EXAMPLE_NAME_NOT_SET</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>In addition, it will generate these methods:</p><ul><li><code>ExampleNameCase example_name_case() const</code>: Returns the enum indicating
which field is set. Returns <code>EXAMPLE_NAME_NOT_SET</code> if none of them is set.</li><li><code>void clear_example_name()</code>: Frees the object if the oneof field set uses a
pointer (Message or String), and sets the oneof case to
<code>EXAMPLE_NAME_NOT_SET</code>.</li></ul><h2 id=enum>Enumerations</h2><p>Given an enum definition like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_B</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_C</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1234</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate a C++ enum type called <code>Foo</code> with the
same set of values. In addition, the compiler will generate the following
functions:</p><ul><li><code>const EnumDescriptor* Foo_descriptor()</code>: Returns the type&rsquo;s descriptor,
which contains information about what values this enum type defines.</li><li><code>bool Foo_IsValid(int value)</code>: Returns <code>true</code> if the given numeric value
matches one of <code>Foo</code>&rsquo;s defined values. In the above example, it would return
<code>true</code> if the input were 0, 5, or 1234.</li><li><code>const string& Foo_Name(int value)</code>: Returns the name for given numeric
value. Returns an empty string if no such value exists. If multiple values
have this number, the first one defined is returned. In the above example,
<code>Foo_Name(5)</code> would return <code>"VALUE_B"</code>.</li><li><code>bool Foo_Parse(const string& name, Foo* value)</code>: If <code>name</code> is a valid value
name for this enum, assigns that value into <code>value</code> and returns true.
Otherwise returns false. In the above example, <code>Foo_Parse("VALUE_C", &some_foo)</code> would return true and set <code>some_foo</code> to 1234.</li><li><code>const Foo Foo_MIN</code>: the smallest valid value of the enum (VALUE_A in the
example).</li><li><code>const Foo Foo_MAX</code>: the largest valid value of the enum (VALUE_C in the
example).</li><li><code>const int Foo_ARRAYSIZE</code>: always defined as <code>Foo_MAX + 1</code>.</li></ul><p><strong>Be careful when casting integers to proto2 enums.</strong> If an integer is cast to a
proto2 enum value, the integer <em>must</em> be one of the valid values for that enum,
or the results may be undefined. If in doubt, use the generated <code>Foo_IsValid()</code>
function to test if the cast is valid. Setting an enum-typed field of a proto2
message to an invalid value may cause an assertion failure. If an invalid enum
value is read when parsing a proto2 message, it will be treated as an
<a href=/reference/cpp/api-docs/google.protobuf.unknown_field_set>unknown field</a>.
These semantics have been changed in proto3. It&rsquo;s safe to cast any integer to a
proto3 enum value as long as it fits into int32. Invalid enum values will also
be kept when parsing a proto3 message and returned by enum field accessors.</p><p><strong>Be careful when using proto3 enums in switch statements.</strong> Proto3 enums are
open enum types with possible values outside the range of specified symbols.
Unrecognized enum values will be kept when parsing a proto3 message and returned
by the enum field accessors. A switch statement on a proto3 enum without a
default case will not be able to catch all cases even if all the known fields
are listed. This could lead to unexpected behavior including data corruption and
runtime crashes. <strong>Always add a default case or explicitly call
<code>Foo_IsValid(int)</code> outside of the switch to handle unknown enum values.</strong></p><p>You can define an enum inside a message type. In this case, the protocol buffer
compiler generates code that makes it appear that the enum type itself was
declared nested inside the message&rsquo;s class. The <code>Foo_descriptor()</code> and
<code>Foo_IsValid()</code> functions are declared as static methods. In reality, the enum
type itself and its values are declared at the global scope with mangled names,
and are imported into the class&rsquo;s scope with a typedef and a series of constant
definitions. This is done only to get around problems with declaration ordering.
Do not depend on the mangled top-level names; pretend the enum really is nested
in the message class.</p><h2 id=extension>Extensions (proto2 only)</h2><p>Given a message with an extension range:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extensions</span> <span style=color:#0000cf;font-weight:700>100</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#0000cf;font-weight:700>199</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate some additional methods for <code>Foo</code>:
<code>HasExtension()</code>, <code>ExtensionSize()</code>, <code>ClearExtension()</code>, <code>GetExtension()</code>,
<code>SetExtension()</code>, <code>MutableExtension()</code>, <code>AddExtension()</code>,
<code>SetAllocatedExtension()</code> and <code>ReleaseExtension()</code>. Each of these methods takes,
as its first parameter, an extension identifier (described below), which
identifies an extension field. The remaining parameters and the return value are
exactly the same as those for the corresponding accessor methods that would be
generated for a normal (non-extension) field of the same type as the extension
identifier. (<code>GetExtension()</code> corresponds to the accessors with no special
prefix.)</p><p>Given an extension definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>123</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>repeated_bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>124</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>For the singular extension field <code>bar</code>, the protocol buffer compiler generates
an &ldquo;extension identifier&rdquo; called <code>bar</code>, which you can use with <code>Foo</code>&rsquo;s extension
accessors to access this extension, like so:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HasExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HasExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ClearExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HasExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>));</span>
</span></span></code></pre></div><p>Similarly, for the repeated extension field <code>repeated_bar</code>, the compiler
generates an extension identifier called <code>repeated_bar</code>, which you can also use
with <code>Foo</code>&rsquo;s extension accessors:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>kSize</span><span style=color:#000;font-weight:700>;</span> <span style=color:#ce5c00;font-weight:700>++</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>repeated_bar</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ExtensionSize</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>repeated_bar</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>kSize</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>kSize</span><span style=color:#000;font-weight:700>;</span> <span style=color:#ce5c00;font-weight:700>++</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>repeated_bar</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>(The exact implementation of extension identifiers is complicated and involves
magical use of templates—however, you don&rsquo;t need to worry about how
extension identifiers work to use them.)</p><p>Extensions can be declared nested inside of another type. For example, a common
pattern is to do something like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Baz</span> <span style=color:#000>foo_ext</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>124</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>In this case, the extension identifier <code>foo_ext</code> is declared nested inside
<code>Baz</code>. It can be used as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>baz</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MutableExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>foo_ext</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>FillInMyBaz</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>baz</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h2 id=arena>Arena Allocation</h2><p>Arena allocation is a C++-only feature that helps you optimize your memory usage
and improve performance when working with protocol buffers. Enabling arena
allocation in your <code>.proto</code> adds additional code for working with arenas to your
C++ generated code. You can find out more about the arena allocation API in the
<a href=/reference/cpp/arenas>Arena Allocation Guide</a>.</p><h2 id=service>Services</h2><p>If the <code>.proto</code> file contains the following line:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>cc_generic_services</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>then the protocol buffer compiler will generate code based on the service
definitions found in the file as described in this section. However, the
generated code may be undesirable as it is not tied to any particular RPC
system, and thus requires more levels of indirection than code tailored to one
system. If you do NOT want this code to be generated, add this line to the file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>cc_generic_services</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>If neither of the above lines are given, the option defaults to <code>false</code>, as
generic services are deprecated. (Note that prior to 2.4.0, the option defaults
to <code>true</code>)</p><p>RPC systems based on <code>.proto</code>-language service definitions should provide
<a href=/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb>plugins</a>
to generate code appropriate for the system. These plugins are likely to require
that abstract services are disabled, so that they can generate their own classes
of the same names.</p><p>The remainder of this section describes what the protocol buffer compiler
generates when abstract services are enabled.</p><h3 id=interface>Interface</h3><p>Given a service definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>service</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FooRequest</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FooResponse</span><span style=color:#000;font-weight:700>);</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler will generate a class <code>Foo</code> to represent this
service. <code>Foo</code> will have a virtual method for each method defined in the service
definition. In this case, the method <code>Bar</code> is defined as:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>virtual</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>RpcController</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>controller</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>FooRequest</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                 <span style=color:#000>FooResponse</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>response</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Closure</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>done</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>The parameters are equivalent to the parameters of <code>Service::CallMethod()</code>,
except that the <code>method</code> argument is implied and <code>request</code> and <code>response</code>
specify their exact type.</p><p>These generated methods are virtual, but not pure-virtual. The default
implementations simply call <code>controller->SetFailed()</code> with an error message
indicating that the method is unimplemented, then invoke the <code>done</code> callback.
When implementing your own service, you must subclass this generated service and
implement its methods as appropriate.</p><p><code>Foo</code> subclasses the <code>Service</code> interface. The protocol buffer compiler
automatically generates implementations of the methods of <code>Service</code> as follows:</p><ul><li><code>GetDescriptor</code>: Returns the service&rsquo;s <code>ServiceDescriptor</code>.</li><li><code>CallMethod</code>: Determines which method is being called based on the provided
method descriptor and calls it directly, down-casting the request and
response messages objects to the correct types.</li><li><code>GetRequestPrototype</code> and <code>GetResponsePrototype</code>: Returns the default
instance of the request or response of the correct type for the given
method.</li></ul><p>The following static method is also generated:</p><ul><li><code>static ServiceDescriptor descriptor()</code>: Returns the type&rsquo;s descriptor,
which contains information about what methods this service has and what
their input and output types are.</li></ul><h3 id=stub>Stub</h3><p>The protocol buffer compiler also generates a &ldquo;stub&rdquo; implementation of every
service interface, which is used by clients wishing to send requests to servers
implementing the service. For the <code>Foo</code> service (above), the stub implementation
<code>Foo_Stub</code> will be defined. As with nested message types, a typedef is used so
that <code>Foo_Stub</code> can also be referred to as <code>Foo::Stub</code>.</p><p><code>Foo_Stub</code> is a subclass of <code>Foo</code> which also implements the following methods:</p><ul><li><code>Foo_Stub(RpcChannel* channel)</code>: Constructs a new stub which sends requests
on the given channel.</li><li><code>Foo_Stub(RpcChannel* channel, ChannelOwnership ownership)</code>: Constructs a
new stub which sends requests on the given channel and possibly owns that
channel. If <code>ownership</code> is <code>Service::STUB_OWNS_CHANNEL</code> then when the stub
object is deleted it will delete the channel as well.</li><li><code>RpcChannel* channel()</code>: Returns this stub&rsquo;s channel, as passed to the
constructor.</li></ul><p>The stub additionally implements each of the service&rsquo;s methods as a wrapper
around the channel. Calling one of the methods simply calls
<code>channel->CallMethod()</code>.</p><p>The Protocol Buffer library does not include an RPC implementation. However, it
includes all of the tools you need to hook up a generated service class to any
arbitrary RPC implementation of your choice. You need only provide
implementations of <code>RpcChannel</code> and <code>RpcController</code>. See the documentation for
<code>service.h</code> for more information.</p><h2 id=plugins>Plugin Insertion Points</h2><p><a href=/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb>Code generator plugins</a>
which want to extend the output of the C++ code generator may insert code of the
following types using the given insertion point names. Each insertion point
appears in both the <code>.pb.cc</code> file and the <code>.pb.h</code> file unless otherwise noted.</p><ul><li><code>includes</code>: Include directives.</li><li><code>namespace_scope</code>: Declarations that belong in the file&rsquo;s package/namespace,
but not within any particular class. Appears after all other namespace-scope
code.</li><li><code>global_scope</code>: Declarations that belong at the top level, outside of the
file&rsquo;s namespace. Appears at the very end of the file.</li><li><code>class_scope:TYPENAME</code>: Member declarations that belong in a message class.
<code>TYPENAME</code> is the full proto name, e.g. <code>package.MessageType</code>. Appears after
all other public declarations in the class. This insertion point appears
only in the <code>.pb.h</code> file.</li></ul><p>Do not generate code which relies on private class members declared by the
standard code generator, as these implementation details may change in future
versions of Protocol Buffers.</p><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/USERNAME/REPOSITORY/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/USERNAME/REPOSITORY/issues/new>tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=e=>{if(typeof ga!="function")return;const t={command:"send",hitType:"event",category:"Helpful",action:"click",label:window.location.pathname,value:e};ga(t.command,t.hitType,t.category,t.action,t.label,t.value)};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(1)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/protocol-buffers aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=40px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#fff data-fg=#000 data-position=bottom data-padding=16px data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/protocolbuffers/protobuf aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/g/protobuf aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=40px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#fff data-fg=#000 data-position=bottom data-padding=16px data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 Google LLC All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small>
<span class=text-white>Hosted by GitHub Pages.</span> <a href=https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement target=_blank>GitHub Privacy Statement</a></div></div></div></footer></div><script src=/js/main.min.48a7d138dd257f31c8ab8ac8a2922a6911189eae9f353439163ad3316421ea99.js integrity="sha256-SKfRON0lfzHIq4rIopIqaREYnq6fNTQ5FjrTMWQh6pk=" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script></body></html>