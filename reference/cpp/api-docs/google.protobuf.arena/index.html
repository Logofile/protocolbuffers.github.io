<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.107.0"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Protocol Buffers Documentation</title><meta name=description content="arena.harena.h#include &amp;lt;google/protobuf/arena.h&amp;gt;
namespace google::protobuf
This file defines an Arena allocator for better allocation performance. Classes in this fileArenaOptionsArenaOptions provides optional additional parameters to arena construction that control its block-allocation behavior. ArenaArena allocator. Arena::InternalHelperArena::is_arena_constructableHelper typetraits that indicates support for arenas in a type T at compile time. Arena::is_destructor_skippablestruct ArenaOptions#include &amp;lt;google/protobuf/arena.h&amp;gt;
namespace google::protobuf
ArenaOptions provides optional additional parameters to arena construction that control its block-allocation behavior. Memberssize_tstart_block_sizeThis defines the size of the first block requested from the system malloc."><meta property="og:title" content><meta property="og:description" content="arena.harena.h#include <google/protobuf/arena.h>
namespace google::protobuf
This file defines an Arena allocator for better allocation performance. Classes in this fileArenaOptionsArenaOptions provides optional additional parameters to arena construction that control its block-allocation behavior. ArenaArena allocator. Arena::InternalHelperArena::is_arena_constructableHelper typetraits that indicates support for arenas in a type T at compile time. Arena::is_destructor_skippablestruct ArenaOptions#include <google/protobuf/arena.h>
namespace google::protobuf
ArenaOptions provides optional additional parameters to arena construction that control its block-allocation behavior. Memberssize_tstart_block_sizeThis defines the size of the first block requested from the system malloc."><meta property="og:type" content="article"><meta property="og:url" content="/reference/cpp/api-docs/google.protobuf.arena/"><meta property="article:section" content="reference"><meta property="og:site_name" content="Protocol Buffers Documentation"><meta itemprop=name content><meta itemprop=description content="arena.harena.h#include <google/protobuf/arena.h>
namespace google::protobuf
This file defines an Arena allocator for better allocation performance. Classes in this fileArenaOptionsArenaOptions provides optional additional parameters to arena construction that control its block-allocation behavior. ArenaArena allocator. Arena::InternalHelperArena::is_arena_constructableHelper typetraits that indicates support for arenas in a type T at compile time. Arena::is_destructor_skippablestruct ArenaOptions#include <google/protobuf/arena.h>
namespace google::protobuf
ArenaOptions provides optional additional parameters to arena construction that control its block-allocation behavior. Memberssize_tstart_block_sizeThis defines the size of the first block requested from the system malloc."><meta itemprop=wordCount content="1846"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="arena.harena.h#include <google/protobuf/arena.h>
namespace google::protobuf
This file defines an Arena allocator for better allocation performance. Classes in this fileArenaOptionsArenaOptions provides optional additional parameters to arena construction that control its block-allocation behavior. ArenaArena allocator. Arena::InternalHelperArena::is_arena_constructableHelper typetraits that indicates support for arenas in a type T at compile time. Arena::is_destructor_skippablestruct ArenaOptions#include <google/protobuf/arena.h>
namespace google::protobuf
ArenaOptions provides optional additional parameters to arena construction that control its block-allocation behavior. Memberssize_tstart_block_sizeThis defines the size of the first block requested from the system malloc."><link rel=preload href=/scss/main.min.def2cdda5cfcd95d9660c969a68946395435ad5fc75402be473d9995c7e926b3.css as=style><link href=/scss/main.min.def2cdda5cfcd95d9660c969a68946395435ad5fc75402be473d9995c7e926b3.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5L8P8GRN4Y"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5L8P8GRN4Y")}</script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class=navbar-brand__name>Protocol Buffers Documentation</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"></ul></div><div class="navbar-nav d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div></div></nav></header><div class="container-fluid td-default td-outer"><main role=main class=td-main><html devsite><head><title>arena.h</title><meta name=project_path value=/protocol-buffers/_project.yaml><meta name=book_path value=/protocol-buffers/_book.yaml></head><body><h1>arena.h</h1><p><code>#include &lt;google/protobuf/arena.h><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p>This file defines an <a href=#Arena>Arena</a> allocator for better allocation performance.</p><table width=100%><tr><th colspan=2><h3 style=margin-top:4px>Classes in this file</h3></th></tr><tr><td><div><code><a href=#ArenaOptions>ArenaOptions</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#ArenaOptions>ArenaOptions</a> provides optional additional parameters to arena construction that control its block-allocation behavior.</div></td></tr><tr><td><div><code><a href=#Arena>Arena</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#Arena>Arena</a> allocator.</div></td></tr><tr><td><div><code><a href=#Arena.InternalHelper>Arena::InternalHelper</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr><tr><td><div><code><a href=#Arena.is_arena_constructable>Arena::is_arena_constructable</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Helper typetraits that indicates support for arenas in a type T at compile time.</div></td></tr><tr><td><div><code><a href=#Arena.is_destructor_skippable>Arena::is_destructor_skippable</a></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr></table><h2 id=ArenaOptions>struct ArenaOptions</h2><p><code>#include &lt;<a href=#>google/protobuf/arena.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p><a href=#ArenaOptions>ArenaOptions</a> provides optional additional parameters to arena construction that control its block-allocation behavior.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>size_t</code></td><td style=border-left-width:0 id=ArenaOptions.start_block_size><div style=padding-left:16px;text-indent:-16px><code><b>start_block_size</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This defines the size of the first block requested from the system malloc. <a href=#ArenaOptions.start_block_size.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>size_t</code></td><td style=border-left-width:0 id=ArenaOptions.max_block_size><div style=padding-left:16px;text-indent:-16px><code><b>max_block_size</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>This defines the maximum block size requested from system malloc (unless an individual arena allocation request occurs with a size larger than this maximum). <a href=#ArenaOptions.max_block_size.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>char *</code></td><td style=border-left-width:0 id=ArenaOptions.initial_block><div style=padding-left:16px;text-indent:-16px><code><b>initial_block</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>An initial block of memory for the arena to use, or NULL for none. <a href=#ArenaOptions.initial_block.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>size_t</code></td><td style=border-left-width:0 id=ArenaOptions.initial_block_size><div style=padding-left:16px;text-indent:-16px><code><b>initial_block_size</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The size of the initial block, if provided.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void *(*</code></td><td style=border-left-width:0 id=ArenaOptions.block_alloc><div style=padding-left:16px;text-indent:-16px><code><b>block_alloc</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A function pointer to an alloc method that returns memory blocks of size requested. <a href=#ArenaOptions.block_alloc.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void(*</code></td><td style=border-left-width:0 id=ArenaOptions.block_dealloc><div style=padding-left:16px;text-indent:-16px><code><b>block_dealloc</b></code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>A function pointer to a dealloc method that takes ownership of the blocks from the arena. <a href=#ArenaOptions.block_dealloc.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=ArenaOptions.ArenaOptions><div style=padding-left:16px;text-indent:-16px><code><b>ArenaOptions</b>()</code></div></td></tr></table><hr><h3 id=ArenaOptions.start_block_size.details><code>size_t ArenaOptions::start_block_size</code></h3><div style=margin-left:16px><p>This defines the size of the first block requested from the system malloc.</p><p>Subsequent block sizes will increase in a geometric series up to a maximum.</p></div><hr><h3 id=ArenaOptions.max_block_size.details><code>size_t ArenaOptions::max_block_size</code></h3><div style=margin-left:16px><p>This defines the maximum block size requested from system malloc (unless an individual arena allocation request occurs with a size larger than this maximum).</p><p>Requested block sizes increase up to this value, then remain here.</p></div><hr><h3 id=ArenaOptions.initial_block.details><code>char * ArenaOptions::initial_block</code></h3><div style=margin-left:16px><p>An initial block of memory for the arena to use, or NULL for none.</p><p>If provided, the block must live at least as long as the arena itself. The creator of the <a href=#Arena>Arena</a> retains ownership of the block after the <a href=#Arena>Arena</a> is destroyed.</p></div><hr><h3 id=ArenaOptions.block_alloc.details><code>void *(* ArenaOptions::block_alloc</code></h3><div style=margin-left:16px><p>A function pointer to an alloc method that returns memory blocks of size requested.</p><p>By default, it contains a ptr to the malloc function.</p><p>NOTE: block_alloc and dealloc functions are expected to behave like malloc and free, including Asan poisoning.</p></div><hr><h3 id=ArenaOptions.block_dealloc.details><code>void(* ArenaOptions::block_dealloc</code></h3><div style=margin-left:16px><p>A function pointer to a dealloc method that takes ownership of the blocks from the arena.</p><p>By default, it contains a ptr to a wrapper function that calls free.</p></div><h2 id=Arena>class Arena</h2><p><code>#include &lt;<a href=#>google/protobuf/arena.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a></code></p><p><a href=#Arena>Arena</a> allocator.</p><p><a href=#Arena>Arena</a> allocation replaces ordinary (heap-based) allocation with new/delete, and improves performance by aggregating allocations into larger blocks and freeing allocations all at once. Protocol messages are allocated on an arena by using Arena::CreateMessage&lt;T>(Arena*), below, and are automatically freed when the arena is destroyed.</p><p>This is a thread-safe implementation: multiple threads may allocate from the arena concurrently. Destruction is not thread-safe and the destructing thread must synchronize with users of the arena first.</p><p>An arena provides two allocation interfaces: CreateMessage&lt;T>, which works for arena-enabled proto2 message types as well as other types that satisfy the appropriate protocol (described below), and Create&lt;T>, which works for any arbitrary type T. CreateMessage&lt;T> is better when the type T supports it, because this interface (i) passes the arena pointer to the created object so that its sub-objects and internal allocations can use the arena too, and (ii) elides the object's destructor call when possible. Create&lt;T> does not place any special requirements on the type T, and will invoke the object's destructor when the arena is destroyed.</p><p>The arena message allocation protocol, required by <a href=#Arena.CreateMessage>CreateMessage&lt;T>(Arena* arena, Args&&... args)</a>, is as follows:</p><ul><li>The type T must have (at least) two constructors: a constructor callable with <code>args</code> (without <code>arena</code>), called when a T is allocated on the heap; and a constructor callable with <code>Arena* arena, Args&&... args</code>, called when a T is allocated on an arena. If the second constructor is called with a NULL arena pointer, it must be equivalent to invoking the first (<code>args</code>-only) constructor.</li><li>The type T must have a particular type trait: a nested type |InternalArenaConstructable_|. This is usually a typedef to |void|. If no such type trait exists, then the instantiation CreateMessage&lt;T> will fail to compile.</li><li>The type T <i>may</i> have the type trait |DestructorSkippable_|. If this type trait is present in the type, then its destructor will not be called if and only if it was passed a non-NULL arena pointer. If this type trait is not present on the type, then its destructor is always called when the containing arena is destroyed.</li></ul><p>This protocol is implemented by all arena-enabled proto2 message classes as well as protobuf container types like <a href=../google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> and <a href=../google.protobuf.map#Map>Map</a>. The protocol is internal to protobuf and is not guaranteed to be stable. Non-proto types should not rely on this protocol.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>const size_t</code></td><td style=border-left-width:0 id=Arena.kBlockOverhead><div style=padding-left:16px;text-indent:-16px><code><b>kBlockOverhead</b> = =
internal::ThreadSafeArena::kBlockHeaderSize +
internal::ThreadSafeArena::kSerialArenaSize</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Block overhead. <a href=#Arena.kBlockOverhead.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Arena.Arena><div style=padding-left:16px;text-indent:-16px><code><b>Arena</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Default constructor with sensible default options, tuned for average use-cases.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Arena.Arena><div style=padding-left:16px;text-indent:-16px><code><b>Arena</b>(char * initial_block, size_t initial_block_size)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Construct an arena with default options, except for the supplied initial block. <a href=#Arena.Arena.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>explicit</code></td><td style=border-left-width:0 id=Arena.Arena><div style=padding-left:16px;text-indent:-16px><code><b>Arena</b>(const <a href=#ArenaOptions>ArenaOptions</a> & options)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px><a href=#Arena>Arena</a> constructor taking custom options. <a href=#Arena.Arena.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code></code></td><td style=border-left-width:0 id=Arena.~Arena><div style=padding-left:16px;text-indent:-16px><code><b>~Arena</b>()</code></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Arena.Init><div style=padding-left:16px;text-indent:-16px><code><b>Init</b>(const <a href=#ArenaOptions>ArenaOptions</a> & )</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint64</code></td><td style=border-left-width:0 id=Arena.SpaceAllocated><div style=padding-left:16px;text-indent:-16px><code><b>SpaceAllocated</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>The following are routines are for monitoring. <a href=#Arena.SpaceAllocated.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint64</code></td><td style=border-left-width:0 id=Arena.SpaceUsed><div style=padding-left:16px;text-indent:-16px><code><b>SpaceUsed</b>() const</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Returns the total space used by the arena. <a href=#Arena.SpaceUsed.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>uint64</code></td><td style=border-left-width:0 id=Arena.Reset><div style=padding-left:16px;text-indent:-16px><code><b>Reset</b>()</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Frees all storage allocated by this arena after calling destructors registered with <a href=#Arena.OwnDestructor>OwnDestructor()</a> and freeing objects registered with <a href=#Arena.Own>Own()</a>. <a href=#Arena.Reset.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=Arena.Own><div style=padding-left:16px;text-indent:-16px><code><b>Own</b>(T * object)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Adds |object| to a list of heap-allocated objects to be freed with |delete| when the arena is destroyed or reset.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template void</code></td><td style=border-left-width:0 id=Arena.OwnDestructor><div style=padding-left:16px;text-indent:-16px><code><b>OwnDestructor</b>(T * object)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Adds |object| to a list of objects whose destructors will be manually called when the arena is destroyed or reset. <a href=#Arena.OwnDestructor.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>void</code></td><td style=border-left-width:0 id=Arena.OwnCustomDestructor><div style=padding-left:16px;text-indent:-16px><code><b>OwnCustomDestructor</b>(void * object, void(*)(void *) destruct)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Adds a custom member function on an object to the list of destructors that will be manually called when the arena is destroyed or reset. <a href=#Arena.OwnCustomDestructor.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static T *</code></td><td style=border-left-width:0 id=Arena.CreateMessage><div style=padding-left:16px;text-indent:-16px><code><b>CreateMessage</b>(<a href=#Arena>Arena</a> * arena, Args &&... args)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>API to create proto2 message objects on the arena. <a href=#Arena.CreateMessage.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static PROTOBUF_NDEBUG_INLINE T *</code></td><td style=border-left-width:0 id=Arena.Create><div style=padding-left:16px;text-indent:-16px><code><b>Create</b>(<a href=#Arena>Arena</a> * arena, Args &&... args)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>API to create any objects on the arena. <a href=#Arena.Create.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static PROTOBUF_NDEBUG_INLINE T *</code></td><td style=border-left-width:0 id=Arena.CreateArray><div style=padding-left:16px;text-indent:-16px><code><b>CreateArray</b>(<a href=#Arena>Arena</a> * arena, size_t num_elements)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Create an array of object type T on the arena <i>without</i> invoking the constructor of T. <a href=#Arena.CreateArray.details>more...</a></div></td></tr><tr><td style=border-right-width:0;text-align:right><code>template static <a href=#Arena>Arena</a> *</code></td><td style=border-left-width:0 id=Arena.GetArena><div style=padding-left:16px;text-indent:-16px><code><b>GetArena</b>(const T * value)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Retrieves the arena associated with |value| if |value| is an arena-capable message, or NULL otherwise. <a href=#Arena.GetArena.details>more...</a></div></td></tr></table><hr><h3 id=Arena.kBlockOverhead.details><code>const size_t Arena::kBlockOverhead = =
internal::ThreadSafeArena::kBlockHeaderSize +
internal::ThreadSafeArena::kSerialArenaSize</code></h3><div style=margin-left:16px><p>Block overhead.</p><p>Use this as a guide for how much to over-allocate the initial block if you want an allocation of size N to fit inside it.</p><p>WARNING: if you allocate multiple objects, it is difficult to guarantee that a series of allocations will fit in the initial block, especially if <a href=#Arena>Arena</a> changes its alignment guarantees in the future!</p></div><hr><h3 id=Arena.Arena.details><code>Arena::Arena(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char * initial_block,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_t initial_block_size)</code></h3><div style=margin-left:16px><p>Construct an arena with default options, except for the supplied initial block.</p><p>It is more efficient to use this constructor instead of passing <a href=#ArenaOptions>ArenaOptions</a> if the only configuration needed by the caller is supplying an initial block.</p></div><hr><h3 id=Arena.Arena.details><code>explicit Arena::Arena(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href=#ArenaOptions>ArenaOptions</a> & options)</code></h3><div style=margin-left:16px><p><a href=#Arena>Arena</a> constructor taking custom options.</p><p>See <a href=#ArenaOptions>ArenaOptions</a> above for descriptions of the options available.</p></div><hr><h3 id=Arena.SpaceAllocated.details><code>uint64 Arena::SpaceAllocated() const</code></h3><div style=margin-left:16px><p>The following are routines are for monitoring.</p><p>They will approximate the total sum allocated and used memory, but the exact value is an implementation deal. For instance allocated space depends on growth policies. Do not use these in unit tests. Returns the total space allocated by the arena, which is the sum of the sizes of the underlying blocks.</p></div><hr><h3 id=Arena.SpaceUsed.details><code>uint64 Arena::SpaceUsed() const</code></h3><div style=margin-left:16px><p>Returns the total space used by the arena.</p><p>Similar to SpaceAllocated but does not include free space and block overhead. The total space returned may not include space used by other threads executing concurrently with the call to this method.</p></div><hr><h3 id=Arena.Reset.details><code>uint64 Arena::Reset()</code></h3><div style=margin-left:16px><p>Frees all storage allocated by this arena after calling destructors registered with <a href=#Arena.OwnDestructor>OwnDestructor()</a> and freeing objects registered with <a href=#Arena.Own>Own()</a>.</p><p>Any objects allocated on this arena are unusable after this call. It also returns the total space used by the arena which is the sums of the sizes of the allocated blocks. This method is not thread-safe.</p></div><hr><h3 id=Arena.OwnDestructor.details><code>template void Arena::OwnDestructor(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T * object)</code></h3><div style=margin-left:16px><p>Adds |object| to a list of objects whose destructors will be manually called when the arena is destroyed or reset.</p><p>This differs from <a href=#Arena.Own>Own()</a> in that it does not free the underlying memory with |delete|; hence, it is normally only used for objects that are placement-newed into arena-allocated memory.</p></div><hr><h3 id=Arena.OwnCustomDestructor.details><code>void Arena::OwnCustomDestructor(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void * object,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void(*)(void *) destruct)</code></h3><div style=margin-left:16px><p>Adds a custom member function on an object to the list of destructors that will be manually called when the arena is destroyed or reset.</p><p>This differs from <a href=#Arena.OwnDestructor>OwnDestructor()</a> in that any member function may be specified, not only the class destructor.</p></div><hr><h3 id=Arena.CreateMessage.details><code>template static T * Arena::CreateMessage(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=#Arena>Arena</a> * arena,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args &&... args)</code></h3><div style=margin-left:16px><p>API to create proto2 message objects on the arena.</p><p>If the arena passed in is NULL, then a heap allocated object is returned. Type T must be a message defined in a .proto file with cc_enable_arenas set to true, otherwise a compilation error will occur.</p><p><a href=../google.protobuf.repeated_field#RepeatedField>RepeatedField</a> and <a href=../google.protobuf.repeated_field#RepeatedPtrField>RepeatedPtrField</a> may also be instantiated directly on an arena with this method.</p><p>This function also accepts any type T that satisfies the arena message allocation protocol, documented above.</p></div><hr><h3 id=Arena.Create.details><code>template static PROTOBUF_NDEBUG_INLINE T *<br>&nbsp;&nbsp;&nbsp;&nbsp;Arena::Create(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=#Arena>Arena</a> * arena,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Args &&... args)</code></h3><div style=margin-left:16px><p>API to create any objects on the arena.</p><p>Note that only the object will be created on the arena; the underlying ptrs (in case of a proto2 message) will be still heap allocated. Proto messages should usually be allocated with <a href=#Arena.CreateMessage>CreateMessage&lt;T>()</a> instead.</p><p>Note that even if T satisfies the arena message construction protocol (InternalArenaConstructable_ trait and optional DestructorSkippable_ trait), as described above, this function does not follow the protocol; instead, it treats T as a black-box type, just as if it did not have these traits. Specifically, T's constructor arguments will always be only those passed to <a href=#Arena.Create>Create&lt;T>()</a> &ndash; no additional arena pointer is implicitly added. Furthermore, the destructor will always be called at arena destruction time (unless the destructor is trivial). Hence, from T's point of view, it is as if the object were allocated on the heap (except that the underlying memory is obtained from the arena).</p></div><hr><h3 id=Arena.CreateArray.details><code>template static PROTOBUF_NDEBUG_INLINE T *<br>&nbsp;&nbsp;&nbsp;&nbsp;Arena::CreateArray(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=#Arena>Arena</a> * arena,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_t num_elements)</code></h3><div style=margin-left:16px><p>Create an array of object type T on the arena <i>without</i> invoking the constructor of T.</p><p>If <code>arena</code> is null, then the return value should be freed with <code>delete[[]] x;</code> (or <code>::operator delete[[]](x);</code>). To ensure safe uses, this function checks at compile time (when compiled as C++11) that T is trivially default-constructible and trivially destructible.</p></div><hr><h3 id=Arena.GetArena.details><code>template static <a href=#Arena>Arena</a> * Arena::GetArena(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const T * value)</code></h3><div style=margin-left:16px><p>Retrieves the arena associated with |value| if |value| is an arena-capable message, or NULL otherwise.</p><p>If possible, the call resolves at compile time. Note that we can often devirtualize calls to <code>value-><a href=#Arena.GetArena>GetArena()</a></code> so usually calling this method is unnecessary.</p></div><h2 id=Arena.InternalHelper>template class Arena::InternalHelper</h2><p><code>#include &lt;<a href=#>google/protobuf/arena.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a><br><br>template &lt;typename ></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr><tr><td style=border-right-width:0;text-align:right><code>static <a href=#Arena>Arena</a> *</code></td><td style=border-left-width:0 id=Arena.InternalHelper.GetOwningArena><div style=padding-left:16px;text-indent:-16px><code><b>GetOwningArena</b>(const T * p)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Provides access to protected GetOwningArena to generated messages.</div></td></tr><tr><td style=border-right-width:0;text-align:right><code>static <a href=#Arena>Arena</a> *</code></td><td style=border-left-width:0 id=Arena.InternalHelper.GetArenaForAllocation><div style=padding-left:16px;text-indent:-16px><code><b>GetArenaForAllocation</b>(const T * p)</code></div><div style=font-style:italic;margin-top:4px;margin-left:16px>Provides access to protected GetArenaForAllocation to generated messages.</div></td></tr></table><h2 id=Arena.is_arena_constructable>template struct Arena::is_arena_constructable</h2><p><code>#include &lt;<a href=#>google/protobuf/arena.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a><br><br>template &lt;typename ></code></p><p>Helper typetraits that indicates support for arenas in a type T at compile time.</p><p>This is public only to allow construction of higher-level templated utilities.</p><p>is_arena_constructable&lt;T>::value is true if the message type T has arena support enabled, and false otherwise.</p><p>is_destructor_skippable&lt;T>::value is true if the message type T has told the arena that it is safe to skip the destructor, and false otherwise.</p><p>This is inside <a href=#Arena>Arena</a> because only <a href=#Arena>Arena</a> has the friend relationships necessary to see the underlying generated code traits.</p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr></table><h2 id=Arena.is_destructor_skippable>template struct Arena::is_destructor_skippable</h2><p><code>#include &lt;<a href=#>google/protobuf/arena.h</a>><br>namespace <a href=#google.protobuf>google::protobuf</a><br><br>template &lt;typename ></code></p><p></p><table><tr><th colspan=2><h3 style=margin-top:4px>Members</h3></th></tr></table></body></html></main><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/protocol-buffers aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=40px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#fff data-fg=#000 data-position=bottom data-padding=16px data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/protocolbuffers/protobuf aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/g/protobuf aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=40px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#fff data-fg=#000 data-position=bottom data-padding=16px data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 Google LLC All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small>
<span class=text-white>Hosted by GitHub Pages.</span> <a href=https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement target=_blank>GitHub Privacy Statement</a></div></div></div></footer></div><script src=/js/main.min.48a7d138dd257f31c8ab8ac8a2922a6911189eae9f353439163ad3316421ea99.js integrity="sha256-SKfRON0lfzHIq4rIopIqaREYnq6fNTQ5FjrTMWQh6pk=" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script></body></html>